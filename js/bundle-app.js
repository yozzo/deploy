!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return webpackJsonp([1],[function(e,t,n){e.exports=n(316)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(2),o=r(i),a=n(317),s=r(a),l=n(403),u=n(462),c=r(u),h=n(637),d=r(h);window.Perf=d.default,s.default.render(o.default.createElement(l.Router,{history:l.hashHistory},o.default.createElement(l.Route,{path:"/(:slug)",component:c.default})),document.getElementById("content"))},function(e,t,n){"use strict";e.exports=n(318)},function(e,t,n){"use strict";var r=n(319),i=n(321),o=n(395),a=n(132),s=n(137),l=n(400),u=n(401),c=n(175),h=n(402);n(11);i.inject();var d={findDOMNode:u,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:l,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:h};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=c(e)),e?r.getNodeFromInstance(e):null}},Mount:o,Reconciler:a});e.exports=d},function(e,t,n){"use strict";function r(e,t){return 1===e.nodeType&&e.getAttribute(f)===String(t)||8===e.nodeType&&e.nodeValue===" react-text: "+t+" "||8===e.nodeType&&e.nodeValue===" react-empty: "+t+" "}function i(e){for(var t;t=e._renderedComponent;)e=t;return e}function o(e,t){var n=i(e);n._hostNode=t,t[v]=n}function a(e){var t=e._hostNode;t&&(delete t[v],e._hostNode=null)}function s(e,t){if(!(e._flags&m.hasCachedChildNodes)){var n=e._renderedChildren,a=t.firstChild;e:for(var s in n)if(n.hasOwnProperty(s)){var l=n[s],u=i(l)._domID;if(0!==u){for(;null!==a;a=a.nextSibling)if(r(a,u)){o(l,a);continue e}h("32",u)}}e._flags|=m.hasCachedChildNodes}}function l(e){if(e[v])return e[v];for(var t=[];!e[v];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,r;e&&(r=e[v]);e=t.pop())n=r,t.length&&s(r,e);return n}function u(e){var t=l(e);return null!=t&&t._hostNode===e?t:null}function c(e){if(void 0===e._hostNode?h("33"):void 0,e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent?void 0:h("34"),e=e._hostParent;for(;t.length;e=t.pop())s(e,e._hostNode);return e._hostNode}var h=n(135),d=n(144),p=n(320),f=(n(8),d.ID_ATTRIBUTE_NAME),m=p,v="__reactInternalInstance$"+Math.random().toString(36).slice(2),g={getClosestInstanceFromNode:l,getInstanceFromNode:u,getNodeFromInstance:c,precacheChildNodes:s,precacheNode:o,uncacheNode:a};e.exports=g},function(e,t){"use strict";var n={hasCachedChildNodes:1};e.exports=n},function(e,t,n){"use strict";function r(){w||(w=!0,E.EventEmitter.injectReactEventListener(g),E.EventPluginHub.injectEventPluginOrder(s),E.EventPluginUtils.injectComponentTree(d),E.EventPluginUtils.injectTreeTraversal(f),E.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:b,EnterLeaveEventPlugin:l,ChangeEventPlugin:a,SelectEventPlugin:T,BeforeInputEventPlugin:o}),E.HostComponent.injectGenericComponentClass(h),E.HostComponent.injectTextComponentClass(m),E.DOMProperty.injectDOMPropertyConfig(i),E.DOMProperty.injectDOMPropertyConfig(u),E.DOMProperty.injectDOMPropertyConfig(x),E.EmptyComponent.injectEmptyComponentFactory(function(e){return new p(e)}),E.Updates.injectReconcileTransaction(y),E.Updates.injectBatchingStrategy(v),E.Component.injectEnvironment(c))}var i=n(322),o=n(323),a=n(329),s=n(332),l=n(333),u=n(337),c=n(338),h=n(351),d=n(319),p=n(376),f=n(377),m=n(378),v=n(170),g=n(379),E=n(143),y=n(160),x=n(382),T=n(383),b=n(384),w=!1;e.exports={inject:r}},function(e,t){"use strict";var n={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};e.exports=n},function(e,t,n){"use strict";function r(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function i(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function o(e){switch(e){case"topCompositionStart":return S.compositionStart;case"topCompositionEnd":return S.compositionEnd;case"topCompositionUpdate":return S.compositionUpdate}}function a(e,t){return"topKeyDown"===e&&t.keyCode===y}function s(e,t){switch(e){case"topKeyUp":return E.indexOf(t.keyCode)!==-1;case"topKeyDown":return t.keyCode!==y;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function l(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function u(e,t,n,r){var i,u;if(x?i=o(e):C?s(e,n)&&(i=S.compositionEnd):a(e,n)&&(i=S.compositionStart),!i)return null;w&&(C||i!==S.compositionStart?i===S.compositionEnd&&C&&(u=C.getData()):C=m.getPooled(r));var c=v.getPooled(i,t,n,r);if(u)c.data=u;else{var h=l(n);null!==h&&(c.data=h)}return p.accumulateTwoPhaseDispatches(c),c}function c(e,t){switch(e){case"topCompositionEnd":return l(t);case"topKeyPress":var n=t.which;return n!==_?null:(M=!0,R);case"topTextInput":var r=t.data;return r===R&&M?null:r;default:return null}}function h(e,t){if(C){if("topCompositionEnd"===e||!x&&s(e,t)){var n=C.getData();return m.release(C),C=null,n}return null}switch(e){case"topPaste":return null;case"topKeyPress":return t.which&&!i(t)?String.fromCharCode(t.which):null;case"topCompositionEnd":return w?null:t.data;default:return null}}function d(e,t,n,r){var i;if(i=b?c(e,n):h(e,n),!i)return null;var o=g.getPooled(S.beforeInput,t,n,r);return o.data=i,p.accumulateTwoPhaseDispatches(o),o}var p=n(324),f=n(157),m=n(325),v=n(326),g=n(328),E=[9,13,27,32],y=229,x=f.canUseDOM&&"CompositionEvent"in window,T=null;f.canUseDOM&&"documentMode"in document&&(T=document.documentMode);var b=f.canUseDOM&&"TextEvent"in window&&!T&&!r(),w=f.canUseDOM&&(!x||T&&T>8&&T<=11),_=32,R=String.fromCharCode(_),S={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},M=!1,C=null,H={eventTypes:S,extractEvents:function(e,t,n,r){return[u(e,t,n,r),d(e,t,n,r)]}};e.exports=H},function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return g(e,r)}function i(e,t,n){var i=r(e,n,t);i&&(n._dispatchListeners=m(n._dispatchListeners,i),n._dispatchInstances=m(n._dispatchInstances,e))}function o(e){e&&e.dispatchConfig.phasedRegistrationNames&&f.traverseTwoPhase(e._targetInst,i,e)}function a(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?f.getParentInstance(t):null;f.traverseTwoPhase(n,i,e)}}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=g(e,r);i&&(n._dispatchListeners=m(n._dispatchListeners,i),n._dispatchInstances=m(n._dispatchInstances,e))}}function l(e){e&&e.dispatchConfig.registrationName&&s(e._targetInst,null,e)}function u(e){v(e,o)}function c(e){v(e,a)}function h(e,t,n,r){f.traverseEnterLeave(n,r,s,e,t)}function d(e){v(e,l)}var p=n(145),f=n(147),m=n(149),v=n(150),g=(n(11),p.getListener),E={accumulateTwoPhaseDispatches:u,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:d,accumulateEnterLeaveDispatches:h};e.exports=E},function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var i=n(4),o=n(139),a=n(164);i(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=i.slice(e,s),this._fallbackText}}),o.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(327),o={data:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var i=this.constructor.Interface;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s?this[o]=s(n):"target"===o?this.target=r:this[o]=n[o]}var l=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return l?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var i=n(4),o=n(139),a=n(12),s=(n(11),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),l={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),r.Interface=l,r.augmentClass=function(e,t){var n=this,r=function(){};r.prototype=n.prototype;var a=new r;i(a,e.prototype),e.prototype=a,e.prototype.constructor=e,e.Interface=i({},n.Interface,t),e.augmentClass=n.augmentClass,o.addPoolingTo(e,o.fourArgumentPooler)},o.addPoolingTo(r,o.fourArgumentPooler),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(327),o={data:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function i(e){var t=_.getPooled(C.change,A,e,R(e));x.accumulateTwoPhaseDispatches(t),w.batchedUpdates(o,t)}function o(e){y.enqueueEvents(e),y.processEventQueue(!1)}function a(e,t){H=e,A=t,H.attachEvent("onchange",i)}function s(){H&&(H.detachEvent("onchange",i),H=null,A=null)}function l(e,t){if("topChange"===e)return t}function u(e,t,n){"topFocus"===e?(s(),a(t,n)):"topBlur"===e&&s()}function c(e,t){H=e,A=t,P=e.value,L=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(H,"value",F),H.attachEvent?H.attachEvent("onpropertychange",d):H.addEventListener("propertychange",d,!1)}function h(){H&&(delete H.value,H.detachEvent?H.detachEvent("onpropertychange",d):H.removeEventListener("propertychange",d,!1),H=null,A=null,P=null,L=null)}function d(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==P&&(P=t,i(e))}}function p(e,t){if("topInput"===e)return t}function f(e,t,n){"topFocus"===e?(h(),c(t,n)):"topBlur"===e&&h()}function m(e,t){if(("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)&&H&&H.value!==P)return P=H.value,A}function v(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function g(e,t){if("topClick"===e)return t}function E(e,t){if(null!=e){var n=e._wrapperState||t._wrapperState;if(n&&n.controlled&&"number"===t.type){var r=""+t.value;t.getAttribute("value")!==r&&t.setAttribute("value",r)}}}var y=n(145),x=n(324),T=n(157),b=n(319),w=n(137),_=n(327),R=n(330),S=n(158),M=n(331),C={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},H=null,A=null,P=null,L=null,k=!1;T.canUseDOM&&(k=S("change")&&(!document.documentMode||document.documentMode>8));var D=!1;T.canUseDOM&&(D=S("input")&&(!document.documentMode||document.documentMode>11));var F={get:function(){return L.get.call(this)},set:function(e){P=""+e,L.set.call(this,e)}},O={eventTypes:C,extractEvents:function(e,t,n,i){var o,a,s=t?b.getNodeFromInstance(t):window;if(r(s)?k?o=l:a=u:M(s)?D?o=p:(o=m,a=f):v(s)&&(o=g),o){var c=o(e,t);if(c){var h=_.getPooled(C.change,c,n,i);return h.type="change",x.accumulateTwoPhaseDispatches(h),h}}a&&a(e,s,t),"topBlur"===e&&E(t,s)}};e.exports=O},function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}e.exports=n},function(e,t){"use strict";function n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!r[e.type]:"textarea"===t}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=n},function(e,t){"use strict";var n=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];e.exports=n},function(e,t,n){"use strict";var r=n(324),i=n(319),o=n(334),a={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},s={eventTypes:a,extractEvents:function(e,t,n,s){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==e&&"topMouseOver"!==e)return null;var l;if(s.window===s)l=s;else{var u=s.ownerDocument;l=u?u.defaultView||u.parentWindow:window}var c,h;if("topMouseOut"===e){c=t;var d=n.relatedTarget||n.toElement;h=d?i.getClosestInstanceFromNode(d):null}else c=null,h=t;if(c===h)return null;var p=null==c?l:i.getNodeFromInstance(c),f=null==h?l:i.getNodeFromInstance(h),m=o.getPooled(a.mouseLeave,c,n,s);m.type="mouseleave",m.target=p,m.relatedTarget=f;var v=o.getPooled(a.mouseEnter,h,n,s);return v.type="mouseenter",v.target=f,v.relatedTarget=p,r.accumulateEnterLeaveDispatches(m,v,c,h),[m,v]}};e.exports=s},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(335),o=n(155),a=n(336),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+o.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+o.currentScrollTop}};i.augmentClass(r,s),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(327),o=n(330),a={view:function(e){if(e.view)return e.view;var t=o(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};i.augmentClass(r,a),e.exports=r},function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=i[e];return!!r&&!!n[r]}function r(e){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=r},function(e,t,n){"use strict";var r=n(144),i=r.injection.MUST_USE_PROPERTY,o=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,l=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,u={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,as:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:i|o,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,coords:0,crossOrigin:0,data:0,dateTime:0,default:o,defer:o,dir:0,disabled:o,download:l,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:i|o,muted:i|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,playsInline:o,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,referrerPolicy:0,rel:0,required:o,reversed:o,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:i|o,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(e,t){return null==t?e.removeAttribute("value"):void("number"!==e.type||e.hasAttribute("value")===!1?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t))}}};e.exports=u},function(e,t,n){"use strict";var r=n(339),i=n(350),o={processChildrenUpdates:i.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};e.exports=o},function(e,t,n){"use strict";function r(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function i(e,t,n){c.insertTreeBefore(e,t,n)}function o(e,t,n){Array.isArray(t)?s(e,t[0],t[1],n):m(e,t,n)}function a(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],l(e,t,n),e.removeChild(n)}e.removeChild(t)}function s(e,t,n,r){for(var i=t;;){var o=i.nextSibling;if(m(e,i,r),i===n)break;i=o}}function l(e,t,n){for(;;){var r=t.nextSibling;if(r===n)break;e.removeChild(r)}}function u(e,t,n){var r=e.parentNode,i=e.nextSibling;i===t?n&&m(r,document.createTextNode(n),i):n?(f(i,n),l(r,i,t)):l(r,e,t)}var c=n(340),h=n(346),d=(n(319),n(136),n(343)),p=n(342),f=n(344),m=d(function(e,t,n){e.insertBefore(t,n)}),v=h.dangerouslyReplaceNodeWithMarkup,g={dangerouslyReplaceNodeWithMarkup:v,replaceDelimitedText:u,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var s=t[n];switch(s.type){case"INSERT_MARKUP":i(e,s.content,r(e,s.afterNode));break;case"MOVE_EXISTING":o(e,s.fromNode,r(e,s.afterNode));break;case"SET_MARKUP":p(e,s.content);break;case"TEXT_CONTENT":f(e,s.content);break;case"REMOVE_NODE":a(e,s.fromNode)}}}};e.exports=g},function(e,t,n){"use strict";function r(e){if(v){var t=e.node,n=e.children;if(n.length)for(var r=0;r<n.length;r++)g(t,n[r],null);else null!=e.html?h(t,e.html):null!=e.text&&p(t,e.text)}}function i(e,t){e.parentNode.replaceChild(t.node,e),r(t)}function o(e,t){v?e.children.push(t):e.node.appendChild(t.node)}function a(e,t){v?e.html=t:h(e.node,t)}function s(e,t){v?e.text=t:p(e.node,t)}function l(){return this.node.nodeName}function u(e){return{node:e,children:[],html:null,text:null,toString:l}}var c=n(341),h=n(342),d=n(343),p=n(344),f=1,m=11,v="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),g=d(function(e,t,n){t.node.nodeType===m||t.node.nodeType===f&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===c.html)?(r(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),r(t))});u.insertTreeBefore=g,u.replaceChildWithTree=i,u.queueChild=o,u.queueHTML=a,u.queueText=s,e.exports=u},function(e,t){"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};e.exports=n},function(e,t,n){"use strict";var r,i=n(157),o=n(341),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,l=n(343),u=l(function(e,t){if(e.namespaceURI!==o.svg||"innerHTML"in e)e.innerHTML=t;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+t+"</svg>";for(var n=r.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(i.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(u=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),a.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),c=null}e.exports=u},function(e,t){"use strict";var n=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e};e.exports=n},function(e,t,n){"use strict";var r=n(157),i=n(345),o=n(342),a=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(a=function(e,t){return 3===e.nodeType?void(e.nodeValue=t):void o(e,i(t))})),e.exports=a},function(e,t){"use strict";function n(e){var t=""+e,n=i.exec(t);if(!n)return t;var r,o="",a=0,s=0;for(a=n.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==a&&(o+=t.substring(s,a)),s=a+1,o+=r}return s!==a?o+t.substring(s,a):o}function r(e){return"boolean"==typeof e||"number"==typeof e?""+e:n(e)}var i=/["'&<>]/;e.exports=r},function(e,t,n){"use strict";var r=n(135),i=n(340),o=n(157),a=n(347),s=n(12),l=(n(8),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(o.canUseDOM?void 0:r("56"),t?void 0:r("57"),"HTML"===e.nodeName?r("58"):void 0,"string"==typeof t){var n=a(t,s)[0];e.parentNode.replaceChild(n,e)}else i.replaceChildWithTree(e,t)}});e.exports=l},function(e,t,n){"use strict";function r(e){var t=e.match(c);return t&&t[1].toLowerCase()}function i(e,t){var n=u;u?void 0:l(!1);var i=r(e),o=i&&s(i);if(o){n.innerHTML=o[1]+e+o[2];for(var c=o[0];c--;)n=n.lastChild}else n.innerHTML=e;var h=n.getElementsByTagName("script");h.length&&(t?void 0:l(!1),a(h).forEach(t));for(var d=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return d}var o=n(157),a=n(348),s=n(349),l=n(8),u=o.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;e.exports=i},function(e,t,n){"use strict";function r(e){var t=e.length;if(Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e?a(!1):void 0,"number"!=typeof t?a(!1):void 0,0===t||t-1 in e?void 0:a(!1),"function"==typeof e.callee?a(!1):void 0,e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function i(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function o(e){return i(e)?Array.isArray(e)?e.slice():r(e):[e]}var a=n(8);e.exports=o},function(e,t,n){"use strict";function r(e){return a?void 0:o(!1),d.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||("*"===e?a.innerHTML="<link />":a.innerHTML="<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?d[e]:null}var i=n(157),o=n(8),a=i.canUseDOM?document.createElement("div"):null,s={},l=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],h=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],d={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c},p=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];p.forEach(function(e){d[e]=h,s[e]=!0}),e.exports=r},function(e,t,n){"use strict";var r=n(339),i=n(319),o={dangerouslyProcessChildrenUpdates:function(e,t){var n=i.getNodeFromInstance(e);r.processUpdates(n,t)}};e.exports=o},function(e,t,n){"use strict";function r(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function i(e,t){t&&(Y[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML?m("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""):void 0),null!=t.dangerouslySetInnerHTML&&(null!=t.children?m("60"):void 0,"object"==typeof t.dangerouslySetInnerHTML&&z in t.dangerouslySetInnerHTML?void 0:m("61")),null!=t.style&&"object"!=typeof t.style?m("62",r(e)):void 0)}function o(e,t,n,r){if(!(r instanceof k)){var i=e._hostContainerInfo,o=i._node&&i._node.nodeType===G,s=o?i._node:i._ownerDocument;N(t,s),r.getReactMountReady().enqueue(a,{inst:e,registrationName:t,listener:n})}}function a(){var e=this;w.putListener(e.inst,e.registrationName,e.listener)}function s(){var e=this;C.postMountWrapper(e)}function l(){var e=this;P.postMountWrapper(e)}function u(){var e=this;H.postMountWrapper(e)}function c(){var e=this;e._rootNodeID?void 0:m("63");var t=B(e);switch(t?void 0:m("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[R.trapBubbledEvent("topLoad","load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in W)W.hasOwnProperty(n)&&e._wrapperState.listeners.push(R.trapBubbledEvent(n,W[n],t));break;case"source":e._wrapperState.listeners=[R.trapBubbledEvent("topError","error",t)];break;case"img":e._wrapperState.listeners=[R.trapBubbledEvent("topError","error",t),R.trapBubbledEvent("topLoad","load",t)];break;case"form":e._wrapperState.listeners=[R.trapBubbledEvent("topReset","reset",t),R.trapBubbledEvent("topSubmit","submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[R.trapBubbledEvent("topInvalid","invalid",t)]}}function h(){A.postUpdateWrapper(this)}function d(e){Z.call(Q,e)||(K.test(e)?void 0:m("65",e),Q[e]=!0)}function p(e,t){return e.indexOf("-")>=0||null!=t.is}function f(e){var t=e.type;d(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var m=n(135),v=n(4),g=n(352),E=n(353),y=n(340),x=n(341),T=n(144),b=n(361),w=n(145),_=n(146),R=n(153),S=n(320),M=n(319),C=n(363),H=n(370),A=n(371),P=n(372),L=(n(136),n(185)),k=n(373),D=(n(12),n(345)),F=(n(8),n(158),n(189),n(375),n(11),S),O=w.deleteListener,B=M.getNodeFromInstance,N=R.listenTo,I=_.registrationNameModules,U={string:!0,number:!0},V="style",z="__html",j={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},G=11,W={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},q={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},X={listing:!0,pre:!0,textarea:!0},Y=v({menuitem:!0},q),K=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Q={},Z={}.hasOwnProperty,J=1;f.displayName="ReactDOMComponent",f.Mixin={mountComponent:function(e,t,n,r){this._rootNodeID=J++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var o=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(c,this);break;case"input":C.mountWrapper(this,o,t),o=C.getHostProps(this,o),e.getReactMountReady().enqueue(c,this);break;case"option":H.mountWrapper(this,o,t),o=H.getHostProps(this,o);break;case"select":A.mountWrapper(this,o,t),o=A.getHostProps(this,o),e.getReactMountReady().enqueue(c,this);break;case"textarea":P.mountWrapper(this,o,t),o=P.getHostProps(this,o),e.getReactMountReady().enqueue(c,this)}i(this,o);var a,h;null!=t?(a=t._namespaceURI,h=t._tag):n._tag&&(a=n._namespaceURI,h=n._tag),(null==a||a===x.svg&&"foreignobject"===h)&&(a=x.html),a===x.html&&("svg"===this._tag?a=x.svg:"math"===this._tag&&(a=x.mathml)),this._namespaceURI=a;var d;if(e.useCreateElement){var p,f=n._ownerDocument;if(a===x.html)if("script"===this._tag){var m=f.createElement("div"),v=this._currentElement.type;m.innerHTML="<"+v+"></"+v+">",p=m.removeChild(m.firstChild)}else p=o.is?f.createElement(this._currentElement.type,o.is):f.createElement(this._currentElement.type);else p=f.createElementNS(a,this._currentElement.type);M.precacheNode(this,p),this._flags|=F.hasCachedChildNodes,this._hostParent||b.setAttributeForRoot(p),this._updateDOMProperties(null,o,e);var E=y(p);this._createInitialChildren(e,o,r,E),d=E}else{var T=this._createOpenTagMarkupAndPutListeners(e,o),w=this._createContentMarkup(e,o,r);d=!w&&q[this._tag]?T+"/>":T+">"+w+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(s,this),o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(l,this),o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"select":o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"button":o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(u,this)}return d},_createOpenTagMarkupAndPutListeners:function(e,t){
var n="<"+this._currentElement.type;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(null!=i)if(I.hasOwnProperty(r))i&&o(this,r,i,e);else{r===V&&(i&&(i=this._previousStyleCopy=v({},t.style)),i=E.createMarkupForStyles(i,this));var a=null;null!=this._tag&&p(this._tag,t)?j.hasOwnProperty(r)||(a=b.createMarkupForCustomAttribute(r,i)):a=b.createMarkupForProperty(r,i),a&&(n+=" "+a)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+b.createMarkupForRoot()),n+=" "+b.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var r="",i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&(r=i.__html);else{var o=U[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)r=D(o);else if(null!=a){var s=this.mountChildren(a,e,n);r=s.join("")}}return X[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(e,t,n,r){var i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&y.queueHTML(r,i.__html);else{var o=U[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)""!==o&&y.queueText(r,o);else if(null!=a)for(var s=this.mountChildren(a,e,n),l=0;l<s.length;l++)y.queueChild(r,s[l])}},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,r){var o=t.props,a=this._currentElement.props;switch(this._tag){case"input":o=C.getHostProps(this,o),a=C.getHostProps(this,a);break;case"option":o=H.getHostProps(this,o),a=H.getHostProps(this,a);break;case"select":o=A.getHostProps(this,o),a=A.getHostProps(this,a);break;case"textarea":o=P.getHostProps(this,o),a=P.getHostProps(this,a)}switch(i(this,a),this._updateDOMProperties(o,a,e),this._updateDOMChildren(o,a,e,r),this._tag){case"input":C.updateWrapper(this);break;case"textarea":P.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(h,this)}},_updateDOMProperties:function(e,t,n){var r,i,a;for(r in e)if(!t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&null!=e[r])if(r===V){var s=this._previousStyleCopy;for(i in s)s.hasOwnProperty(i)&&(a=a||{},a[i]="");this._previousStyleCopy=null}else I.hasOwnProperty(r)?e[r]&&O(this,r):p(this._tag,e)?j.hasOwnProperty(r)||b.deleteValueForAttribute(B(this),r):(T.properties[r]||T.isCustomAttribute(r))&&b.deleteValueForProperty(B(this),r);for(r in t){var l=t[r],u=r===V?this._previousStyleCopy:null!=e?e[r]:void 0;if(t.hasOwnProperty(r)&&l!==u&&(null!=l||null!=u))if(r===V)if(l?l=this._previousStyleCopy=v({},l):this._previousStyleCopy=null,u){for(i in u)!u.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(a=a||{},a[i]="");for(i in l)l.hasOwnProperty(i)&&u[i]!==l[i]&&(a=a||{},a[i]=l[i])}else a=l;else if(I.hasOwnProperty(r))l?o(this,r,l,n):u&&O(this,r);else if(p(this._tag,t))j.hasOwnProperty(r)||b.setValueForAttribute(B(this),r,l);else if(T.properties[r]||T.isCustomAttribute(r)){var c=B(this);null!=l?b.setValueForProperty(c,r,l):b.deleteValueForProperty(c,r)}}a&&E.setValueForStyles(B(this),a,this)},_updateDOMChildren:function(e,t,n,r){var i=U[typeof e.children]?e.children:null,o=U[typeof t.children]?t.children:null,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,l=null!=i?null:e.children,u=null!=o?null:t.children,c=null!=i||null!=a,h=null!=o||null!=s;null!=l&&null==u?this.updateChildren(null,n,r):c&&!h&&this.updateTextContent(""),null!=o?i!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=u&&this.updateChildren(u,n,r)},getHostNode:function(){return B(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"html":case"head":case"body":m("66",this._tag)}this.unmountChildren(e),M.uncacheNode(this),w.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return B(this)}},v(f.prototype,f.Mixin,L.Mixin),e.exports=f},function(e,t,n){"use strict";var r=n(319),i=n(168),o={focusDOMComponent:function(){i(r.getNodeFromInstance(this))}};e.exports=o},function(e,t,n){"use strict";var r=n(354),i=n(157),o=(n(136),n(355),n(357)),a=n(358),s=n(360),l=(n(11),s(function(e){return a(e)})),u=!1,c="cssFloat";if(i.canUseDOM){var h=document.createElement("div").style;try{h.font=""}catch(e){u=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var d={createMarkupForStyles:function(e,t){var n="";for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];null!=i&&(n+=l(r)+":",n+=o(r,i,t)+";")}return n||null},setValueForStyles:function(e,t,n){var i=e.style;for(var a in t)if(t.hasOwnProperty(a)){var s=o(a,t[a],n);if("float"!==a&&"cssFloat"!==a||(a=c),s)i[a]=s;else{var l=u&&r.shorthandPropertyExpansions[a];if(l)for(var h in l)i[h]="";else i[a]=""}}}};e.exports=d},function(e,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){i.forEach(function(t){r[n(t,e)]=r[e]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:o};e.exports=a},function(e,t,n){"use strict";function r(e){return i(e.replace(o,"ms-"))}var i=n(356),o=/^-ms-/;e.exports=r},function(e,t){"use strict";function n(e){return e.replace(r,function(e,t){return t.toUpperCase()})}var r=/-(.)/g;e.exports=n},function(e,t,n){"use strict";function r(e,t,n){var r=null==t||"boolean"==typeof t||""===t;if(r)return"";var i=isNaN(t);if(i||0===t||o.hasOwnProperty(e)&&o[e])return""+t;if("string"==typeof t){t=t.trim()}return t+"px"}var i=n(354),o=(n(11),i.isUnitlessNumber);e.exports=r},function(e,t,n){"use strict";function r(e){return i(e).replace(o,"-ms-")}var i=n(359),o=/^ms-/;e.exports=r},function(e,t){"use strict";function n(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;e.exports=n},function(e,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=n},function(e,t,n){"use strict";function r(e){return!!u.hasOwnProperty(e)||!l.hasOwnProperty(e)&&(s.test(e)?(u[e]=!0,!0):(l[e]=!0,!1))}function i(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&t===!1}var o=n(144),a=(n(319),n(136),n(362)),s=(n(11),new RegExp("^["+o.ATTRIBUTE_NAME_START_CHAR+"]["+o.ATTRIBUTE_NAME_CHAR+"]*$")),l={},u={},c={createMarkupForID:function(e){return o.ID_ATTRIBUTE_NAME+"="+a(e)},setAttributeForID:function(e,t){e.setAttribute(o.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return o.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(o.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(n){if(i(n,t))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&t===!0?r+'=""':r+"="+a(t)}return o.isCustomAttribute(e)?null==t?"":e+"="+a(t):null},createMarkupForCustomAttribute:function(e,t){return r(e)&&null!=t?e+"="+a(t):""},setValueForProperty:function(e,t,n){var r=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(r){var a=r.mutationMethod;if(a)a(e,n);else{if(i(r,n))return void this.deleteValueForProperty(e,t);if(r.mustUseProperty)e[r.propertyName]=n;else{var s=r.attributeName,l=r.attributeNamespace;l?e.setAttributeNS(l,s,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&n===!0?e.setAttribute(s,""):e.setAttribute(s,""+n)}}}else if(o.isCustomAttribute(t))return void c.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){if(r(t)){null==n?e.removeAttribute(t):e.setAttribute(t,""+n)}},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(n){var r=n.mutationMethod;if(r)r(e,void 0);else if(n.mustUseProperty){var i=n.propertyName;n.hasBooleanValue?e[i]=!1:e[i]=""}else e.removeAttribute(n.attributeName)}else o.isCustomAttribute(t)&&e.removeAttribute(t)}};e.exports=c},function(e,t,n){"use strict";function r(e){return'"'+i(e)+'"'}var i=n(345);e.exports=r},function(e,t,n){"use strict";function r(){this._rootNodeID&&d.updateWrapper(this)}function i(e){var t="checkbox"===e.type||"radio"===e.type;return t?null!=e.checked:null!=e.value}function o(e){var t=this._currentElement.props,n=u.executeOnChange(t,e);h.asap(r,this);var i=t.name;if("radio"===t.type&&null!=i){for(var o=c.getNodeFromInstance(this),s=o;s.parentNode;)s=s.parentNode;for(var l=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),d=0;d<l.length;d++){var p=l[d];if(p!==o&&p.form===o.form){var f=c.getInstanceFromNode(p);f?void 0:a("90"),h.asap(r,f)}}}return n}var a=n(135),s=n(4),l=n(361),u=n(364),c=n(319),h=n(137),d=(n(8),n(11),{getHostProps:function(e,t){var n=u.getValue(t),r=u.getChecked(t),i=s({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return i},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:o.bind(e),controlled:i(t)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&l.setValueForProperty(c.getNodeFromInstance(e),"checked",n||!1);var r=c.getNodeFromInstance(e),i=u.getValue(t);if(null!=i)if(0===i&&""===r.value)r.value="0";else if("number"===t.type){var o=parseFloat(r.value,10)||0;i!=o&&(r.value=""+i)}else i!=r.value&&(r.value=""+i);else null==t.value&&null!=t.defaultValue&&r.defaultValue!==""+t.defaultValue&&(r.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(r.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=c.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}});e.exports=d},function(e,t,n){"use strict";function r(e){null!=e.checkedLink&&null!=e.valueLink?s("87"):void 0}function i(e){r(e),null!=e.value||null!=e.onChange?s("88"):void 0}function o(e){r(e),null!=e.checked||null!=e.onChange?s("89"):void 0}function a(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=n(135),l=n(365),u=n(366),c=n(3),h=u(c.isValidElement),d=(n(8),n(11),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),p={value:function(e,t,n){return!e[t]||d[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:h.func},f={},m={checkPropTypes:function(e,t,n){for(var r in p){if(p.hasOwnProperty(r))var i=p[r](t,r,e,"prop",null,l);if(i instanceof Error&&!(i.message in f)){f[i.message]=!0;a(n)}}},getValue:function(e){return e.valueLink?(i(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(o(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(i(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(o(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=m},function(e,t){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,n){"use strict";var r=n(367);e.exports=function(e){var t=!1;return r(e,t)}},function(e,t,n){"use strict";var r=n(12),i=n(8),o=(n(11),n(368)),a=n(369);e.exports=function(e,t){function n(e){var t=e&&(R&&e[R]||e[S]);if("function"==typeof t)return t}function s(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function l(e){this.message=e,this.stack=""}function u(e){function n(n,r,a,s,u,c,h){if(s=s||M,c=c||a,h!==o)if(t)i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else;return null==r[a]?n?new l(null===r[a]?"The "+u+" `"+c+"` is marked as required "+("in `"+s+"`, but its value is `null`."):"The "+u+" `"+c+"` is marked as required in "+("`"+s+"`, but its value is `undefined`.")):null:e(r,a,s,u,c)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function c(e){function t(t,n,r,i,o,a){var s=t[n],u=b(s);if(u!==e){var c=w(s);return new l("Invalid "+i+" `"+o+"` of type "+("`"+c+"` supplied to `"+r+"`, expected ")+("`"+e+"`."))}return null}return u(t)}function h(){return u(r.thatReturnsNull)}function d(e){function t(t,n,r,i,a){if("function"!=typeof e)return new l("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){var u=b(s);return new l("Invalid "+i+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var c=0;c<s.length;c++){var h=e(s,c,r,i,a+"["+c+"]",o);if(h instanceof Error)return h}return null}return u(t)}function p(){function t(t,n,r,i,o){var a=t[n];if(!e(a)){var s=b(a);return new l("Invalid "+i+" `"+o+"` of type "+("`"+s+"` supplied to `"+r+"`, expected a single ReactElement."))}return null}return u(t)}function f(e){function t(t,n,r,i,o){if(!(t[n]instanceof e)){var a=e.name||M,s=_(t[n]);return new l("Invalid "+i+" `"+o+"` of type "+("`"+s+"` supplied to `"+r+"`, expected ")+("instance of `"+a+"`."))}return null}return u(t)}function m(e){function t(t,n,r,i,o){for(var a=t[n],u=0;u<e.length;u++)if(s(a,e[u]))return null;var c=JSON.stringify(e);return new l("Invalid "+i+" `"+o+"` of value `"+a+"` "+("supplied to `"+r+"`, expected one of "+c+"."))}return Array.isArray(e)?u(t):r.thatReturnsNull}function v(e){function t(t,n,r,i,a){if("function"!=typeof e)return new l("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],u=b(s);if("object"!==u)return new l("Invalid "+i+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an object."));for(var c in s)if(s.hasOwnProperty(c)){var h=e(s,c,r,i,a+"."+c,o);if(h instanceof Error)return h}return null}return u(t)}function g(e){function t(t,n,r,i,a){for(var s=0;s<e.length;s++){var u=e[s];if(null==u(t,n,r,i,a,o))return null}return new l("Invalid "+i+" `"+a+"` supplied to "+("`"+r+"`."))}return Array.isArray(e)?u(t):r.thatReturnsNull}function E(){function e(e,t,n,r,i){return x(e[t])?null:new l("Invalid "+r+" `"+i+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return u(e)}function y(e){function t(t,n,r,i,a){var s=t[n],u=b(s);if("object"!==u)return new l("Invalid "+i+" `"+a+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `object`."));for(var c in e){var h=e[c];if(h){var d=h(s,c,r,i,a+"."+c,o);if(d)return d}}return null}return u(t)}function x(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(x);if(null===t||e(t))return!0;var r=n(t);if(!r)return!1;var i,o=r.call(t);if(r!==t.entries){for(;!(i=o.next()).done;)if(!x(i.value))return!1}else for(;!(i=o.next()).done;){var a=i.value;if(a&&!x(a[1]))return!1}return!0;default:return!1}}function T(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function b(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":T(t,e)?"symbol":t}function w(e){var t=b(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function _(e){return e.constructor&&e.constructor.name?e.constructor.name:M}var R="function"==typeof Symbol&&Symbol.iterator,S="@@iterator",M="<<anonymous>>",C={array:c("array"),bool:c("boolean"),func:c("function"),number:c("number"),object:c("object"),string:c("string"),symbol:c("symbol"),any:h(),arrayOf:d,element:p(),instanceOf:f,node:E(),objectOf:v,oneOf:m,oneOfType:g,shape:y};return l.prototype=Error.prototype,C.checkPropTypes=a,C.PropTypes=C,C}},function(e,t){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r,i){}e.exports=r},function(e,t,n){"use strict";function r(e){var t="";return o.Children.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:l||(l=!0))}),t}var i=n(4),o=n(3),a=n(319),s=n(371),l=(n(11),!1),u={mountWrapper:function(e,t,n){var i=null;if(null!=n){var o=n;"optgroup"===o._tag&&(o=o._hostParent),null!=o&&"select"===o._tag&&(i=s.getSelectValueContext(o))}var a=null;if(null!=i){var l;if(l=null!=t.value?t.value+"":r(t.children),a=!1,Array.isArray(i)){for(var u=0;u<i.length;u++)if(""+i[u]===l){a=!0;break}}else a=""+i===l}e._wrapperState={selected:a}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){var n=a.getNodeFromInstance(e);n.setAttribute("value",t.value)}},getHostProps:function(e,t){var n=i({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var o=r(t.children);return o&&(n.children=o),n}};e.exports=u},function(e,t,n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=s.getValue(e);null!=t&&i(this,Boolean(e.multiple),t)}}function i(e,t,n){var r,i,o=l.getNodeFromInstance(e).options;if(t){for(r={},i=0;i<n.length;i++)r[""+n[i]]=!0;for(i=0;i<o.length;i++){var a=r.hasOwnProperty(o[i].value);o[i].selected!==a&&(o[i].selected=a)}}else{for(r=""+n,i=0;i<o.length;i++)if(o[i].value===r)return void(o[i].selected=!0);o.length&&(o[0].selected=!0)}}function o(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),u.asap(r,this),n}var a=n(4),s=n(364),l=n(319),u=n(137),c=(n(11),!1),h={getHostProps:function(e,t){return a({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=s.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:o.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||c||(c=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var r=s.getValue(t);null!=r?(e._wrapperState.pendingUpdate=!1,i(e,Boolean(t.multiple),r)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?i(e,Boolean(t.multiple),t.defaultValue):i(e,Boolean(t.multiple),t.multiple?[]:""))}};e.exports=h},function(e,t,n){"use strict";function r(){this._rootNodeID&&c.updateWrapper(this)}function i(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return u.asap(r,this),n}var o=n(135),a=n(4),s=n(364),l=n(319),u=n(137),c=(n(8),n(11),{getHostProps:function(e,t){null!=t.dangerouslySetInnerHTML?o("91"):void 0;var n=a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return n},mountWrapper:function(e,t){var n=s.getValue(t),r=n;if(null==n){var a=t.defaultValue,l=t.children;null!=l&&(null!=a?o("92"):void 0,Array.isArray(l)&&(l.length<=1?void 0:o("93"),l=l[0]),a=""+l),null==a&&(a=""),r=a}e._wrapperState={initialValue:""+r,listeners:null,onChange:i.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=l.getNodeFromInstance(e),r=s.getValue(t);if(null!=r){var i=""+r;i!==n.value&&(n.value=i),null==t.defaultValue&&(n.defaultValue=i)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=l.getNodeFromInstance(e),n=t.textContent;n===e._wrapperState.initialValue&&(t.value=n)}});e.exports=c},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new s(this)}var i=n(4),o=n(139),a=n(141),s=(n(136),n(374)),l=[],u={enqueue:function(){}},c={getTransactionWrappers:function(){return l},getReactMountReady:function(){return u},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};i(r.prototype,a,c),o.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){}var o=n(142),a=(n(11),function(){function e(t){r(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&o.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()?o.enqueueForceUpdate(e):i(e,"forceUpdate")},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()?o.enqueueReplaceState(e,t):i(e,"replaceState")},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()?o.enqueueSetState(e,t):i(e,"setState")},e}());e.exports=a},function(e,t,n){"use strict";var r=(n(4),n(12)),i=(n(11),r);e.exports=i},function(e,t,n){"use strict";var r=n(4),i=n(340),o=n(319),a=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(a.prototype,{mountComponent:function(e,t,n,r){var a=n._idCounter++;this._domID=a,this._hostParent=t,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(e.useCreateElement){var l=n._ownerDocument,u=l.createComment(s);return o.precacheNode(this,u),i(u)}return e.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getHostNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),e.exports=a},function(e,t,n){"use strict";function r(e,t){"_hostNode"in e?void 0:l("33"),"_hostNode"in t?void 0:l("33");for(var n=0,r=e;r;r=r._hostParent)n++;for(var i=0,o=t;o;o=o._hostParent)i++;for(;n-i>0;)e=e._hostParent,n--;for(;i-n>0;)t=t._hostParent,i--;for(var a=n;a--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function i(e,t){"_hostNode"in e?void 0:l("35"),"_hostNode"in t?void 0:l("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function o(e){return"_hostNode"in e?void 0:l("36"),e._hostParent}function a(e,t,n){for(var r=[];e;)r.push(e),e=e._hostParent;var i;for(i=r.length;i-- >0;)t(r[i],"captured",n);for(i=0;i<r.length;i++)t(r[i],"bubbled",n)}function s(e,t,n,i,o){for(var a=e&&t?r(e,t):null,s=[];e&&e!==a;)s.push(e),e=e._hostParent;for(var l=[];t&&t!==a;)l.push(t),t=t._hostParent;var u;for(u=0;u<s.length;u++)n(s[u],"bubbled",i);for(u=l.length;u-- >0;)n(l[u],"captured",o)}var l=n(135);n(8);e.exports={isAncestor:i,getLowestCommonAncestor:r,getParentInstance:o,traverseTwoPhase:a,traverseEnterLeave:s}},function(e,t,n){"use strict";var r=n(135),i=n(4),o=n(339),a=n(340),s=n(319),l=n(345),u=(n(8),n(375),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});i(u.prototype,{mountComponent:function(e,t,n,r){var i=n._idCounter++,o=" react-text: "+i+" ",u=" /react-text ";if(this._domID=i,this._hostParent=t,e.useCreateElement){var c=n._ownerDocument,h=c.createComment(o),d=c.createComment(u),p=a(c.createDocumentFragment());return a.queueChild(p,a(h)),this._stringText&&a.queueChild(p,a(c.createTextNode(this._stringText))),a.queueChild(p,a(d)),s.precacheNode(this,h),this._closingComment=d,p}var f=l(this._stringText);return e.renderToStaticMarkup?f:"<!--"+o+"-->"+f+"<!--"+u+"-->"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();o.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=s.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n?r("67",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),e.exports=u},function(e,t,n){"use strict";function r(e){for(;e._hostParent;)e=e._hostParent;var t=h.getNodeFromInstance(e),n=t.parentNode;return h.getClosestInstanceFromNode(n)}function i(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function o(e){var t=p(e.nativeEvent),n=h.getClosestInstanceFromNode(t),i=n;do e.ancestors.push(i),i=i&&r(i);while(i);for(var o=0;o<e.ancestors.length;o++)n=e.ancestors[o],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,p(e.nativeEvent))}function a(e){var t=f(window);e(t)}var s=n(4),l=n(380),u=n(157),c=n(139),h=n(319),d=n(137),p=n(330),f=n(381);s(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(i,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){return n?l.listen(n,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?l.capture(n,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=a.bind(null,e);l.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=i.getPooled(e,t);try{d.batchedUpdates(o,n)}finally{i.release(n)}}}};e.exports=m},function(e,t,n){"use strict";var r=n(12),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=i},function(e,t){"use strict";function n(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=n},function(e,t){"use strict";var n={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",
targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},i={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n.xlink,xlinkArcrole:n.xlink,xlinkHref:n.xlink,xlinkRole:n.xlink,xlinkShow:n.xlink,xlinkTitle:n.xlink,xlinkType:n.xlink,xmlBase:n.xml,xmlLang:n.xml,xmlSpace:n.xml},DOMAttributeNames:{}};Object.keys(r).forEach(function(e){i.Properties[e]=0,r[e]&&(i.DOMAttributeNames[e]=r[e])}),e.exports=i},function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&l.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(e,t){if(E||null==m||m!==c())return null;var n=r(m);if(!g||!d(g,n)){g=n;var i=u.getPooled(f.select,v,e,t);return i.type="select",i.target=m,o.accumulateTwoPhaseDispatches(i),i}return null}var o=n(324),a=n(157),s=n(319),l=n(161),u=n(327),c=n(169),h=n(331),d=n(189),p=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,f={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},m=null,v=null,g=null,E=!1,y=!1,x={eventTypes:f,extractEvents:function(e,t,n,r){if(!y)return null;var o=t?s.getNodeFromInstance(t):window;switch(e){case"topFocus":(h(o)||"true"===o.contentEditable)&&(m=o,v=t,g=null);break;case"topBlur":m=null,v=null,g=null;break;case"topMouseDown":E=!0;break;case"topContextMenu":case"topMouseUp":return E=!1,i(n,r);case"topSelectionChange":if(p)break;case"topKeyDown":case"topKeyUp":return i(n,r)}return null},didPutListener:function(e,t,n){"onSelect"===t&&(y=!0)}};e.exports=x},function(e,t,n){"use strict";function r(e){return"."+e._rootNodeID}function i(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}var o=n(135),a=n(380),s=n(324),l=n(319),u=n(385),c=n(386),h=n(327),d=n(387),p=n(388),f=n(334),m=n(391),v=n(392),g=n(393),E=n(335),y=n(394),x=n(12),T=n(389),b=(n(8),{}),w={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t,r="top"+t,i={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r]};b[e]=i,w[r]=i});var _={},R={eventTypes:b,extractEvents:function(e,t,n,r){var i=w[e];if(!i)return null;var a;switch(e){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":a=h;break;case"topKeyPress":if(0===T(n))return null;case"topKeyDown":case"topKeyUp":a=p;break;case"topBlur":case"topFocus":a=d;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":a=f;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":a=m;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":a=v;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":a=u;break;case"topTransitionEnd":a=g;break;case"topScroll":a=E;break;case"topWheel":a=y;break;case"topCopy":case"topCut":case"topPaste":a=c}a?void 0:o("86",e);var l=a.getPooled(i,t,n,r);return s.accumulateTwoPhaseDispatches(l),l},didPutListener:function(e,t,n){if("onClick"===t&&!i(e._tag)){var o=r(e),s=l.getNodeFromInstance(e);_[o]||(_[o]=a.listen(s,"click",x))}},willDeleteListener:function(e,t){if("onClick"===t&&!i(e._tag)){var n=r(e);_[n].remove(),delete _[n]}}};e.exports=R},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(327),o={animationName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(327),o={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(335),o={relatedTarget:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(335),o=n(389),a=n(390),s=n(336),l={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?o(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?o(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};i.augmentClass(r,l),e.exports=r},function(e,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}e.exports=n},function(e,t,n){"use strict";function r(e){if(e.key){var t=o[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=i(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?a[e.keyCode]||"Unidentified":""}var i=n(389),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(334),o={dataTransfer:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(335),o=n(336),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};i.augmentClass(r,a),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(327),o={propertyName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(334),o={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function i(e){return e?e.nodeType===D?e.documentElement:e.firstChild:null}function o(e){return e.getAttribute&&e.getAttribute(P)||""}function a(e,t,n,r,i){var o;if(T.logTopLevelRenders){var a=e._currentElement.props.child,s=a.type;o="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(o)}var l=_.mountComponent(e,n,null,y(e,t),i,0);o&&console.timeEnd(o),e._renderedComponent._topLevelWrapper=e,I._mountImageIntoNode(l,t,e,r,n)}function s(e,t,n,r){var i=S.ReactReconcileTransaction.getPooled(!n&&x.useCreateElement);i.perform(a,null,e,t,i,n,r),S.ReactReconcileTransaction.release(i)}function l(e,t,n){for(_.unmountComponent(e,n),t.nodeType===D&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function u(e){var t=i(e);if(t){var n=E.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function c(e){return!(!e||e.nodeType!==k&&e.nodeType!==D&&e.nodeType!==F)}function h(e){var t=i(e),n=t&&E.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function d(e){var t=h(e);return t?t._hostContainerInfo._topLevelWrapper:null}var p=n(135),f=n(340),m=n(144),v=n(3),g=n(153),E=(n(10),n(319)),y=n(396),x=n(397),T=n(140),b=n(131),w=(n(136),n(398)),_=n(132),R=n(142),S=n(137),M=n(20),C=n(187),H=(n(8),n(342)),A=n(177),P=(n(11),m.ID_ATTRIBUTE_NAME),L=m.ROOT_ATTRIBUTE_NAME,k=1,D=9,F=11,O={},B=1,N=function(){this.rootID=B++};N.prototype.isReactComponent={},N.prototype.render=function(){return this.props.child},N.isReactTopLevelWrapper=!0;var I={TopLevelWrapper:N,_instancesByReactRootID:O,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r,i){return I.scrollMonitor(r,function(){R.enqueueElementInternal(e,t,n),i&&R.enqueueCallbackInternal(e,i)}),e},_renderNewRootComponent:function(e,t,n,r){c(t)?void 0:p("37"),g.ensureScrollValueMonitoring();var i=C(e,!1);S.batchedUpdates(s,i,t,n,r);var o=i._instance.rootID;return O[o]=i,i},renderSubtreeIntoContainer:function(e,t,n,r){return null!=e&&b.has(e)?void 0:p("38"),I._renderSubtreeIntoContainer(e,t,n,r)},_renderSubtreeIntoContainer:function(e,t,n,r){R.validateCallback(r,"ReactDOM.render"),v.isValidElement(t)?void 0:p("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=v.createElement(N,{child:t});if(e){var l=b.get(e);a=l._processChildContext(l._context)}else a=M;var c=d(n);if(c){var h=c._currentElement,f=h.props.child;if(A(f,t)){var m=c._renderedComponent.getPublicInstance(),g=r&&function(){r.call(m)};return I._updateRootComponent(c,s,a,n,g),m}I.unmountComponentAtNode(n)}var E=i(n),y=E&&!!o(E),x=u(n),T=y&&!c&&!x,w=I._renderNewRootComponent(s,n,T,a)._renderedComponent.getPublicInstance();return r&&r.call(w),w},render:function(e,t,n){return I._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){c(e)?void 0:p("40");var t=d(e);if(!t){u(e),1===e.nodeType&&e.hasAttribute(L);return!1}return delete O[t._instance.rootID],S.batchedUpdates(l,t,e,!1),!0},_mountImageIntoNode:function(e,t,n,o,a){if(c(t)?void 0:p("41"),o){var s=i(t);if(w.canReuseMarkup(e,s))return void E.precacheNode(n,s);var l=s.getAttribute(w.CHECKSUM_ATTR_NAME);s.removeAttribute(w.CHECKSUM_ATTR_NAME);var u=s.outerHTML;s.setAttribute(w.CHECKSUM_ATTR_NAME,l);var h=e,d=r(h,u),m=" (client) "+h.substring(d-20,d+20)+"\n (server) "+u.substring(d-20,d+20);t.nodeType===D?p("42",m):void 0}if(t.nodeType===D?p("43"):void 0,a.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);f.insertTreeBefore(t,e,null)}else H(t,e),E.precacheNode(n,t.firstChild)}};e.exports=I},function(e,t,n){"use strict";function r(e,t){var n={_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===i?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null};return n}var i=(n(375),9);e.exports=r},function(e,t){"use strict";var n={useCreateElement:!0,useFiber:!1};e.exports=n},function(e,t,n){"use strict";var r=n(399),i=/\/?>/,o=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return o.test(e)?e:e.replace(i," "+a.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var i=r(e);return i===n}};e.exports=a},function(e,t){"use strict";function n(e){for(var t=1,n=0,i=0,o=e.length,a=o&-4;i<a;){for(var s=Math.min(i+4096,a);i<s;i+=4)n+=(t+=e.charCodeAt(i))+(t+=e.charCodeAt(i+1))+(t+=e.charCodeAt(i+2))+(t+=e.charCodeAt(i+3));t%=r,n%=r}for(;i<o;i++)n+=t+=e.charCodeAt(i);return t%=r,n%=r,t|n<<16}var r=65521;e.exports=n},function(e,t){"use strict";e.exports="15.5.4"},function(e,t,n){"use strict";function r(e){if(null==e)return null;if(1===e.nodeType)return e;var t=a.get(e);return t?(t=s(t),t?o.getNodeFromInstance(t):null):void("function"==typeof e.render?i("44"):i("45",Object.keys(e)))}var i=n(135),o=(n(10),n(319)),a=n(131),s=n(175);n(8),n(11);e.exports=r},function(e,t,n){"use strict";var r=n(395);e.exports=r.renderSubtreeIntoContainer},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.createMemoryHistory=t.hashHistory=t.browserHistory=t.applyRouterMiddleware=t.formatPattern=t.useRouterHistory=t.match=t.routerShape=t.locationShape=t.RouterContext=t.createRoutes=t.Route=t.Redirect=t.IndexRoute=t.IndexRedirect=t.withRouter=t.IndexLink=t.Link=t.Router=void 0;var i=n(404);Object.defineProperty(t,"createRoutes",{enumerable:!0,get:function(){return i.createRoutes}});var o=n(405);Object.defineProperty(t,"locationShape",{enumerable:!0,get:function(){return o.locationShape}}),Object.defineProperty(t,"routerShape",{enumerable:!0,get:function(){return o.routerShape}});var a=n(408);Object.defineProperty(t,"formatPattern",{enumerable:!0,get:function(){return a.formatPattern}});var s=n(410),l=r(s),u=n(428),c=r(u),h=n(429),d=r(h),p=n(430),f=r(p),m=n(432),v=r(m),g=n(434),E=r(g),y=n(433),x=r(y),T=n(435),b=r(T),w=n(424),_=r(w),R=n(436),S=r(R),M=n(449),C=r(M),H=n(450),A=r(H),P=n(451),L=r(P),k=n(459),D=r(k),F=n(438),O=r(F);t.Router=l.default,t.Link=c.default,t.IndexLink=d.default,t.withRouter=f.default,t.IndexRedirect=v.default,t.IndexRoute=E.default,t.Redirect=x.default,t.Route=b.default,t.RouterContext=_.default,t.match=S.default,t.useRouterHistory=C.default,t.applyRouterMiddleware=A.default,t.browserHistory=L.default,t.hashHistory=D.default,t.createMemoryHistory=O.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return null==e||d.default.isValidElement(e)}function o(e){return i(e)||Array.isArray(e)&&e.every(i)}function a(e,t){return c({},e,t)}function s(e){var t=e.type,n=a(t.defaultProps,e.props);if(n.children){var r=l(n.children,n);r.length&&(n.childRoutes=r),delete n.children}return n}function l(e,t){var n=[];return d.default.Children.forEach(e,function(e){if(d.default.isValidElement(e))if(e.type.createRouteFromReactElement){var r=e.type.createRouteFromReactElement(e,t);r&&n.push(r)}else n.push(s(e))}),n}function u(e){return o(e)?e=l(e):e&&!Array.isArray(e)&&(e=[e]),e}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.isReactChildren=o,t.createRouteFromReactElement=s,t.createRoutesFromReactChildren=l,t.createRoutes=u;var h=n(2),d=r(h)},function(e,t,n){"use strict";t.__esModule=!0,t.locationShape=t.routerShape=void 0;var r=n(406);t.routerShape=(0,r.shape)({push:r.func.isRequired,replace:r.func.isRequired,go:r.func.isRequired,goBack:r.func.isRequired,goForward:r.func.isRequired,setRouteLeaveHook:r.func.isRequired,isActive:r.func.isRequired}),t.locationShape=(0,r.shape)({pathname:r.string.isRequired,search:r.string.isRequired,state:r.object,action:r.string.isRequired,key:r.string})},function(e,t,n){e.exports=n(407)()},function(e,t,n){"use strict";var r=n(12),i=n(8);e.exports=function(){function e(){i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){for(var t="",n=[],r=[],o=void 0,a=0,s=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*\*|\*|\(|\)|\\\(|\\\)/g;o=s.exec(e);)o.index!==a&&(r.push(e.slice(a,o.index)),t+=i(e.slice(a,o.index))),o[1]?(t+="([^/]+)",n.push(o[1])):"**"===o[0]?(t+="(.*)",n.push("splat")):"*"===o[0]?(t+="(.*?)",n.push("splat")):"("===o[0]?t+="(?:":")"===o[0]?t+=")?":"\\("===o[0]?t+="\\(":"\\)"===o[0]&&(t+="\\)"),r.push(o[0]),a=s.lastIndex;return a!==e.length&&(r.push(e.slice(a,e.length)),t+=i(e.slice(a,e.length))),{pattern:e,regexpSource:t,paramNames:n,tokens:r}}function a(e){return p[e]||(p[e]=o(e)),p[e]}function s(e,t){"/"!==e.charAt(0)&&(e="/"+e);var n=a(e),r=n.regexpSource,i=n.paramNames,o=n.tokens;"/"!==e.charAt(e.length-1)&&(r+="/?"),"*"===o[o.length-1]&&(r+="$");var s=t.match(new RegExp("^"+r,"i"));if(null==s)return null;var l=s[0],u=t.substr(l.length);if(u){if("/"!==l.charAt(l.length-1))return null;u="/"+u}return{remainingPathname:u,paramNames:i,paramValues:s.slice(1).map(function(e){return e&&decodeURIComponent(e)})}}function l(e){return a(e).paramNames}function u(e,t){var n=s(e,t);if(!n)return null;var r=n.paramNames,i=n.paramValues,o={};return r.forEach(function(e,t){o[e]=i[t]}),o}function c(e,t){t=t||{};for(var n=a(e),r=n.tokens,i=0,o="",s=0,l=[],u=void 0,c=void 0,h=void 0,p=0,f=r.length;p<f;++p)if(u=r[p],"*"===u||"**"===u)h=Array.isArray(t.splat)?t.splat[s++]:t.splat,null!=h||i>0?void 0:(0,d.default)(!1),null!=h&&(o+=encodeURI(h));else if("("===u)l[i]="",i+=1;else if(")"===u){var m=l.pop();i-=1,i?l[i-1]+=m:o+=m}else if("\\("===u)o+="(";else if("\\)"===u)o+=")";else if(":"===u.charAt(0))if(c=u.substring(1),h=t[c],null!=h||i>0?void 0:(0,d.default)(!1),null==h){if(i){l[i-1]="";for(var v=r.indexOf(u),g=r.slice(v,r.length),E=-1,y=0;y<g.length;y++)if(")"==g[y]){E=y;break}E>0?void 0:(0,d.default)(!1),p=v+E-1}}else i?l[i-1]+=encodeURIComponent(h):o+=encodeURIComponent(h);else i?l[i-1]+=u:o+=u;return i<=0?void 0:(0,d.default)(!1),o.replace(/\/+/g,"/")}t.__esModule=!0,t.compilePattern=a,t.matchPattern=s,t.getParamNames=l,t.getParams=u,t.formatPattern=c;var h=n(409),d=r(h),p=Object.create(null)},function(e,t,n){"use strict";var r=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(409),s=r(a),l=n(2),u=r(l),c=n(411),h=r(c),d=n(406),p=n(413),f=r(p),m=n(423),v=n(424),g=r(v),E=n(404),y=n(427),x=n(414),T=(r(x),{history:d.object,children:m.routes,routes:m.routes,render:d.func,createElement:d.func,onError:d.func,onUpdate:d.func,matchContext:d.object}),b=(0,h.default)({displayName:"Router",propTypes:T,getDefaultProps:function(){return{render:function(e){return u.default.createElement(g.default,e)}}},getInitialState:function(){return{location:null,routes:null,params:null,components:null}},handleError:function(e){if(!this.props.onError)throw e;this.props.onError.call(this,e)},createRouterObject:function(e){var t=this.props.matchContext;if(t)return t.router;var n=this.props.history;return(0,y.createRouterObject)(n,this.transitionManager,e)},createTransitionManager:function(){var e=this.props.matchContext;if(e)return e.transitionManager;var t=this.props.history,n=this.props,r=n.routes,i=n.children;return t.getCurrentLocation?void 0:(0,s.default)(!1),(0,f.default)(t,(0,E.createRoutes)(r||i))},componentWillMount:function(){var e=this;this.transitionManager=this.createTransitionManager(),this.router=this.createRouterObject(this.state),this._unlisten=this.transitionManager.listen(function(t,n){t?e.handleError(t):((0,y.assignRouterState)(e.router,n),e.setState(n,e.props.onUpdate))})},componentWillReceiveProps:function(e){},componentWillUnmount:function(){this._unlisten&&this._unlisten()},render:function e(){var t=this.state,n=t.location,r=t.routes,a=t.params,s=t.components,l=this.props,u=l.createElement,e=l.render,c=i(l,["createElement","render"]);return null==n?null:(Object.keys(T).forEach(function(e){return delete c[e]}),e(o({},c,{router:this.router,location:n,routes:r,params:a,components:s,createElement:u})))}});t.default=b,e.exports=t.default},function(e,t,n){"use strict";var r=n(2),i=n(412),o=(new r.Component).updater;e.exports=i(r.Component,r.isValidElement,o)},function(e,t,n){"use strict";function r(e){return e}function i(e,t,n){function i(e,t){var n=E.hasOwnProperty(t)?E[t]:null;T.hasOwnProperty(t)&&l("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&l("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function o(e,n){if(n){l("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),l(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,o=r.__reactAutoBindPairs;n.hasOwnProperty(u)&&y.mixins(e,n.mixins);for(var a in n)if(n.hasOwnProperty(a)&&a!==u){var s=n[a],c=r.hasOwnProperty(a);if(i(c,a),y.hasOwnProperty(a))y[a](e,s);else{var h=E.hasOwnProperty(a),f="function"==typeof s,m=f&&!h&&!c&&n.autobind!==!1;if(m)o.push(a,s),r[a]=s;else if(c){var v=E[a];l(h&&("DEFINE_MANY_MERGED"===v||"DEFINE_MANY"===v),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",v,a),"DEFINE_MANY_MERGED"===v?r[a]=d(r[a],s):"DEFINE_MANY"===v&&(r[a]=p(r[a],s))}else r[a]=s}}}else;}function c(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var i=n in y;l(!i,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var o=n in e;l(!o,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),e[n]=r}}}function h(e,t){l(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(l(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function d(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return h(i,n),h(i,r),i}}function p(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function f(e,t){var n=t.bind(e);return n}function m(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e[r]=f(e,i)}}function v(e){var t=r(function(e,r,i){this.__reactAutoBindPairs.length&&m(this),this.props=e,this.context=r,this.refs=s,this.updater=i||n,this.state=null;var o=this.getInitialState?this.getInitialState():null;l("object"==typeof o&&!Array.isArray(o),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=o});t.prototype=new b,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],g.forEach(o.bind(null,t)),o(t,x),o(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),l(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var i in E)t.prototype[i]||(t.prototype[i]=null);return t}var g=[],E={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},y={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)o(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=a({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=a({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=d(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=a({},e.propTypes,t)},statics:function(e,t){c(e,t)},autobind:function(){}},x={componentDidMount:function(){this.__isMounted=!0},componentWillUnmount:function(){this.__isMounted=!1}},T={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},b=function(){};return a(b.prototype,e.prototype,T),v}var o,a=n(4),s=n(20),l=n(8),u="mixins";o={},e.exports=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function o(e,t){function n(t,n){return t=e.createLocation(t),(0,p.default)(t,n,y.location,y.routes,y.params)}function r(e,n){_&&_.location===e?o(_,n):(0,g.default)(t,e,function(t,r){t?n(t):r?o(a({},r,{location:e}),n):n()})}function o(e,t){function n(n,i){return n||i?r(n,i):void(0,m.default)(e,function(n,r){n?t(n):t(null,null,y=a({},e,{components:r}))})}function r(e,n){e?t(e):t(null,n)}var i=(0,u.default)(y,e),o=i.leaveRoutes,s=i.changeRoutes,l=i.enterRoutes;w(o,y),o.filter(function(e){return l.indexOf(e)===-1}).forEach(f),b(s,y,e,function(t,i){return t||i?r(t,i):void T(l,e,n)})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.__id__||t&&(e.__id__=R++)}function l(e){return e.map(function(e){return S[s(e)]}).filter(function(e){return e})}function c(e,n){(0,g.default)(t,e,function(t,r){if(null==r)return void n();_=a({},r,{location:e});for(var i=l((0,u.default)(y,_).leaveRoutes),o=void 0,s=0,c=i.length;null==o&&s<c;++s)o=i[s](e);n(o)})}function d(){if(y.routes){for(var e=l(y.routes),t=void 0,n=0,r=e.length;"string"!=typeof t&&n<r;++n)t=e[n]();return t}}function f(e){var t=s(e);t&&(delete S[t],i(S)||(M&&(M(),M=null),C&&(C(),C=null)))}function v(t,n){var r=!i(S),o=s(t,!0);return S[o]=n,r&&(M=e.listenBefore(c),e.listenBeforeUnload&&(C=e.listenBeforeUnload(d))),function(){f(t)}}function E(t){function n(n){y.location===n?t(null,y):r(n,function(n,r,i){n?t(n):r?e.replace(r):i&&t(null,i)})}var i=e.listen(n);return y.location?t(null,y):n(e.getCurrentLocation()),i}var y={},x=(0,h.default)(),T=x.runEnterHooks,b=x.runChangeHooks,w=x.runLeaveHooks,_=void 0,R=1,S=Object.create(null),M=void 0,C=void 0;return{isActive:n,match:r,listenBeforeLeavingRoute:v,listen:E}}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var s=n(414),l=(r(s),n(416)),u=r(l),c=n(417),h=r(c),d=n(419),p=r(d),f=n(420),m=r(f),v=n(422),g=r(v);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(t.indexOf("deprecated")!==-1){if(l[t])return;l[t]=!0}t="[react-router] "+t;for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];s.default.apply(void 0,[e,t].concat(r))}function o(){l={}}t.__esModule=!0,t.default=i,t._resetWarned=o;var a=n(415),s=r(a),l={}},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";function r(e,t,n){if(!e.path)return!1;var r=(0,o.getParamNames)(e.path);return r.some(function(e){return t.params[e]!==n.params[e]})}function i(e,t){var n=e&&e.routes,i=t.routes,o=void 0,a=void 0,s=void 0;if(n){var l=!1;o=n.filter(function(n){if(l)return!0;var o=i.indexOf(n)===-1||r(n,e,t);return o&&(l=!0),o}),o.reverse(),s=[],a=[],i.forEach(function(e){var t=n.indexOf(e)===-1,r=o.indexOf(e)!==-1;t||r?s.push(e):a.push(e)})}else o=[],a=[],s=i;return{leaveRoutes:o,changeRoutes:a,enterRoutes:s}}t.__esModule=!0;var o=n(408);t.default=i,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){function e(e,t,n,r){var i=e.length<n,o=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];if(e.apply(t,r),i){var a=r[r.length-1];a()}};return r.add(o),o}function t(t){return t.reduce(function(t,n){return n.onEnter&&t.push(e(n.onEnter,n,3,u)),t},[])}function n(t){return t.reduce(function(t,n){return n.onChange&&t.push(e(n.onChange,n,4,c)),t},[])}function r(e,t,n){function r(e){i=e}if(!e)return void n();var i=void 0;(0,o.loopAsync)(e,function(e,n,o){t(e,r,function(e){e||i?o(e,i):n()})},n)}function i(e,n,i){u.clear();var o=t(e);return r(o.length,function(e,t,r){var i=function(){u.has(o[e])&&(r.apply(void 0,arguments),u.remove(o[e]))};o[e](n,t,i)},i)}function s(e,t,i,o){c.clear();var a=n(e);return r(a.length,function(e,n,r){var o=function(){c.has(a[e])&&(r.apply(void 0,arguments),c.remove(a[e]))};a[e](t,i,n,o)},o)}function l(e,t){for(var n=0,r=e.length;n<r;++n)e[n].onLeave&&e[n].onLeave.call(e[n],t)}var u=new a,c=new a;return{runEnterHooks:i,runChangeHooks:s,runLeaveHooks:l}}t.__esModule=!0,t.default=i;var o=n(418),a=function e(){var t=this;r(this,e),this.hooks=[],this.add=function(e){return t.hooks.push(e)},this.remove=function(e){return t.hooks=t.hooks.filter(function(t){return t!==e})},this.has=function(e){return t.hooks.indexOf(e)!==-1},this.clear=function(){return t.hooks=[]}};e.exports=t.default},function(e,t){"use strict";function n(e,t,n){function r(){return a=!0,s?void(u=[].concat(Array.prototype.slice.call(arguments))):void n.apply(this,arguments);
}function i(){if(!a&&(l=!0,!s)){for(s=!0;!a&&o<e&&l;)l=!1,t.call(this,o++,i,r);return s=!1,a?void n.apply(this,u):void(o>=e&&l&&(a=!0,n()))}}var o=0,a=!1,s=!1,l=!1,u=void 0;i()}function r(e,t,n){function r(e,t,r){a||(t?(a=!0,n(t)):(o[e]=r,a=++s===i,a&&n(null,o)))}var i=e.length,o=[];if(0===i)return n(null,o);var a=!1,s=0;e.forEach(function(e,n){t(e,n,function(e,t){r(n,e,t)})})}t.__esModule=!0,t.loopAsync=n,t.mapAsync=r},function(e,t,n){"use strict";function r(e,t){if(e==t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return r(e,t[n])});if("object"===("undefined"==typeof e?"undefined":l(e))){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))if(void 0===e[n]){if(void 0!==t[n])return!1}else{if(!Object.prototype.hasOwnProperty.call(t,n))return!1;if(!r(e[n],t[n]))return!1}return!0}return String(e)===String(t)}function i(e,t){return"/"!==t.charAt(0)&&(t="/"+t),"/"!==e.charAt(e.length-1)&&(e+="/"),"/"!==t.charAt(t.length-1)&&(t+="/"),t===e}function o(e,t,n){for(var r=e,i=[],o=[],a=0,s=t.length;a<s;++a){var l=t[a],c=l.path||"";if("/"===c.charAt(0)&&(r=e,i=[],o=[]),null!==r&&c){var h=(0,u.matchPattern)(c,r);if(h?(r=h.remainingPathname,i=[].concat(i,h.paramNames),o=[].concat(o,h.paramValues)):r=null,""===r)return i.every(function(e,t){return String(o[t])===String(n[e])})}}return!1}function a(e,t){return null==t?null==e:null==e||r(e,t)}function s(e,t,n,r,s){var l=e.pathname,u=e.query;return null!=n&&("/"!==l.charAt(0)&&(l="/"+l),!!(i(l,n.pathname)||!t&&o(l,r,s))&&a(u,n.query))}t.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=s;var u=n(408);e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){if(t.component||t.components)return void n(null,t.component||t.components);var r=t.getComponent||t.getComponents;if(r){var i=r.call(t,e,n);(0,a.isPromise)(i)&&i.then(function(e){return n(null,e)},n)}else n()}function i(e,t){(0,o.mapAsync)(e.routes,function(t,n,i){r(e,t,i)},t)}t.__esModule=!0;var o=n(418),a=n(421);t.default=i,e.exports=t.default},function(e,t){"use strict";function n(e){return e&&"function"==typeof e.then}t.__esModule=!0,t.isPromise=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,i){if(e.childRoutes)return[null,e.childRoutes];if(!e.getChildRoutes)return[];var o=!0,a=void 0,l={location:t,params:s(n,r)},u=e.getChildRoutes(l,function(e,t){return t=!e&&(0,m.createRoutes)(t),o?void(a=[e,t]):void i(e,t)});return(0,d.isPromise)(u)&&u.then(function(e){return i(null,(0,m.createRoutes)(e))},i),o=!1,a}function o(e,t,n,r,a){if(e.indexRoute)a(null,e.indexRoute);else if(e.getIndexRoute){var l={location:t,params:s(n,r)},u=e.getIndexRoute(l,function(e,t){a(e,!e&&(0,m.createRoutes)(t)[0])});(0,d.isPromise)(u)&&u.then(function(e){return a(null,(0,m.createRoutes)(e)[0])},a)}else if(e.childRoutes||e.getChildRoutes){var c=function(e,i){if(e)return void a(e);var s=i.filter(function(e){return!e.path});(0,h.loopAsync)(s.length,function(e,i,a){o(s[e],t,n,r,function(t,n){if(t||n){var r=[s[e]].concat(Array.isArray(n)?n:[n]);a(t,r)}else i()})},function(e,t){a(null,t)})},p=i(e,t,n,r,c);p&&c.apply(void 0,p)}else a()}function a(e,t,n){return t.reduce(function(e,t,r){var i=n&&n[r];return Array.isArray(e[t])?e[t].push(i):t in e?e[t]=[e[t],i]:e[t]=i,e},e)}function s(e,t){return a({},e,t)}function l(e,t,n,r,a,l){var c=e.path||"";if("/"===c.charAt(0)&&(n=t.pathname,r=[],a=[]),null!==n&&c){try{var h=(0,p.matchPattern)(c,n);h?(n=h.remainingPathname,r=[].concat(r,h.paramNames),a=[].concat(a,h.paramValues)):n=null}catch(e){l(e)}if(""===n){var d={routes:[e],params:s(r,a)};return void o(e,t,r,a,function(e,t){if(e)l(e);else{if(Array.isArray(t)){var n;(n=d.routes).push.apply(n,t)}else t&&d.routes.push(t);l(null,d)}})}}if(null!=n||e.childRoutes){var f=function(i,o){i?l(i):o?u(o,t,function(t,n){t?l(t):n?(n.routes.unshift(e),l(null,n)):l()},n,r,a):l()},m=i(e,t,r,a,f);m&&f.apply(void 0,m)}else l()}function u(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];void 0===r&&("/"!==t.pathname.charAt(0)&&(t=c({},t,{pathname:"/"+t.pathname})),r=t.pathname),(0,h.loopAsync)(e.length,function(n,a,s){l(e[n],t,r,i,o,function(e,t){e||t?s(e,t):a()})},n)}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=u;var h=n(418),d=n(421),p=n(408),f=n(414),m=(r(f),n(404));e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){if(e[t])return new Error("<"+n+'> should not have a "'+t+'" prop')}t.__esModule=!0,t.routes=t.route=t.components=t.component=t.history=void 0,t.falsy=r;var i=n(406),o=(t.history=(0,i.shape)({listen:i.func.isRequired,push:i.func.isRequired,replace:i.func.isRequired,go:i.func.isRequired,goBack:i.func.isRequired,goForward:i.func.isRequired}),t.component=(0,i.oneOfType)([i.func,i.string])),a=(t.components=(0,i.oneOfType)([o,i.object]),t.route=(0,i.oneOfType)([i.object,i.element]));t.routes=(0,i.oneOfType)([a,(0,i.arrayOf)(a)])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(409),s=r(a),l=n(2),u=r(l),c=n(411),h=r(c),d=n(406),p=n(425),f=r(p),m=n(426),v=n(404),g=(0,h.default)({displayName:"RouterContext",mixins:[(0,m.ContextProvider)("router")],propTypes:{router:d.object.isRequired,location:d.object.isRequired,routes:d.array.isRequired,params:d.object.isRequired,components:d.array.isRequired,createElement:d.func.isRequired},getDefaultProps:function(){return{createElement:u.default.createElement}},childContextTypes:{router:d.object.isRequired},getChildContext:function(){return{router:this.props.router}},createElement:function(e,t){return null==e?null:this.props.createElement(e,t)},render:function(){var e=this,t=this.props,n=t.location,r=t.routes,a=t.params,l=t.components,c=t.router,h=null;return l&&(h=l.reduceRight(function(t,s,l){if(null==s)return t;var u=r[l],h=(0,f.default)(u,a),d={location:n,params:a,route:u,router:c,routeParams:h,routes:r};if((0,v.isReactChildren)(t))d.children=t;else if(t)for(var p in t)Object.prototype.hasOwnProperty.call(t,p)&&(d[p]=t[p]);if("object"===("undefined"==typeof s?"undefined":o(s))){var m={};for(var g in s)Object.prototype.hasOwnProperty.call(s,g)&&(m[g]=e.createElement(s[g],i({key:g},d)));return m}return e.createElement(s,d)},h)),null===h||h===!1||u.default.isValidElement(h)?void 0:(0,s.default)(!1),h}});t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n={};return e.path?((0,i.getParamNames)(e.path).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}),n):n}t.__esModule=!0;var i=n(408);t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return"@@contextSubscriber/"+e}function o(e){var t,n,r=i(e),o=r+"/listeners",a=r+"/eventIndex",s=r+"/subscribe";return n={childContextTypes:(t={},t[r]=u.isRequired,t),getChildContext:function(){var e;return e={},e[r]={eventIndex:this[a],subscribe:this[s]},e},componentWillMount:function(){this[o]=[],this[a]=0},componentWillReceiveProps:function(){this[a]++},componentDidUpdate:function(){var e=this;this[o].forEach(function(t){return t(e[a])})}},n[s]=function(e){var t=this;return this[o].push(e),function(){t[o]=t[o].filter(function(t){return t!==e})}},n}function a(e){var t,n,r=i(e),o=r+"/lastRenderedEventIndex",a=r+"/handleContextUpdate",s=r+"/unsubscribe";return n={contextTypes:(t={},t[r]=u,t),getInitialState:function(){var e;return this.context[r]?(e={},e[o]=this.context[r].eventIndex,e):{}},componentDidMount:function(){this.context[r]&&(this[s]=this.context[r].subscribe(this[a]))},componentWillReceiveProps:function(){var e;this.context[r]&&this.setState((e={},e[o]=this.context[r].eventIndex,e))},componentWillUnmount:function(){this[s]&&(this[s](),this[s]=null)}},n[a]=function(e){if(e!==this.state[o]){var t;this.setState((t={},t[o]=e,t))}},n}t.__esModule=!0,t.ContextProvider=o,t.ContextSubscriber=a;var s=n(406),l=r(s),u=l.default.shape({subscribe:l.default.func.isRequired,eventIndex:l.default.number.isRequired})},function(e,t){"use strict";function n(e,t,n){var o=i({},e,{setRouteLeaveHook:t.listenBeforeLeavingRoute,isActive:t.isActive});return r(o,n)}function r(e,t){var n=t.location,r=t.params,i=t.routes;return e.location=n,e.params=r,e.routes=i,e}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.createRouterObject=n,t.assignRouterState=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){return 0===e.button}function a(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function s(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function l(e,t){return"function"==typeof e?e(t.location):e}t.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(2),h=r(c),d=n(411),p=r(d),f=n(406),m=n(409),v=r(m),g=n(405),E=n(426),y=(0,p.default)({displayName:"Link",mixins:[(0,E.ContextSubscriber)("router")],contextTypes:{router:g.routerShape},propTypes:{to:(0,f.oneOfType)([f.string,f.object,f.func]),activeStyle:f.object,activeClassName:f.string,onlyActiveOnIndex:f.bool.isRequired,onClick:f.func,target:f.string},getDefaultProps:function(){return{onlyActiveOnIndex:!1,style:{}}},handleClick:function(e){if(this.props.onClick&&this.props.onClick(e),!e.defaultPrevented){var t=this.context.router;t?void 0:(0,v.default)(!1),!a(e)&&o(e)&&(this.props.target||(e.preventDefault(),t.push(l(this.props.to,t))))}},render:function(){var e=this.props,t=e.to,n=e.activeClassName,r=e.activeStyle,o=e.onlyActiveOnIndex,a=i(e,["to","activeClassName","activeStyle","onlyActiveOnIndex"]),c=this.context.router;if(c){if(!t)return h.default.createElement("a",a);var d=l(t,c);a.href=c.createHref(d),(n||null!=r&&!s(r))&&c.isActive(d,o)&&(n&&(a.className?a.className+=" "+n:a.className=n),r&&(a.style=u({},a.style,r)))}return h.default.createElement("a",u({},a,{onClick:this.handleClick}))}});t.default=y,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=r(o),s=n(411),l=r(s),u=n(428),c=r(u),h=(0,l.default)({displayName:"IndexLink",render:function(){return a.default.createElement(c.default,i({},this.props,{onlyActiveOnIndex:!0}))}});t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.displayName||e.name||"Component"}function o(e,t){var n=t&&t.withRef,r=(0,d.default)({displayName:"WithRouter",mixins:[(0,m.ContextSubscriber)("router")],contextTypes:{router:v.routerShape},propTypes:{router:v.routerShape},getWrappedInstance:function(){return n?void 0:(0,l.default)(!1),this.wrappedInstance},render:function(){var t=this,r=this.props.router||this.context.router;if(!r)return c.default.createElement(e,this.props);var i=r.params,o=r.location,s=r.routes,l=a({},this.props,{router:r,params:i,location:o,routes:s});return n&&(l.ref=function(e){t.wrappedInstance=e}),c.default.createElement(e,l)}});return r.displayName="withRouter("+i(e)+")",r.WrappedComponent=e,(0,f.default)(r,e)}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var s=n(409),l=r(s),u=n(2),c=r(u),h=n(411),d=r(h),p=n(431),f=r(p),m=n(426),v=n(405);e.exports=t.default},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},i="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,o){if("string"!=typeof t){var a=Object.getOwnPropertyNames(t);i&&(a=a.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;++s)if(!(n[a[s]]||r[a[s]]||o&&o[a[s]]))try{e[a[s]]=t[a[s]]}catch(e){}}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(411),o=r(i),a=n(406),s=n(414),l=(r(s),n(409)),u=r(l),c=n(433),h=r(c),d=n(423),p=(0,o.default)({displayName:"IndexRedirect",statics:{createRouteFromReactElement:function(e,t){t&&(t.indexRoute=h.default.createRouteFromReactElement(e))}},propTypes:{to:a.string.isRequired,query:a.object,state:a.object,onEnter:d.falsy,children:d.falsy},render:function(){(0,u.default)(!1)}});t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(411),o=r(i),a=n(406),s=n(409),l=r(s),u=n(404),c=n(408),h=n(423),d=(0,o.default)({displayName:"Redirect",statics:{createRouteFromReactElement:function(e){var t=(0,u.createRouteFromReactElement)(e);return t.from&&(t.path=t.from),t.onEnter=function(e,n){var r=e.location,i=e.params,o=void 0;if("/"===t.to.charAt(0))o=(0,c.formatPattern)(t.to,i);else if(t.to){var a=e.routes.indexOf(t),s=d.getRoutePattern(e.routes,a-1),l=s.replace(/\/*$/,"/")+t.to;o=(0,c.formatPattern)(l,i)}else o=r.pathname;n({pathname:o,query:t.query||r.query,state:t.state||r.state})},t},getRoutePattern:function(e,t){for(var n="",r=t;r>=0;r--){var i=e[r],o=i.path||"";if(n=o.replace(/\/*$/,"/")+n,0===o.indexOf("/"))break}return"/"+n}},propTypes:{path:a.string,from:a.string,to:a.string.isRequired,query:a.object,state:a.object,onEnter:h.falsy,children:h.falsy},render:function(){(0,l.default)(!1)}});t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(411),o=r(i),a=n(406),s=n(414),l=(r(s),n(409)),u=r(l),c=n(404),h=n(423),d=(0,o.default)({displayName:"IndexRoute",statics:{createRouteFromReactElement:function(e,t){t&&(t.indexRoute=(0,c.createRouteFromReactElement)(e))}},propTypes:{path:h.falsy,component:h.component,components:h.components,getComponent:a.func,getComponents:a.func},render:function(){(0,u.default)(!1)}});t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(411),o=r(i),a=n(406),s=n(409),l=r(s),u=n(404),c=n(423),h=(0,o.default)({displayName:"Route",statics:{createRouteFromReactElement:u.createRouteFromReactElement},propTypes:{path:a.string,component:c.component,components:c.components,getComponent:a.func,getComponents:a.func},render:function(){(0,l.default)(!1)}});t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){var n=e.history,r=e.routes,o=e.location,l=i(e,["history","routes","location"]);n||o?void 0:(0,u.default)(!1),n=n?n:(0,h.default)(l);var c=(0,p.default)(n,(0,f.createRoutes)(r));o=o?n.createLocation(o):n.getCurrentLocation(),c.match(o,function(e,r,i){var o=void 0;if(i){var l=(0,m.createRouterObject)(n,c,i);o=a({},i,{router:l,matchContext:{transitionManager:c,router:l}})}t(e,r&&n.createLocation(r,s.REPLACE),o)})}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(437),l=n(409),u=r(l),c=n(438),h=r(c),d=n(413),p=r(d),f=n(404),m=n(427);t.default=o,e.exports=t.default},function(e,t){"use strict";t.__esModule=!0;t.PUSH="PUSH",t.REPLACE="REPLACE",t.POP="POP"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=(0,c.default)(e),n=function(){return t},r=(0,a.default)((0,l.default)(n))(e);return r}t.__esModule=!0,t.default=i;var o=n(439),a=r(o),s=n(445),l=r(s),u=n(446),c=r(u);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(440),a=n(442),s=r(a),l=n(443),u=n(444),c=function(e){return(0,o.stringify)(e).replace(/%20/g,"+")},h=o.parse,d=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e(t),r=t.stringifyQuery,o=t.parseQueryString;"function"!=typeof r&&(r=c),"function"!=typeof o&&(o=h);var a=function(e){return e?(null==e.query&&(e.query=o(e.search.substring(1))),e):e},d=function(e,t){if(null==t)return e;var n="string"==typeof e?(0,u.parsePath)(e):e,o=r(t),a=o?"?"+o:"";return i({},n,{search:a})},p=function(){return a(n.getCurrentLocation())},f=function(e){return n.listenBefore(function(t,n){return(0,s.default)(e,a(t),n)})},m=function(e){return n.listen(function(t){return e(a(t))})},v=function(e){return n.push(d(e,e.query))},g=function(e){return n.replace(d(e,e.query))},E=function(e){return n.createPath(d(e,e.query))},y=function(e){return n.createHref(d(e,e.query))},x=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var o=n.createLocation.apply(n,[d(e,e.query)].concat(r));return e.query&&(o.query=(0,l.createQuery)(e.query)),a(o)};return i({},n,{getCurrentLocation:p,listenBefore:f,listen:m,push:v,replace:g,createPath:E,createHref:y,createLocation:x})}};t.default=d},function(e,t,n){"use strict";function r(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[o(t,e),"[",r,"]"].join(""):[o(t,e),"[",o(r,e),"]=",o(n,e)].join("")};case"bracket":return function(t,n){return null===n?o(t,e):[o(t,e),"[]=",o(n,e)].join("")};default:return function(t,n){return null===n?o(t,e):[o(t,e),"=",o(n,e)].join("")}}}function i(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){return t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),void(r[e][t[1]]=n)):void(r[e]=n)};case"bracket":return function(e,n,r){return t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0===r[e]?void(r[e]=[n]):void(r[e]=[].concat(r[e],n)):void(r[e]=n)};default:return function(e,t,n){return void 0===n[e]?void(n[e]=t):void(n[e]=[].concat(n[e],t))}}}function o(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function a(e){return Array.isArray(e)?e.sort():"object"==typeof e?a(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}var s=n(441),l=n(4);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){t=l({arrayFormat:"none"},t);var n=i(t),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),i=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),n(decodeURIComponent(i),o,r)}),Object.keys(r).sort().reduce(function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=a(n):e[t]=n,e},Object.create(null))):r},t.stringify=function(e,t){var n={encode:!0,strict:!0,arrayFormat:"none"};t=l(n,t);var i=r(t);return e?Object.keys(e).sort().map(function(n){var r=e[n];if(void 0===r)return"";if(null===r)return o(n,t);if(Array.isArray(r)){var a=[];return r.slice().forEach(function(e){void 0!==e&&a.push(i(n,e,a.length))}),a.join("&")}return o(n,t)+"="+o(r,t)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(415),o=(r(i),function(e,t,n){var r=e(t,n);e.length<2&&n(r)});t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.locationsAreEqual=t.statesAreEqual=t.createLocation=t.createQuery=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(409),s=r(a),l=n(415),u=(r(l),n(444)),c=n(437),h=(t.createQuery=function(e){return o(Object.create(null),e)},t.createLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.POP,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="string"==typeof e?(0,u.parsePath)(e):e,i=r.pathname||"/",o=r.search||"",a=r.hash||"",s=r.state;return{pathname:i,search:o,hash:a,state:s,action:t,key:n}},function(e){return"[object Date]"===Object.prototype.toString.call(e)}),d=t.statesAreEqual=function e(t,n){if(t===n)return!0;var r="undefined"==typeof t?"undefined":i(t),o="undefined"==typeof n?"undefined":i(n);if(r!==o)return!1;if("function"===r?(0,s.default)(!1):void 0,"object"===r){if(h(t)&&h(n)?(0,s.default)(!1):void 0,!Array.isArray(t)){var a=Object.keys(t),l=Object.keys(n);return a.length===l.length&&a.every(function(r){return e(t[r],n[r])})}return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])})}return!1};t.locationsAreEqual=function(e,t){return e.key===t.key&&e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&d(e.state,t.state)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.createPath=t.parsePath=t.getQueryStringValueFromPath=t.stripQueryStringValueFromPath=t.addQueryStringValueToPath=void 0;var i=n(415),o=(r(i),t.addQueryStringValueToPath=function(e,t,n){var r=a(e),i=r.pathname,o=r.search,l=r.hash;return s({pathname:i,search:o+(o.indexOf("?")===-1?"?":"&")+t+"="+n,hash:l})},t.stripQueryStringValueFromPath=function(e,t){var n=a(e),r=n.pathname,i=n.search,o=n.hash;return s({pathname:r,search:i.replace(new RegExp("([?&])"+t+"=[a-zA-Z0-9]+(&?)"),function(e,t,n){return"?"===t?t:n}),hash:o})},t.getQueryStringValueFromPath=function(e,t){var n=a(e),r=n.search,i=r.match(new RegExp("[?&]"+t+"=([a-zA-Z0-9]+)"));return i&&i[1]},function(e){var t=e.match(/^(https?:)?\/\/[^\/]*/);return null==t?e:e.substring(t[0].length)}),a=t.parsePath=function(e){var t=o(e),n="",r="",i=t.indexOf("#");i!==-1&&(r=t.substring(i),t=t.substring(0,i));var a=t.indexOf("?");return a!==-1&&(n=t.substring(a),t=t.substring(0,a)),""===t&&(t="/"),{pathname:t,search:n,hash:r}},s=t.createPath=function(e){if(null==e||"string"==typeof e)return e;var t=e.basename,n=e.pathname,r=e.search,i=e.hash,o=(t||"")+n;return r&&"?"!==r&&(o+=r),i&&(o+=i),o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(442),a=r(o),s=n(444),l=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e(t),r=t.basename,o=function(e){return e?(r&&null==e.basename&&(0===e.pathname.toLowerCase().indexOf(r.toLowerCase())?(e.pathname=e.pathname.substring(r.length),e.basename=r,""===e.pathname&&(e.pathname="/")):e.basename=""),e):e},l=function(e){if(!r)return e;var t="string"==typeof e?(0,s.parsePath)(e):e,n=t.pathname,o="/"===r.slice(-1)?r:r+"/",a="/"===n.charAt(0)?n.slice(1):n,l=o+a;return i({},t,{pathname:l})},u=function(){return o(n.getCurrentLocation())},c=function(e){return n.listenBefore(function(t,n){return(0,a.default)(e,o(t),n)})},h=function(e){return n.listen(function(t){return e(o(t))})},d=function(e){return n.push(l(e))},p=function(e){return n.replace(l(e))},f=function(e){return n.createPath(l(e))},m=function(e){return n.createHref(l(e))},v=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return o(n.createLocation.apply(n,[l(e)].concat(r)))};return i({},n,{getCurrentLocation:u,listenBefore:c,listen:h,push:d,replace:p,createPath:f,createHref:m,createLocation:v})}};t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(415),a=(r(o),n(409)),s=r(a),l=n(443),u=n(444),c=n(447),h=r(c),d=n(437),p=function(e){return e.filter(function(e){return e.state}).reduce(function(e,t){return e[t.key]=t.state,e},{})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(e)?e={entries:e}:"string"==typeof e&&(e={entries:[e]});var t=function(){var e=m[v],t=(0,u.createPath)(e),n=void 0,r=void 0;e.key&&(n=e.key,r=y(n));var o=(0,u.parsePath)(t);return(0,l.createLocation)(i({},o,{state:r}),void 0,n)},n=function(e){var t=v+e;return t>=0&&t<m.length},r=function(e){if(e&&n(e)){v+=e;var r=t();c.transitionTo(i({},r,{action:d.POP}))}},o=function(e){v+=1,v<m.length&&m.splice(v),m.push(e),E(e.key,e.state)},a=function(e){m[v]=e,E(e.key,e.state)},c=(0,h.default)(i({},e,{getCurrentLocation:t,pushLocation:o,replaceLocation:a,go:r})),f=e,m=f.entries,v=f.current;"string"==typeof m?m=[m]:Array.isArray(m)||(m=["/"]),m=m.map(function(e){return(0,l.createLocation)(e)}),null==v?v=m.length-1:v>=0&&v<m.length?void 0:(0,s.default)(!1);var g=p(m),E=function(e,t){return g[e]=t},y=function(e){return g[e]};return i({},c,{canGo:n})};t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(448),o=n(444),a=n(442),s=r(a),l=n(437),u=n(443),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getCurrentLocation,n=e.getUserConfirmation,r=e.pushLocation,a=e.replaceLocation,c=e.go,h=e.keyLength,d=void 0,p=void 0,f=[],m=[],v=[],g=function(){return p&&p.action===l.POP?v.indexOf(p.key):d?v.indexOf(d.key):-1},E=function(e){var t=g();d=e,d.action===l.PUSH?v=[].concat(v.slice(0,t+1),[d.key]):d.action===l.REPLACE&&(v[t]=d.key),m.forEach(function(e){return e(d)})},y=function(e){return f.push(e),function(){return f=f.filter(function(t){return t!==e})}},x=function(e){return m.push(e),function(){return m=m.filter(function(t){return t!==e})}},T=function(e,t){(0,i.loopAsync)(f.length,function(t,n,r){(0,s.default)(f[t],e,function(e){return null!=e?r(e):n()})},function(e){n&&"string"==typeof e?n(e,function(e){return t(e!==!1)}):t(e!==!1)})},b=function(e){d&&(0,u.locationsAreEqual)(d,e)||p&&(0,u.locationsAreEqual)(p,e)||(p=e,T(e,function(t){if(p===e)if(p=null,t){if(e.action===l.PUSH){var n=(0,o.createPath)(d),i=(0,o.createPath)(e);i===n&&(0,u.statesAreEqual)(d.state,e.state)&&(e.action=l.REPLACE)}e.action===l.POP?E(e):e.action===l.PUSH?r(e)!==!1&&E(e):e.action===l.REPLACE&&a(e)!==!1&&E(e)}else if(d&&e.action===l.POP){var s=v.indexOf(d.key),h=v.indexOf(e.key);s!==-1&&h!==-1&&c(s-h)}}))},w=function(e){return b(H(e,l.PUSH))},_=function(e){return b(H(e,l.REPLACE))},R=function(){return c(-1)},S=function(){return c(1)},M=function(){return Math.random().toString(36).substr(2,h||6)},C=function(e){return(0,o.createPath)(e)},H=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M();return(0,u.createLocation)(e,t,n)};return{getCurrentLocation:t,listenBefore:y,listen:x,transitionTo:b,push:w,replace:_,go:c,goBack:R,goForward:S,createKey:M,createPath:o.createPath,createHref:C,createLocation:H}};t.default=c},function(e,t){"use strict";t.__esModule=!0;t.loopAsync=function(e,t,n){var r=0,i=!1,o=!1,a=!1,s=void 0,l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i=!0,o?void(s=t):void n.apply(void 0,t)},u=function u(){if(!i&&(a=!0,!o)){for(o=!0;!i&&r<e&&a;)a=!1,t(r++,u,l);return o=!1,i?void n.apply(void 0,s):void(r>=e&&a&&(i=!0,n()))}};u()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(t){var n=(0,a.default)((0,l.default)(e))(t);return n}}t.__esModule=!0,t.default=i;var o=n(439),a=r(o),s=n(445),l=r(s);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=r(o),s=n(424),l=r(s),u=n(414);r(u);t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map(function(e){return e.renderRouterContext}).filter(Boolean),s=t.map(function(e){return e.renderRouteComponent}).filter(Boolean),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.createElement;return function(t,n){return s.reduceRight(function(e,t){return t(e,n)},e(t,n))}};return function(e){return r.reduceRight(function(t,n){return n(t,e)},a.default.createElement(l.default,i({},e,{createElement:u(e.createElement)})))}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(452),o=r(i),a=n(458),s=r(a);t.default=(0,s.default)(o.default),e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(409),s=i(a),l=n(453),u=n(454),c=r(u),h=n(457),d=r(h),p=n(455),f=n(447),m=i(f),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.canUseDOM?void 0:(0,s.default)(!1);var t=e.forceRefresh||!(0,p.supportsHistory)(),n=t?d:c,r=n.getUserConfirmation,i=n.getCurrentLocation,a=n.pushLocation,u=n.replaceLocation,h=n.go,f=(0,m.default)(o({getUserConfirmation:r},e,{getCurrentLocation:i,pushLocation:a,replaceLocation:u,go:h})),v=0,g=void 0,E=function(e,t){1===++v&&(g=c.startListener(f.transitionTo));var n=t?f.listenBefore(e):f.listen(e);return function(){n(),0===--v&&g()}},y=function(e){return E(e,!0)},x=function(e){return E(e,!1)};return o({},f,{listenBefore:y,listen:x})};t.default=v},function(e,t){"use strict";t.__esModule=!0;t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement)},function(e,t,n){"use strict";t.__esModule=!0,t.go=t.replaceLocation=t.pushLocation=t.startListener=t.getUserConfirmation=t.getCurrentLocation=void 0;var r=n(443),i=n(455),o=n(456),a=n(444),s=n(453),l="popstate",u="hashchange",c=s.canUseDOM&&!(0,i.supportsPopstateOnHashchange)(),h=function(e){var t=e&&e.key;return(0,r.createLocation)({pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,state:t?(0,o.readState)(t):void 0},void 0,t)},d=t.getCurrentLocation=function(){
var e=void 0;try{e=window.history.state||{}}catch(t){e={}}return h(e)},p=(t.getUserConfirmation=function(e,t){return t(window.confirm(e))},t.startListener=function(e){var t=function(t){(0,i.isExtraneousPopstateEvent)(t)||e(h(t.state))};(0,i.addEventListener)(window,l,t);var n=function(){return e(d())};return c&&(0,i.addEventListener)(window,u,n),function(){(0,i.removeEventListener)(window,l,t),c&&(0,i.removeEventListener)(window,u,n)}},function(e,t){var n=e.state,r=e.key;void 0!==n&&(0,o.saveState)(r,n),t({key:r},(0,a.createPath)(e))});t.pushLocation=function(e){return p(e,function(e,t){return window.history.pushState(e,null,t)})},t.replaceLocation=function(e){return p(e,function(e,t){return window.history.replaceState(e,null,t)})},t.go=function(e){e&&window.history.go(e)}},function(e,t){"use strict";t.__esModule=!0;t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.supportsHistory=function(){var e=window.navigator.userAgent;return(e.indexOf("Android 2.")===-1&&e.indexOf("Android 4.0")===-1||e.indexOf("Mobile Safari")===-1||e.indexOf("Chrome")!==-1||e.indexOf("Windows Phone")!==-1)&&(window.history&&"pushState"in window.history)},t.supportsGoWithoutReloadUsingHash=function(){return window.navigator.userAgent.indexOf("Firefox")===-1},t.supportsPopstateOnHashchange=function(){return window.navigator.userAgent.indexOf("Trident")===-1},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&navigator.userAgent.indexOf("CriOS")===-1}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.readState=t.saveState=void 0;var i=n(415),o=(r(i),{QuotaExceededError:!0,QUOTA_EXCEEDED_ERR:!0}),a={SecurityError:!0},s="@@History/",l=function(e){return s+e};t.saveState=function(e,t){if(window.sessionStorage)try{null==t?window.sessionStorage.removeItem(l(e)):window.sessionStorage.setItem(l(e),JSON.stringify(t))}catch(e){if(a[e.name])return;if(o[e.name]&&0===window.sessionStorage.length)return;throw e}},t.readState=function(e){var t=void 0;try{t=window.sessionStorage.getItem(l(e))}catch(e){if(a[e.name])return}if(t)try{return JSON.parse(t)}catch(e){}}},function(e,t,n){"use strict";t.__esModule=!0,t.replaceLocation=t.pushLocation=t.getCurrentLocation=t.go=t.getUserConfirmation=void 0;var r=n(454);Object.defineProperty(t,"getUserConfirmation",{enumerable:!0,get:function(){return r.getUserConfirmation}}),Object.defineProperty(t,"go",{enumerable:!0,get:function(){return r.go}});var i=n(443),o=n(444);t.getCurrentLocation=function(){return(0,i.createLocation)(window.location)},t.pushLocation=function(e){return window.location.href=(0,o.createPath)(e),!1},t.replaceLocation=function(e){return window.location.replace((0,o.createPath)(e)),!1}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=void 0;return s&&(t=(0,a.default)(e)()),t}t.__esModule=!0,t.default=i;var o=n(449),a=r(o),s=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(460),o=r(i),a=n(458),s=r(a);t.default=(0,s.default)(o.default),e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(415),s=(i(a),n(409)),l=i(s),u=n(453),c=n(455),h=n(461),d=r(h),p=n(447),f=i(p),m="_k",v=function(e){return"/"===e.charAt(0)?e:"/"+e},g={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!"+e},decodePath:function(e){return"!"===e.charAt(0)?e.substring(1):e}},noslash:{encodePath:function(e){return"/"===e.charAt(0)?e.substring(1):e},decodePath:v},slash:{encodePath:v,decodePath:v}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.canUseDOM?void 0:(0,l.default)(!1);var t=e.queryKey,n=e.hashType;"string"!=typeof t&&(t=m),null==n&&(n="slash"),n in g||(n="slash");var r=g[n],i=d.getUserConfirmation,a=function(){return d.getCurrentLocation(r,t)},s=function(e){return d.pushLocation(e,r,t)},h=function(e){return d.replaceLocation(e,r,t)},p=(0,f.default)(o({getUserConfirmation:i},e,{getCurrentLocation:a,pushLocation:s,replaceLocation:h,go:d.go})),v=0,E=void 0,y=function(e,n){1===++v&&(E=d.startListener(p.transitionTo,r,t));var i=n?p.listenBefore(e):p.listen(e);return function(){i(),0===--v&&E()}},x=function(e){return y(e,!0)},T=function(e){return y(e,!1)},b=((0,c.supportsGoWithoutReloadUsingHash)(),function(e){p.go(e)}),w=function(e){return"#"+r.encodePath(p.createHref(e))};return o({},p,{listenBefore:x,listen:T,go:b,createHref:w})};t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.replaceLocation=t.pushLocation=t.startListener=t.getCurrentLocation=t.go=t.getUserConfirmation=void 0;var i=n(454);Object.defineProperty(t,"getUserConfirmation",{enumerable:!0,get:function(){return i.getUserConfirmation}}),Object.defineProperty(t,"go",{enumerable:!0,get:function(){return i.go}});var o=n(415),a=(r(o),n(443)),s=n(455),l=n(456),u=n(444),c="hashchange",h=function(){var e=window.location.href,t=e.indexOf("#");return t===-1?"":e.substring(t+1)},d=function(e){return window.location.hash=e},p=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},f=t.getCurrentLocation=function(e,t){var n=e.decodePath(h()),r=(0,u.getQueryStringValueFromPath)(n,t),i=void 0;r&&(n=(0,u.stripQueryStringValueFromPath)(n,t),i=(0,l.readState)(r));var o=(0,u.parsePath)(n);return o.state=i,(0,a.createLocation)(o,void 0,r)},m=void 0,v=(t.startListener=function(e,t,n){var r=function(){var r=h(),i=t.encodePath(r);if(r!==i)p(i);else{var o=f(t,n);if(m&&o.key&&m.key===o.key)return;m=o,e(o)}},i=h(),o=t.encodePath(i);return i!==o&&p(o),(0,s.addEventListener)(window,c,r),function(){return(0,s.removeEventListener)(window,c,r)}},function(e,t,n,r){var i=e.state,o=e.key,a=t.encodePath((0,u.createPath)(e));void 0!==i&&(a=(0,u.addQueryStringValueToPath)(a,n,o),(0,l.saveState)(o,i)),m=e,r(a)});t.pushLocation=function(e,t,n){return v(e,t,n,function(e){h()!==e&&d(e)})},t.replaceLocation=function(e,t,n){return v(e,t,n,function(e){h()!==e&&p(e)})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=r(i),a=(n(403),n(463)),s=r(a),l=n(466),u=r(l),c=n(497),h=(r(c),n(502)),d=(r(h),n(505)),p=(r(d),n(522)),f=(r(p),n(523)),m=(r(f),n(526)),v=(r(m),n(531)),g=(r(v),n(539)),E=(r(g),n(596)),y=(r(E),n(598)),x=(r(y),n(600)),T=(r(x),n(601)),b=r(T),w=n(633),_=r(w),R=n(636),S=r(R),M=[{name:"Ruqia",component:S.default,url:"Ruqia",slug:"ruqia",media:"data/01 Ruqia(Shorter_Immersive_Website_Version).mp3",spotifyUrl:"https://open.spotify.com/album/3ILBGXvUwP6kVni9wAFuCU"},{name:"Empire Sounds",component:b.default,url:"EmpireSounds",slug:"empire_sounds",media:"data/02 Empire Sounds(Shorter_Immersive_Website_Version).mp3",spotifyUrl:"https://open.spotify.com/album/3ILBGXvUwP6kVni9wAFuCU"},{name:"Biomes",component:_.default,url:"biomes",slug:"biomes",media:"data/04 Biomes(Shorter_Immersive_Website_Version).mp3",spotifyUrl:"https://open.spotify.com/album/3ILBGXvUwP6kVni9wAFuCU"}],C=[{url:"data/01 Ruqia(Shorter_Immersive_Website_Version).mp3",component:S.default,slug:"ruqia",track:{name:"01/ Ruqia",spotifyUrl:"https://open.spotify.com/album/3ILBGXvUwP6kVni9wAFuCU"}},{url:"data/02 Empire Sounds(Shorter_Immersive_Website_Version).mp3",component:b.default,slug:"empire_sounds",track:{name:"02/ Empire Sounds",spotifyUrl:"https://open.spotify.com/album/3ILBGXvUwP6kVni9wAFuCU"}},{url:"data/04 Biomes(Shorter_Immersive_Website_Version).mp3",cover:"path/to/jpeg",component:_.default,slug:"biomes",track:{name:"04/ Biomes",spotifyUrl:"https://open.spotify.com/album/3ILBGXvUwP6kVni9wAFuCU"}}],H=function(e){var t=e.params,n=t.slug&&M.find(function(e){return e.slug===t.slug});return o.default.createElement("div",null,o.default.createElement(s.default,{songs:C}),o.default.createElement(u.default,{example:n}))};H.propTypes={params:o.default.PropTypes.object.isRequired},t.default=H},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(109),o=r(i),a=n(112),s=r(a),l=n(113),u=r(l),c=n(117),h=r(c),d=n(118),p=r(d),f=n(2),m=r(f),v=n(403),g=n(464),E=r(g),y=n(465),x=r(y),T=function(e){function t(){var e,n,r,i;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=r=(0,h.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),r.state={active:r.props.songs[0],current:0,progress:0,random:!1,repeat:!1,mute:!1,play:r.props.autoplay||!1,songs:r.props.songs},r.componentDidMount=function(){var e=r.refs.player;e.addEventListener("timeupdate",r.updateProgress),e.addEventListener("ended",r.end),e.addEventListener("error",r.next)},r.componentWillUnmount=function(){var e=r.refs.player;e.removeEventListener("timeupdate",r.updateProgress),e.removeEventListener("ended",r.end),e.removeEventListener("error",r.next)},r.setProgress=function(e){var t="SPAN"===e.target.nodeName?e.target.parentNode:e.target,n=t.clientHeight,i=t.getBoundingClientRect(),o=e.clientY-i.top,a=r.refs.player.duration,s=a*o/n,l=100*s/a;r.refs.player.currentTime=s,r.setState({progress:l}),r.play()},r.updateProgress=function(){var e=r.refs.player.duration,t=r.refs.player.currentTime,n=100*t/e;r.setState({progress:n})},r.play=function(){r.setState({play:!0}),r.refs.player.volume=0,r.refs.player.play()},r.pause=function(){r.setState({play:!1}),r.refs.player.pause()},r.toggle=function(){r.state.play?r.pause():r.play()},r.end=function(){r.state.repeat?r.play():r.setState({play:!1})},r.next=function(){var e=r.state.songs.length,t=r.state.repeat?r.state.current:r.state.current<e-1?r.state.current+1:0,n=r.state.songs[t];r.setState({current:t,active:n,progress:0}),r.refs.player.src=n.url,r.play()},r.previous=function(){var e=r.state.songs.length,t=r.state.current>0?r.state.current-1:e-1,n=r.state.songs[t];r.setState({current:t,active:n,progress:0}),r.refs.player.src=n.url,r.play()},r.randomize=function(){var e=(0,x.default)(r.state.songs.slice());r.setState({songs:r.state.random?r.state.songs:e,random:!r.state.random})},r.repeat=function(){r.setState({repeat:!r.state.repeat})},r.toggleMute=function(){var e=r.state.mute;r.setState({mute:!r.state.mute}),r.refs.player.volume=e?1:0},i=n,(0,h.default)(r,i)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.state,t=e.active,n=e.play,r=e.progress,i=(0,E.default)("fa",{"fa-pause":n},{"fa-play":!n}),o=(0,E.default)("fa",{"fa-volume-up":!this.state.mute},{"fa-volume-off":this.state.mute}),a=(0,E.default)("player-btn small repeat",{active:this.state.repeat}),s=(0,E.default)("player-btn small random",{active:this.state.random});return m.default.createElement("div",{className:"player-container"},m.default.createElement("span",{className:"player-progress-container-wrapper"},m.default.createElement("span",{className:"player-progress-value",style:{height:r+"%"}}),m.default.createElement("div",{className:"player-progress-container"})),m.default.createElement("audio",{src:t.url,autoPlay:this.state.play,preload:"auto",ref:"player"}),m.default.createElement("div",{className:"track-info"},m.default.createElement("span",{className:"track-tag"},"Playing Excerpt"),m.default.createElement("h2",{className:"track-name"},t.track.name),m.default.createElement("div",{className:"track-link-wrapper"},m.default.createElement("a",{href:t.track.spotifyUrl,className:"track-link",target:"_blank"},"Full Listen"))),m.default.createElement("div",{className:"player-options"},m.default.createElement("div",{className:"player-buttons player-controls"},m.default.createElement(v.Link,{to:"/"+t.slug,onClick:this.previous,className:"player-btn medium",title:"Previous Song"},m.default.createElement("i",{className:"fa fa-backward"})),m.default.createElement("button",{onClick:this.toggle,className:"player-btn big",title:"Play/Pause"},m.default.createElement("i",{className:i})),m.default.createElement(v.Link,{to:"/"+t.slug,onClick:this.next,className:"player-btn medium",title:"Next Song"},m.default.createElement("i",{className:"fa fa-forward"}))),m.default.createElement("div",{className:"player-buttons"},m.default.createElement("button",{className:"player-btn small volume",onClick:this.toggleMute,title:"Mute/Unmute"},m.default.createElement("i",{className:o})),m.default.createElement("button",{className:a,onClick:this.repeat,title:"Repeat"},m.default.createElement("i",{className:"fa fa-repeat"})),m.default.createElement("button",{className:s,onClick:this.randomize,title:"Shuffle"},m.default.createElement("i",{className:"fa fa-random"})))))}}]),t}(f.Component);T.propTypes={autoplay:f.PropTypes.bool,songs:f.PropTypes.array.isRequired},t.default=T},function(e,t,n){/*!
	  Copyright (c) 2015 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
function r(){for(var e,t="",n=0;n<arguments.length;n++)if(e=arguments[n])if("string"==typeof e||"number"==typeof e)t+=" "+e;else if("[object Array]"===Object.prototype.toString.call(e))t+=" "+r.apply(null,e);else if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&e[i]&&(t+=" "+i);return t.substr(1)}var i,o;"undefined"!=typeof e&&e.exports&&(e.exports=r),i=[],o=function(){return r}.apply(t,i),!(void 0!==o&&(e.exports=o))},function(e,t){"use strict";function n(e,t){if(!Array.isArray(e))throw new Error("shuffle expect an array as parameter.");t=t||{};var n,r,i=e,o=e.length,a=t.rng||Math.random;for(t.copy===!0&&(i=e.slice());o;)n=Math.floor(a()*o),o-=1,r=i[o],i[o]=i[n],i[n]=r;return i}n.pick=function(e,t){if(!Array.isArray(e))throw new Error("shuffle.pick() expect an array as parameter.");t=t||{};var n=t.rng||Math.random,r=t.picks||1;if("number"==typeof r&&1!==r){for(var i,o=e.length,a=e.slice(),s=[];r&&o;)i=Math.floor(n()*o),s.push(a[i]),a.splice(i,1),o-=1,r-=1;return s}return e[Math.floor(n()*e.length)]},e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(467),s=r(a),l=n(496),u=r(l),c=function(e){var t=e.example,n=e.size,r=null,i=null,a="";if(t){t.media&&(a=t.media);var s=t.component;t.url;i=o.default.createElement("div",null,o.default.createElement(u.default,{audioUrl:a},o.default.createElement(s,{width:n.width,height:n.height,videoInput:s})))}return o.default.createElement("div",{id:"viewer"},i,r)};c.propTypes={example:o.default.PropTypes.object,size:o.default.PropTypes.object},t.default=(0,s.default)({monitorHeight:!0,refreshRate:200})(c)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sizeMe=void 0;var i=n(468),o=r(i);t.sizeMe=o.default,t.default=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return e.displayName||e.name||"Component"}function u(e){var t=e.className,n=e.style,r={};return t||n?(t&&(r.className=t),n&&(r.style=n)):r.style={width:"100%",height:"100%"},f.default.createElement("div",r)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=e.monitorWidth,n=void 0===t?R.monitorWidth:t,r=e.monitorHeight,i=void 0===r?R.monitorHeight:r,u=e.monitorPosition,m=void 0===u?R.monitorPosition:u,g=e.refreshRate,y=void 0===g?R.refreshRate:g,T=e.refreshMode,w=void 0===T?R.refreshMode:T,S=e.noPlaceholder,C=void 0===S?R.noPlaceholder:S;(0,E.default)(n||i||m,'You have to monitor at least one of the width, height, or position when using "sizeMe"'),(0,E.default)(y>=16,"It is highly recommended that you don't put your refreshRate lower than 16 as this may cause layout thrashing."),(0,E.default)("throttle"===w||"debounce"===w,'The refreshMode should have a value of "throttle" or "debounce"');var H="throttle"===w?x.default:b.default;return function(e){var t=M(e),r=function(e){function r(){var e,t,s,l;o(this,r);for(var u=arguments.length,c=Array(u),h=0;h<u;h++)c[h]=arguments[h];return t=s=a(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(c))),s.state={width:void 0,height:void 0,position:void 0},s.determineStrategy=function(e){s.strategy=e.onSize?"callback":"render"},s.strategisedSetState=function(e){"callback"===s.strategy?(s.callbackState=e,s.props.onSize(e)):s.setState(e)},s.strategisedGetState=function(){return"callback"===s.strategy?s.callbackState:s.state},s.refCallback=function(e){s.element=e},s.hasSizeChanged=function(e,t){var r=e,o=t,a=r.position||{},s=o.position||{};return i&&r.height!==o.height||m&&(a.top!==s.top||a.left!==s.left||a.bottom!==s.bottom||a.right!==s.right)||n&&r.width!==o.width},s.checkIfSizeChanged=H(function(e){var t=e.getBoundingClientRect(),r=t.width,o=t.height,a=t.right,l=t.left,u=t.top,c=t.bottom,h={width:n?r:null,height:i?o:null,position:m?{right:a,left:l,top:u,bottom:c}:null};s.hasSizeChanged(s.state,h)&&s.strategisedSetState(h)},y),l=t,a(s,l)}return s(r,e),d(r,[{key:"componentDidMount",value:function(){this.determineStrategy(this.props),this.handleDOMNode()}},{key:"componentWillReceiveProps",value:function(e){this.determineStrategy(e)}},{key:"componentDidUpdate",value:function(){this.handleDOMNode()}},{key:"componentWillUnmount",value:function(){this.hasSizeChanged=function(){},this.checkIfSizeChanged=function(){},this.domEl&&((0,_.default)().removeAllListeners(this.domEl),this.domEl=null)}},{key:"handleDOMNode",value:function(){var e=this.element&&v.default.findDOMNode(this.element);return e?(this.domEl&&(0,_.default)().removeAllListeners(this.domEl),this.domEl=e,void(0,_.default)().listenTo(this.domEl,this.checkIfSizeChanged)):void(this.domEl&&((0,_.default)().removeAllListeners(this.domEl),this.domEl=null))}},{key:"render",value:function(){var e=c.enableSSRBehaviour||c.noPlaceholders||C||"callback"===this.strategy;return f.default.createElement(t,h({explicitRef:this.refCallback,size:"callback"===this.strategy?null:this.state,disablePlaceholder:e},this.props))}}]),r}(f.default.Component);return r.displayName="SizeMe("+l(e)+")",r.propTypes={onSize:p.PropTypes.func},r.WrappedComponent=e,r}}Object.defineProperty(t,"__esModule",{value:!0});var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(2),f=r(p),m=n(317),v=r(m),g=n(409),E=r(g),y=n(469),x=r(y),T=n(470),b=r(T),w=n(482),_=r(w),R={monitorWidth:!0,monitorHeight:!1,monitorPosition:!1,refreshRate:16,refreshMode:"throttle",noPlaceholder:!1},S=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),d(t,[{key:"render",value:function(){return p.Children.only(this.props.children)}}]),t}(p.Component);S.displayName="SizeMeReferenceWrapper",S.propTypes={children:p.PropTypes.element.isRequired},u.displayName="SizeMePlaceholder",u.propTypes={className:p.PropTypes.string,style:p.PropTypes.object};var M=function(e){function t(t){var n=t.explicitRef,r=t.className,o=t.style,a=t.size,s=t.disablePlaceholder,l=(t.onSize,i(t,["explicitRef","className","style","size","disablePlaceholder","onSize"])),c=null==a||null==a.width&&null==a.height&&null==a.position,d=c&&!s,p={className:r,style:o};null!=a&&(p.size=a);var m=d?f.default.createElement(u,{className:r,style:o}):f.default.createElement(e,h({},p,l));return f.default.createElement(S,{ref:n},m)}return t.displayName="SizeMeRenderer("+l(e)+")",t.propTypes={explicitRef:p.PropTypes.func.isRequired,className:p.PropTypes.string,style:p.PropTypes.object,size:p.PropTypes.shape({width:p.PropTypes.number,height:p.PropTypes.number}),disablePlaceholder:p.PropTypes.bool},t};c.enableSSRBehaviour=!1,c.noPlaceholders=!1,t.default=c},function(e,t,n){function r(e,t,n){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return o(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),i(e,t,{leading:r,maxWait:t,trailing:s})}var i=n(470),o=n(471),a="Expected a function";e.exports=r},function(e,t,n){function r(e,t,n){function r(t){var n=E,r=y;return E=y=void 0,_=t,T=e.apply(r,n)}function c(e){return _=e,b=setTimeout(p,t),R?r(e):T}function h(e){var n=e-w,r=e-_,i=t-n;return S?u(i,x-r):i}function d(e){var n=e-w,r=e-_;return void 0===w||n>=t||n<0||S&&r>=x}function p(){var e=o();return d(e)?f(e):void(b=setTimeout(p,h(e)))}function f(e){return b=void 0,M&&E?r(e):(E=y=void 0,T)}function m(){void 0!==b&&clearTimeout(b),_=0,E=w=y=b=void 0}function v(){return void 0===b?T:f(o())}function g(){var e=o(),n=d(e);if(E=arguments,y=this,w=e,n){if(void 0===b)return c(w);if(S)return b=setTimeout(p,t),r(w)}return void 0===b&&(b=setTimeout(p,t)),T}var E,y,x,T,b,w,_=0,R=!1,S=!1,M=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,i(n)&&(R=!!n.leading,S="maxWait"in n,x=S?l(a(n.maxWait)||0,t):x,M="trailing"in n?!!n.trailing:M),g.cancel=m,g.flush=v,g}var i=n(471),o=n(472),a=n(475),s="Expected a function",l=Math.max,u=Math.min;e.exports=r},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){var r=n(473),i=function(){return r.Date.now()};e.exports=i},function(e,t,n){var r=n(474),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){function r(e){if("number"==typeof e)return e;if(o(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=u.test(e);return n||c.test(e)?h(e.slice(2),n?2:8):l.test(e)?a:+e}var i=n(471),o=n(476),a=NaN,s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,h=parseInt;e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||o(e)&&i(e)==a}var i=n(477),o=n(481),a="[object Symbol]";e.exports=r},function(e,t,n){function r(e){return null==e?void 0===e?l:s:u&&u in Object(e)?o(e):a(e)}var i=n(478),o=n(479),a=n(480),s="[object Null]",l="[object Undefined]",u=i?i.toStringTag:void 0;e.exports=r},function(e,t,n){var r=n(473),i=r.Symbol;e.exports=i},function(e,t,n){function r(e){var t=a.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[l]=n:delete e[l]),i}var i=n(478),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,l=i?i.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return i.call(e)}var r=Object.prototype,i=r.toString;e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return s||(s=(0,a.default)({strategy:"scroll"})),s}Object.defineProperty(t,"__esModule",{value:!0});var o=n(483),a=r(o),s=void 0;t.default=i},function(e,t,n){"use strict";function r(e){return Array.isArray(e)||void 0!==e.length}function i(e){if(Array.isArray(e))return e;var t=[];return s(e,function(e){t.push(e)}),t}function o(e){return e&&1===e.nodeType}function a(e,t,n){var r=e[t];return void 0!==r&&null!==r||void 0===n?r:n}var s=n(484).forEach,l=n(485),u=n(486),c=n(487),h=n(488),d=n(489),p=n(490),f=n(491),m=n(493),v=n(494),g=n(495);e.exports=function(e){function t(e,t,n){function l(e){var t=S.get(e);s(t,function(t){t(e)})}function u(e,t,n){S.add(t,n),e&&n(t)}if(n||(n=t,t=e,e={}),!t)throw new Error("At least one element required.");if(!n)throw new Error("Listener required.");if(o(t))t=[t];else{if(!r(t))return T.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t=i(t)}var c=0,h=a(e,"callOnAdd",_.callOnAdd),d=a(e,"onReady",function(){}),p=a(e,"debug",_.debug);s(t,function(e){m.getState(e)||(m.initState(e),E.set(e));var r=E.get(e);return p&&T.log("Attaching listener to element",r,e),M.isDetectable(e)?(p&&T.log(r,"Already detecable, adding listener."),u(h,e,n),void c++):(p&&T.log(r,"Not detectable."),M.isBusy(e)?(p&&T.log(r,"System busy making it detectable"),u(h,e,n),A[r]=A[r]||[],void A[r].push(function(){c++,c===t.length&&d()})):(p&&T.log(r,"Making detectable..."),M.markBusy(e,!0),R.makeDetectable({debug:p},e,function(e){if(p&&T.log(r,"onElementDetectable"),m.getState(e)){M.markAsDetectable(e),M.markBusy(e,!1),R.addListener(e,l),u(h,e,n);var i=m.getState(e);if(i&&i.startSize){var o=e.offsetWidth,a=e.offsetHeight;i.startSize.width===o&&i.startSize.height===a||l(e)}A[r]&&s(A[r],function(e){e()})}else p&&T.log(r,"Element uninstalled before being detectable.");delete A[r],c++,c===t.length&&d()})))}),c===t.length&&d()}function n(e){if(!e)return T.error("At least one element is required.");if(o(e))e=[e];else{if(!r(e))return T.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=i(e)}s(e,function(e){S.removeAllListeners(e),R.uninstall(e),m.cleanState(e)})}e=e||{};var E;if(e.idHandler)E={get:function(t){return e.idHandler.get(t,!0)},set:e.idHandler.set};else{var y=c(),x=h({idGenerator:y,stateHandler:m});E=x}var T=e.reporter;if(!T){var b=T===!1;T=d(b)}var w=a(e,"batchProcessor",f({reporter:T})),_={};_.callOnAdd=!!a(e,"callOnAdd",!0),_.debug=!!a(e,"debug",!1);var R,S=u(E),M=l({stateHandler:m}),C=a(e,"strategy","object"),H={reporter:T,batchProcessor:w,stateHandler:m,idHandler:E};if("scroll"===C&&(p.isLegacyOpera()?(T.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),C="object"):p.isIE(9)&&(T.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),C="object")),"scroll"===C)R=g(H);else{if("object"!==C)throw new Error("Invalid strategy name: "+C);R=v(H)}var A={};return{listenTo:t,removeListener:S.removeListener,removeAllListeners:S.removeAllListeners,uninstall:n}}},function(e,t){"use strict";var n=e.exports={};n.forEach=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n]);if(r)return r}}},function(e,t){"use strict";e.exports=function(e){function t(e){var t=o(e);return t&&!!t.isDetectable}function n(e){o(e).isDetectable=!0}function r(e){return!!o(e).busy}function i(e,t){o(e).busy=!!t}var o=e.stateHandler.getState;return{isDetectable:t,markAsDetectable:n,isBusy:r,markBusy:i}}},function(e,t){"use strict";e.exports=function(e){function t(t){var n=e.get(t);return void 0===n?[]:o[n]||[]}function n(t,n){var r=e.get(t);o[r]||(o[r]=[]),o[r].push(n)}function r(e,n){for(var r=t(e),i=0,o=r.length;i<o;++i)if(r[i]===n){r.splice(i,1);break}}function i(e){var n=t(e);n&&(n.length=0)}var o={};return{get:t,add:n,removeListener:r,removeAllListeners:i}}},function(e,t){"use strict";e.exports=function(){function e(){return t++}var t=1;return{generate:e}}},function(e,t){"use strict";e.exports=function(e){function t(e){var t=i(e);return t&&void 0!==t.id?t.id:null}function n(e){var t=i(e);if(!t)throw new Error("setId required the element to have a resize detection state.");var n=r.generate();return t.id=n,n}var r=e.idGenerator,i=e.stateHandler.getState;return{get:t,set:n}}},function(e,t){"use strict";e.exports=function(e){function t(){}var n={log:t,warn:t,error:t};if(!e&&window.console){var r=function(e,t){e[t]=function(){var e=console[t];if(e.apply)e.apply(console,arguments);else for(var n=0;n<arguments.length;n++)e(arguments[n])}};r(n,"log"),r(n,"warn"),r(n,"error")}return n}},function(e,t){"use strict";var n=e.exports={};n.isIE=function(e){function t(){var e=navigator.userAgent.toLowerCase();return e.indexOf("msie")!==-1||e.indexOf("trident")!==-1||e.indexOf(" edge/")!==-1}if(!t())return!1;if(!e)return!0;var n=function(){var e,t=3,n=document.createElement("div"),r=n.getElementsByTagName("i");do n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->";while(r[0]);return t>4?t:e}();return e===n},n.isLegacyOpera=function(){return!!window.opera}},function(e,t,n){"use strict";function r(){function e(e,t){t||(t=e,e=0),e>o?o=e:e<a&&(a=e),r[e]||(r[e]=[]),r[e].push(t),i++}function t(){for(var e=a;e<=o;e++)for(var t=r[e],n=0;n<t.length;n++){var i=t[n];i()}}function n(){return i}var r={},i=0,o=0,a=0;return{add:e,process:t,size:n}}var i=n(492);e.exports=function(e){function t(e,t){!f&&h&&c&&0===p.size()&&a(),p.add(e,t)}function n(){for(f=!0;p.size();){var e=p;p=r(),e.process()}f=!1}function o(e){f||(void 0===e&&(e=c),d&&(s(d),d=null),e?a():n())}function a(){d=l(n)}function s(e){var t=clearTimeout;return t(e)}function l(e){var t=function(e){return setTimeout(e,0)};return t(e)}e=e||{};var u=e.reporter,c=i.getOption(e,"async",!0),h=i.getOption(e,"auto",!0);h&&!c&&(u&&u.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),c=!0);var d,p=r(),f=!1;return{add:t,force:o}}},function(e,t){"use strict";function n(e,t,n){var r=e[t];return void 0!==r&&null!==r||void 0===n?r:n}var r=e.exports={};r.getOption=n},function(e,t){"use strict";function n(e){return e[o]={},r(e)}function r(e){return e[o]}function i(e){delete e[o]}var o="_erd";e.exports={initState:n,getState:r,cleanState:i}},function(e,t,n){"use strict";var r=n(490);e.exports=function(e){function t(e,t){function n(){t(e)}if(!i(e))throw new Error("Element is not detectable by this strategy.");if(r.isIE(8))l(e).object={proxy:n},e.attachEvent("onresize",n);else{var o=i(e);o.contentDocument.defaultView.addEventListener("resize",n)}}function n(e,t,n){function i(e,t){function n(){function n(){if("static"===u.position){e.style.position="relative";var t=function(e,t,n,r){function i(e){return e.replace(/[^-\d\.]/g,"")}var o=n[r];"auto"!==o&&"0"!==i(o)&&(e.warn("An element that is positioned static has style."+r+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",t),t.style[r]=0)};t(a,e,u,"top"),t(a,e,u,"right"),t(a,e,u,"bottom"),t(a,e,u,"left")}}function s(){function r(e,t){return e.contentDocument?void t(e.contentDocument):void setTimeout(function(){r(e,t)},100)}o||n();var i=this;r(i,function(n){t(e)})}""!==u.position&&(n(u),o=!0);var c=document.createElement("object");c.style.cssText=i,c.tabIndex=-1,c.type="text/html",c.onload=s,r.isIE()||(c.data="about:blank"),e.appendChild(c),l(e).object=c,r.isIE()&&(c.data="about:blank")}var i="display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; padding: 0; margin: 0; opacity: 0; z-index: -1000; pointer-events: none;",o=!1,u=window.getComputedStyle(e),c=e.offsetWidth,h=e.offsetHeight;l(e).startSize={width:c,height:h},s?s.add(n):n()}n||(n=t,t=e,e=null),e=e||{};e.debug;r.isIE(8)?n(t):i(t,n)}function i(e){return l(e).object}function o(e){r.isIE(8)?e.detachEvent("onresize",l(e).object.proxy):e.removeChild(i(e)),delete l(e).object}e=e||{};var a=e.reporter,s=e.batchProcessor,l=e.stateHandler.getState;if(!a)throw new Error("Missing required dependency: reporter.");return{makeDetectable:n,addListener:t,uninstall:o}}},function(e,t,n){"use strict";var r=n(484).forEach;e.exports=function(e){function t(){var e=500,t=500,n=document.createElement("div");n.style.cssText="position: absolute; width: "+2*e+"px; height: "+2*t+"px; visibility: hidden; margin: 0; padding: 0;";var r=document.createElement("div");r.style.cssText="position: absolute; width: "+e+"px; height: "+t+"px; overflow: scroll; visibility: none; top: "+3*-e+"px; left: "+3*-t+"px; visibility: hidden; margin: 0; padding: 0;",r.appendChild(n),document.body.insertBefore(r,document.body.firstChild);var i=e-r.clientWidth,o=t-r.clientHeight;return document.body.removeChild(r),{width:i,height:o}}function n(e,t){function n(t,n){n=n||function(e){document.head.appendChild(e)};var r=document.createElement("style");return r.innerHTML=t,r.id=e,n(r),r}if(!document.getElementById(e)){var r=t+"_animation",i=t+"_animation_active",o="/* Created by the element-resize-detector library. */\n";o+="."+t+" > div::-webkit-scrollbar { display: none; }\n\n",o+="."+i+" { -webkit-animation-duration: 0.1s; animation-duration: 0.1s; -webkit-animation-name: "+r+"; animation-name: "+r+"; }\n",o+="@-webkit-keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",o+="@keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",n(o)}}function i(e){e.className+=" "+E+"_animation_active"}function o(e,t,n){if(e.addEventListener)e.addEventListener(t,n);else{if(!e.attachEvent)return d.error("[scroll] Don't know how to add event listeners.");e.attachEvent("on"+t,n)}}function a(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n);else{if(!e.detachEvent)return d.error("[scroll] Don't know how to remove event listeners.");e.detachEvent("on"+t,n)}}function s(e){return f(e).container.childNodes[0].childNodes[0].childNodes[0]}function l(e){return f(e).container.childNodes[0].childNodes[0].childNodes[1]}function u(e,t){var n=f(e).listeners;if(!n.push)throw new Error("Cannot add listener to an element that is not detectable.");f(e).listeners.push(t)}function c(e,t,n){function a(){if(e.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(m.get(t),"Scroll: "),d.log.apply)d.log.apply(null,n);else for(var r=0;r<n.length;r++)d.log(n[r])}}function u(e){function t(e){return e===e.ownerDocument.body||e.ownerDocument.body.contains(e)}return!t(e)}function c(e){var t=f(e).container.childNodes[0];return getComputedStyle(t).width.indexOf("px")===-1}function h(){var e=getComputedStyle(t),n={};return n.position=e.position,n.width=t.offsetWidth,n.height=t.offsetHeight,n.top=e.top,n.right=e.right,n.bottom=e.bottom,n.left=e.left,n.widthCSS=e.width,n.heightCSS=e.height,n}function g(){var e=h();f(t).startSize={width:e.width,height:e.height},a("Element start size",f(t).startSize)}function y(){f(t).listeners=[]}function x(){if(a("storeStyle invoked."),!f(t))return void a("Aborting because element has been uninstalled");var e=h();f(t).style=e}function T(e,t,n){f(e).lastWidth=t,f(e).lastHeight=n}function b(e){return s(e).childNodes[0]}function w(){return 2*v.width+1}function _(){return 2*v.height+1}function R(e){return e+10+w()}function S(e){return e+10+_()}function M(e){return 2*e+w()}function C(e){return 2*e+_()}function H(e,t,n){var r=s(e),i=l(e),o=R(t),a=S(n),u=M(t),c=C(n);r.scrollLeft=o,r.scrollTop=a,i.scrollLeft=u,i.scrollTop=c}function A(){var e=f(t).container;if(!e){e=document.createElement("div"),e.className=E,e.style.cssText="visibility: hidden; display: inline; width: 0px; height: 0px; z-index: -1; overflow: hidden; margin: 0; padding: 0;",f(t).container=e,i(e),t.appendChild(e);var n=function(){f(t).onRendered&&f(t).onRendered()};o(e,"animationstart",n),f(t).onAnimationStart=n}return e}function P(){function e(){var e=f(t).style;if("static"===e.position){t.style.position="relative";var n=function(e,t,n,r){function i(e){return e.replace(/[^-\d\.]/g,"")}var o=n[r];"auto"!==o&&"0"!==i(o)&&(e.warn("An element that is positioned static has style."+r+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",t),t.style[r]=0)};n(d,t,e,"top"),n(d,t,e,"right"),n(d,t,e,"bottom"),n(d,t,e,"left")}}function n(e,t,n,r){return e=e?e+"px":"0",t=t?t+"px":"0",n=n?n+"px":"0",r=r?r+"px":"0","left: "+e+"; top: "+t+"; right: "+r+"; bottom: "+n+";"}function r(){f(t).onExpand&&f(t).onExpand()}function i(){f(t).onShrink&&f(t).onShrink()}if(a("Injecting elements"),!f(t))return void a("Aborting because element has been uninstalled");e();var s=f(t).container;s||(s=A());var l=v.width,u=v.height,c="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; width: 100%; height: 100%; left: 0px; top: 0px;",h="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; "+n(-(1+l),-(1+u),-u,-l),p="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",m="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",g="position: absolute; left: 0; top: 0;",y="position: absolute; width: 200%; height: 200%;",x=document.createElement("div"),T=document.createElement("div"),b=document.createElement("div"),w=document.createElement("div"),_=document.createElement("div"),R=document.createElement("div");x.dir="ltr",x.style.cssText=c,x.className=E,T.className=E,T.style.cssText=h,b.style.cssText=p,w.style.cssText=g,_.style.cssText=m,R.style.cssText=y,b.appendChild(w),_.appendChild(R),T.appendChild(b),T.appendChild(_),x.appendChild(T),s.appendChild(x),o(b,"scroll",r),o(_,"scroll",i),f(t).onExpandScroll=r,f(t).onShrinkScroll=i}function L(){function n(e,t,n){var r=b(e),i=R(t),o=S(n);r.style.width=i+"px",r.style.height=o+"px"}function i(r){var i=t.offsetWidth,s=t.offsetHeight;a("Storing current size",i,s),T(t,i,s),p.add(0,function(){if(!f(t))return void a("Aborting because element has been uninstalled");if(!o())return void a("Aborting because element container has not been initialized");if(e.debug){var r=t.offsetWidth,l=t.offsetHeight;r===i&&l===s||d.warn(m.get(t),"Scroll: Size changed before updating detector elements.")}n(t,i,s)}),p.add(1,function(){return f(t)?o()?void H(t,i,s):void a("Aborting because element container has not been initialized"):void a("Aborting because element has been uninstalled")}),r&&p.add(2,function(){return f(t)?o()?void r():void a("Aborting because element container has not been initialized"):void a("Aborting because element has been uninstalled")})}function o(){return!!f(t).container}function u(){function e(){return void 0===f(t).lastNotifiedWidth}a("notifyListenersIfNeeded invoked");var n=f(t);return e()&&n.lastWidth===n.startSize.width&&n.lastHeight===n.startSize.height?a("Not notifying: Size is the same as the start size, and there has been no notification yet."):n.lastWidth===n.lastNotifiedWidth&&n.lastHeight===n.lastNotifiedHeight?a("Not notifying: Size already notified"):(a("Current size not notified, notifying..."),n.lastNotifiedWidth=n.lastWidth,n.lastNotifiedHeight=n.lastHeight,void r(f(t).listeners,function(e){e(t)}))}function h(){if(a("startanimation triggered."),c(t))return void a("Ignoring since element is still unrendered...");a("Element rendered.");var e=s(t),n=l(t);0!==e.scrollLeft&&0!==e.scrollTop&&0!==n.scrollLeft&&0!==n.scrollTop||(a("Scrollbars out of sync. Updating detector elements..."),i(u))}function v(){if(a("Scroll detected."),c(t))return void a("Scroll event fired while unrendered. Ignoring...");var e=t.offsetWidth,n=t.offsetHeight;e!==t.lastWidth||n!==t.lastHeight?(a("Element size changed."),i(u)):a("Element size has not changed ("+e+"x"+n+").")}if(a("registerListenersAndPositionElements invoked."),!f(t))return void a("Aborting because element has been uninstalled");f(t).onRendered=h,f(t).onExpand=v,f(t).onShrink=v;var g=f(t).style;n(t,g.width,g.height)}function k(){if(a("finalizeDomMutation invoked."),!f(t))return void a("Aborting because element has been uninstalled");var e=f(t).style;T(t,e.width,e.height),H(t,e.width,e.height)}function D(){n(t)}function F(){a("Installing..."),y(),g(),p.add(0,x),p.add(1,P),p.add(2,L),p.add(3,k),p.add(4,D)}n||(n=t,t=e,e=null),e=e||{},a("Making detectable..."),u(t)?(a("Element is detached"),A(),a("Waiting until element is attached..."),f(t).onRendered=function(){a("Element is now attached"),F()}):F()}function h(e){var t=f(e);t&&(t.onExpandScroll&&a(s(e),"scroll",t.onExpandScroll),t.onShrinkScroll&&a(l(e),"scroll",t.onShrinkScroll),t.onAnimationStart&&a(t.container,"animationstart",t.onAnimationStart),t.container&&e.removeChild(t.container))}e=e||{};var d=e.reporter,p=e.batchProcessor,f=e.stateHandler.getState,m=(e.stateHandler.hasState,e.idHandler);if(!p)throw new Error("Missing required dependency: batchProcessor");if(!d)throw new Error("Missing required dependency: reporter.");var v=t(),g="erd_scroll_detection_scrollbar_style",E="erd_scroll_detection_container";return n(g,E),{makeDetectable:c,addListener:u,uninstall:h}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(109),o=r(i),a=n(112),s=r(a),l=n(113),u=r(l),c=n(117),h=r(c),d=n(118),p=r(d),f=n(2),m=r(f),v=void 0,g=void 0,E=void 0,y=void 0,x=0,T=function(e){function t(e){(0,s.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.state={boost:0,audioUrl:e.audioUrl,playing:!1},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.playAudio(this.props.audioUrl),this.timerID=setInterval(function(){return e.getBoost()},10),this.setState({isPlaying:!0,audioUrl:this.props.audioUrl})}},{key:"componentDidUpdate",value:function(){var e=this;this.state.isPlaying&&this.state.audioUrl!==this.props.audioUrl&&(this.stopAudio(),clearInterval(this.timerID),this.setState({isPlaying:!1,audioUrl:this.props.audioUrl}),this.playAudio(this.props.audioUrl),this.timerID=setInterval(function(){return e.getBoost()},10),this.setState({isPlaying:!0}))}},{key:"playAudio",value:function(e){var t=e&&e,n=new Array,r=void 0;try{"function"==typeof webkitAudioContext||"webkitAudioContext"in window?"undefined"!=typeof v&&(v=new webkitAudioContext):v=new AudioContext}catch(e){console.log("Web Audio API is not supported in this browser ",e)}r=new XMLHttpRequest,r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){v&&v.decodeAudioData&&v.decodeAudioData(r.response,function(e){return e?(E=v.createScriptProcessor(2048,1,1),E.buffer=e,E.connect(v.destination),y=v.createAnalyser(),y.smoothingTimeConstant=.6,y.fftSize=512,g=v.createBufferSource(),g.buffer=e,g.loop=!0,g.connect(y),y.connect(E),g.connect(v.destination),g.start(0),void(E.onaudioprocess=function(e){n=new Uint8Array(y.frequencyBinCount),y.getByteFrequencyData(n),x=0;for(var t=0;t<n.length;t++)x+=n[t];x/=n.length})):void console.log("Error decoding file data")},function(e){console.log("Decoding error:"+e)})},r.onerror=function(){console.log("buffer: XHR error")},r.send()}},{key:"getBoost",value:function(){this.setState({boost:x})}},{key:"stopAudio",value:function(){"undefined"!=typeof g&&(g.disconnect(y),y.disconnect(E),g.disconnect(v.destination))}},{key:"componentWillUnmount",value:function(){this.stopAudio(),clearInterval(this.timerID)}},{key:"render",value:function(){var e=this.props.children.props.videoInput;return m.default.createElement("div",{id:"audioValue",data:this.state.boost},m.default.createElement(e,{width:this.props.children.props.width,height:this.props.children.props.height,audioData:this.state.boost}))}}]),t}(m.default.Component);t.default=T},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=n(109),l=i(s),u=n(112),c=i(u),h=n(113),d=i(h),p=n(117),f=i(p),m=n(118),v=i(m),g=n(2),E=i(g),y=n(498),x=i(y),T=n(126),b=r(T),w=(a=o=function(e){function t(e,n){(0,c.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return r.cameraPosition=new b.Vector3(0,0,5),r.state={cubeRotation:new b.Euler},r._onAnimate=function(){r.setState({cubeRotation:new b.Euler(r.state.cubeRotation.x+.1,r.state.cubeRotation.y+.1,0)})},r}return(0,v.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.width,n=e.height;return E.default.createElement(x.default,{mainCamera:"camera",width:t,height:n,onAnimate:this._onAnimate},E.default.createElement("scene",null,E.default.createElement("perspectiveCamera",{name:"camera",fov:75,aspect:t/n,near:.1,far:1e3,position:this.cameraPosition}),E.default.createElement("mesh",{rotation:this.state.cubeRotation},E.default.createElement("boxGeometry",{width:1,height:1,depth:1}),E.default.createElement("meshBasicMaterial",{color:65280}))))}}]),t}(E.default.Component),o.propTypes={width:E.default.PropTypes.number.isRequired,height:E.default.PropTypes.number.isRequired},a);t.default=w},function(e,t,n){"use strict";function r(e){
return e&&e.__esModule?e:{default:e}}var i=n(499),o=r(i);e.exports=o.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}var o,a,s=n(199),l=i(s),u=n(109),c=i(u),h=n(112),d=i(h),p=n(113),f=i(p),m=n(117),v=i(m),g=n(118),E=i(g),y=n(2),x=i(y),T=n(500),b=i(T),w=n(126),_=r(w),R=n(29),S=i(R),M=n(215),C=i(M),H=x.default.PropTypes,A=(a=o=function(e){function t(e,n){(0,d.default)(this,t);var r=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e,n));return r.shouldComponentUpdate=b.default.shouldComponentUpdate,r._onRecreateCanvas=function(){r.setState({canvasKey:r.state.canvasKey+1})},r._canvasRef=function(e){r._canvas=e,r.props.canvasRef&&r.props.canvasRef(e)},r.state={canvasKey:0},r}return(0,E.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.react3Renderer=new S.default,this._render()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props;t.canvasRef!==e.canvasRef&&(t.canvasRef&&t.canvasRef(null),e.canvasRef&&e.canvasRef(this._canvas))}},{key:"componentDidUpdate",value:function(){this._render()}},{key:"componentWillUnmount",value:function(){this.react3Renderer.dispose(),delete this.react3Renderer}},{key:"_render",value:function(){var e=this._canvas,t=(0,l.default)({},this.props);delete t.canvasStyle,delete t.canvasRef,this.react3Renderer.render(x.default.createElement("react3",(0,l.default)({},t,{onRecreateCanvas:this._onRecreateCanvas}),this.props.children),e)}},{key:"render",value:function(){var e=this.state.canvasKey;return x.default.createElement("canvas",{ref:this._canvasRef,key:e,width:this.props.width,height:this.props.height,style:(0,l.default)({},this.props.canvasStyle,{width:this.props.width,height:this.props.height})})}}]),t}(x.default.Component),o.propTypes={context:H.string,width:H.number.isRequired,height:H.number.isRequired,children:H.node,canvasStyle:H.any,gammaInput:H.bool,gammaOutput:H.bool,sortObjects:H.bool,mainCamera:H.string,onAnimate:H.func,clearColor:H.oneOfType([(0,C.default)(_.Color),H.number,H.string]),shadowMapEnabled:H.bool,shadowMapType:H.oneOf([_.BasicShadowMap,_.PCFShadowMap,_.PCFSoftShadowMap]),shadowMapCullFace:H.oneOf([_.CullFaceNone,_.CullFaceBack,_.CullFaceFront,_.CullFaceFrontBack]),shadowMapDebug:H.bool,pixelRatio:H.number,antialias:H.oneOfType([H.bool,H.number]),canvasRef:H.func},o.defaultProps={context:"3d"},o.findTHREEObject=S.default.findTHREEObject,o.eventDispatcher=S.default.eventDispatcher,a);e.exports=A},function(e,t,n){"use strict";var r=n(501),i={shouldComponentUpdate:function(e,t){return r(this,e,t)}};e.exports=i},function(e,t,n){"use strict";function r(e,t,n){return!i(e.props,t)||!i(e.state,n)}var i=n(189);e.exports=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(109),a=i(o),s=n(112),l=i(s),u=n(113),c=i(u),h=n(117),d=i(h),p=n(118),f=i(p),m=n(2),v=i(m),g=n(498),E=i(g),y=n(126),x=r(y),T=n(503),b=i(T),w=n(504),_=i(w),R=function(e){function t(e,n){(0,l.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e,n));return r._onUpdateColorButtonPress=function(){r.setState({cubeColor:Math.floor(16777215*Math.random())})},r._onRenderButtonPress=function(){r._renderTrigger()},r._onManualButtonPress=function(){r.setState({forceManual:!r.state.forceManual})},r.cameraPosition=new x.Vector3(0,0,5),r._onManualRenderTriggerCreated=function(e){r._renderTrigger=e},r.state={cubeColor:65280,forceManual:!0},r}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;this._renderTrigger(),setTimeout(function(){e.setState({cubeColor:255})},20),setTimeout(function(){e.setState({cubeColor:16711680},function(){e._renderTrigger()})},1e3)}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=this.state,i=r.forceManual,o=r.cubeColor;return v.default.createElement("div",null,v.default.createElement("div",null,v.default.createElement(_.default,{onUpdateColorButtonPress:this._onUpdateColorButtonPress,onRenderButtonPress:this._onRenderButtonPress,onManualButtonPress:this._onManualButtonPress,forceManual:i,cubeColor:o})),v.default.createElement(E.default,{width:t,height:n,forceManualRender:i,onManualRenderTriggerCreated:this._onManualRenderTriggerCreated,mainCamera:"camera"},v.default.createElement("scene",null,v.default.createElement("perspectiveCamera",{name:"camera",fov:75,aspect:t/n,near:.1,far:1e3,position:this.cameraPosition}),v.default.createElement("mesh",null,v.default.createElement("boxGeometry",{width:1,height:1,depth:1}),v.default.createElement("meshBasicMaterial",{color:o})))))}}]),t}(b.default);t.default=R},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=n(109),s=r(a),l=n(112),u=r(l),c=n(117),h=r(c),d=n(118),p=r(d),f=n(2),m=r(f),v=m.default.PropTypes,g=(o=i=function(e){function t(){return(0,u.default)(this,t),(0,h.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),t}(m.default.Component),i.propTypes={width:v.number.isRequired,height:v.number.isRequired},o);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=n(109),s=r(a),l=n(112),u=r(l),c=n(113),h=r(c),d=n(117),p=r(d),f=n(118),m=r(f),v=n(2),g=r(v),E=g.default.PropTypes,y=(o=i=function(e){function t(e,n){(0,u.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));return r._onColorButtonPress=function(){r.props.onUpdateColorButtonPress(),r.setState({colorButtonPressed:!0})},r._onTriggerPress=function(){r.setState({colorButtonPressed:!1}),r.props.onRenderButtonPress()},r._manualButtonPress=function(){r.setState({colorButtonPressed:!1}),r.props.onManualButtonPress()},r.state={colorButtonPressed:!1},r}return(0,m.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e=this.props,t=e.forceManual,n=e.cubeColor,r=this.state.colorButtonPressed,i={};return r&&t&&(i.fontWeight="bold"),g.default.createElement("div",{style:{position:"absolute",textAlign:"center",top:0,width:"100%",padding:5,color:"white",zIndex:100}},g.default.createElement("h2",null,"Manual rendering"),'If automatic rendering is off, the canvas will re-render only when you press the "Trigger render" button.',g.default.createElement("br",null),"This way you can save battery life or have finer controls for rendering.",g.default.createElement("br",null),"Check your CPU profiler with automatic rendering on/off :)",g.default.createElement("br",null),g.default.createElement("br",null),g.default.createElement("button",{onClick:this._onColorButtonPress},"Update cube color state"),g.default.createElement("span",{style:{width:15,minHeight:15,marginLeft:5,display:"inline-block",background:"rgb(\n            "+(n>>16&255)+",\n            "+(n>>8&255)+",\n            "+(255&n)+")"}}," "),g.default.createElement("br",null),g.default.createElement("button",{onClick:this._onTriggerPress,style:i,disabled:!t},r&&t?"TRIGGER RENDER":"Trigger render"),g.default.createElement("br",null),g.default.createElement("button",{onClick:this._manualButtonPress},"Turn automatic rendering ",t?"ON":"OFF"))}}]),t}(g.default.Component),i.propTypes={onUpdateColorButtonPress:E.func.isRequired,onRenderButtonPress:E.func.isRequired,onManualButtonPress:E.func.isRequired,forceManual:E.bool,cubeColor:E.number.isRequired},o);t.default=y},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){W.subVectors(t.position,e.position);var r=W.length();if(0!==r){var i=W.multiplyScalar(1-n/r),o=i.multiplyScalar(.5);e.position.add(o),t.position.sub(o)}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(199),s=i(a),l=n(109),u=i(l),c=n(112),h=i(c),d=n(113),p=i(d),f=n(117),m=i(f),v=n(118),g=i(v),E=n(2),y=i(E),x=n(317),T=i(x),b=n(126),w=r(b),_=n(506),R=i(_),S=n(498),M=i(S),C=n(503),H=i(C),A=n(507),P=i(A),L=n(508),k=i(L),D=n(509),F=i(D),O=n(520),B=i(O),N=n(521),I=i(N),U=60,V=981*1.4,z=new w.Vector3(0,-V,0).multiplyScalar(k.default.MASS),j=.018,G=j*j,W=new w.Vector3,q=new w.Vector3,X=function(e){function t(e,n){(0,h.default)(this,t);var r=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e,n));r._toggleRotate=function(){r.setState({rotate:!r.state.rotate})},r._toggleWind=function(){r.setState({wind:!r.state.wind})},r._toggleSphere=function(){r.setState({sphere:!r.state.sphere})},r._togglePins=function(){r.pins=r.pinsFormation[~~(Math.random()*r.pinsFormation.length)]},r._onAnimate=function(){r.controls.update();var e=r.state.minTimePerFrame,t=void 0;if(t=e>0?Math.round(Date.now()/e)*e:Date.now(),t!==r.state.time){var n=20*Math.cos(t/7e3)+40;r.windForce.set(Math.sin(t/2e3),Math.cos(t/3e3),Math.sin(t/1e3)).normalize().multiplyScalar(n),r._simulate(t);var i=M.default.findTHREEObject(r._clothGeometry),o=2e-4*t,a=r.cloth.particles,s=void 0,l=void 0;for(l=0,s=a.length;l<s;++l)i.vertices[l].copy(a[l].position);i.computeFaceNormals(),i.computeVertexNormals(),i.normalsNeedUpdate=!0,i.verticesNeedUpdate=!0;var u={time:t,spherePosition:r.ballPosition};r.state.rotate&&(u.cameraPosition=new w.Vector3(1500*Math.cos(o),r.state.cameraPosition.y,1500*Math.sin(o))),r.setState(u),r.stats.update()}},r._clothRef=function(e){r._clothGeometry=e},r._onFrameChange=function(e){r.setState({minTimePerFrame:+e.target.value})},r.state=(0,s.default)({},r.state,{minTimePerFrame:0,rotate:!0,wind:!0,sphere:!1});var i=10,o=10;r.cloth=new k.default(i,o);var a=[],l=[6];return a.push(l),l=[0,1,2,3,4,5,6,7,8,9,10],a.push(l),l=[0],a.push(l),l=[],a.push(l),l=[0,r.cloth.w],a.push(l),l=a[1],r.pins=l,r.pinsFormation=a,r.fog=new w.Fog(13426943,500,1e4),r.windForce=new w.Vector3(0,0,0),r.state=(0,s.default)({},r.state,{ballPosition:new w.Vector3(0,-45,0),cameraPosition:new w.Vector3(0,50,1500)}),r.scenePosition=new w.Vector3(0,0,0),r}return(0,g.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=new I.default(this.refs.mainCamera,T.default.findDOMNode(this.refs.react3));t.rotateSpeed=1,t.zoomSpeed=1.2,t.panSpeed=.8,t.noZoom=!1,t.noPan=!1,t.staticMoving=!0,t.dynamicDampingFactor=.3,t.addEventListener("change",function(){e.setState({cameraPosition:e.refs.mainCamera.position})}),this.controls=t,this.stats=new R.default,this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",this.refs.container.appendChild(this.stats.domElement)}},{key:"componentWillUnmount",value:function(){delete this.stats,this.controls.dispose(),delete this.controls}},{key:"_simulate",value:function(e){if(!this.lastTime)return void(this.lastTime=e);var t=void 0,n=void 0,r=void 0,i=void 0,a=void 0,s=void 0,l=M.default.findTHREEObject(this._clothGeometry),u=M.default.findTHREEObject(this.refs.sphere);if(this.state.wind){var c=void 0,h=l.faces,d=void 0;for(r=this.cloth.particles,t=0,n=h.length;t<n;t++)c=h[t],d=c.normal,q.copy(d).normalize().multiplyScalar(d.dot(this.windForce)),r[c.a].addForce(q),r[c.b].addForce(q),r[c.c].addForce(q)}for(r=this.cloth.particles,t=0,n=r.length;t<n;t++)i=r[t],i.addForce(z),i.integrate(G);for(a=this.cloth.constrains,n=a.length,t=0;t<n;t++)s=a[t],o(s[0],s[1],s[2]);var p=this.state.ballPosition.clone();if(p.z=90*-Math.sin(Date.now()/600),p.x=70*Math.cos(Date.now()/400),u.visible)for(r=this.cloth.particles,t=0,n=r.length;t<n;t++){i=r[t];var f=i.position;W.subVectors(f,p),W.length()<U&&(W.normalize().multiplyScalar(U),f.copy(p).add(W))}for(r=this.cloth.particles,t=0,n=r.length;t<n;t++){i=r[t];var m=i.position;m.y<-250&&(m.y=-250)}for(t=0,n=this.pins.length;t<n;t++){var v=this.pins[t],g=r[v];g.position.copy(g.original),g.previous.copy(g.original)}this.setState({ballPosition:p})}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=this.state.minTimePerFrame;return y.default.createElement("div",{ref:"container"},y.default.createElement(P.default,{toggleRotate:this._toggleRotate,toggleWind:this._toggleWind,toggleSphere:this._toggleSphere,togglePins:this._togglePins,rotating:this.state.rotate,winding:this.state.wind,balling:this.state.sphere,onFrameChange:this._onFrameChange,minTimePerFrame:r}),y.default.createElement(M.default,{ref:"react3",width:t,height:n,antialias:!0,pixelRatio:window.devicePixelRatio,clearColor:this.fog.color,gammaInput:!0,gammaOutput:!0,shadowMapEnabled:!0,shadowMapDebug:!0,mainCamera:"mainCamera",onAnimate:this._onAnimate},y.default.createElement("scene",{fog:this.fog},y.default.createElement("perspectiveCamera",{name:"mainCamera",fov:30,aspect:t/n,ref:"mainCamera",position:this.state.cameraPosition,near:1,far:1e4,lookAt:this.state.rotate?this.scenePosition:null}),y.default.createElement(F.default,{clothRef:this._clothRef,cloth:this.cloth}),y.default.createElement(B.default,{ref:"sphere",visible:this.state.sphere,position:this.state.ballPosition}))))}}]),t}(H.default);t.default=X},function(e,t,n){var r=function(){var e=Date.now(),t=e,n=0,r=1/0,i=0,o=0,a=1/0,s=0,l=0,u=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(e){e.preventDefault(),E(++u%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var h=document.createElement("div");h.id="fps",h.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(h);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",h.appendChild(d);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",h.appendChild(p);p.children.length<74;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(f)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(m);var v=document.createElement("div");v.id="msText",v.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",v.innerHTML="MS",m.appendChild(v);var g=document.createElement("div");for(g.id="msGraph",g.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(g);g.children.length<74;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#131",g.appendChild(f)}var E=function(e){switch(u=e){case 0:h.style.display="block",m.style.display="none";break;case 1:h.style.display="none",m.style.display="block"}},y=function(e,t){var n=e.appendChild(e.firstChild);n.style.height=t+"px"};return{REVISION:12,domElement:c,setMode:E,begin:function(){e=Date.now()},end:function(){var u=Date.now();return n=u-e,r=Math.min(r,n),i=Math.max(i,n),v.textContent=n+" MS ("+r+"-"+i+")",y(g,Math.min(30,30-n/200*30)),l++,u>t+1e3&&(o=Math.round(1e3*l/(u-t)),a=Math.min(a,o),s=Math.max(s,o),d.textContent=o+" FPS ("+a+"-"+s+")",y(p,Math.min(30,30-o/100*30)),t=u,l=0),u},update:function(){e=this.end()}}};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=n(109),s=r(a),l=n(112),u=r(l),c=n(113),h=r(c),d=n(117),p=r(d),f=n(118),m=r(f),v=n(2),g=r(v),E=g.default.PropTypes,y=(o=i=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e={textDecoration:"underline",cursor:"pointer"},t=this.props,n=t.toggleRotate,r=t.toggleWind,i=t.toggleSphere,o=t.togglePins,a=t.minTimePerFrame,s=t.onFrameChange,l=t.rotating,u=t.winding,c=t.balling;return g.default.createElement("div",{style:{textAlign:"center",padding:10,zIndex:10,width:"100%",position:"absolute",color:"#000"}},g.default.createElement("a",{href:"http://threejs.org",style:{color:"#0080ff"}},"three.js")," - Simple Cloth Simulation",g.default.createElement("br",null),"Verlet integration with Constrains relaxation",g.default.createElement("br",null),"Toggle: ",g.default.createElement("a",{onClick:n,style:e},"Camera",l?"*":null)," |",g.default.createElement("span",null," ",g.default.createElement("a",{onClick:r,style:e},"Wind",u?"*":null))," |",g.default.createElement("span",null," ",g.default.createElement("a",{onClick:i,style:e},"Ball",c?"*":null))," |",g.default.createElement("span",null," ",g.default.createElement("a",{onClick:o,style:e},"Pins"))," |",g.default.createElement("span",null," Time between frames (ms): ",g.default.createElement("input",{onChange:s,value:a,type:"number",style:{width:40},min:"0"})," "),g.default.createElement("br",null),g.default.createElement("span",null,"Note: add some time between frames (e.g. 60ms) if you would like to inspect the scene through react devtools, because updating every frame kills the addon."))}}]),t}(g.default.Component),i.propTypes={toggleWind:E.func.isRequired,toggleSphere:E.func.isRequired,togglePins:E.func.isRequired,toggleRotate:E.func.isRequired,onFrameChange:E.func.isRequired,minTimePerFrame:E.number.isRequired,rotating:E.bool.isRequired,winding:E.bool.isRequired,balling:E.bool.isRequired},o);t.default=y},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return function(n,r){var i=(n-.5)*e,o=(r+.5)*t,a=0;return new p.Vector3(i,o,a)}}Object.defineProperty(t,"__esModule",{value:!0});var a,s,l=n(112),u=i(l),c=n(113),h=i(c),d=n(126),p=r(d),f=.03,m=1-f,v=.1,g=25,E=10,y=10,x=o(g*E,g*y),T=function(){function e(t,n,r,i){(0,u.default)(this,e),this.position=x(t,n),this.previous=x(t,n),this.original=x(t,n),this.a=new p.Vector3(0,0,0),this.mass=i,this.invMass=1/i,this.tmp=new p.Vector3,this.tmp2=new p.Vector3}return(0,h.default)(e,[{key:"addForce",value:function(e){this.a.add(this.tmp2.copy(e).multiplyScalar(this.invMass))}},{key:"integrate",value:function(e){var t=this.tmp.subVectors(this.position,this.previous);t.multiplyScalar(m).add(this.position),t.add(this.a.multiplyScalar(e)),this.tmp=this.previous,this.previous=this.position,this.position=t,this.a.set(0,0,0)}}]),e}(),b=(s=a=function e(){function t(e,t){return e+t*(n+1)}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;(0,u.default)(this,e),this.w=n,this.h=r;var i=[],o=[],a=void 0,s=void 0;for(s=0;s<=r;s++)for(a=0;a<=n;a++)i.push(new T(a/n,s/r,0,v));for(s=0;s<r;s++)for(a=0;a<n;a++)o.push([i[t(a,s)],i[t(a,s+1)],g]),o.push([i[t(a,s)],i[t(a+1,s)],g]);for(a=n,s=0;s<r;s++)o.push([i[t(a,s)],i[t(a,s+1)],g]);for(s=r,a=0;a<n;a++)o.push([i[t(a,s)],i[t(a+1,s)],g]);this.particles=i,this.constrains=o,this.index=t},a.clothFunction=x,a.MASS=v,s);t.default=b},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=n(510),l=i(s),u=n(109),c=i(u),h=n(112),d=i(h),p=n(113),f=i(p),m=n(117),v=i(m),g=n(118),E=i(g),y=n(2),x=i(y),T=n(126),b=r(T),w=n(516),_=i(w),R=n(517),S=i(R),M=n(508),C=i(M),H=n(500),A=i(H),P=n(518),L=i(P),k=n(519),D=i(k),F=x.default.PropTypes,O=(a=o=function(e){function t(e,n){(0,d.default)(this,t);var r=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e,n));return r.shouldComponentUpdate=A.default.shouldComponentUpdate,r.directionalLightPosition=new b.Vector3(50,200,100).multiplyScalar(1.3),r.lightTarget=new b.Vector3(0,0,0),r.groundPosition=new b.Vector3(0,-250,0),r.groundRotation=new b.Euler(-Math.PI/2,0,0),r.groundRepeat=new b.Vector2(25,25),r.state={ambientLightColor:"666666",directionalLightColor:"dfebff",fragmentShaderDepth:L.default,vertexShaderDepth:D.default},r}return(0,E.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=300,t=this.state,n=t.ambientLightColor,r=t.directionalLightColor,i=t.fragmentShaderDepth,o=t.vertexShaderDepth;return x.default.createElement("object3D",null,x.default.createElement("resources",null,x.default.createElement("texture",{url:"textures/patterns/circuit_pattern.png",wrapS:b.RepeatWrapping,wrapT:b.RepeatWrapping,anisotropy:16,resourceId:"clothTexture"})),x.default.createElement("ambientLight",{color:(0,l.default)(n,16)}),x.default.createElement("directionalLight",{color:(0,l.default)(r,16),intensity:1.75,position:this.directionalLightPosition,lookAt:this.lightTarget,castShadow:!0,shadowMapWidth:1024,shadowMapHeight:1024,shadowCameraLeft:-e,shadowCameraRight:e,shadowCameraTop:e,shadowCameraBottom:-e,shadowCameraFar:1e3}),x.default.createElement("mesh",{castShadow:!0,receiveShadow:!0},x.default.createElement(_.default,{ref:this.props.clothRef,cloth:this.props.cloth}),x.default.createElement("meshPhongMaterial",{alphaTest:.5,color:16777215,specular:197379,emissive:1118481,shininess:10,side:b.DoubleSide},x.default.createElement("textureResource",{resourceId:"clothTexture"})),x.default.createElement("shaderMaterial",{slot:"customDepthMaterial",fragmentShader:i,vertexShader:o},x.default.createElement("uniforms",null,x.default.createElement("uniform",{name:"texture",type:"t"},x.default.createElement("textureResource",{resourceId:"clothTexture"}))))),x.default.createElement("mesh",{position:this.groundPosition,rotation:this.groundRotation,receiveShadow:!0},x.default.createElement("planeBufferGeometry",{width:2e4,height:2e4}),x.default.createElement("meshPhongMaterial",{color:16777215,specular:1118481},x.default.createElement("texture",{url:"textures/terrain/grasslight-big.jpg",wrapS:b.RepeatWrapping,wrapT:b.RepeatWrapping,repeat:this.groundRepeat,anisotropy:16}))),x.default.createElement(S.default,null))}}]),t}(x.default.Component),o.propTypes={clothRef:F.func.isRequired,cloth:F.instanceOf(C.default).isRequired},a);t.default=O},function(e,t,n){e.exports={default:n(511),__esModule:!0}},function(e,t,n){n(512),e.exports=parseInt},function(e,t,n){var r=n(46),i=n(513);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(43).parseInt,i=n(514).trim,o=n(515),a=/^[\-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(46),i=n(58),o=n(41),a=n(515),s="["+a+"]",l="​",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),h=function(e,t,n){var i={},s=o(function(){return!!a[e]()||l[e]()!=l}),u=i[e]=s?t(d):a[e];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},d=h.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};e.exports=h},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=n(109),s=r(a),l=n(112),u=r(l),c=n(113),h=r(c),d=n(117),p=r(d),f=n(118),m=r(f),v=n(2),g=r(v),E=n(508),y=r(E),x=n(500),T=r(x),b=g.default.PropTypes,w=(o=i=function(e){function t(){var e,n,r,i;(0,u.default)(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=r=(0,p.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(a))),r.shouldComponentUpdate=T.default.shouldComponentUpdate,i=n,(0,p.default)(r,i)}return(0,m.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this.refs.geometry;e.computeFaceNormals()}},{key:"render",value:function(){var e=this.props.cloth;return g.default.createElement("parametricGeometry",{ref:"geometry",parametricFunction:y.default.clothFunction,slices:e.w,stacks:e.h,dynamic:!0})}}]),t}(g.default.Component),i.propTypes={cloth:b.instanceOf(y.default).isRequired},o);t.default=w},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(510),a=i(o),s=n(109),l=i(s),u=n(112),c=i(u),h=n(113),d=i(h),p=n(117),f=i(p),m=n(118),v=i(m),g=n(2),E=i(g),y=n(126),x=r(y),T=n(500),b=i(T),w=function(e){function t(e,n){(0,c.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return r.shouldComponentUpdate=b.default.shouldComponentUpdate,r.state={poleMaterialColor:Number(16777215).toString(16),poleMaterialSpecular:Number(1118481).toString(16),poleMaterialShininess:100,sidePolePositions:[new x.Vector3(-125,-62,0),new x.Vector3(125,-62,0)],boxPositions:[new x.Vector3(125,-250,0),new x.Vector3(-125,-250,0)],topPolePosition:new x.Vector3(0,125,0),subResource:!1},r}return(0,v.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return E.default.createElement("object3D",null,E.default.createElement("resources",null,E.default.createElement("boxGeometry",{resourceId:"poleGeometry",width:5,height:375,depth:5}),E.default.createElement("boxGeometry",{resourceId:"boxGeometry",width:10,height:10,depth:10}),E.default.createElement("meshPhongMaterial",{resourceId:"poleMaterial",color:(0,a.default)(this.state.poleMaterialColor,16),specular:(0,a.default)(this.state.poleMaterialSpecular,16),shininess:this.state.poleMaterialShininess})),this.state.sidePolePositions.map(function(e,t){return E.default.createElement("mesh",{key:t,position:e,receiveShadow:!0,castShadow:!0},E.default.createElement("geometryResource",{resourceId:"poleGeometry"}),E.default.createElement("materialResource",{resourceId:"poleMaterial"}))}),E.default.createElement("mesh",{position:this.state.topPolePosition,receiveShadow:!0,castShadow:!0},E.default.createElement("boxGeometry",{width:255,height:5,depth:5}),E.default.createElement("materialResource",{resourceId:"poleMaterial"})),E.default.createElement("object3D",null,this.state.subResource?E.default.createElement("resources",null,this.state.subResource?E.default.createElement("meshPhongMaterial",{resourceId:"poleMaterial",color:65280,specular:1118481,shininess:100}):null,E.default.createElement("sphereGeometry",{resourceId:"boxGeometry",radius:20})):null,this.state.boxPositions.map(function(e,t){return E.default.createElement("mesh",{key:t,position:e,receiveShadow:!0,castShadow:!0},E.default.createElement("geometryResource",{resourceId:"boxGeometry"}),E.default.createElement("materialResource",{resourceId:"poleMaterial"}))})))}}]),t}(E.default.Component);t.default=w},function(e,t){e.exports="uniform sampler2D texture;\nvarying vec2 vUV;\n\nvec4 pack_depth( const in float depth ) {\n  const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n  const vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n  vec4 res = fract( depth * bit_shift );\n  res -= res.xxyz * bit_mask;\n\n  return res;\n}\n\nvoid main() {\n  vec4 pixel = texture2D( texture, vUV );\n\n  if ( pixel.a < 0.5 ) discard;\n\n  gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}\n"},function(e,t){e.exports="varying vec2 vUV;\n\nvoid main() {\n  vUV = 0.75 * uv;\n\n  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n  gl_Position = projectionMatrix * mvPosition;\n}\n"},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=n(510),l=i(s),u=n(109),c=i(u),h=n(112),d=i(h),p=n(113),f=i(p),m=n(117),v=i(m),g=n(118),E=i(g),y=n(2),x=i(y),T=n(126),b=r(T),w=n(500),_=i(w),R=x.default.PropTypes,S=60,M=(a=o=function(e){function t(e,n){(0,d.default)(this,t);var r=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e,n));return r.shouldComponentUpdate=_.default.shouldComponentUpdate,r.state={color:"0xaaaaaa"},r}return(0,E.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.position;return x.default.createElement("mesh",{castShadow:!0,receiveShadow:!0,visible:t,position:n},x.default.createElement("sphereGeometry",{radius:S,widthSegments:20,heightSegments:20}),x.default.createElement("meshPhongMaterial",{color:(0,l.default)(this.state.color,16)}))}}]),t}(x.default.Component),o.propTypes={visible:R.bool.isRequired,position:R.instanceOf(b.Vector3).isRequired},a);t.default=M},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(109),a=i(o),s=n(112),l=i(s),u=n(117),c=i(u),h=n(118),d=i(h),p=n(126),f=r(p),m=function(e){function t(e,n){function r(e){E.enabled!==!1&&(window.removeEventListener("keydown",r),w=b,b===y.NONE&&(e.keyCode!==E.keys[y.ROTATE]||E.noRotate?e.keyCode!==E.keys[y.ZOOM]||E.noZoom?e.keyCode!==E.keys[y.PAN]||E.noPan||(b=y.PAN):b=y.ZOOM:b=y.ROTATE))}function i(){E.enabled!==!1&&(b=w,window.addEventListener("keydown",r,!1))}function o(e){E.enabled!==!1&&(e.preventDefault(),e.stopPropagation(),b!==y.ROTATE||E.noRotate?b!==y.ZOOM||E.noZoom?b!==y.PAN||E.noPan||D.copy(N(e.pageX,e.pageY)):A.copy(N(e.pageX,e.pageY)):(R.copy(S),S.copy(I(e.pageX,e.pageY))))}function s(e){E.enabled!==!1&&(e.preventDefault(),e.stopPropagation(),b=y.NONE,document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s),E.dispatchEvent(B))}function u(e){E.enabled!==!1&&(e.preventDefault(),e.stopPropagation(),b===y.NONE&&(b=e.button),b!==y.ROTATE||E.noRotate?b!==y.ZOOM||E.noZoom?b!==y.PAN||E.noPan||(k.copy(N(e.pageX,e.pageY)),D.copy(k)):(H.copy(N(e.pageX,e.pageY)),A.copy(H)):(S.copy(I(e.pageX,e.pageY)),R.copy(S)),document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",s,!1),E.dispatchEvent(O))}function h(e){if(E.enabled!==!1){e.preventDefault(),e.stopPropagation();var t=0;e.wheelDelta?t=e.wheelDelta/40:e.detail&&(t=-e.detail/3),H.y+=.01*t,E.dispatchEvent(O),E.dispatchEvent(B)}}function d(e){if(E.enabled!==!1){switch(e.touches.length){case 1:b=y.TOUCH_ROTATE,S.copy(I(e.touches[0].pageX,e.touches[0].pageY)),R.copy(S);break;case 2:b=y.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;L=P=Math.sqrt(t*t+n*n);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;k.copy(N(r,i)),D.copy(k);break;default:b=y.NONE}E.dispatchEvent(O)}}function p(e){if(E.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:R.copy(S),S.copy(I(e.touches[0].pageX,e.touches[0].pageY));break;case 2:var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;L=Math.sqrt(t*t+n*n);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;D.copy(N(r,i));break;default:b=y.NONE}}function m(e){if(E.enabled!==!1){switch(e.touches.length){default:break;case 1:S.copy(I(e.touches[0].pageX,e.touches[0].pageY)),R.copy(S);break;case 2:P=L=0;var t=(e.touches[0].pageX+e.touches[1].pageX)/2,n=(e.touches[0].pageY+e.touches[1].pageY)/2;D.copy(N(t,n)),k.copy(D)}b=y.NONE,E.dispatchEvent(B)}}function v(e){e.preventDefault()}(0,l.default)(this,t);var g=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this)),E=g,y={
NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};g.object=e,g.domElement=void 0!==n?n:document,g.enabled=!0,g.screen={left:0,top:0,width:0,height:0},g.rotateSpeed=1,g.zoomSpeed=1.2,g.panSpeed=.3,g.noRotate=!1,g.noZoom=!1,g.noPan=!1,g.staticMoving=!1,g.dynamicDampingFactor=.2,g.minDistance=0,g.maxDistance=1/0,g.keys=[65,83,68],g.target=new f.Vector3;var x=1e-6,T=new f.Vector3,b=y.NONE,w=y.NONE,_=new f.Vector3,R=new f.Vector2,S=new f.Vector2,M=new f.Vector3,C=0,H=new f.Vector2,A=new f.Vector2,P=0,L=0,k=new f.Vector2,D=new f.Vector2;g.target0=g.target.clone(),g.position0=g.object.position.clone(),g.up0=g.object.up.clone();var F={type:"change"},O={type:"start"},B={type:"end"};g.handleResize=function(){if(g.domElement===document)g.screen.left=0,g.screen.top=0,g.screen.width=window.innerWidth,g.screen.height=window.innerHeight;else{var e=g.domElement.getBoundingClientRect(),t=g.domElement.ownerDocument.documentElement;g.screen.left=e.left+window.pageXOffset-t.clientLeft,g.screen.top=e.top+window.pageYOffset-t.clientTop,g.screen.width=e.width,g.screen.height=e.height}},g.handleEvent=function(e){"function"==typeof g[e.type]&&g[e.type](e)};var N=function(){var e=new f.Vector2;return function(t,n){return e.set((t-E.screen.left)/E.screen.width,(n-E.screen.top)/E.screen.height),e}}(),I=function(){var e=new f.Vector2;return function(t,n){return e.set((t-.5*E.screen.width-E.screen.left)/(.5*E.screen.width),(E.screen.height+2*(E.screen.top-n))/E.screen.width),e}}();return g.rotateCamera=function(){var e=new f.Vector3,t=new f.Quaternion,n=new f.Vector3,r=new f.Vector3,i=new f.Vector3,o=new f.Vector3,a=void 0;return function(){o.set(S.x-R.x,S.y-R.y,0),a=o.length(),a?(_.copy(E.object.position).sub(E.target),n.copy(_).normalize(),r.copy(E.object.up).normalize(),i.crossVectors(r,n).normalize(),r.setLength(S.y-R.y),i.setLength(S.x-R.x),o.copy(r.add(i)),e.crossVectors(o,_).normalize(),a*=E.rotateSpeed,t.setFromAxisAngle(e,a),_.applyQuaternion(t),E.object.up.applyQuaternion(t),M.copy(e),C=a):!E.staticMoving&&C&&(C*=Math.sqrt(1-E.dynamicDampingFactor),_.copy(E.object.position).sub(E.target),t.setFromAxisAngle(M,C),_.applyQuaternion(t),E.object.up.applyQuaternion(t)),R.copy(S)}}(),g.zoomCamera=function(){var e=void 0;b===y.TOUCH_ZOOM_PAN?(e=P/L,P=L,_.multiplyScalar(e)):(e=1+(A.y-H.y)*E.zoomSpeed,1!==e&&e>0&&(_.multiplyScalar(e),E.staticMoving?H.copy(A):H.y+=(A.y-H.y)*g.dynamicDampingFactor))},g.panCamera=function(){var e=new f.Vector2,t=new f.Vector3,n=new f.Vector3;return function(){e.copy(D).sub(k),e.lengthSq()&&(e.multiplyScalar(_.length()*E.panSpeed),n.copy(_).cross(E.object.up).setLength(e.x),n.add(t.copy(E.object.up).setLength(e.y)),E.object.position.add(n),E.target.add(n),E.staticMoving?k.copy(D):k.add(e.subVectors(D,k).multiplyScalar(E.dynamicDampingFactor)))}}(),g.checkDistances=function(){E.noZoom&&E.noPan||(_.lengthSq()>E.maxDistance*E.maxDistance&&(E.object.position.addVectors(E.target,_.setLength(E.maxDistance)),H.copy(A)),_.lengthSq()<E.minDistance*E.minDistance&&(E.object.position.addVectors(E.target,_.setLength(E.minDistance)),H.copy(A)))},g.update=function(){_.subVectors(E.object.position,E.target),E.noRotate||E.rotateCamera(),E.noZoom||E.zoomCamera(),E.noPan||E.panCamera(),E.object.position.addVectors(E.target,_),E.checkDistances(),E.object.lookAt(E.target),T.distanceToSquared(E.object.position)>x&&(E.dispatchEvent(F),T.copy(E.object.position))},g.reset=function(){b=y.NONE,w=y.NONE,E.target.copy(E.target0),E.object.position.copy(E.position0),E.object.up.copy(E.up0),_.subVectors(E.object.position,E.target),E.object.lookAt(E.target),E.dispatchEvent(F),T.copy(E.object.position)},g.dispose=function(){g.domElement.removeEventListener("contextmenu",v,!1),g.domElement.removeEventListener("mousedown",u,!1),g.domElement.removeEventListener("mousewheel",h,!1),g.domElement.removeEventListener("DOMMouseScroll",h,!1),g.domElement.removeEventListener("touchstart",d,!1),g.domElement.removeEventListener("touchend",m,!1),g.domElement.removeEventListener("touchmove",p,!1),document.removeEventListener("mousemove",o,!1),document.removeEventListener("mouseup",s,!1),window.removeEventListener("keydown",r,!1),window.removeEventListener("keyup",i,!1)},g.domElement.addEventListener("contextmenu",v,!1),g.domElement.addEventListener("mousedown",u,!1),g.domElement.addEventListener("mousewheel",h,!1),g.domElement.addEventListener("DOMMouseScroll",h,!1),g.domElement.addEventListener("touchstart",d,!1),g.domElement.addEventListener("touchend",m,!1),g.domElement.addEventListener("touchmove",p,!1),window.addEventListener("keydown",r,!1),window.addEventListener("keyup",i,!1),g.handleResize(),g.update(),g}return(0,d.default)(t,e),t}(f.EventDispatcher);t.default=m},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(199),a=i(o),s=n(109),l=i(s),u=n(112),c=i(u),h=n(113),d=i(h),p=n(117),f=i(p),m=n(118),v=i(m),g=n(2),E=i(g),y=n(126),x=r(y),T=n(506),b=i(T),w=n(498),_=i(w),R=n(503),S=i(R),M=function(e){function t(e,n){(0,c.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));r._onAnimate=function(){r._onAnimateInternal()},r.directionalLightPosition=new x.Vector3(0,1,0),r.objectPositions=[new x.Vector3(-400,0,200),new x.Vector3(-200,0,200),new x.Vector3(0,0,200),new x.Vector3(200,0,200),new x.Vector3(-400,0,0),new x.Vector3(-200,0,0),new x.Vector3(0,0,0),new x.Vector3(200,0,0),new x.Vector3(400,0,0),new x.Vector3(-400,0,-200),new x.Vector3(-200,0,-200),new x.Vector3(0,0,-200),new x.Vector3(200,0,-200),new x.Vector3(400,0,-200)],r.lathePoints=[];for(var i=0;i<50;i++)r.lathePoints.push(new x.Vector2(Math.sin(.2*i)*Math.sin(.1*i)*15+50,2*(i-5)));return r.arrowDir=new x.Vector3(0,1,0),r.arrowOrigin=new x.Vector3(0,0,0),r.scenePosition=new x.Vector3(0,0,0),r.state=(0,a.default)({},r.state,{timer:1e-4*Date.now()}),r}return(0,v.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.stats=new b.default,this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",this.refs.container.appendChild(this.stats.domElement)}},{key:"componentWillUnmount",value:function(){delete this.stats}},{key:"_onAnimateInternal",value:function(){var e=1e-4*Date.now();this.setState({timer:e}),this.stats.update()}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=this.state.timer,i=new x.Euler(5*r,2.5*r,0);return E.default.createElement("div",{ref:"container"},E.default.createElement(_.default,{width:t,height:n,antialias:!0,pixelRatio:window.devicePixelRatio,mainCamera:"mainCamera",onAnimate:this._onAnimate},E.default.createElement("resources",null,E.default.createElement("texture",{resourceId:"texture",url:"textures/UV_Grid_Sm.jpg",wrapS:x.RepeatWrapping,wrapT:x.RepeatWrapping,anisotropy:16}),E.default.createElement("meshLambertMaterial",{resourceId:"material",side:x.DoubleSide},E.default.createElement("textureResource",{resourceId:"texture"}))),E.default.createElement("scene",null,E.default.createElement("perspectiveCamera",{fov:45,aspect:t/n,near:1,far:2e3,lookAt:this.scenePosition,name:"mainCamera",position:new x.Vector3(800*Math.cos(r),400,800*Math.sin(r))}),E.default.createElement("ambientLight",{color:4210752}),E.default.createElement("directionalLight",{color:16777215,position:this.directionalLightPosition,lookAt:this.scenePosition}),E.default.createElement("mesh",{position:this.objectPositions[0],rotation:i},E.default.createElement("sphereGeometry",{radius:75,widthSegments:20,heightSegments:10}),E.default.createElement("materialResource",{resourceId:"material"})),E.default.createElement("mesh",{position:this.objectPositions[1],rotation:i},E.default.createElement("icosahedronGeometry",{radius:75,detail:1}),E.default.createElement("materialResource",{resourceId:"material"})),E.default.createElement("mesh",{position:this.objectPositions[2],rotation:i},E.default.createElement("octahedronGeometry",{radius:75,detail:2}),E.default.createElement("materialResource",{resourceId:"material"})),E.default.createElement("mesh",{position:this.objectPositions[3],rotation:i},E.default.createElement("tetrahedronGeometry",{radius:75,detail:0}),E.default.createElement("materialResource",{resourceId:"material"})),E.default.createElement("mesh",{position:this.objectPositions[4],rotation:i},E.default.createElement("planeBufferGeometry",{width:100,height:100,widthSegments:4,heightSegments:4}),E.default.createElement("materialResource",{resourceId:"material"})),E.default.createElement("mesh",{position:this.objectPositions[5],rotation:i},E.default.createElement("boxGeometry",{width:100,height:100,depth:100,widthSegments:4,heightSegments:4,depthSegments:4}),E.default.createElement("materialResource",{resourceId:"material"})),E.default.createElement("mesh",{position:this.objectPositions[6],rotation:i},E.default.createElement("circleGeometry",{radius:50,segments:20,thetaStart:0,thetaLength:2*Math.PI}),E.default.createElement("materialResource",{resourceId:"material"})),E.default.createElement("mesh",{position:this.objectPositions[7],rotation:i},E.default.createElement("ringGeometry",{innerRadius:10,outerRadius:50,thetaSegments:20,phiSegments:5,thetaStart:0,thetaLength:2*Math.PI}),E.default.createElement("materialResource",{resourceId:"material"})),E.default.createElement("mesh",{position:this.objectPositions[8],rotation:i},E.default.createElement("cylinderGeometry",{radiusTop:25,radiusBottom:75,height:100,radialSegments:40,heightSegments:5}),E.default.createElement("materialResource",{resourceId:"material"})),E.default.createElement("mesh",{position:this.objectPositions[9],rotation:i},E.default.createElement("latheGeometry",{points:this.lathePoints,segments:20}),E.default.createElement("materialResource",{resourceId:"material"})),E.default.createElement("mesh",{position:this.objectPositions[10],rotation:i},E.default.createElement("torusGeometry",{radius:50,tube:20,radialSegments:20,tubularSegments:20}),E.default.createElement("materialResource",{resourceId:"material"})),E.default.createElement("mesh",{position:this.objectPositions[11],rotation:i},E.default.createElement("torusKnotGeometry",{radius:50,tube:10,radialSegments:50,tubularSegments:20}),E.default.createElement("materialResource",{resourceId:"material"})),E.default.createElement("axisHelper",{position:this.objectPositions[12],size:50,rotation:i}),E.default.createElement("arrowHelper",{dir:this.arrowDir,origin:this.arrowOrigin,length:50,position:this.objectPositions[13],rotation:i}))))}}]),t}(S.default);t.default=M},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a,s,l=n(199),u=i(l),c=n(109),h=i(c),d=n(112),p=i(d),f=n(113),m=i(f),v=n(117),g=i(v),E=n(118),y=i(E),x=n(2),T=i(x),b=n(317),w=i(b),_=n(126),R=r(_),S=n(503),M=i(S),C=n(498),H=i(C),A=n(524),P=i(A),L=n(525),k=i(L),D=n(521),F=i(D),O="perspectiveCamera",B="orthographicCamera",N="mainCamera",I=new R.Euler(0,Math.PI,0),U=new R.Euler(0,Math.PI,0),V=new R.Vector3(0,0,150),z=(a=o=function(e){function t(e,n){(0,p.default)(this,t);var r=(0,g.default)(this,(t.__proto__||(0,h.default)(t)).call(this,e,n));s.call(r);var i=5e-4*Date.now();return r.state=(0,u.default)({},r.state,{meshPosition:new R.Vector3(Math.cos(i),Math.sin(i),Math.sin(i)).multiplyScalar(700),childPosition:new R.Vector3(70*Math.cos(2*i),150,70*Math.sin(i)),activeCameraName:O,paused:!1,mainCameraPosition:new R.Vector3(0,0,2500)}),r}return(0,y.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",this._onKeyDown,!1);var t=new F.default(this.refs.mainCamera,w.default.findDOMNode(this.refs.react3));t.rotateSpeed=1,t.zoomSpeed=1.2,t.panSpeed=.8,t.noZoom=!1,t.noPan=!1,t.staticMoving=!0,t.dynamicDampingFactor=.3,t.addEventListener("change",function(){e.setState({mainCameraPosition:e.refs.mainCamera.position})}),this.controls=t}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._onKeyDown,!1),this.controls.dispose(),delete this.controls}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=this.state,i=r.meshPosition,o=r.childPosition,a=r.r,s=.5*t/n;return T.default.createElement("div",null,T.default.createElement(P.default,{pause:this._pause,frame:this._frame}),T.default.createElement(H.default,{ref:"react3",width:t,height:n,antialias:!0,onAnimate:this._onAnimate},T.default.createElement("viewport",{x:0,y:0,width:t/2,height:n,cameraName:this.state.activeCameraName}),T.default.createElement("viewport",{x:t/2,y:0,width:t/2,height:n,cameraName:N}),T.default.createElement("scene",null,T.default.createElement("perspectiveCamera",{ref:"mainCamera",name:N,fov:50,aspect:s,near:1,far:1e4,position:this.state.mainCameraPosition}),T.default.createElement("object3D",{lookAt:i},T.default.createElement("perspectiveCamera",{name:O,fov:35+30*Math.sin(.5*a),aspect:s,near:150,far:i.length(),rotation:I}),T.default.createElement("orthographicCamera",{name:B,left:.5*t/-2,right:.5*t/2,top:n/2,bottom:n/-2,near:150,far:i.length(),rotation:U}),T.default.createElement("mesh",{position:V},T.default.createElement("sphereGeometry",{radius:5,widthSegments:16,heightSegments:8}),T.default.createElement("meshBasicMaterial",{color:255,wireframe:!0}))),T.default.createElement("cameraHelper",{cameraName:this.state.activeCameraName}),T.default.createElement("object3D",{position:i},T.default.createElement("mesh",null,T.default.createElement("sphereGeometry",{radius:100,widthSegments:16,heightSegments:8}),T.default.createElement("meshBasicMaterial",{color:16777215,wireframe:!0})),T.default.createElement("mesh",{position:o},T.default.createElement("sphereGeometry",{radius:50,widthSegments:16,heightSegments:8}),T.default.createElement("meshBasicMaterial",{color:65280,wireframe:!0}))),T.default.createElement(k.default,null))))}}]),t}(M.default),s=function(){var e=this;this._onKeyDown=function(t){switch(t.keyCode){default:break;case 79:e.setState({activeCameraName:B});break;case 80:e.setState({activeCameraName:O})}},this._onAnimate=function(){if(e.controls.update(),!e.state.paused){var t=5e-4*Date.now();e.setState({r:t,meshPosition:new R.Vector3(Math.cos(t),Math.sin(t),Math.sin(t)).multiplyScalar(700),childPosition:new R.Vector3(70*Math.cos(2*t),150,70*Math.sin(t))})}},this._pause=function(){e.setState({paused:!e.state.paused})},this._frame=function(){e.setState({paused:!1},function(){e._onAnimate(),e.setState({paused:!0})})}},a);t.default=z},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=n(109),s=r(a),l=n(112),u=r(l),c=n(113),h=r(c),d=n(117),p=r(d),f=n(118),m=r(f),v=n(2),g=r(v),E=g.default.PropTypes,y=(o=i=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){return g.default.createElement("div",{style:{position:"absolute",textAlign:"center",top:0,width:"100%",padding:5,color:"white",zIndex:100}},g.default.createElement("a",{href:"http://threejs.org",style:{color:"#0080ff"}},"three.js")," - cameras",g.default.createElement("br",null),g.default.createElement("b",{style:{color:"lightgreen"}},"O")," orthographic  ",g.default.createElement("b",{style:{color:"lightgreen"}},"P")," perspective ",g.default.createElement("br",null),g.default.createElement("button",{onClick:this.props.pause},"Pause"),g.default.createElement("button",{onClick:this.props.frame},"Frame"))}}]),t}(g.default.Component),i.propTypes={pause:E.func.isRequired,frame:E.func.isRequired},o);t.default=y},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(109),a=i(o),s=n(112),l=i(s),u=n(113),c=i(u),h=n(117),d=i(h),p=n(118),f=i(p),m=n(2),v=i(m),g=n(126),E=r(g),y=function(e){function t(e,n){(0,l.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e,n));r.pointCloudVertices=[];for(var i=0;i<1e4;i++){var o=new E.Vector3;o.x=E.Math.randFloatSpread(2e3),o.y=E.Math.randFloatSpread(2e3),o.z=E.Math.randFloatSpread(2e3),r.pointCloudVertices.push(o)}return r}return(0,f.default)(t,e),(0,c.default)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return v.default.createElement("points",null,v.default.createElement("geometry",{vertices:this.pointCloudVertices}),v.default.createElement("pointsMaterial",{color:8947848}))}}]),t}(v.default.Component);t.default=y},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(199),a=i(o),s=n(109),l=i(s),u=n(112),c=i(u),h=n(113),d=i(h),p=n(117),f=i(p),m=n(118),v=i(m),g=n(2),E=i(g),y=n(126),x=r(y),T=n(506),b=i(T),w=n(498),_=i(w),R=n(503),S=i(R),M=n(527),C=i(M),H=n(529),A=i(H),P=function(e){function t(e,n){(0,c.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return r._onDocumentMouseDown=function(e){e.preventDefault(),document.addEventListener("mousemove",r._onDocumentMouseMove,!1),document.addEventListener("mouseup",r._onDocumentMouseUp,!1),document.addEventListener("mouseout",r._onDocumentMouseOut,!1);var t=r.props.width,n=t/2;r.mouseXOnMouseDown=e.clientX-n,r.targetRotationOnMouseDown=r.targetRotation},r._onDocumentMouseMove=function(e){var t=r.props.width,n=t/2;r.mouseX=e.clientX-n,r.targetRotation=r.targetRotationOnMouseDown+.02*(r.mouseX-r.mouseXOnMouseDown)},r._onDocumentMouseUp=function(){document.removeEventListener("mousemove",r._onDocumentMouseMove,!1),document.removeEventListener("mouseup",r._onDocumentMouseUp,!1),document.removeEventListener("mouseout",r._onDocumentMouseOut,!1)},r._onDocumentMouseOut=function(){document.removeEventListener("mousemove",r._onDocumentMouseMove,!1),document.removeEventListener("mouseup",r._onDocumentMouseUp,!1),document.removeEventListener("mouseout",r._onDocumentMouseOut,!1)},r._onDocumentTouchStart=function(e){if(1===e.touches.length){e.preventDefault();var t=r.props.width,n=t/2;r.mouseXOnMouseDown=e.touches[0].pageX-n,r.targetRotationOnMouseDown=r.targetRotation}},r._onDocumentTouchMove=function(e){if(1===e.touches.length){e.preventDefault();var t=r.props.width,n=t/2;r.mouseX=e.touches[0].pageX-n,r.targetRotation=r.targetRotationOnMouseDown+.05*(r.mouseX-r.mouseXOnMouseDown)}},r._onAnimate=function(){r._onAnimateInternal()},r.cameraPosition=new x.Vector3(0,150,500),r.groupPosition=new x.Vector3(0,50,0),r.targetRotationOnMouseDown=0,r.mouseX=0,r.mouseXOnMouseDown=0,r.targetRotation=0,r.state=(0,a.default)({},r.state,{groupRotation:new x.Euler(0,0,0)}),r}return(0,v.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.stats=new b.default;var e=this.refs.container;this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",e.appendChild(this.stats.domElement),e.addEventListener("mousedown",this._onDocumentMouseDown,!1),e.addEventListener("touchstart",this._onDocumentTouchStart,!1),document.addEventListener("touchmove",this._onDocumentTouchMove,!1)}},{key:"componentWillUnmount",value:function(){var e=this.refs.container;e.removeEventListener("mousedown",this._onDocumentMouseDown,!1),e.removeEventListener("touchstart",this._onDocumentTouchStart,!1),document.removeEventListener("touchmove",this._onDocumentTouchMove,!1),document.removeEventListener("mousemove",this._onDocumentMouseMove,!1),document.removeEventListener("mouseup",this._onDocumentMouseUp,!1),document.removeEventListener("mouseout",this._onDocumentMouseOut,!1),delete this.stats}},{key:"_onAnimateInternal",value:function(){var e=this.state.groupRotation.y;Math.abs(e-this.targetRotation)>1e-4&&this.setState({groupRotation:new x.Euler(0,e+.05*(this.targetRotation-e),0)}),this.stats.update()}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=this.state.groupRotation;return E.default.createElement("div",{ref:"container"},E.default.createElement("div",{style:{color:"black",position:"absolute",top:"10px",width:"100%",textAlign:"center"}},"Simple procedurally generated 3D shapes",E.default.createElement("br",null),"Drag to spin"),E.default.createElement(_.default,{width:t,height:n,antialias:!0,pixelRatio:window.devicePixelRatio,mainCamera:"mainCamera",clearColor:15790320,onAnimate:this._onAnimate},E.default.createElement("scene",{ref:"scene"},E.default.createElement("perspectiveCamera",{name:"mainCamera",ref:"camera",fov:50,aspect:t/n,near:1,far:1e3,position:this.cameraPosition},E.default.createElement("pointLight",{color:16777215,intensity:.8})),E.default.createElement(C.default,null),E.default.createElement("group",{position:this.groupPosition,rotation:r},E.default.createElement(A.default,null)))))}}]),t}(S.default);t.default=P},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(109),a=i(o),s=n(112),l=i(s),u=n(113),c=i(u),h=n(117),d=i(h),p=n(118),f=i(p),m=n(2),v=i(m),g=n(126),E=r(g),y=n(528),x=i(y),T=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,c.default)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){this.textureRepeat=new E.Vector2(.008,.008);var e=0,t=0,n=80,r=120,i=40,o=[];o.push(new E.Vector2(610,320)),o.push(new E.Vector2(450,300)),o.push(new E.Vector2(392,392)),o.push(new E.Vector2(266,438)),o.push(new E.Vector2(190,570)),o.push(new E.Vector2(190,600)),o.push(new E.Vector2(160,620)),o.push(new E.Vector2(160,650)),o.push(new E.Vector2(180,640)),o.push(new E.Vector2(165,680)),o.push(new E.Vector2(150,670)),o.push(new E.Vector2(90,737)),o.push(new E.Vector2(80,795)),o.push(new E.Vector2(50,835)),o.push(new E.Vector2(64,870)),o.push(new E.Vector2(60,945)),o.push(new E.Vector2(300,945)),o.push(new E.Vector2(300,743)),o.push(new E.Vector2(600,473)),o.push(new E.Vector2(626,425)),o.push(new E.Vector2(600,370)),o.push(new E.Vector2(610,320));for(var a=0;a<o.length;a++)o[a].multiplyScalar(.25);return this.californiaPts=o,v.default.createElement("resources",null,v.default.createElement("texture",{resourceId:"texture",url:"textures/UV_Grid_Sm.jpg",wrapS:E.RepeatWrapping,wrapT:E.RepeatWrapping,repeat:this.textureRepeat}),v.default.createElement("meshBasicMaterial",{resourceId:"hoverMaterial",color:16711680,side:E.DoubleSide}),v.default.createElement("meshPhongMaterial",{resourceId:"phongMaterial",side:E.DoubleSide},v.default.createElement("textureResource",{resourceId:"texture"})),v.default.createElement("shape",{resourceId:"california",points:this.californiaPts}),v.default.createElement("shape",{resourceId:"triangle"},v.default.createElement("moveTo",{x:80,y:20}),v.default.createElement("lineTo",{x:40,y:80}),v.default.createElement("lineTo",{x:120,y:80}),v.default.createElement("lineTo",{x:80,y:20})),v.default.createElement("shape",{resourceId:"heart"},v.default.createElement("moveTo",{x:e+25,y:t+25}),v.default.createElement("bezierCurveTo",{cp1X:e+25,cp1Y:t+25,cp2X:e+20,cp2Y:t,aX:e,aY:t}),v.default.createElement("bezierCurveTo",{cp1X:e-30,cp1Y:t,cp2X:e-30,cp2Y:t+35,aX:e-30,aY:t+35}),v.default.createElement("bezierCurveTo",{cp1X:e-30,cp1Y:t+55,cp2X:e-10,cp2Y:t+77,aX:e+25,aY:t+95}),v.default.createElement("bezierCurveTo",{cp1X:e+60,cp1Y:t+77,cp2X:e+80,cp2Y:t+55,aX:e+80,aY:t+35}),v.default.createElement("bezierCurveTo",{cp1X:e+80,cp1Y:t+35,cp2X:e+80,cp2Y:t,aX:e+50,aY:t}),v.default.createElement("bezierCurveTo",{cp1X:e+35,cp1Y:t,cp2X:e+25,cp2Y:t+25,aX:e+25,aY:t+25})),v.default.createElement(x.default,{resourceId:"square",width:n,length:n}),v.default.createElement(x.default,{resourceId:"rect",width:i,length:r}),function(e,t,n,r,i){return v.default.createElement("shape",{resourceId:"roundedRect"},v.default.createElement("moveTo",{x:e,y:t+i}),v.default.createElement("lineTo",{x:e,y:t+r-i}),v.default.createElement("quadraticCurveTo",{cpX:e,cpY:t+r,x:e+i,y:t+r}),v.default.createElement("lineTo",{x:e+n-i,y:t+r}),v.default.createElement("quadraticCurveTo",{cpX:e+n,cpY:t+r,x:e+n,y:t+r-i}),v.default.createElement("lineTo",{x:e+n,y:t+i}),v.default.createElement("quadraticCurveTo",{cpX:e+n,cpY:t,x:e+n-i,y:t}),v.default.createElement("lineTo",{x:e+i,y:t}),v.default.createElement("quadraticCurveTo",{cpX:e,cpY:t,x:e,y:t+i}))}(0,0,50,50,20),v.default.createElement("shape",{resourceId:"track"},v.default.createElement("moveTo",{x:40,y:40}),v.default.createElement("lineTo",{x:40,y:160}),v.default.createElement("absArc",{x:60,y:160,radius:20,startAngle:Math.PI,endAngle:0,clockwise:!0}),v.default.createElement("lineTo",{x:80,y:40}),v.default.createElement("absArc",{x:60,y:40,radius:20,startAngle:2*Math.PI,endAngle:Math.PI,clockwise:!0})),function(){var e=40;return v.default.createElement("shape",{resourceId:"circle"},v.default.createElement("moveTo",{x:0,y:e}),v.default.createElement("quadraticCurveTo",{cpX:e,cpY:e,x:e,y:0}),v.default.createElement("quadraticCurveTo",{cpX:e,cpY:-e,x:0,y:-e}),v.default.createElement("quadraticCurveTo",{cpX:-e,cpY:-e,x:-e,y:0}),v.default.createElement("quadraticCurveTo",{cpX:-e,cpY:e,x:0,y:e}))}(),v.default.createElement("shape",{resourceId:"arc"},v.default.createElement("moveTo",{x:50,y:10}),v.default.createElement("absArc",{x:10,y:10,radius:40,startAngle:0,endAngle:2*Math.PI,clockwise:!1}),v.default.createElement("hole",null,v.default.createElement("moveTo",{x:20,y:10}),v.default.createElement("absArc",{x:10,y:10,radius:10,startAngle:0,endAngle:2*Math.PI,clockwise:!0}))),v.default.createElement("shape",{resourceId:"fish"},v.default.createElement("moveTo",{x:e,y:t}),v.default.createElement("quadraticCurveTo",{cpX:e+50,cpY:t-80,x:e+90,y:t-10}),v.default.createElement("quadraticCurveTo",{cpX:e+100,cpY:t-10,x:e+115,y:t-40}),v.default.createElement("quadraticCurveTo",{cpX:e+115,cpY:t,x:e+115,y:t+40}),v.default.createElement("quadraticCurveTo",{cpX:e+100,cpY:t+10,x:e+90,y:t+10}),v.default.createElement("quadraticCurveTo",{cpX:e+50,cpY:t+80,x:e,y:t})),v.default.createElement("shape",{resourceId:"smiley"},v.default.createElement("moveTo",{x:80,y:40}),v.default.createElement("absArc",{x:40,y:40,radius:40,startAngle:0,endAngle:2*Math.PI,clockwise:!1}),v.default.createElement("hole",{key:"eye1"},v.default.createElement("moveTo",{x:35,y:20}),v.default.createElement("absEllipse",{x:25,y:20,xRadius:10,yRadius:10,startAngle:0,endAngle:2*Math.PI,clockwise:!0})),v.default.createElement("hole",{key:"eye2"},v.default.createElement("moveTo",{x:65,y:20}),v.default.createElement("absArc",{x:55,y:20,radius:10,startAngle:0,endAngle:2*Math.PI,clockwise:!0})),v.default.createElement("hole",{key:"mouth"},v.default.createElement("moveTo",{x:20,y:40}),v.default.createElement("quadraticCurveTo",{cpX:40,cpY:60,x:60,y:40}),v.default.createElement("bezierCurveTo",{cp1X:70,cp1Y:45,cp2X:70,cp2Y:50,aX:60,aY:60}),v.default.createElement("quadraticCurveTo",{cpX:40,cpY:80,x:20,y:60}),v.default.createElement("quadraticCurveTo",{cpX:5,cpY:50,x:20,y:40}))),function(){var e=[];return e.push(new E.Vector2(70,20)),e.push(new E.Vector2(80,90)),e.push(new E.Vector2(-30,70)),e.push(new E.Vector2(0,0)),v.default.createElement("shape",{resourceId:"spline"},v.default.createElement("moveTo",{x:0,y:0}),v.default.createElement("splineThru",{points:e}))}())}}]),t}(v.default.Component);t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.width,n=e.length,r=e.resourceId;return a.default.createElement("shape",{resourceId:r},a.default.createElement("moveTo",{x:0,y:0}),a.default.createElement("lineTo",{x:0,y:t}),a.default.createElement("lineTo",{x:n,y:t}),a.default.createElement("lineTo",{x:n,y:0}),a.default.createElement("lineTo",{x:0,y:0}))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=r(o),s=n(25),l=r(s);i.propTypes={width:l.default.number.isRequired,length:l.default.number.isRequired,resourceId:l.default.string.isRequired},t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(109),o=r(i),a=n(112),s=r(a),l=n(113),u=r(l),c=n(117),h=r(c),d=n(118),p=r(d),f=n(2),m=r(f),v=n(530),g=r(v),E=function(e){function t(){return(0,s.default)(this,t),(0,h.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return m.default.createElement("group",null,m.default.createElement(g.default,{resourceId:"california",x:-300,y:-100,z:0,color:15761408,rx:0,ry:0,rz:0,s:1}),m.default.createElement(g.default,{resourceId:"triangle",color:8421616,x:-180,y:0,z:0,rx:0,ry:0,rz:0,s:1}),m.default.createElement(g.default,{resourceId:"roundedRect",x:-150,y:150,z:0,color:32768,rx:0,ry:0,rz:0,s:1}),m.default.createElement(g.default,{resourceId:"track",x:200,y:-100,z:0,color:32896,rx:0,ry:0,rz:0,s:1}),m.default.createElement(g.default,{resourceId:"square",color:16624,x:150,y:100,z:0,rx:0,ry:0,rz:0,s:1}),m.default.createElement(g.default,{resourceId:"heart",color:15728640,x:60,y:100,z:0,rx:0,ry:0,rz:Math.PI,s:1}),m.default.createElement(g.default,{resourceId:"circle",color:61440,x:120,y:250,z:0,rx:0,ry:0,rz:0,s:1}),m.default.createElement(g.default,{resourceId:"fish",color:4210752,x:-60,y:200,z:0,rx:0,ry:0,rz:0,s:1}),m.default.createElement(g.default,{resourceId:"smiley",x:-200,y:250,z:0,color:15728880,rx:0,ry:0,rz:Math.PI,s:1}),m.default.createElement(g.default,{resourceId:"arc",color:8404992,x:150,y:0,z:0,rx:0,ry:0,rz:0,s:1}),m.default.createElement(g.default,{resourceId:"spline",color:8421504,x:-50,y:-100,z:0,rx:0,ry:0,rz:0,s:1}))}}]),t}(m.default.Component);t.default=E},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=n(109),l=i(s),u=n(112),c=i(u),h=n(113),d=i(h),p=n(117),f=i(p),m=n(118),v=i(m),g=n(2),E=i(g),y=n(126),x=r(y),T=n(25),b=i(T),w=n(500),_=i(w),R={amount:8,bevelEnabled:!0,bevelSegments:2,steps:2,bevelSize:1,bevelThickness:1},S=(a=o=function(e){function t(){var e,n,r,i;(0,c.default)(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=(0,f.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(a))),r.shouldComponentUpdate=_.default.shouldComponentUpdate,i=n,(0,f.default)(r,i)}return(0,v.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.rx,n=e.ry,r=e.rz,i=e.s,o=e.resourceId,a=e.color,s=e.x,l=e.y,u=e.z,c=new x.Euler(t,n,r),h=new x.Vector3(i,i,i);return E.default.createElement("group",null,E.default.createElement("mesh",{position:new x.Vector3(s,l,u-175),rotation:c,scale:h},E.default.createElement("shapeGeometryResource",{resourceId:o,type:"shape"}),E.default.createElement("materialResource",{resourceId:"phongMaterial"})),E.default.createElement("mesh",{
position:new x.Vector3(s,l,u-125),rotation:c,scale:h},E.default.createElement("shapeGeometryResource",{resourceId:o,type:"shape"}),E.default.createElement("meshPhongMaterial",{color:a,side:x.DoubleSide})),E.default.createElement("mesh",{position:new x.Vector3(s,l,u-75),rotation:c,scale:h},E.default.createElement("extrudeGeometry",{settings:R},E.default.createElement("shapeResource",{resourceId:o})),E.default.createElement("meshPhongMaterial",{color:a})),E.default.createElement("line",{position:new x.Vector3(s,l,u-25),rotation:c,scale:h},E.default.createElement("shapeGeometryResource",{resourceId:o,type:"points"}),E.default.createElement("lineBasicMaterial",{color:a})),E.default.createElement("points",{position:new x.Vector3(s,l,u+25),rotation:c,scale:h},E.default.createElement("shapeGeometryResource",{resourceId:o,type:"points"}),E.default.createElement("pointsMaterial",{color:a,size:4})),E.default.createElement("line",{position:new x.Vector3(s,l,u+75),rotation:c,scale:h},E.default.createElement("shapeGeometryResource",{resourceId:o,type:"spacedPoints",divisions:50}),E.default.createElement("lineBasicMaterial",{color:a,linewidth:3})),E.default.createElement("points",{position:new x.Vector3(s,l,u+125),rotation:c,scale:h},E.default.createElement("shapeGeometryResource",{resourceId:o,type:"spacedPoints",divisions:50}),E.default.createElement("pointsMaterial",{color:a,size:4})))}}]),t}(E.default.Component),o.propTypes={resourceId:b.default.string.isRequired,color:b.default.any.isRequired,x:b.default.number.isRequired,y:b.default.number.isRequired,z:b.default.number.isRequired,rx:b.default.number.isRequired,ry:b.default.number.isRequired,rz:b.default.number.isRequired,s:b.default.number.isRequired},a);t.default=S},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(109),a=i(o),s=n(112),l=i(s),u=n(113),c=i(u),h=n(117),d=i(h),p=n(118),f=i(p),m=n(2),v=i(m),g=n(500),E=i(g),y=n(126),x=r(y),T=n(506),b=i(T),w=n(498),_=i(w),R=n(503),S=i(R),M=n(521),C=i(M),H=n(532),A=i(H),P=n(537),L=i(P),k=function(e){function t(e,n){(0,l.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e,n));return r.shouldComponentUpdate=E.default.shouldComponentUpdate,r._onAnimate=function(){r._onAnimateInternal()},r._onCubesMounted=function(e){r.cubes=e},r._onHoverStart=function(){r.setState({hovering:!0})},r._onHoverEnd=function(){r.setState({hovering:!1})},r._onDragStart=function(){r.setState({dragging:!0})},r._onDragEnd=function(){r.setState({dragging:!1})},r._onTrackballChange=function(){r.setState({cameraPosition:r.refs.camera.position.clone(),cameraRotation:r.refs.camera.rotation.clone()})},r.state={cameraPosition:new x.Vector3(0,0,1e3),cameraRotation:new x.Euler,mouseInput:null,hovering:!1,dragging:!1},r._cursor={hovering:!1,dragging:!1},r.lightPosition=new x.Vector3(0,500,2e3),r.lightTarget=new x.Vector3(0,0,0),r}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.stats=new b.default,this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px";var e=this.refs,t=e.container,n=e.camera;t.appendChild(this.stats.domElement);var r=new C.default(n);r.rotateSpeed=1,r.zoomSpeed=1.2,r.panSpeed=.8,r.noZoom=!1,r.noPan=!1,r.staticMoving=!0,r.dynamicDampingFactor=.3,this.controls=r,this.controls.addEventListener("change",this._onTrackballChange)}},{key:"componentDidUpdate",value:function(e){var t=this.refs.mouseInput,n=this.props,r=n.width,i=n.height;r===e.width&&i===e.height||t.containerResized()}},{key:"componentWillUnmount",value:function(){this.controls.removeEventListener("change",this._onTrackballChange),this.controls.dispose(),delete this.controls,delete this.stats}},{key:"_onAnimateInternal",value:function(){var e=this.refs,t=e.mouseInput,n=e.camera;if(!t.isReady()){var r=this.refs,i=r.scene,o=r.container;t.ready(i,o,n),t.restrictIntersections(this.cubes),t.setActive(!1)}this.state.mouseInput!==t&&this.setState({mouseInput:t}),this.state.camera!==n&&this.setState({camera:n}),this.stats.update(),this.controls.update()}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=this.state,i=r.cameraPosition,o=r.cameraRotation,a=r.mouseInput,s=r.camera,l=r.hovering,u=r.dragging,c={};return u?c.cursor="move":l&&(c.cursor="pointer"),this._cursor.hovering=l,this._cursor.dragging=u,v.default.createElement("div",{ref:"container",style:c},v.default.createElement(_.default,{width:t,height:n,antialias:!0,pixelRatio:window.devicePixelRatio,mainCamera:"mainCamera",onAnimate:this._onAnimate,sortObjects:!1,shadowMapEnabled:!0,shadowMapType:x.PCFShadowMap,clearColor:15790320},v.default.createElement("module",{ref:"mouseInput",descriptor:A.default}),v.default.createElement("resources",null,v.default.createElement("boxGeometry",{resourceId:"boxGeometry",width:40,height:40,depth:40}),v.default.createElement("meshBasicMaterial",{resourceId:"highlightMaterial",color:16776960,wireframe:!0})),v.default.createElement("scene",{ref:"scene"},v.default.createElement("perspectiveCamera",{fov:70,aspect:t/n,near:1,far:1e4,name:"mainCamera",ref:"camera",position:i,rotation:o}),v.default.createElement("ambientLight",{color:5263440}),v.default.createElement("spotLight",{color:16777215,intensity:1.5,position:this.lightPosition,lookAt:this.lightTarget,castShadow:!0,shadowCameraNear:200,shadowCameraFar:1e4,shadowCameraFov:50,shadowBias:-22e-5,shadowMapWidth:2048,shadowMapHeight:2048}),v.default.createElement(L.default,{mouseInput:a,camera:s,onCubesMounted:this._onCubesMounted,onHoverStart:this._onHoverStart,onHoverEnd:this._onHoverEnd,onDragStart:this._onDragStart,onDragEnd:this._onDragEnd,cursor:this._cursor}))))}}]),t}(S.default);t.default=k},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(199),a=i(o),s=n(106),l=i(s),u=n(533),c=i(u),h=n(109),d=i(h),p=n(112),f=i(p),m=n(113),v=i(m),g=n(117),E=i(g),y=n(195),x=i(y),T=n(118),b=i(T),w=n(498),_=i(w),R=n(126),S=r(R),M=n(137),C=i(M),H=n(334),A=i(H),P=n(211),L=i(P),k=n(25),D=i(k),F=new S.Vector2,O={mousedown:"onMouseDown",mouseup:"onMouseUp"},B=["onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onClick"],N={ignorePointerEvents:!1},I=function(e){function t(){(0,f.default)(this,t);var e=(0,E.default)(this,(t.__proto__||(0,d.default)(t)).call(this));return e._onMouseDown=function(t,n){C.default.batchedUpdates(function(){var r=e._intersectAndDispatch(t,n),i=r.event,o=r.intersections;i.isDefaultPrevented()||i.isPropagationStopped()?e._intersectionsForClick=null:e._intersectionsForClick=o})},e._onMouseUp=function(t,n){C.default.batchedUpdates(function(){var r=e._intersectAndDispatch(t,n),i=r.event,o=r.intersections;if(!i.isDefaultPrevented()&&!i.isPropagationStopped()){if(null===e._intersectionsForClick)return;for(var a=e._intersectionsForClick.reduce(function(e,t){return e[t.object.uuid]=t,e},{}),s=0;s<o.length;++s){if(i.isDefaultPrevented()||i.isPropagationStopped())return;var l=o[s],u=l.object,c=u.uuid;a[c]&&_.default.eventDispatcher.dispatchEvent(u,"onClick",e._createSyntheticMouseEvent("click",i),l)}}}),e._intersectionsForClick=null},e._isReady=!1,e._active=!0,e._restrictIntersections=!1,e._objectsToIntersect=null,e._restrictedIntersectionRecursive=!1,e._patchedDescriptors=[],e}return(0,b.default)(t,e),(0,v.default)(t,[{key:"setup",value:function(e){var n=this;(0,x.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"setup",this).call(this,e);var r=e.threeElementDescriptors.object3D.constructor;(0,c.default)(e.threeElementDescriptors).forEach(function(e){e instanceof r&&(B.forEach(function(t){e.hasEvent(t)}),(0,l.default)(N).forEach(function(t){e.hasProp(t,{type:D.default.bool,update:function(e,n,r){r?e.userData[t]=n:e.userData[t]=N[t]},default:N[t]})}),n._patchedDescriptors.push(e))})}},{key:"isReady",value:function(){return this._isReady}},{key:"setActive",value:function(e){this._active=e}},{key:"restrictIntersections",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._restrictIntersections=!0,this._objectsToIntersect=e,this._restrictedIntersectionRecursive=t}},{key:"ready",value:function(e,t,n){var r=this;this._isReady=!0,this._scene=e,this._container=t,this._camera=n,this._raycaster=new S.Raycaster,this._mouse=new S.Vector2,this._onMouseMove=function(e){r._mouse.set(e.clientX,e.clientY),r._active||r._updateEnterLeave()},this._containerRect=this._container.getBoundingClientRect(),this._hoverObjectMap={},document.addEventListener("mousemove",this._onMouseMove,!1),this._intersectionsForClick=null,this._caughtListenersCleanupFunctions=[],(0,l.default)(O).forEach(function(e){var n=void 0,i=O[e];switch(e){case"mousedown":n=r._onMouseDown.bind(r,i);break;case"mouseup":n=r._onMouseUp.bind(r,i)}n&&(t.addEventListener(e,n,!0),r._caughtListenersCleanupFunctions.push(function(){t.removeEventListener(e,n,!0)}))})}},{key:"_createSyntheticMouseEvent",value:function(e,t){return A.default.getPooled(null,null,new MouseEvent(e,t),t.target)}},{key:"_intersectAndDispatch",value:function(e,t){var n=A.default.getPooled(null,null,t,t.target),r=this._getIntersections(F.set(n.clientX,n.clientY));return C.default.batchedUpdates(function(){for(var t=0;t<r.length;++t){var i=r[t];if(n.isDefaultPrevented()||n.isPropagationStopped())return;var o=i.object;_.default.eventDispatcher.dispatchEvent(o,e,n,i)}}),{event:n,intersections:r}}},{key:"_getIntersections",value:function(e){var t=this._getRelativeMouseCoords(e);return this._raycaster.setFromCamera(t,this._camera),this._restrictIntersections?this._raycaster.intersectObjects(this._objectsToIntersect,this._restrictedIntersectionRecursive):this._raycaster.intersectObject(this._scene,!0)}},{key:"getCameraRay",value:function(e){var t=this._getRelativeMouseCoords(e),n=this._raycaster.ray.clone();this._raycaster.setFromCamera(t,this._camera);var r=this._raycaster.ray.clone();return this._raycaster.ray.copy(n),r}},{key:"intersectObject",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._getRelativeMouseCoords(e),i=this._raycaster.ray.clone();this._raycaster.setFromCamera(r,this._camera);var o=this._raycaster.intersectObject(t,n);return this._raycaster.ray.copy(i),o}},{key:"containerResized",value:function(){this._containerRect=this._container.getBoundingClientRect()}},{key:"update",value:function(){this._isReady&&this._active&&this._updateEnterLeave()}},{key:"_updateEnterLeave",value:function(){for(var e=this._getIntersections(this._mouse),t=(0,a.default)({},this._hoverObjectMap),n=this._createSyntheticMouseEvent("mouseEnter",{target:this._container,clientX:this._mouse.x,clientY:this._mouse.y}),r=0;r<e.length;++r){var i=e[r],o=i.object;if(!o.userData||!o.userData.ignorePointerEvents){var s=o.uuid;this._hoverObjectMap[s]?(delete t[s],this._hoverObjectMap[s].intersection=i):(this._hoverObjectMap[s]={object:o,intersection:i},n.isDefaultPrevented()||n.isPropagationStopped()||_.default.eventDispatcher.dispatchEvent(o,"onMouseEnter",n,i,r));break}}for(var u=this._createSyntheticMouseEvent("mouseLeave",{target:this._container,clientX:this._mouse.x,clientY:this._mouse.y}),c=(0,l.default)(t),h=0;h<c.length;++h){var d=c[h];u.isDefaultPrevented()||u.isPropagationStopped()||_.default.eventDispatcher.dispatchEvent(this._hoverObjectMap[d].object,"onMouseLeave",u),delete this._hoverObjectMap[d]}}},{key:"_getRelativeMouseCoords",value:function(e){var t=this._containerRect,n=e.clone().sub(F.set(t.left,t.top)).divide(F.set(t.width,t.height));return n.x=2*n.x-1,n.y=2*-n.y+1,n}},{key:"dispose",value:function(){document.removeEventListener("mousemove",this._onMouseMove,!1),this._caughtListenersCleanupFunctions.forEach(function(e){return e()}),delete this._caughtListenersCleanupFunctions,delete this._onMouseMove,this._patchedDescriptors.forEach(function(e){var t=(0,l.default)(N).concat(B);t.forEach(function(t){e.removeProp(t)})})}}]),t}(L.default);t.default=I},function(e,t,n){e.exports={default:n(534),__esModule:!0}},function(e,t,n){n(535),e.exports=n(47).Object.values},function(e,t,n){var r=n(46),i=n(536)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var r=n(66),i=n(68),o=n(94).f;e.exports=function(e){return function(t){for(var n,a=i(t),s=r(a),l=s.length,u=0,c=[];l>u;)o.call(a,n=s[u++])&&c.push(e?[n,a[n]]:a[n]);return c}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=n(109),l=i(s),u=n(112),c=i(u),h=n(113),d=i(h),p=n(117),f=i(p),m=n(118),v=i(m),g=n(2),E=i(g),y=n(538),x=i(y),T=n(126),b=r(T),w=n(500),_=i(w),R=n(532),S=i(R),M=E.default.PropTypes,C=(a=o=function(e){function t(e,n){(0,c.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));r.shouldComponentUpdate=_.default.shouldComponentUpdate,r._onCubeCreate=function(e,t){r.cubes[e]=t},r._onCubeMouseEnter=function(){if(0===r._hoveredCubes){var e=r.props.onHoverStart;e()}r._hoveredCubes++},r._onCubeMouseLeave=function(){if(r._hoveredCubes--,0===r._hoveredCubes){var e=r.props.onHoverEnd;e()}},r._onCubeDragStart=function(){if(0===r._draggingCubes){var e=r.props.onDragStart;e()}r._draggingCubes++},r._onCubeDragEnd=function(){if(r._draggingCubes--,0===r._draggingCubes){var e=r.props.onDragEnd;e()}};var i=[];i.length=200;for(var o=0;o<200;++o)i[o]=new b.Vector3(1e3*Math.random()-500,600*Math.random()-300,800*Math.random()-400);var a=[];return a.length=i.length,r.cubes=a,r.cubePositions=i,r._hoveredCubes=0,r._draggingCubes=0,r}return(0,v.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.onCubesMounted;e(this.cubes)}},{key:"render",value:function(){var e=this,t=this.props,n=t.mouseInput,r=t.camera,i=t.cursor;return E.default.createElement("group",null,this.cubePositions.map(function(t,o){var a=e._onCubeCreate.bind(e,o);return E.default.createElement(x.default,{key:o,mouseInput:n,camera:r,initialPosition:t,onCreate:a,onMouseEnter:e._onCubeMouseEnter,onMouseLeave:e._onCubeMouseLeave,onDragStart:e._onCubeDragStart,onDragEnd:e._onCubeDragEnd,cursor:i})}))}}]),t}(E.default.Component),o.propTypes={mouseInput:M.instanceOf(S.default),camera:M.instanceOf(b.PerspectiveCamera),onCubesMounted:M.func.isRequired,onHoverStart:M.func.isRequired,onHoverEnd:M.func.isRequired,onDragStart:M.func.isRequired,onDragEnd:M.func.isRequired,cursor:M.any},a);t.default=C},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=n(109),l=i(s),u=n(112),c=i(u),h=n(113),d=i(h),p=n(117),f=i(p),m=n(118),v=i(m),g=n(2),E=i(g),y=n(126),x=r(y),T=n(500),b=i(T),w=n(532),_=i(w),R=E.default.PropTypes,S=new x.Plane,M=new x.Vector3(0,0,-1),C=(a=o=function(e){function t(e,n){(0,c.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));r.shouldComponentUpdate=b.default.shouldComponentUpdate,r._onMouseEnter=function(){r.setState({hovered:!0});var e=r.props.onMouseEnter;e()},r._onMouseDown=function(e,t){e.preventDefault(),e.stopPropagation();var n=r.state.position,i=r.props,o=i.onDragStart,a=i.camera;S.setFromNormalAndCoplanarPoint(M.clone().applyQuaternion(a.quaternion),t.point),r._offset=t.point.clone().sub(n),document.addEventListener("mouseup",r._onDocumentMouseUp),document.addEventListener("mousemove",r._onDocumentMouseMove),r.setState({pressed:!0}),o()},r._onDocumentMouseMove=function(e){e.preventDefault();var t=r.props.mouseInput,n=t.getCameraRay(new x.Vector2(e.clientX,e.clientY)),i=S.intersectLine(new x.Line3(n.origin,n.origin.clone().add(n.direction.clone().multiplyScalar(1e4))));i&&r.setState({position:i.sub(r._offset)})},r._onDocumentMouseUp=function(e){e.preventDefault(),document.removeEventListener("mouseup",r._onDocumentMouseUp),document.removeEventListener("mousemove",r._onDocumentMouseMove);var t=r.props.onDragEnd;t(),r.setState({pressed:!1})},r._onMouseLeave=function(){r.state.hovered&&r.setState({hovered:!1});var e=r.props.onMouseLeave;e()},r._ref=function(e){var t=r.props.onCreate;t(e)},r.rotation=new x.Euler(2*Math.random()*Math.PI,2*Math.random()*Math.PI,2*Math.random()*Math.PI),r.scale=new x.Vector3(2*Math.random()+1,2*Math.random()+1,2*Math.random()+1),r.color=new x.Color(16777215*Math.random());var i=r.color.getHSL();i.s=Math.min(1,1.1*i.s),i.l=Math.min(1,1.1*i.l);var o=i.h,a=i.s,s=i.l;r.hoverColor=(new x.Color).setHSL(o,a,s),r.pressedColor=16711680;var u=e.initialPosition;return r.state={hovered:!1,pressed:!1,position:u},r}return(0,v.default)(t,e),(0,d.default)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this._onDocumentMouseUp)}},{key:"render",value:function(){var e=this.rotation,t=this.scale,n=this.props.cursor.dragging,r=this.state,i=r.hovered,o=r.pressed,a=r.position,s=void 0,l=i&&!n;return s=o?this.pressedColor:l?this.hoverColor:this.color,E.default.createElement("group",{position:a,rotation:e,scale:t},E.default.createElement("mesh",{castShadow:!0,receiveShadow:!0,onMouseEnter:this._onMouseEnter,onMouseDown:this._onMouseDown,onMouseLeave:this._onMouseLeave,ref:this._ref},E.default.createElement("geometryResource",{resourceId:"boxGeometry"}),E.default.createElement("meshLambertMaterial",{color:s})),l?E.default.createElement("mesh",{ignorePointerEvents:!0},E.default.createElement("geometryResource",{resourceId:"boxGeometry"}),E.default.createElement("materialResource",{resourceId:"highlightMaterial"})):null)}}]),t}(E.default.Component),o.propTypes={initialPosition:R.instanceOf(x.Vector3).isRequired,mouseInput:R.instanceOf(_.default),camera:R.instanceOf(x.PerspectiveCamera),onCreate:R.func.isRequired,onMouseEnter:R.func.isRequired,onMouseLeave:R.func.isRequired,onDragStart:R.func.isRequired,onDragEnd:R.func.isRequired,cursor:R.any},a);t.default=C},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(109),a=i(o),s=n(112),l=i(s),u=n(113),c=i(u),h=n(117),d=i(h),p=n(118),f=i(p),m=n(2),v=i(m),g=n(498),E=i(g),y=n(126),x=r(y),T=n(540),b=i(T),w=n(506),_=i(w),R=n(503),S=i(R),M=function(e){function t(e,n){(0,l.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e,n)),i=new b.default.World;r.world=i,i.gravity.set(0,0,0),i.broadphase=new b.default.NaiveBroadphase,i.solver.iterations=10;var o=new b.default.Box(new b.default.Vec3(1,1,1)),s=1,u=new b.default.Body({mass:s});u.addShape(o),u.angularVelocity.set(0,10,0),u.angularDamping=.5,i.addBody(u),r._onMouseDown=function(){u.angularVelocity.y+=5},r.cameraPosition=new x.Vector3(0,0,5);var c=1/60,h=function(){i.step(c),r.setState({meshPosition:(new x.Vector3).copy(u.position),meshQuaternion:(new x.Quaternion).copy(u.quaternion)})};return r._onAnimate=function(){h(),r.stats.update()},r.state={meshPosition:new x.Vector3,meshQuaternion:new x.Quaternion},r}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentWillUnmount",value:function(){delete this.world,delete this.stats}},{key:"componentDidMount",value:function(){var e=this.refs.container;this.stats=new _.default,this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",e.appendChild(this.stats.domElement)}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=this.state,i=r.meshPosition,o=r.meshQuaternion;return v.default.createElement("div",{ref:"container",onMouseDown:this._onMouseDown},v.default.createElement(E.default,{antialias:!0,mainCamera:"camera",width:t,height:n,onAnimate:this._onAnimate},v.default.createElement("scene",null,v.default.createElement("perspectiveCamera",{name:"camera",fov:75,aspect:t/n,near:1,far:100,position:this.cameraPosition}),v.default.createElement("mesh",{position:i,quaternion:o},v.default.createElement("boxGeometry",{width:2,height:2,depth:2}),v.default.createElement("meshBasicMaterial",{color:65280,wireframe:!0})))))}}]),t}(S.default);t.default=M},function(e,t,n){e.exports={version:n(541).version,AABB:n(542),ArrayCollisionMatrix:n(546),Body:n(547),Box:n(552),Broadphase:n(555),Constraint:n(557),ContactEquation:n(558),Narrowphase:n(561),ConeTwistConstraint:n(568),ContactMaterial:n(572),ConvexPolyhedron:n(553),Cylinder:n(573),DistanceConstraint:n(574),Equation:n(559),EventTarget:n(548),FrictionEquation:n(567),GSSolver:n(575),GridBroadphase:n(576),Heightfield:n(577),HingeConstraint:n(578),LockConstraint:n(580),Mat3:n(544),Material:n(551),NaiveBroadphase:n(581),ObjectCollisionMatrix:n(582),Pool:n(566),Particle:n(583),Plane:n(556),PointToPointConstraint:n(569),Quaternion:n(550),Ray:n(562),RaycastVehicle:n(584),RaycastResult:n(563),RigidVehicle:n(586),RotationalEquation:n(571),RotationalMotorEquation:n(579),SAPBroadphase:n(588),SPHSystem:n(589),Shape:n(549),Solver:n(564),Sphere:n(587),SplitSolver:n(590),Spring:n(591),Trimesh:n(592),Vec3:n(543),Vec3Pool:n(565),World:n(594)}},function(e,t){e.exports={_args:[[{raw:"cannon@^0.6.2",scope:null,escapedName:"cannon",name:"cannon",rawSpec:"^0.6.2",spec:">=0.6.2 <0.7.0",type:"range"},"/Users/Yozzo/Documents/development/suki/react-three-renderer/react-three-renderer-example"]],_from:"cannon@>=0.6.2 <0.7.0",_id:"cannon@0.6.2",_inCache:!0,_installable:!0,_location:"/cannon",_npmUser:{name:"schteppe",email:"schteppe@gmail.com"},_npmVersion:"1.4.3",_phantomChildren:{},_requested:{raw:"cannon@^0.6.2",scope:null,escapedName:"cannon",name:"cannon",rawSpec:"^0.6.2",spec:">=0.6.2 <0.7.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/cannon/-/cannon-0.6.2.tgz",_shasum:"1e7bc72dd5841982f3c104c2bc578bfa4fb1c572",_shrinkwrap:null,_spec:"cannon@^0.6.2",_where:"/Users/Yozzo/Documents/development/suki/react-three-renderer/react-three-renderer-example",author:{name:"Stefan Hedman",email:"schteppe@gmail.com",url:"http://steffe.se"},bugs:{url:"https://github.com/schteppe/cannon.js/issues"},dependencies:{},description:"A lightweight 3D physics engine written in JavaScript.",devDependencies:{browserify:"*",grunt:"~0.4.0","grunt-browserify":"^2.1.4","grunt-contrib-concat":"~0.1.3","grunt-contrib-jshint":"~0.1.1","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"^0.5.1","grunt-contrib-yuidoc":"^0.5.2",jshint:"latest",nodeunit:"^0.9.0","uglify-js":"latest"},directories:{},dist:{shasum:"1e7bc72dd5841982f3c104c2bc578bfa4fb1c572",tarball:"https://registry.npmjs.org/cannon/-/cannon-0.6.2.tgz"},engines:{node:"*"},homepage:"https://github.com/schteppe/cannon.js",keywords:["cannon.js","cannon","physics","engine","3d"],licenses:[{type:"MIT"}],main:"./build/cannon.js",maintainers:[{name:"schteppe",email:"schteppe@gmail.com"}],name:"cannon",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/schteppe/cannon.js.git"},version:"0.6.2"}},function(e,t,n){function r(e){e=e||{},this.lowerBound=new i,e.lowerBound&&this.lowerBound.copy(e.lowerBound),this.upperBound=new i,e.upperBound&&this.upperBound.copy(e.upperBound)}var i=n(543);n(545);e.exports=r;var o=new i;r.prototype.setFromPoints=function(e,t,n,r){var i=this.lowerBound,a=this.upperBound,s=n;i.copy(e[0]),s&&s.vmult(i,i),a.copy(i);for(var l=1;l<e.length;l++){var u=e[l];s&&(s.vmult(u,o),u=o),u.x>a.x&&(a.x=u.x),u.x<i.x&&(i.x=u.x),u.y>a.y&&(a.y=u.y),u.y<i.y&&(i.y=u.y),u.z>a.z&&(a.z=u.z),u.z<i.z&&(i.z=u.z)}return t&&(t.vadd(i,i),t.vadd(a,a)),r&&(i.x-=r,i.y-=r,i.z-=r,a.x+=r,a.y+=r,a.z+=r),this},r.prototype.copy=function(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this},r.prototype.clone=function(){return(new r).copy(this)},r.prototype.extend=function(e){var t=e.lowerBound.x;this.lowerBound.x>t&&(this.lowerBound.x=t);var n=e.upperBound.x;this.upperBound.x<n&&(this.upperBound.x=n);var t=e.lowerBound.y;this.lowerBound.y>t&&(this.lowerBound.y=t);var n=e.upperBound.y;this.upperBound.y<n&&(this.upperBound.y=n);var t=e.lowerBound.z;this.lowerBound.z>t&&(this.lowerBound.z=t);var n=e.upperBound.z;this.upperBound.z<n&&(this.upperBound.z=n)},r.prototype.overlaps=function(e){var t=this.lowerBound,n=this.upperBound,r=e.lowerBound,i=e.upperBound;return(r.x<=n.x&&n.x<=i.x||t.x<=i.x&&i.x<=n.x)&&(r.y<=n.y&&n.y<=i.y||t.y<=i.y&&i.y<=n.y)&&(r.z<=n.z&&n.z<=i.z||t.z<=i.z&&i.z<=n.z)},r.prototype.contains=function(e){var t=this.lowerBound,n=this.upperBound,r=e.lowerBound,i=e.upperBound;return t.x<=r.x&&n.x>=i.x&&t.y<=r.y&&n.y>=i.y&&t.z<=r.z&&n.z>=i.z},r.prototype.getCorners=function(e,t,n,r,i,o,a,s){var l=this.lowerBound,u=this.upperBound;e.copy(l),t.set(u.x,l.y,l.z),n.set(u.x,u.y,l.z),r.set(l.x,u.y,u.z),i.set(u.x,l.y,l.z),o.set(l.x,u.y,l.z),a.set(l.x,l.y,u.z),s.copy(u)};var a=[new i,new i,new i,new i,new i,new i,new i,new i];r.prototype.toLocalFrame=function(e,t){var n=a,r=n[0],i=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7];this.getCorners(r,i,o,s,l,u,c,h);for(var d=0;8!==d;d++){var p=n[d];e.pointToLocal(p,p)}return t.setFromPoints(n)},r.prototype.toWorldFrame=function(e,t){var n=a,r=n[0],i=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7];this.getCorners(r,i,o,s,l,u,c,h);for(var d=0;8!==d;d++){var p=n[d];e.pointToWorld(p,p)}return t.setFromPoints(n)}},function(e,t,n){function r(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}e.exports=r;var i=n(544);r.ZERO=new r(0,0,0),r.UNIT_X=new r(1,0,0),r.UNIT_Y=new r(0,1,0),r.UNIT_Z=new r(0,0,1),r.prototype.cross=function(e,t){var n=e.x,i=e.y,o=e.z,a=this.x,s=this.y,l=this.z;return t=t||new r,t.x=s*o-l*i,t.y=l*n-a*o,t.z=a*i-s*n,t},r.prototype.set=function(e,t,n){return this.x=e,this.y=t,this.z=n,this},r.prototype.setZero=function(){this.x=this.y=this.z=0},r.prototype.vadd=function(e,t){return t?(t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z,void 0):new r(this.x+e.x,this.y+e.y,this.z+e.z)},r.prototype.vsub=function(e,t){return t?(t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z,void 0):new r(this.x-e.x,this.y-e.y,this.z-e.z)},r.prototype.crossmat=function(){return new i([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])},r.prototype.normalize=function(){var e=this.x,t=this.y,n=this.z,r=Math.sqrt(e*e+t*t+n*n);if(r>0){var i=1/r;this.x*=i,this.y*=i,this.z*=i}else this.x=0,this.y=0,this.z=0;return r},r.prototype.unit=function(e){e=e||new r;var t=this.x,n=this.y,i=this.z,o=Math.sqrt(t*t+n*n+i*i);return o>0?(o=1/o,e.x=t*o,e.y=n*o,e.z=i*o):(e.x=1,e.y=0,e.z=0),e},r.prototype.norm=function(){var e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)},r.prototype.length=r.prototype.norm,r.prototype.norm2=function(){return this.dot(this)},r.prototype.lengthSquared=r.prototype.norm2,r.prototype.distanceTo=function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z;return Math.sqrt((i-t)*(i-t)+(o-n)*(o-n)+(a-r)*(a-r))},r.prototype.distanceSquared=function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z;return(i-t)*(i-t)+(o-n)*(o-n)+(a-r)*(a-r)},r.prototype.mult=function(e,t){t=t||new r;var n=this.x,i=this.y,o=this.z;return t.x=e*n,t.y=e*i,t.z=e*o,t},r.prototype.scale=r.prototype.mult,r.prototype.dot=function(e){return this.x*e.x+this.y*e.y+this.z*e.z},r.prototype.isZero=function(){return 0===this.x&&0===this.y&&0===this.z},r.prototype.negate=function(e){return e=e||new r,e.x=-this.x,e.y=-this.y,e.z=-this.z,e};var o=new r,a=new r;r.prototype.tangents=function(e,t){var n=this.norm();if(n>0){var r=o,i=1/n;r.set(this.x*i,this.y*i,this.z*i);var s=a;Math.abs(r.x)<.9?(s.set(1,0,0),r.cross(s,e)):(s.set(0,1,0),r.cross(s,e)),r.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)},r.prototype.toString=function(){return this.x+","+this.y+","+this.z},r.prototype.toArray=function(){return[this.x,this.y,this.z]},r.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},r.prototype.lerp=function(e,t,n){var r=this.x,i=this.y,o=this.z;n.x=r+(e.x-r)*t,n.y=i+(e.y-i)*t,n.z=o+(e.z-o)*t},r.prototype.almostEquals=function(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)},r.prototype.almostZero=function(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)};var s=new r;r.prototype.isAntiparallelTo=function(e,t){return this.negate(s),s.almostEquals(e,t)},r.prototype.clone=function(){return new r(this.x,this.y,this.z)}},function(e,t,n){function r(e){e?this.elements=e:this.elements=[0,0,0,0,0,0,0,0,0]}e.exports=r;var i=n(543);r.prototype.identity=function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1},r.prototype.setZero=function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0},r.prototype.setTrace=function(e){var t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z},r.prototype.getTrace=function(e){var e=e||new i,t=this.elements;e.x=t[0],e.y=t[4],e.z=t[8]},r.prototype.vmult=function(e,t){t=t||new i;var n=this.elements,r=e.x,o=e.y,a=e.z;return t.x=n[0]*r+n[1]*o+n[2]*a,t.y=n[3]*r+n[4]*o+n[5]*a,t.z=n[6]*r+n[7]*o+n[8]*a,t},r.prototype.smult=function(e){for(var t=0;t<this.elements.length;t++)this.elements[t]*=e},r.prototype.mmult=function(e,t){for(var n=t||new r,i=0;i<3;i++)for(var o=0;o<3;o++){for(var a=0,s=0;s<3;s++)a+=e.elements[i+3*s]*this.elements[s+3*o];n.elements[i+3*o]=a}return n},r.prototype.scale=function(e,t){t=t||new r;for(var n=this.elements,i=t.elements,o=0;3!==o;o++)i[3*o+0]=e.x*n[3*o+0],i[3*o+1]=e.y*n[3*o+1],i[3*o+2]=e.z*n[3*o+2];return t},r.prototype.solve=function(e,t){t=t||new i;for(var n=3,r=4,o=[],a=0;a<n*r;a++)o.push(0);var a,s;for(a=0;a<3;a++)for(s=0;s<3;s++)o[a+r*s]=this.elements[a+3*s];o[3]=e.x,o[7]=e.y,o[11]=e.z;var l,u,c=3,h=c,d=4;do{if(a=h-c,0===o[a+r*a])for(s=a+1;s<h;s++)if(0!==o[a+r*s]){l=d;do u=d-l,o[u+r*a]+=o[u+r*s];while(--l);break}if(0!==o[a+r*a])for(s=a+1;s<h;s++){var p=o[a+r*s]/o[a+r*a];l=d;do u=d-l,o[u+r*s]=u<=a?0:o[u+r*s]-o[u+r*a]*p;while(--l)}}while(--c);if(t.z=o[2*r+3]/o[2*r+2],t.y=(o[1*r+3]-o[1*r+2]*t.z)/o[1*r+1],t.x=(o[0*r+3]-o[0*r+2]*t.z-o[0*r+1]*t.y)/o[0*r+0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=["+t.toString()+"], b=["+e.toString()+"], A=["+this.toString()+"]";return t},r.prototype.e=function(e,t,n){return void 0===n?this.elements[t+3*e]:void(this.elements[t+3*e]=n)},r.prototype.copy=function(e){for(var t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this},r.prototype.toString=function(){for(var e="",t=",",n=0;n<9;n++)e+=this.elements[n]+t;return e},r.prototype.reverse=function(e){e=e||new r;for(var t=3,n=6,i=[],o=0;o<t*n;o++)i.push(0);var o,a;for(o=0;o<3;o++)for(a=0;a<3;a++)i[o+n*a]=this.elements[o+3*a];i[3]=1,i[9]=0,i[15]=0,i[4]=0,i[10]=1,i[16]=0,i[5]=0,i[11]=0,i[17]=1;var s,l,u=3,c=u,h=n;do{if(o=c-u,0===i[o+n*o])for(a=o+1;a<c;a++)if(0!==i[o+n*a]){s=h;do l=h-s,i[l+n*o]+=i[l+n*a];while(--s);break}if(0!==i[o+n*o])for(a=o+1;a<c;a++){var d=i[o+n*a]/i[o+n*o];s=h;do l=h-s,i[l+n*a]=l<=o?0:i[l+n*a]-i[l+n*o]*d;while(--s)}}while(--u);o=2;do{a=o-1;do{var d=i[o+n*a]/i[o+n*o];s=n;do l=n-s,i[l+n*a]=i[l+n*a]-i[l+n*o]*d;while(--s)}while(a--)}while(--o);o=2;do{var d=1/i[o+n*o];s=n;do l=n-s,i[l+n*o]=i[l+n*o]*d;while(--s)}while(o--);o=2;do{a=2;do{if(l=i[t+a+n*o],isNaN(l)||l===1/0)throw"Could not reverse! A=["+this.toString()+"]";e.e(o,a,l)}while(a--)}while(o--);return e},r.prototype.setRotationFromQuaternion=function(e){var t=e.x,n=e.y,r=e.z,i=e.w,o=t+t,a=n+n,s=r+r,l=t*o,u=t*a,c=t*s,h=n*a,d=n*s,p=r*s,f=i*o,m=i*a,v=i*s,g=this.elements;
return g[0]=1-(h+p),g[1]=u-v,g[2]=c+m,g[3]=u+v,g[4]=1-(l+p),g[5]=d-f,g[6]=c-m,g[7]=d+f,g[8]=1-(l+h),this},r.prototype.transpose=function(e){e=e||new r;for(var t=e.elements,n=this.elements,i=0;3!==i;i++)for(var o=0;3!==o;o++)t[3*i+o]=n[3*o+i];return e}},function(e,t){function n(){}e.exports=n,n.defaults=function(e,t){e=e||{};for(var n in t)n in e||(e[n]=t[n]);return e}},function(e,t){function n(){this.matrix=[]}e.exports=n,n.prototype.get=function(e,t){if(e=e.index,t=t.index,t>e){var n=t;t=e,e=n}return this.matrix[(e*(e+1)>>1)+t-1]},n.prototype.set=function(e,t,n){if(e=e.index,t=t.index,t>e){var r=t;t=e,e=r}this.matrix[(e*(e+1)>>1)+t-1]=n?1:0},n.prototype.reset=function(){for(var e=0,t=this.matrix.length;e!==t;e++)this.matrix[e]=0},n.prototype.setNumObjects=function(e){this.matrix.length=e*(e-1)>>1}},function(e,t,n){function r(e){e=e||{},i.apply(this),this.id=r.idCounter++,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new o,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:1,this.collisionResponse=!0,this.position=new o,e.position&&this.position.copy(e.position),this.previousPosition=new o,this.initPosition=new o,this.velocity=new o,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new o,this.force=new o;var t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?r.STATIC:r.DYNAMIC,typeof e.type==typeof r.STATIC&&(this.type=e.type),this.allowSleep="undefined"==typeof e.allowSleep||e.allowSleep,this.sleepState=0,this.sleepSpeedLimit="undefined"!=typeof e.sleepSpeedLimit?e.sleepSpeedLimit:.1,this.sleepTimeLimit="undefined"!=typeof e.sleepTimeLimit?e.sleepTimeLimit:1,this.timeLastSleepy=0,this._wakeUpAfterNarrowphase=!1,this.torque=new o,this.quaternion=new s,e.quaternion&&this.quaternion.copy(e.quaternion),this.initQuaternion=new s,this.angularVelocity=new o,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new o,this.interpolatedPosition=new o,this.interpolatedQuaternion=new s,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new o,this.invInertia=new o,this.invInertiaWorld=new a,this.invMassSolve=0,this.invInertiaSolve=new o,this.invInertiaWorldSolve=new a,this.fixedRotation="undefined"!=typeof e.fixedRotation&&e.fixedRotation,this.angularDamping="undefined"!=typeof e.angularDamping?e.angularDamping:.01,this.aabb=new l,this.aabbNeedsUpdate=!0,this.wlambda=new o,e.shape&&this.addShape(e.shape),this.updateMassProperties()}e.exports=r;var i=n(548),o=(n(549),n(543)),a=n(544),s=n(550),l=(n(551),n(542)),u=n(552);r.prototype=new i,r.prototype.constructor=r,r.DYNAMIC=1,r.STATIC=2,r.KINEMATIC=4,r.AWAKE=0,r.SLEEPY=1,r.SLEEPING=2,r.idCounter=0,r.prototype.wakeUp=function(){var e=this.sleepState;this.sleepState=0,e===r.SLEEPING&&this.dispatchEvent({type:"wakeup"})},r.prototype.sleep=function(){this.sleepState=r.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0)},r.sleepyEvent={type:"sleepy"},r.sleepEvent={type:"sleep"},r.prototype.sleepTick=function(e){if(this.allowSleep){var t=this.sleepState,n=this.velocity.norm2()+this.angularVelocity.norm2(),i=Math.pow(this.sleepSpeedLimit,2);t===r.AWAKE&&n<i?(this.sleepState=r.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(r.sleepyEvent)):t===r.SLEEPY&&n>i?this.wakeUp():t===r.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(r.sleepEvent))}},r.prototype.updateSolveMassProperties=function(){this.sleepState===r.SLEEPING||this.type===r.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))},r.prototype.pointToLocalFrame=function(e,t){var t=t||new o;return e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t},r.prototype.vectorToLocalFrame=function(e,t){var t=t||new o;return this.quaternion.conjugate().vmult(e,t),t},r.prototype.pointToWorldFrame=function(e,t){var t=t||new o;return this.quaternion.vmult(e,t),t.vadd(this.position,t),t},r.prototype.vectorToWorldFrame=function(e,t){var t=t||new o;return this.quaternion.vmult(e,t),t};var c=new o,h=new s;r.prototype.addShape=function(e,t,n){var r=new o,i=new s;return t&&r.copy(t),n&&i.copy(n),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(i),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,this},r.prototype.updateBoundingRadius=function(){for(var e=this.shapes,t=this.shapeOffsets,n=e.length,r=0,i=0;i!==n;i++){var o=e[i];o.updateBoundingSphereRadius();var a=t[i].norm(),s=o.boundingSphereRadius;a+s>r&&(r=a+s)}this.boundingRadius=r};var d=new l;r.prototype.computeAABB=function(){for(var e=this.shapes,t=this.shapeOffsets,n=this.shapeOrientations,r=e.length,i=c,o=h,a=this.quaternion,s=this.aabb,l=d,u=0;u!==r;u++){var p=e[u];n[u].mult(a,o),o.vmult(t[u],i),i.vadd(this.position,i),p.calculateWorldAABB(i,o,l.lowerBound,l.upperBound),0===u?s.copy(l):s.extend(l)}this.aabbNeedsUpdate=!1};var p=new a,f=new a;new a;r.prototype.updateInertiaWorld=function(e){var t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){var n=p,r=f;n.setRotationFromQuaternion(this.quaternion),n.transpose(r),n.scale(t,n),n.mmult(r,this.invInertiaWorld)}else;};var m=new o,v=new o;r.prototype.applyForce=function(e,t){if(this.type===r.DYNAMIC){var n=m;t.vsub(this.position,n);var i=v;n.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}};var g=new o,E=new o;r.prototype.applyLocalForce=function(e,t){if(this.type===r.DYNAMIC){var n=g,i=E;this.vectorToWorldFrame(e,n),this.pointToWorldFrame(t,i),this.applyForce(n,i)}};var y=new o,x=new o,T=new o;r.prototype.applyImpulse=function(e,t){if(this.type===r.DYNAMIC){var n=y;t.vsub(this.position,n);var i=x;i.copy(e),i.mult(this.invMass,i),this.velocity.vadd(i,this.velocity);var o=T;n.cross(e,o),this.invInertiaWorld.vmult(o,o),this.angularVelocity.vadd(o,this.angularVelocity)}};var b=new o,w=new o;r.prototype.applyLocalImpulse=function(e,t){if(this.type===r.DYNAMIC){var n=b,i=w;this.vectorToWorldFrame(e,n),this.pointToWorldFrame(t,i),this.applyImpulse(n,i)}};var _=new o;r.prototype.updateMassProperties=function(){var e=_;this.invMass=this.mass>0?1/this.mass:0;var t=this.inertia,n=this.fixedRotation;this.computeAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),u.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!n?1/t.x:0,t.y>0&&!n?1/t.y:0,t.z>0&&!n?1/t.z:0),this.updateInertiaWorld(!0)},r.prototype.getVelocityAtWorldPoint=function(e,t){var n=new o;return e.vsub(this.position,n),this.angularVelocity.cross(n,t),this.velocity.vadd(t,t),t}},function(e,t){var n=function(){};e.exports=n,n.prototype={constructor:n,addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t),this},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(void 0===this._listeners)return this;var n=this._listeners;if(void 0===n[e])return this;var r=n[e].indexOf(t);return r!==-1&&n[e].splice(r,1),this},dispatchEvent:function(e){if(void 0===this._listeners)return this;var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var r=0,i=n.length;r<i;r++)n[r].call(this,e)}return this}}},function(e,t,n){function r(){this.id=r.idCounter++,this.type=0,this.boundingSphereRadius=0,this.collisionResponse=!0,this.material=null}e.exports=r;var r=n(549);n(543),n(550),n(551);r.prototype.constructor=r,r.prototype.updateBoundingSphereRadius=function(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type},r.prototype.volume=function(){throw"volume() not implemented for shape type "+this.type},r.prototype.calculateLocalInertia=function(e,t){throw"calculateLocalInertia() not implemented for shape type "+this.type},r.idCounter=0,r.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256}},function(e,t,n){function r(e,t,n,r){this.x=void 0!==e?e:0,this.y=void 0!==t?t:0,this.z=void 0!==n?n:0,this.w=void 0!==r?r:1}e.exports=r;var i=n(543);r.prototype.set=function(e,t,n,r){this.x=e,this.y=t,this.z=n,this.w=r},r.prototype.toString=function(){return this.x+","+this.y+","+this.z+","+this.w},r.prototype.toArray=function(){return[this.x,this.y,this.z,this.w]},r.prototype.setFromAxisAngle=function(e,t){var n=Math.sin(.5*t);this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(.5*t)},r.prototype.toAxisAngle=function(e){e=e||new i,this.normalize();var t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]};var o=new i,a=new i;r.prototype.setFromVectors=function(e,t){if(e.isAntiparallelTo(t)){var n=o,r=a;e.tangents(n,r),this.setFromAxisAngle(n,Math.PI)}else{var i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(Math.pow(e.norm(),2)*Math.pow(t.norm(),2))+e.dot(t),this.normalize()}};var s=new i,l=new i,u=new i;r.prototype.mult=function(e,t){t=t||new r;var n=this.w,i=s,o=l,a=u;return i.set(this.x,this.y,this.z),o.set(e.x,e.y,e.z),t.w=n*e.w-i.dot(o),i.cross(o,a),t.x=n*o.x+e.w*i.x+a.x,t.y=n*o.y+e.w*i.y+a.y,t.z=n*o.z+e.w*i.z+a.z,t},r.prototype.inverse=function(e){var t=this.x,n=this.y,i=this.z,o=this.w;e=e||new r,this.conjugate(e);var a=1/(t*t+n*n+i*i+o*o);return e.x*=a,e.y*=a,e.z*=a,e.w*=a,e},r.prototype.conjugate=function(e){return e=e||new r,e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e},r.prototype.normalize=function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e)},r.prototype.normalizeFast=function(){var e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e)},r.prototype.vmult=function(e,t){t=t||new i;var n=e.x,r=e.y,o=e.z,a=this.x,s=this.y,l=this.z,u=this.w,c=u*n+s*o-l*r,h=u*r+l*n-a*o,d=u*o+a*r-s*n,p=-a*n-s*r-l*o;return t.x=c*u+p*-a+h*-l-d*-s,t.y=h*u+p*-s+d*-a-c*-l,t.z=d*u+p*-l+c*-s-h*-a,t},r.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},r.prototype.toEuler=function(e,t){t=t||"YZX";var n,r,i,o=this.x,a=this.y,s=this.z,l=this.w;switch(t){case"YZX":var u=o*a+s*l;if(u>.499&&(n=2*Math.atan2(o,l),r=Math.PI/2,i=0),u<-.499&&(n=-2*Math.atan2(o,l),r=-Math.PI/2,i=0),isNaN(n)){var c=o*o,h=a*a,d=s*s;n=Math.atan2(2*a*l-2*o*s,1-2*h-2*d),r=Math.asin(2*u),i=Math.atan2(2*o*l-2*a*s,1-2*c-2*d)}break;default:throw new Error("Euler order "+t+" not supported yet.")}e.y=n,e.z=r,e.x=i},r.prototype.setFromEuler=function(e,t,n,r){r=r||"XYZ";var i=Math.cos(e/2),o=Math.cos(t/2),a=Math.cos(n/2),s=Math.sin(e/2),l=Math.sin(t/2),u=Math.sin(n/2);return"XYZ"===r?(this.x=s*o*a+i*l*u,this.y=i*l*a-s*o*u,this.z=i*o*u+s*l*a,this.w=i*o*a-s*l*u):"YXZ"===r?(this.x=s*o*a+i*l*u,this.y=i*l*a-s*o*u,this.z=i*o*u-s*l*a,this.w=i*o*a+s*l*u):"ZXY"===r?(this.x=s*o*a-i*l*u,this.y=i*l*a+s*o*u,this.z=i*o*u+s*l*a,this.w=i*o*a-s*l*u):"ZYX"===r?(this.x=s*o*a-i*l*u,this.y=i*l*a+s*o*u,this.z=i*o*u-s*l*a,this.w=i*o*a+s*l*u):"YZX"===r?(this.x=s*o*a+i*l*u,this.y=i*l*a+s*o*u,this.z=i*o*u-s*l*a,this.w=i*o*a-s*l*u):"XZY"===r&&(this.x=s*o*a-i*l*u,this.y=i*l*a-s*o*u,this.z=i*o*u+s*l*a,this.w=i*o*a+s*l*u),this},r.prototype.clone=function(){return new r(this.x,this.y,this.z,this.w)}},function(e,t){function n(e){var t="";e=e||{},"string"==typeof e?(t=e,e={}):"object"==typeof e&&(t=""),this.name=t,this.id=n.idCounter++,this.friction="undefined"!=typeof e.friction?e.friction:-1,this.restitution="undefined"!=typeof e.restitution?e.restitution:-1}e.exports=n,n.idCounter=0},function(e,t,n){function r(e){i.call(this),this.type=i.types.BOX,this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}e.exports=r;var i=n(549),o=n(543),a=n(553);r.prototype=new i,r.prototype.constructor=r,r.prototype.updateConvexPolyhedronRepresentation=function(){var e=this.halfExtents.x,t=this.halfExtents.y,n=this.halfExtents.z,r=o,i=[new r(-e,-t,-n),new r(e,-t,-n),new r(e,t,-n),new r(-e,t,-n),new r(-e,-t,n),new r(e,-t,n),new r(e,t,n),new r(-e,t,n)],s=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],l=([new r(0,0,1),new r(0,1,0),new r(1,0,0)],new a(i,s));this.convexPolyhedronRepresentation=l,l.material=this.material},r.prototype.calculateLocalInertia=function(e,t){return t=t||new o,r.calculateInertia(this.halfExtents,e,t),t},r.calculateInertia=function(e,t,n){var r=e;n.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),n.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),n.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x)},r.prototype.getSideNormals=function(e,t){var n=e,r=this.halfExtents;if(n[0].set(r.x,0,0),n[1].set(0,r.y,0),n[2].set(0,0,r.z),n[3].set(-r.x,0,0),n[4].set(0,-r.y,0),n[5].set(0,0,-r.z),void 0!==t)for(var i=0;i!==n.length;i++)t.vmult(n[i],n[i]);return n},r.prototype.volume=function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z},r.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.halfExtents.norm()};var s=new o;new o;r.prototype.forEachWorldCorner=function(e,t,n){for(var r=this.halfExtents,i=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]],o=0;o<i.length;o++)s.set(i[o][0],i[o][1],i[o][2]),t.vmult(s,s),e.vadd(s,s),n(s.x,s.y,s.z)};var l=[new o,new o,new o,new o,new o,new o,new o,new o];r.prototype.calculateWorldAABB=function(e,t,n,r){var i=this.halfExtents;l[0].set(i.x,i.y,i.z),l[1].set(-i.x,i.y,i.z),l[2].set(-i.x,-i.y,i.z),l[3].set(-i.x,-i.y,-i.z),l[4].set(i.x,-i.y,-i.z),l[5].set(i.x,i.y,-i.z),l[6].set(-i.x,i.y,-i.z),l[7].set(i.x,-i.y,i.z);var o=l[0];t.vmult(o,o),e.vadd(o,o),r.copy(o),n.copy(o);for(var a=1;a<8;a++){var o=l[a];t.vmult(o,o),e.vadd(o,o);var s=o.x,u=o.y,c=o.z;s>r.x&&(r.x=s),u>r.y&&(r.y=u),c>r.z&&(r.z=c),s<n.x&&(n.x=s),u<n.y&&(n.y=u),c<n.z&&(n.z=c)}}},function(e,t,n){function r(e,t,n){i.call(this),this.type=i.types.CONVEXPOLYHEDRON,this.vertices=e||[],this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.faces=t||[],this.faceNormals=[],this.computeNormals(),this.worldFaceNormalsNeedsUpdate=!0,this.worldFaceNormals=[],this.uniqueEdges=[],this.uniqueAxes=n?n.slice():null,this.computeEdges(),this.updateBoundingSphereRadius()}e.exports=r;var i=n(549),o=n(543),a=(n(550),n(554));r.prototype=new i,r.prototype.constructor=r;var s=new o;r.prototype.computeEdges=function(){var e=this.faces,t=this.vertices,n=(t.length,this.uniqueEdges);n.length=0;for(var r=s,i=0;i!==e.length;i++)for(var o=e[i],a=o.length,l=0;l!==a;l++){var u=(l+1)%a;t[o[l]].vsub(t[o[u]],r),r.normalize();for(var c=!1,h=0;h!==n.length;h++)if(n[h].almostEquals(r)||n[h].almostEquals(r)){c=!0;break}c||n.push(r.clone())}},r.prototype.computeNormals=function(){this.faceNormals.length=this.faces.length;for(var e=0;e<this.faces.length;e++){for(var t=0;t<this.faces[e].length;t++)if(!this.vertices[this.faces[e][t]])throw new Error("Vertex "+this.faces[e][t]+" not found!");var n=this.faceNormals[e]||new o;this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n;var r=this.vertices[this.faces[e][0]];if(n.dot(r)<0){console.error(".faceNormals["+e+"] = Vec3("+n.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");for(var t=0;t<this.faces[e].length;t++)console.warn(".vertices["+this.faces[e][t]+"] = Vec3("+this.vertices[this.faces[e][t]].toString()+")")}}};var l=new o,u=new o;r.computeNormal=function(e,t,n,r){t.vsub(e,u),n.vsub(t,l),l.cross(u,r),r.isZero()||r.normalize()},r.prototype.getFaceNormal=function(e,t){var n=this.faces[e],i=this.vertices[n[0]],o=this.vertices[n[1]],a=this.vertices[n[2]];return r.computeNormal(i,o,a,t)};var c=new o;r.prototype.clipAgainstHull=function(e,t,n,r,i,a,s,l,u){for(var h=c,d=-1,p=-Number.MAX_VALUE,f=0;f<n.faces.length;f++){h.copy(n.faceNormals[f]),i.vmult(h,h);var m=h.dot(a);m>p&&(p=m,d=f)}for(var v=[],g=n.faces[d],E=g.length,y=0;y<E;y++){var x=n.vertices[g[y]],T=new o;T.copy(x),i.vmult(T,T),r.vadd(T,T),v.push(T)}d>=0&&this.clipFaceAgainstHull(a,e,t,v,s,l,u)};var h=new o,d=new o,p=new o,f=new o,m=new o,v=new o;r.prototype.findSeparatingAxis=function(e,t,n,r,i,o,a,s){var l=h,u=d,c=p,g=f,E=m,y=v,x=Number.MAX_VALUE,T=this,b=0;if(T.uniqueAxes)for(var w=0;w!==T.uniqueAxes.length;w++){n.vmult(T.uniqueAxes[w],l);var _=T.testSepAxis(l,e,t,n,r,i);if(_===!1)return!1;_<x&&(x=_,o.copy(l))}else for(var R=a?a.length:T.faces.length,w=0;w<R;w++){var S=a?a[w]:w;l.copy(T.faceNormals[S]),n.vmult(l,l);var _=T.testSepAxis(l,e,t,n,r,i);if(_===!1)return!1;_<x&&(x=_,o.copy(l))}if(e.uniqueAxes)for(var w=0;w!==e.uniqueAxes.length;w++){i.vmult(e.uniqueAxes[w],u),b++;var _=T.testSepAxis(u,e,t,n,r,i);if(_===!1)return!1;_<x&&(x=_,o.copy(u))}else for(var M=s?s.length:e.faces.length,w=0;w<M;w++){var S=s?s[w]:w;u.copy(e.faceNormals[S]),i.vmult(u,u),b++;var _=T.testSepAxis(u,e,t,n,r,i);if(_===!1)return!1;_<x&&(x=_,o.copy(u))}for(var C=0;C!==T.uniqueEdges.length;C++){n.vmult(T.uniqueEdges[C],g);for(var H=0;H!==e.uniqueEdges.length;H++)if(i.vmult(e.uniqueEdges[H],E),g.cross(E,y),!y.almostZero()){y.normalize();var A=T.testSepAxis(y,e,t,n,r,i);if(A===!1)return!1;A<x&&(x=A,o.copy(y))}}return r.vsub(t,c),c.dot(o)>0&&o.negate(o),!0};var g=[],E=[];r.prototype.testSepAxis=function(e,t,n,i,o,a){var s=this;r.project(s,e,n,i,g),r.project(t,e,o,a,E);var l=g[0],u=g[1],c=E[0],h=E[1];if(l<h||c<u)return!1;var d=l-h,p=c-u,f=d<p?d:p;return f};var y=new o,x=new o;r.prototype.calculateLocalInertia=function(e,t){this.computeLocalAABB(y,x);var n=x.x-y.x,r=x.y-y.y,i=x.z-y.z;t.x=1/12*e*(2*r*2*r+2*i*2*i),t.y=1/12*e*(2*n*2*n+2*i*2*i),t.z=1/12*e*(2*r*2*r+2*n*2*n)},r.prototype.getPlaneConstantOfFace=function(e){var t=this.faces[e],n=this.faceNormals[e],r=this.vertices[t[0]],i=-n.dot(r);return i};var T=new o,b=new o,w=new o,_=new o,R=new o,S=new o,M=new o,C=new o;r.prototype.clipFaceAgainstHull=function(e,t,n,r,i,o,a){for(var s=T,l=b,u=w,c=_,h=R,d=S,p=M,f=C,m=this,v=[],g=r,E=v,y=-1,x=Number.MAX_VALUE,H=0;H<m.faces.length;H++){s.copy(m.faceNormals[H]),n.vmult(s,s);var A=s.dot(e);A<x&&(x=A,y=H)}if(!(y<0)){var P=m.faces[y];P.connectedFaces=[];for(var L=0;L<m.faces.length;L++)for(var k=0;k<m.faces[L].length;k++)P.indexOf(m.faces[L][k])!==-1&&L!==y&&P.connectedFaces.indexOf(L)===-1&&P.connectedFaces.push(L);for(var D=(g.length,P.length),F=0;F<D;F++){var O=m.vertices[P[F]],B=m.vertices[P[(F+1)%D]];O.vsub(B,l),u.copy(l),n.vmult(u,u),t.vadd(u,u),c.copy(this.faceNormals[y]),n.vmult(c,c),t.vadd(c,c),u.cross(c,h),h.negate(h),d.copy(O),n.vmult(d,d),t.vadd(d,d);var N,I=(-d.dot(h),P.connectedFaces[F]);p.copy(this.faceNormals[I]);var U=this.getPlaneConstantOfFace(I);f.copy(p),n.vmult(f,f);var N=U-f.dot(t);for(this.clipFaceAgainstPlane(g,E,f,N);g.length;)g.shift();for(;E.length;)g.push(E.shift())}p.copy(this.faceNormals[y]);var U=this.getPlaneConstantOfFace(y);f.copy(p),n.vmult(f,f);for(var N=U-f.dot(t),L=0;L<g.length;L++){var V=f.dot(g[L])+N;if(V<=i&&(console.log("clamped: depth="+V+" to minDist="+(i+"")),V=i),V<=o){var z=g[L];if(V<=0){var j={point:z,normal:f,depth:V};a.push(j)}}}}},r.prototype.clipFaceAgainstPlane=function(e,t,n,r){var i,a,s=e.length;if(s<2)return t;var l=e[e.length-1],u=e[0];i=n.dot(l)+r;for(var c=0;c<s;c++){if(u=e[c],a=n.dot(u)+r,i<0)if(a<0){var h=new o;h.copy(u),t.push(h)}else{var h=new o;l.lerp(u,i/(i-a),h),t.push(h)}else if(a<0){var h=new o;l.lerp(u,i/(i-a),h),t.push(h),t.push(u)}l=u,i=a}return t},r.prototype.computeWorldVertices=function(e,t){for(var n=this.vertices.length;this.worldVertices.length<n;)this.worldVertices.push(new o);for(var r=this.vertices,i=this.worldVertices,a=0;a!==n;a++)t.vmult(r[a],i[a]),e.vadd(i[a],i[a]);this.worldVerticesNeedsUpdate=!1};new o;r.prototype.computeLocalAABB=function(e,t){var n=this.vertices.length,r=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var i=0;i<n;i++){var o=r[i];o.x<e.x?e.x=o.x:o.x>t.x&&(t.x=o.x),o.y<e.y?e.y=o.y:o.y>t.y&&(t.y=o.y),o.z<e.z?e.z=o.z:o.z>t.z&&(t.z=o.z)}},r.prototype.computeWorldFaceNormals=function(e){for(var t=this.faceNormals.length;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new o);for(var n=this.faceNormals,r=this.worldFaceNormals,i=0;i!==t;i++)e.vmult(n[i],r[i]);this.worldFaceNormalsNeedsUpdate=!1},r.prototype.updateBoundingSphereRadius=function(){for(var e=0,t=this.vertices,n=0,r=t.length;n!==r;n++){var i=t[n].norm2();i>e&&(e=i)}this.boundingSphereRadius=Math.sqrt(e)};var H=new o;r.prototype.calculateWorldAABB=function(e,t,n,r){for(var i,o,a,s,l,u,c=this.vertices.length,h=this.vertices,d=0;d<c;d++){H.copy(h[d]),t.vmult(H,H),e.vadd(H,H);var p=H;p.x<i||void 0===i?i=p.x:(p.x>s||void 0===s)&&(s=p.x),p.y<o||void 0===o?o=p.y:(p.y>l||void 0===l)&&(l=p.y),p.z<a||void 0===a?a=p.z:(p.z>u||void 0===u)&&(u=p.z)}n.set(i,o,a),r.set(s,l,u)},r.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},r.prototype.getAveragePointLocal=function(e){e=e||new o;for(var t=this.vertices.length,n=this.vertices,r=0;r<t;r++)e.vadd(n[r],e);return e.mult(1/t,e),e},r.prototype.transformAllPoints=function(e,t){var n=this.vertices.length,r=this.vertices;if(t){for(var i=0;i<n;i++){var o=r[i];t.vmult(o,o)}for(var i=0;i<this.faceNormals.length;i++){var o=this.faceNormals[i];t.vmult(o,o)}}if(e)for(var i=0;i<n;i++){var o=r[i];o.vadd(e,o)}};var A=new o,P=new o,L=new o;r.prototype.pointIsInside=function(e){var t=this.vertices.length,n=this.vertices,r=this.faces,i=this.faceNormals,o=null,a=this.faces.length,s=A;this.getAveragePointLocal(s);for(var l=0;l<a;l++){var t=(this.faces[l].length,i[l]),u=n[r[l][0]],c=P;e.vsub(u,c);var h=t.dot(c),d=L;s.vsub(u,d);var p=t.dot(d);if(h<0&&p>0||h>0&&p<0)return!1}return o?1:-1};var k=(new o,new o),D=new o;r.project=function(e,t,n,r,i){var o=e.vertices.length,s=k,l=0,u=0,c=D,h=e.vertices;c.setZero(),a.vectorToLocalFrame(n,r,t,s),a.pointToLocalFrame(n,r,c,c);var d=c.dot(s);u=l=h[0].dot(s);for(var p=1;p<o;p++){var f=h[p].dot(s);f>l&&(l=f),f<u&&(u=f)}if(u-=d,l-=d,u>l){var m=u;u=l,l=m}i[0]=l,i[1]=u}},function(e,t,n){function r(e){e=e||{},this.position=new i,e.position&&this.position.copy(e.position),this.quaternion=new o,e.quaternion&&this.quaternion.copy(e.quaternion)}var i=n(543),o=n(550);e.exports=r;var a=new o;r.pointToLocalFrame=function(e,t,n,r){var r=r||new i;return n.vsub(e,r),t.conjugate(a),a.vmult(r,r),r},r.prototype.pointToLocal=function(e,t){return r.pointToLocalFrame(this.position,this.quaternion,e,t)},r.pointToWorldFrame=function(e,t,n,r){var r=r||new i;return t.vmult(n,r),r.vadd(e,r),r},r.prototype.pointToWorld=function(e,t){return r.pointToWorldFrame(this.position,this.quaternion,e,t)},r.prototype.vectorToWorldFrame=function(e,t){var t=t||new i;return this.quaternion.vmult(e,t),t},r.vectorToWorldFrame=function(e,t,n){return e.vmult(t,n),n},r.vectorToLocalFrame=function(e,t,n,r){var r=r||new i;return t.w*=-1,t.vmult(n,r),t.w*=-1,r}},function(e,t,n){function r(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}var i=n(547),o=n(543),a=n(550);n(549),n(556);e.exports=r,r.prototype.collisionPairs=function(e,t,n){throw new Error("collisionPairs not implemented for this BroadPhase class!")};var s=i.STATIC|i.KINEMATIC;r.prototype.needBroadphaseCollision=function(e,t){return 0!==(e.collisionFilterGroup&t.collisionFilterMask)&&0!==(t.collisionFilterGroup&e.collisionFilterMask)&&(0===(e.type&s)&&e.sleepState!==i.SLEEPING||0===(t.type&s)&&t.sleepState!==i.SLEEPING)},r.prototype.intersectionTest=function(e,t,n,r){this.useBoundingBoxes?this.doBoundingBoxBroadphase(e,t,n,r):this.doBoundingSphereBroadphase(e,t,n,r)};var l=new o;new o,new a,new o;r.prototype.doBoundingSphereBroadphase=function(e,t,n,r){var i=l;t.position.vsub(e.position,i);var o=Math.pow(e.boundingRadius+t.boundingRadius,2),a=i.norm2();a<o&&(n.push(e),r.push(t))},r.prototype.doBoundingBoxBroadphase=function(e,t,n,r){e.aabbNeedsUpdate&&e.computeAABB(),t.aabbNeedsUpdate&&t.computeAABB(),e.aabb.overlaps(t.aabb)&&(n.push(e),r.push(t))};var u={keys:[]},c=[],h=[];r.prototype.makePairsUnique=function(e,t){for(var n=u,r=c,i=h,o=e.length,a=0;a!==o;a++)r[a]=e[a],i[a]=t[a];e.length=0,t.length=0;for(var a=0;a!==o;a++){var s=r[a].id,l=i[a].id,d=s<l?s+","+l:l+","+s;n[d]=a,n.keys.push(d)}for(var a=0;a!==n.keys.length;a++){var d=n.keys.pop(),p=n[d];e.push(r[p]),t.push(i[p]),delete n[d]}},r.prototype.setWorld=function(e){};var d=new o;r.boundingSphereCheck=function(e,t){var n=d;return e.position.vsub(t.position,n),Math.pow(e.shape.boundingSphereRadius+t.shape.boundingSphereRadius,2)>n.norm2()},r.prototype.aabbQuery=function(e,t,n){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}},function(e,t,n){function r(){i.call(this),this.type=i.types.PLANE,this.worldNormal=new o,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}e.exports=r;var i=n(549),o=n(543);r.prototype=new i,r.prototype.constructor=r,r.prototype.computeWorldNormal=function(e){var t=this.worldNormal;t.set(0,0,1),e.vmult(t,t),this.worldNormalNeedsUpdate=!1},r.prototype.calculateLocalInertia=function(e,t){return t=t||new o},r.prototype.volume=function(){return Number.MAX_VALUE};var a=new o;r.prototype.calculateWorldAABB=function(e,t,n,r){a.set(0,0,1),t.vmult(a,a);var i=Number.MAX_VALUE;n.set(-i,-i,-i),r.set(i,i,i),1===a.x&&(r.x=e.x),1===a.y&&(r.y=e.y),1===a.z&&(r.z=e.z),a.x===-1&&(n.x=e.x),a.y===-1&&(n.y=e.y),a.z===-1&&(n.z=e.z)},r.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=Number.MAX_VALUE}},function(e,t,n){function r(e,t,n){n=i.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=e,this.bodyB=t,this.id=r.idCounter++,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(e&&e.wakeUp(),t&&t.wakeUp())}e.exports=r;var i=n(545);r.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},r.prototype.enable=function(){for(var e=this.equations,t=0;t<e.length;t++)e[t].enabled=!0},r.prototype.disable=function(){for(var e=this.equations,t=0;t<e.length;t++)e[t].enabled=!1},r.idCounter=0},function(e,t,n){function r(e,t,n){n="undefined"!=typeof n?n:1e6,i.call(this,e,t,0,n),this.restitution=0,this.ri=new o,this.rj=new o,this.ni=new o}e.exports=r;var i=n(559),o=n(543);n(544);r.prototype=new i,r.prototype.constructor=r;var a=new o,s=new o,l=new o;r.prototype.computeB=function(e){var t=this.a,n=this.b,r=this.bi,i=this.bj,o=this.ri,u=this.rj,c=a,h=s,d=r.velocity,p=r.angularVelocity,f=(r.force,r.torque,i.velocity),m=i.angularVelocity,v=(i.force,i.torque,l),g=this.jacobianElementA,E=this.jacobianElementB,y=this.ni;o.cross(y,c),u.cross(y,h),y.negate(g.spatial),c.negate(g.rotational),E.spatial.copy(y),E.rotational.copy(h),v.copy(i.position),v.vadd(u,v),v.vsub(r.position,v),v.vsub(o,v);var x=y.dot(v),T=this.restitution+1,b=T*f.dot(y)-T*d.dot(y)+m.dot(h)-p.dot(c),w=this.computeGiMf(),_=-x*t-b*n-e*w;return _};var u=new o,c=new o,h=new o,d=new o,p=new o;r.prototype.getImpactVelocityAlongNormal=function(){var e=u,t=c,n=h,r=d,i=p;return this.bi.position.vadd(this.ri,n),this.bj.position.vadd(this.rj,r),this.bi.getVelocityAtWorldPoint(n,e),this.bj.getVelocityAtWorldPoint(r,t),e.vsub(t,i),this.ni.dot(i)}},function(e,t,n){function r(e,t,n,o){this.id=r.id++,this.minForce="undefined"==typeof n?-1e6:n,this.maxForce="undefined"==typeof o?1e6:o,this.bi=e,this.bj=t,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new i,this.jacobianElementB=new i,this.enabled=!0,this.setSpookParams(1e7,4,1/60)}e.exports=r;var i=n(560),o=n(543);r.prototype.constructor=r,r.id=0,r.prototype.setSpookParams=function(e,t,n){var r=t,i=e,o=n;this.a=4/(o*(1+4*r)),this.b=4*r/(1+4*r),this.eps=4/(o*o*i*(1+4*r))},r.prototype.computeB=function(e,t,n){var r=this.computeGW(),i=this.computeGq(),o=this.computeGiMf();return-i*e-r*t-o*n},r.prototype.computeGq=function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.position,o=r.position;return e.spatial.dot(i)+t.spatial.dot(o)};var a=new o;r.prototype.computeGW=function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.velocity,o=r.velocity,s=n.angularVelocity||a,l=r.angularVelocity||a;return e.multiplyVectors(i,s)+t.multiplyVectors(o,l)},r.prototype.computeGWlambda=function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.vlambda,o=r.vlambda,s=n.wlambda||a,l=r.wlambda||a;return e.multiplyVectors(i,s)+t.multiplyVectors(o,l)};var s=new o,l=new o,u=new o,c=new o;r.prototype.computeGiMf=function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.force,o=n.torque,a=r.force,h=r.torque,d=n.invMassSolve,p=r.invMassSolve;return n.invInertiaWorldSolve?n.invInertiaWorldSolve.vmult(o,u):u.set(0,0,0),r.invInertiaWorldSolve?r.invInertiaWorldSolve.vmult(h,c):c.set(0,0,0),i.mult(d,s),a.mult(p,l),e.multiplyVectors(s,u)+t.multiplyVectors(l,c)};var h=new o;r.prototype.computeGiMGt=function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.invMassSolve,o=r.invMassSolve,a=n.invInertiaWorldSolve,s=r.invInertiaWorldSolve,l=i+o;return a&&(a.vmult(e.rotational,h),l+=h.dot(e.rotational)),s&&(s.vmult(t.rotational,h),l+=h.dot(t.rotational)),l};var d=new o;new o,new o,new o,new o,new o;r.prototype.addToWlambda=function(e){var t=this.jacobianElementA,n=this.jacobianElementB,r=this.bi,i=this.bj,o=d;t.spatial.mult(r.invMassSolve*e,o),r.vlambda.vadd(o,r.vlambda),n.spatial.mult(i.invMassSolve*e,o),i.vlambda.vadd(o,i.vlambda),r.invInertiaWorldSolve&&(r.invInertiaWorldSolve.vmult(t.rotational,o),o.mult(e,o),r.wlambda.vadd(o,r.wlambda)),i.invInertiaWorldSolve&&(i.invInertiaWorldSolve.vmult(n.rotational,o),o.mult(e,o),i.wlambda.vadd(o,i.wlambda))},r.prototype.computeC=function(){return this.computeGiMGt()+this.eps}},function(e,t,n){function r(){this.spatial=new i,this.rotational=new i}e.exports=r;var i=n(543);r.prototype.multiplyElement=function(e){return e.spatial.dot(this.spatial)+e.rotational.dot(this.rotational)},r.prototype.multiplyVectors=function(e,t){return e.dot(this.spatial)+t.dot(this.rotational)}},function(e,t,n){function r(e){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new h,this.world=e,this.currentContactMaterial=null,this.enableFrictionReduction=!1}function i(e,t,n){for(var r=null,i=e.length,o=0;o!==i;o++){var a=e[o],s=V;e[(o+1)%i].vsub(a,s);var l=z;s.cross(t,l);var u=j;n.vsub(a,u);var c=l.dot(u);if(!(null===r||c>0&&r===!0||c<=0&&r===!1))return!1;null===r&&(r=c>0)}return!0}e.exports=r;var o=n(542),a=n(549),s=n(562),l=n(543),u=n(554),c=(n(553),n(550)),h=(n(564),n(565)),d=n(558),p=n(567);r.prototype.createContactEquation=function(e,t,n,r,i,o){var a;this.contactPointPool.length?(a=this.contactPointPool.pop(),a.bi=e,a.bj=t):a=new d(e,t),a.enabled=e.collisionResponse&&t.collisionResponse&&n.collisionResponse&&r.collisionResponse;var s=this.currentContactMaterial;a.restitution=s.restitution,a.setSpookParams(s.contactEquationStiffness,s.contactEquationRelaxation,this.world.dt);var l=n.material||e.material,u=r.material||t.material;return l&&u&&l.restitution>=0&&u.restitution>=0&&(a.restitution=l.restitution*u.restitution),a.si=i||n,a.sj=o||r,a},r.prototype.createFrictionEquationsFromContact=function(e,t){var n=e.bi,r=e.bj,i=e.si,o=e.sj,a=this.world,s=this.currentContactMaterial,l=s.friction,u=i.material||n.material,c=o.material||r.material;
if(u&&c&&u.friction>=0&&c.friction>=0&&(l=u.friction*c.friction),l>0){var h=l*a.gravity.length(),d=n.invMass+r.invMass;d>0&&(d=1/d);var f=this.frictionEquationPool,m=f.length?f.pop():new p(n,r,h*d),v=f.length?f.pop():new p(n,r,h*d);return m.bi=v.bi=n,m.bj=v.bj=r,m.minForce=v.minForce=-h*d,m.maxForce=v.maxForce=h*d,m.ri.copy(e.ri),m.rj.copy(e.rj),v.ri.copy(e.ri),v.rj.copy(e.rj),e.ni.tangents(m.t,v.t),m.setSpookParams(s.frictionEquationStiffness,s.frictionEquationRelaxation,a.dt),v.setSpookParams(s.frictionEquationStiffness,s.frictionEquationRelaxation,a.dt),m.enabled=v.enabled=e.enabled,t.push(m,v),!0}return!1};var f=new l,m=new l,v=new l;r.prototype.createFrictionFromAverage=function(e){var t=this.result[this.result.length-1];if(this.createFrictionEquationsFromContact(t,this.frictionResult)&&1!==e){var n=this.frictionResult[this.frictionResult.length-2],r=this.frictionResult[this.frictionResult.length-1];f.setZero(),m.setZero(),v.setZero();for(var i=t.bi,o=(t.bj,0);o!==e;o++)t=this.result[this.result.length-1-o],t.bodyA!==i?(f.vadd(t.ni,f),m.vadd(t.ri,m),v.vadd(t.rj,v)):(f.vsub(t.ni,f),m.vadd(t.rj,m),v.vadd(t.ri,v));var a=1/e;m.scale(a,n.ri),v.scale(a,n.rj),r.ri.copy(n.ri),r.rj.copy(n.rj),f.normalize(),f.tangents(n.t,r.t)}};var g=new l,E=new l,y=new c,x=new c;r.prototype.getContacts=function(e,t,n,r,i,o,a){this.contactPointPool=i,this.frictionEquationPool=a,this.result=r,this.frictionResult=o;for(var s=y,l=x,u=g,c=E,h=0,d=e.length;h!==d;h++){var p=e[h],f=t[h],m=null;p.material&&f.material&&(m=n.getContactMaterial(p.material,f.material)||null);for(var v=0;v<p.shapes.length;v++){p.quaternion.mult(p.shapeOrientations[v],s),p.quaternion.vmult(p.shapeOffsets[v],u),u.vadd(p.position,u);for(var T=p.shapes[v],b=0;b<f.shapes.length;b++){f.quaternion.mult(f.shapeOrientations[b],l),f.quaternion.vmult(f.shapeOffsets[b],c),c.vadd(f.position,c);var w=f.shapes[b];if(!(u.distanceTo(c)>T.boundingSphereRadius+w.boundingSphereRadius)){var _=null;T.material&&w.material&&(_=n.getContactMaterial(T.material,w.material)||null),this.currentContactMaterial=_||m||n.defaultContactMaterial;var R=this[T.type|w.type];R&&(T.type<w.type?R.call(this,T,w,u,c,s,l,p,f,T,w):R.call(this,w,T,c,u,l,s,f,p,T,w))}}}}};r.prototype[a.types.BOX|a.types.BOX]=r.prototype.boxBox=function(e,t,n,r,i,o,a,s){e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,t.convexPolyhedronRepresentation,n,r,i,o,a,s,e,t)},r.prototype[a.types.BOX|a.types.CONVEXPOLYHEDRON]=r.prototype.boxConvex=function(e,t,n,r,i,o,a,s){e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,t,n,r,i,o,a,s,e,t)},r.prototype[a.types.BOX|a.types.PARTICLE]=r.prototype.boxParticle=function(e,t,n,r,i,o,a,s){e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexParticle(e.convexPolyhedronRepresentation,t,n,r,i,o,a,s,e,t)},r.prototype[a.types.SPHERE]=r.prototype.sphereSphere=function(e,t,n,r,i,o,a,s){var l=this.createContactEquation(a,s,e,t);r.vsub(n,l.ni),l.ni.normalize(),l.ri.copy(l.ni),l.rj.copy(l.ni),l.ri.mult(e.radius,l.ri),l.rj.mult(-t.radius,l.rj),l.ri.vadd(n,l.ri),l.ri.vsub(a.position,l.ri),l.rj.vadd(r,l.rj),l.rj.vsub(s.position,l.rj),this.result.push(l),this.createFrictionEquationsFromContact(l,this.frictionResult)};var T=new l,b=new l,w=new l;r.prototype[a.types.PLANE|a.types.TRIMESH]=r.prototype.planeTrimesh=function(e,t,n,r,i,o,a,s){var c=new l,h=T;h.set(0,0,1),i.vmult(h,h);for(var d=0;d<t.vertices.length/3;d++){t.getVertex(d,c);var p=new l;p.copy(c),u.pointToWorldFrame(r,o,p,c);var f=b;c.vsub(n,f);var m=h.dot(f);if(m<=0){var v=this.createContactEquation(a,s,e,t);v.ni.copy(h);var g=w;h.scale(f.dot(h),g),c.vsub(g,g),v.ri.copy(g),v.ri.vsub(a.position,v.ri),v.rj.copy(c),v.rj.vsub(s.position,v.rj),this.result.push(v),this.createFrictionEquationsFromContact(v,this.frictionResult)}}};var _=new l,R=new l,S=(new l,new l),M=new l,C=new l,H=new l,A=new l,P=new l,L=new l,k=new l,D=new l,F=new l,O=new l,B=new o,N=[];r.prototype[a.types.SPHERE|a.types.TRIMESH]=r.prototype.sphereTrimesh=function(e,t,n,r,i,o,a,l){var c=C,h=H,d=A,p=P,f=L,m=k,v=B,g=M,E=R,y=N;u.pointToLocalFrame(r,o,n,f);var x=e.radius;v.lowerBound.set(f.x-x,f.y-x,f.z-x),v.upperBound.set(f.x+x,f.y+x,f.z+x),t.getTrianglesInAABB(v,y);for(var T=S,b=e.radius*e.radius,w=0;w<y.length;w++)for(var I=0;I<3;I++)if(t.getVertex(t.indices[3*y[w]+I],T),T.vsub(f,E),E.norm2()<=b){g.copy(T),u.pointToWorldFrame(r,o,g,T),T.vsub(n,E);var U=this.createContactEquation(a,l,e,t);U.ni.copy(E),U.ni.normalize(),U.ri.copy(U.ni),U.ri.scale(e.radius,U.ri),U.ri.vadd(n,U.ri),U.ri.vsub(a.position,U.ri),U.rj.copy(T),U.rj.vsub(l.position,U.rj),this.result.push(U),this.createFrictionEquationsFromContact(U,this.frictionResult)}for(var w=0;w<y.length;w++)for(var I=0;I<3;I++){t.getVertex(t.indices[3*y[w]+I],c),t.getVertex(t.indices[3*y[w]+(I+1)%3],h),h.vsub(c,d),f.vsub(h,m);var V=m.dot(d);f.vsub(c,m);var z=m.dot(d);if(z>0&&V<0){f.vsub(c,m),p.copy(d),p.normalize(),z=m.dot(p),p.scale(z,m),m.vadd(c,m);var j=m.distanceTo(f);if(j<e.radius){var U=this.createContactEquation(a,l,e,t);m.vsub(f,U.ni),U.ni.normalize(),U.ni.scale(e.radius,U.ri),u.pointToWorldFrame(r,o,m,m),m.vsub(l.position,U.rj),u.vectorToWorldFrame(o,U.ni,U.ni),u.vectorToWorldFrame(o,U.ri,U.ri),this.result.push(U),this.createFrictionEquationsFromContact(U,this.frictionResult)}}}for(var G=D,W=F,q=O,X=_,w=0,Y=y.length;w!==Y;w++){t.getTriangleVertices(y[w],G,W,q),t.getNormal(y[w],X),f.vsub(G,m);var j=m.dot(X);if(X.scale(j,m),f.vsub(m,m),j=m.distanceTo(f),s.pointInTriangle(m,G,W,q)&&j<e.radius){var U=this.createContactEquation(a,l,e,t);m.vsub(f,U.ni),U.ni.normalize(),U.ni.scale(e.radius,U.ri),u.pointToWorldFrame(r,o,m,m),m.vsub(l.position,U.rj),u.vectorToWorldFrame(o,U.ni,U.ni),u.vectorToWorldFrame(o,U.ri,U.ri),this.result.push(U),this.createFrictionEquationsFromContact(U,this.frictionResult)}}y.length=0};var I=new l,U=new l;r.prototype[a.types.SPHERE|a.types.PLANE]=r.prototype.spherePlane=function(e,t,n,r,i,o,a,s){var l=this.createContactEquation(a,s,e,t);if(l.ni.set(0,0,1),o.vmult(l.ni,l.ni),l.ni.negate(l.ni),l.ni.normalize(),l.ni.mult(e.radius,l.ri),n.vsub(r,I),l.ni.mult(l.ni.dot(I),U),I.vsub(U,l.rj),-I.dot(l.ni)<=e.radius){var u=l.ri,c=l.rj;u.vadd(n,u),u.vsub(a.position,u),c.vadd(r,c),c.vsub(s.position,c),this.result.push(l),this.createFrictionEquationsFromContact(l,this.frictionResult)}};var V=new l,z=new l,j=new l,G=new l,W=new l,q=new l,X=new l,Y=[new l,new l,new l,new l,new l,new l],K=new l,Q=new l,Z=new l,J=new l;r.prototype[a.types.SPHERE|a.types.BOX]=r.prototype.sphereBox=function(e,t,n,r,i,o,a,s){var l=this.v3pool,u=Y;n.vsub(r,G),t.getSideNormals(u,o);for(var c=e.radius,h=!1,d=Q,p=Z,f=J,m=null,v=0,g=0,E=0,y=null,x=0,T=u.length;x!==T&&h===!1;x++){var b=W;b.copy(u[x]);var w=b.norm();b.normalize();var _=G.dot(b);if(_<w+c&&_>0){var R=q,S=X;R.copy(u[(x+1)%3]),S.copy(u[(x+2)%3]);var M=R.norm(),C=S.norm();R.normalize(),S.normalize();var H=G.dot(R),A=G.dot(S);if(H<M&&H>-M&&A<C&&A>-C){var P=Math.abs(_-w-c);(null===y||P<y)&&(y=P,g=H,E=A,m=w,d.copy(b),p.copy(R),f.copy(S),v++)}}}if(v){h=!0;var L=this.createContactEquation(a,s,e,t);d.mult(-c,L.ri),L.ni.copy(d),L.ni.negate(L.ni),d.mult(m,d),p.mult(g,p),d.vadd(p,d),f.mult(E,f),d.vadd(f,L.rj),L.ri.vadd(n,L.ri),L.ri.vsub(a.position,L.ri),L.rj.vadd(r,L.rj),L.rj.vsub(s.position,L.rj),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}for(var k=l.get(),D=K,F=0;2!==F&&!h;F++)for(var O=0;2!==O&&!h;O++)for(var B=0;2!==B&&!h;B++)if(k.set(0,0,0),F?k.vadd(u[0],k):k.vsub(u[0],k),O?k.vadd(u[1],k):k.vsub(u[1],k),B?k.vadd(u[2],k):k.vsub(u[2],k),r.vadd(k,D),D.vsub(n,D),D.norm2()<c*c){h=!0;var L=this.createContactEquation(a,s,e,t);L.ri.copy(D),L.ri.normalize(),L.ni.copy(L.ri),L.ri.mult(c,L.ri),L.rj.copy(k),L.ri.vadd(n,L.ri),L.ri.vsub(a.position,L.ri),L.rj.vadd(r,L.rj),L.rj.vsub(s.position,L.rj),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}l.release(k),k=null;for(var N=l.get(),I=l.get(),L=l.get(),U=l.get(),P=l.get(),V=u.length,F=0;F!==V&&!h;F++)for(var O=0;O!==V&&!h;O++)if(F%3!==O%3){u[O].cross(u[F],N),N.normalize(),u[F].vadd(u[O],I),L.copy(n),L.vsub(I,L),L.vsub(r,L);var z=L.dot(N);N.mult(z,U);for(var B=0;B===F%3||B===O%3;)B++;P.copy(n),P.vsub(U,P),P.vsub(I,P),P.vsub(r,P);var j=Math.abs(z),$=P.norm();if(j<u[B].norm()&&$<c){h=!0;var ee=this.createContactEquation(a,s,e,t);I.vadd(U,ee.rj),ee.rj.copy(ee.rj),P.negate(ee.ni),ee.ni.normalize(),ee.ri.copy(ee.rj),ee.ri.vadd(r,ee.ri),ee.ri.vsub(n,ee.ri),ee.ri.normalize(),ee.ri.mult(c,ee.ri),ee.ri.vadd(n,ee.ri),ee.ri.vsub(a.position,ee.ri),ee.rj.vadd(r,ee.rj),ee.rj.vsub(s.position,ee.rj),this.result.push(ee),this.createFrictionEquationsFromContact(ee,this.frictionResult)}}l.release(N,I,L,U,P)};var $=new l,ee=new l,te=new l,ne=new l,re=new l,ie=new l,oe=new l,ae=new l,se=new l,le=new l;r.prototype[a.types.SPHERE|a.types.CONVEXPOLYHEDRON]=r.prototype.sphereConvex=function(e,t,n,r,o,a,s,l){var u=this.v3pool;n.vsub(r,$);for(var c=t.faceNormals,h=t.faces,d=t.vertices,p=e.radius,f=0;f!==d.length;f++){var m=d[f],v=re;a.vmult(m,v),r.vadd(v,v);var g=ne;if(v.vsub(n,g),g.norm2()<p*p){y=!0;var E=this.createContactEquation(s,l,e,t);return E.ri.copy(g),E.ri.normalize(),E.ni.copy(E.ri),E.ri.mult(p,E.ri),v.vsub(r,E.rj),E.ri.vadd(n,E.ri),E.ri.vsub(s.position,E.ri),E.rj.vadd(r,E.rj),E.rj.vsub(l.position,E.rj),this.result.push(E),void this.createFrictionEquationsFromContact(E,this.frictionResult)}}for(var y=!1,f=0,x=h.length;f!==x&&y===!1;f++){var T=c[f],b=h[f],w=ie;a.vmult(T,w);var _=oe;a.vmult(d[b[0]],_),_.vadd(r,_);var R=ae;w.mult(-p,R),n.vadd(R,R);var S=se;R.vsub(_,S);var M=S.dot(w),C=le;if(n.vsub(_,C),M<0&&C.dot(w)>0){for(var H=[],A=0,P=b.length;A!==P;A++){var L=u.get();a.vmult(d[b[A]],L),r.vadd(L,L),H.push(L)}if(i(H,w,n)){y=!0;var E=this.createContactEquation(s,l,e,t);w.mult(-p,E.ri),w.negate(E.ni);var k=u.get();w.mult(-M,k);var D=u.get();w.mult(-p,D),n.vsub(r,E.rj),E.rj.vadd(D,E.rj),E.rj.vadd(k,E.rj),E.rj.vadd(r,E.rj),E.rj.vsub(l.position,E.rj),E.ri.vadd(n,E.ri),E.ri.vsub(s.position,E.ri),u.release(k),u.release(D),this.result.push(E),this.createFrictionEquationsFromContact(E,this.frictionResult);for(var A=0,F=H.length;A!==F;A++)u.release(H[A]);return}for(var A=0;A!==b.length;A++){var O=u.get(),B=u.get();a.vmult(d[b[(A+1)%b.length]],O),a.vmult(d[b[(A+2)%b.length]],B),r.vadd(O,O),r.vadd(B,B);var N=ee;B.vsub(O,N);var I=te;N.unit(I);var U=u.get(),V=u.get();n.vsub(O,V);var z=V.dot(I);I.mult(z,U),U.vadd(O,U);var j=u.get();if(U.vsub(n,j),z>0&&z*z<N.norm2()&&j.norm2()<p*p){var E=this.createContactEquation(s,l,e,t);U.vsub(r,E.rj),U.vsub(n,E.ni),E.ni.normalize(),E.ni.mult(p,E.ri),E.rj.vadd(r,E.rj),E.rj.vsub(l.position,E.rj),E.ri.vadd(n,E.ri),E.ri.vsub(s.position,E.ri),this.result.push(E),this.createFrictionEquationsFromContact(E,this.frictionResult);for(var A=0,F=H.length;A!==F;A++)u.release(H[A]);return u.release(O),u.release(B),u.release(U),u.release(j),void u.release(V)}u.release(O),u.release(B),u.release(U),u.release(j),u.release(V)}for(var A=0,F=H.length;A!==F;A++)u.release(H[A])}}};new l,new l;r.prototype[a.types.PLANE|a.types.BOX]=r.prototype.planeBox=function(e,t,n,r,i,o,a,s){t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.planeConvex(e,t.convexPolyhedronRepresentation,n,r,i,o,a,s)};var ue=new l,ce=new l,he=new l,de=new l;r.prototype[a.types.PLANE|a.types.CONVEXPOLYHEDRON]=r.prototype.planeConvex=function(e,t,n,r,i,o,a,s){var l=ue,u=ce;u.set(0,0,1),i.vmult(u,u);for(var c=0,h=he,d=0;d!==t.vertices.length;d++){l.copy(t.vertices[d]),o.vmult(l,l),r.vadd(l,l),l.vsub(n,h);var p=u.dot(h);if(p<=0){var f=this.createContactEquation(a,s,e,t),m=de;u.mult(u.dot(h),m),l.vsub(m,m),m.vsub(n,f.ri),f.ni.copy(u),l.vsub(r,f.rj),f.ri.vadd(n,f.ri),f.ri.vsub(a.position,f.ri),f.rj.vadd(r,f.rj),f.rj.vsub(s.position,f.rj),this.result.push(f),c++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(f,this.frictionResult)}}this.enableFrictionReduction&&c&&this.createFrictionFromAverage(c)};var pe=new l,fe=new l;r.prototype[a.types.CONVEXPOLYHEDRON]=r.prototype.convexConvex=function(e,t,n,r,i,o,a,s,l,u,c,h){var d=pe;if(!(n.distanceTo(r)>e.boundingSphereRadius+t.boundingSphereRadius)&&e.findSeparatingAxis(t,n,i,r,o,d,c,h)){var p=[],f=fe;e.clipAgainstHull(n,i,t,r,o,d,-100,100,p);for(var m=0,v=0;v!==p.length;v++){var g=this.createContactEquation(a,s,e,t,l,u),E=g.ri,y=g.rj;d.negate(g.ni),p[v].normal.negate(f),f.mult(p[v].depth,f),p[v].point.vadd(f,E),y.copy(p[v].point),E.vsub(n,E),y.vsub(r,y),E.vadd(n,E),E.vsub(a.position,E),y.vadd(r,y),y.vsub(s.position,y),this.result.push(g),m++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(g,this.frictionResult)}this.enableFrictionReduction&&m&&this.createFrictionFromAverage(m)}};var me=new l,ve=new l,ge=new l;r.prototype[a.types.PLANE|a.types.PARTICLE]=r.prototype.planeParticle=function(e,t,n,r,i,o,a,s){var l=me;l.set(0,0,1),a.quaternion.vmult(l,l);var u=ve;r.vsub(a.position,u);var c=l.dot(u);if(c<=0){var h=this.createContactEquation(s,a,t,e);h.ni.copy(l),h.ni.negate(h.ni),h.ri.set(0,0,0);var d=ge;l.mult(l.dot(r),d),r.vsub(d,d),h.rj.copy(d),this.result.push(h),this.createFrictionEquationsFromContact(h,this.frictionResult)}};var Ee=new l;r.prototype[a.types.PARTICLE|a.types.SPHERE]=r.prototype.sphereParticle=function(e,t,n,r,i,o,a,s){var l=Ee;l.set(0,0,1),r.vsub(n,l);var u=l.norm2();if(u<=e.radius*e.radius){var c=this.createContactEquation(s,a,t,e);l.normalize(),c.rj.copy(l),c.rj.mult(e.radius,c.rj),c.ni.copy(l),c.ni.negate(c.ni),c.ri.set(0,0,0),this.result.push(c),this.createFrictionEquationsFromContact(c,this.frictionResult)}};var ye=new c,xe=new l,Te=(new l,new l),be=new l,we=new l;r.prototype[a.types.PARTICLE|a.types.CONVEXPOLYHEDRON]=r.prototype.convexParticle=function(e,t,n,r,i,o,a,s){var l=-1,u=Te,c=we,h=null,d=0,p=xe;if(p.copy(r),p.vsub(n,p),i.conjugate(ye),ye.vmult(p,p),e.pointIsInside(p)){e.worldVerticesNeedsUpdate&&e.computeWorldVertices(n,i),e.worldFaceNormalsNeedsUpdate&&e.computeWorldFaceNormals(i);for(var f=0,m=e.faces.length;f!==m;f++){var v=[e.worldVertices[e.faces[f][0]]],g=e.worldFaceNormals[f];r.vsub(v[0],be);var E=-g.dot(be);(null===h||Math.abs(E)<Math.abs(h))&&(h=E,l=f,u.copy(g),d++)}if(l!==-1){var y=this.createContactEquation(s,a,t,e);u.mult(h,c),c.vadd(r,c),c.vsub(n,c),y.rj.copy(c),u.negate(y.ni),y.ri.set(0,0,0);var x=y.ri,T=y.rj;x.vadd(r,x),x.vsub(s.position,x),T.vadd(n,T),T.vsub(a.position,T),this.result.push(y),this.createFrictionEquationsFromContact(y,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}},r.prototype[a.types.BOX|a.types.HEIGHTFIELD]=r.prototype.boxHeightfield=function(e,t,n,r,i,o,a,s){e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexHeightfield(e.convexPolyhedronRepresentation,t,n,r,i,o,a,s)};var _e=new l,Re=new l,Se=[0];r.prototype[a.types.CONVEXPOLYHEDRON|a.types.HEIGHTFIELD]=r.prototype.convexHeightfield=function(e,t,n,r,i,o,a,s){var l=t.data,c=t.elementSize,h=e.boundingSphereRadius,d=Re,p=Se,f=_e;u.pointToLocalFrame(r,o,n,f);var m=Math.floor((f.x-h)/c)-1,v=Math.ceil((f.x+h)/c)+1,g=Math.floor((f.y-h)/c)-1,E=Math.ceil((f.y+h)/c)+1;if(!(v<0||E<0||m>l.length||g>l[0].length)){m<0&&(m=0),v<0&&(v=0),g<0&&(g=0),E<0&&(E=0),m>=l.length&&(m=l.length-1),v>=l.length&&(v=l.length-1),E>=l[0].length&&(E=l[0].length-1),g>=l[0].length&&(g=l[0].length-1);var y=[];t.getRectMinMax(m,g,v,E,y);var x=y[0],T=y[1];if(!(f.z-h>T||f.z+h<x))for(var b=m;b<v;b++)for(var w=g;w<E;w++)t.getConvexTrianglePillar(b,w,!1),u.pointToWorldFrame(r,o,t.pillarOffset,d),n.distanceTo(d)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&this.convexConvex(e,t.pillarConvex,n,d,i,o,a,s,null,null,p,null),t.getConvexTrianglePillar(b,w,!0),u.pointToWorldFrame(r,o,t.pillarOffset,d),n.distanceTo(d)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&this.convexConvex(e,t.pillarConvex,n,d,i,o,a,s,null,null,p,null)}};var Me=new l,Ce=new l;r.prototype[a.types.SPHERE|a.types.HEIGHTFIELD]=r.prototype.sphereHeightfield=function(e,t,n,r,i,o,a,s){var l=t.data,c=e.radius,h=t.elementSize,d=Ce,p=Me;u.pointToLocalFrame(r,o,n,p);var f=Math.floor((p.x-c)/h)-1,m=Math.ceil((p.x+c)/h)+1,v=Math.floor((p.y-c)/h)-1,g=Math.ceil((p.y+c)/h)+1;if(!(m<0||g<0||f>l.length||g>l[0].length)){f<0&&(f=0),m<0&&(m=0),v<0&&(v=0),g<0&&(g=0),f>=l.length&&(f=l.length-1),m>=l.length&&(m=l.length-1),g>=l[0].length&&(g=l[0].length-1),v>=l[0].length&&(v=l[0].length-1);var E=[];t.getRectMinMax(f,v,m,g,E);var y=E[0],x=E[1];if(!(p.z-c>x||p.z+c<y))for(var T=this.result,b=f;b<m;b++)for(var w=v;w<g;w++){var _=T.length;t.getConvexTrianglePillar(b,w,!1),u.pointToWorldFrame(r,o,t.pillarOffset,d),n.distanceTo(d)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&this.sphereConvex(e,t.pillarConvex,n,d,i,o,a,s),t.getConvexTrianglePillar(b,w,!0),u.pointToWorldFrame(r,o,t.pillarOffset,d),n.distanceTo(d)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&this.sphereConvex(e,t.pillarConvex,n,d,i,o,a,s);var R=T.length-_;if(R>2)return}}}},function(e,t,n){function r(e,t){this.from=e?e.clone():new a,this.to=t?t.clone():new a,this._direction=new a,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=r.ANY,this.result=new u,this.hasHit=!1,this.callback=function(e){}}function i(e,t,n,r){r.vsub(t,F),n.vsub(t,f),e.vsub(t,m);var i,o,a=F.dot(F),s=F.dot(f),l=F.dot(m),u=f.dot(f),c=f.dot(m);return(i=u*l-s*c)>=0&&(o=a*c-s*l)>=0&&i+o<a*u-s*s}function o(e,t,n){n.vsub(e,F);var r=F.dot(t);t.mult(r,O),O.vadd(e,O);var i=n.distanceTo(O);return i}e.exports=r;var a=n(543),s=n(550),l=n(554),u=(n(553),n(552),n(563)),c=n(549),h=n(542);r.prototype.constructor=r,r.CLOSEST=1,r.ANY=2,r.ALL=4;var d=new h,p=[];r.prototype.intersectWorld=function(e,t){return this.mode=t.mode||r.ANY,this.result=t.result||new u,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask="undefined"!=typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup="undefined"!=typeof t.collisionFilterGroup?t.collisionFilterGroup:-1,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||function(){},this.hasHit=!1,this.result.reset(),this._updateDirection(),this.getAABB(d),p.length=0,e.broadphase.aabbQuery(e,d,p),this.intersectBodies(p),this.hasHit};var f=new a,m=new a;r.pointInTriangle=i;var v=new a,g=new s;r.prototype.intersectBody=function(e,t){t&&(this.result=t,this._updateDirection());var n=this.checkCollisionResponse;if((!n||e.collisionResponse)&&0!==(this.collisionFilterGroup&e.collisionFilterMask)&&0!==(e.collisionFilterGroup&this.collisionFilterMask))for(var r=v,i=g,o=0,a=e.shapes.length;o<a;o++){var s=e.shapes[o];if((!n||s.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],i),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(s,i,r,e),this.result._shouldStop))break}},r.prototype.intersectBodies=function(e,t){t&&(this.result=t,this._updateDirection());for(var n=0,r=e.length;!this.result._shouldStop&&n<r;n++)this.intersectBody(e[n])},r.prototype._updateDirection=function(){this.to.vsub(this.from,this._direction),this._direction.normalize()},r.prototype.intersectShape=function(e,t,n,r){var i=this.from,a=o(i,this._direction,n);if(!(a>e.boundingSphereRadius)){var s=this[e.type];s&&s.call(this,e,t,n,r)}};var E=(new a,new a,new a),y=new a,x=new a,T=new a;new a,new u;r.prototype.intersectBox=function(e,t,n,r){return this.intersectConvex(e.convexPolyhedronRepresentation,t,n,r)},r.prototype[c.types.BOX]=r.prototype.intersectBox,r.prototype.intersectPlane=function(e,t,n,r){var i=this.from,o=this.to,s=this._direction,l=new a(0,0,1);t.vmult(l,l);var u=new a;i.vsub(n,u);var c=u.dot(l);o.vsub(n,u);var h=u.dot(l);if(!(c*h>0||i.distanceTo(o)<c)){var d=l.dot(s);if(!(Math.abs(d)<this.precision)){var p=new a,f=new a,m=new a;i.vsub(n,p);var v=-l.dot(p)/d;s.scale(v,f),i.vadd(f,m),this.reportIntersection(l,m,e,r,-1)}}},r.prototype[c.types.PLANE]=r.prototype.intersectPlane,r.prototype.getAABB=function(e){var t=this.to,n=this.from;e.lowerBound.x=Math.min(t.x,n.x),e.lowerBound.y=Math.min(t.y,n.y),e.lowerBound.z=Math.min(t.z,n.z),e.upperBound.x=Math.max(t.x,n.x),e.upperBound.y=Math.max(t.y,n.y),e.upperBound.z=Math.max(t.z,n.z)};var b={faceList:[0]};r.prototype.intersectHeightfield=function(e,t,n,i){var o=(e.data,e.elementSize,new a),s=new r(this.from,this.to);l.pointToLocalFrame(n,t,s.from,s.from),l.pointToLocalFrame(n,t,s.to,s.to);var u=[],c=null,h=null,d=null,p=null,f=e.getIndexOfPosition(s.from.x,s.from.y,u,!1);if(f&&(c=u[0],h=u[1],d=u[0],p=u[1]),f=e.getIndexOfPosition(s.to.x,s.to.y,u,!1),f&&((null===c||u[0]<c)&&(c=u[0]),(null===d||u[0]>d)&&(d=u[0]),(null===h||u[1]<h)&&(h=u[1]),(null===p||u[1]>p)&&(p=u[1])),null!==c){var m=[];e.getRectMinMax(c,h,d,p,m);for(var v=(m[0],m[1],c);v<=d;v++)for(var g=h;g<=p;g++){if(this.result._shouldStop)return;if(e.getConvexTrianglePillar(v,g,!1),l.pointToWorldFrame(n,t,e.pillarOffset,o),this.intersectConvex(e.pillarConvex,t,o,i,b),this.result._shouldStop)return;e.getConvexTrianglePillar(v,g,!0),l.pointToWorldFrame(n,t,e.pillarOffset,o),this.intersectConvex(e.pillarConvex,t,o,i,b)}}},r.prototype[c.types.HEIGHTFIELD]=r.prototype.intersectHeightfield;var w=new a,_=new a;r.prototype.intersectSphere=function(e,t,n,r){var i=this.from,o=this.to,a=e.radius,s=Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)+Math.pow(o.z-i.z,2),l=2*((o.x-i.x)*(i.x-n.x)+(o.y-i.y)*(i.y-n.y)+(o.z-i.z)*(i.z-n.z)),u=Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2)+Math.pow(i.z-n.z,2)-Math.pow(a,2),c=Math.pow(l,2)-4*s*u,h=w,d=_;if(!(c<0))if(0===c)i.lerp(o,c,h),h.vsub(n,d),d.normalize(),this.reportIntersection(d,h,e,r,-1);else{var p=(-l-Math.sqrt(c))/(2*s),f=(-l+Math.sqrt(c))/(2*s);if(p>=0&&p<=1&&(i.lerp(o,p,h),h.vsub(n,d),d.normalize(),this.reportIntersection(d,h,e,r,-1)),this.result._shouldStop)return;f>=0&&f<=1&&(i.lerp(o,f,h),h.vsub(n,d),d.normalize(),this.reportIntersection(d,h,e,r,-1))}},r.prototype[c.types.SPHERE]=r.prototype.intersectSphere;var R=new a,S=(new a,new a,new a);r.prototype.intersectConvex=function(e,t,n,r,o){for(var a=R,s=S,l=o&&o.faceList||null,u=e.faces,c=e.vertices,h=e.faceNormals,d=this._direction,p=this.from,f=this.to,m=p.distanceTo(f),v=l?l.length:u.length,g=this.result,b=0;!g._shouldStop&&b<v;b++){var w=l?l[b]:b,_=u[w],M=h[w],C=t,H=n;s.copy(c[_[0]]),C.vmult(s,s),s.vadd(H,s),s.vsub(p,s),C.vmult(M,a);var A=d.dot(a);if(!(Math.abs(A)<this.precision)){var P=a.dot(s)/A;if(!(P<0)){d.mult(P,E),E.vadd(p,E),y.copy(c[_[0]]),C.vmult(y,y),H.vadd(y,y);for(var L=1;!g._shouldStop&&L<_.length-1;L++){x.copy(c[_[L]]),T.copy(c[_[L+1]]),C.vmult(x,x),C.vmult(T,T),H.vadd(x,x),H.vadd(T,T);var k=E.distanceTo(p);!i(E,y,x,T)&&!i(E,x,y,T)||k>m||this.reportIntersection(a,E,e,r,w)}}}}},r.prototype[c.types.CONVEXPOLYHEDRON]=r.prototype.intersectConvex;var M=new a,C=new a,H=new a,A=new a,P=new a,L=new a,k=(new h,[]),D=new l;r.prototype.intersectTrimesh=function(e,t,n,r,o){var a=M,s=k,u=D,c=S,h=C,d=H,p=A,f=L,m=P,v=(o&&o.faceList||null,e.indices),g=(e.vertices,e.faceNormals,this.from),b=this.to,w=this._direction;u.position.copy(n),u.quaternion.copy(t),l.vectorToLocalFrame(n,t,w,h),l.pointToLocalFrame(n,t,g,d),l.pointToLocalFrame(n,t,b,p);var _=d.distanceSquared(p);e.tree.rayQuery(this,u,s);for(var R=0,F=s.length;!this.result._shouldStop&&R!==F;R++){var O=s[R];e.getNormal(O,a),e.getVertex(v[3*O],y),y.vsub(d,c);var B=h.dot(a),N=a.dot(c)/B;if(!(N<0)){h.scale(N,E),E.vadd(d,E),e.getVertex(v[3*O+1],x),e.getVertex(v[3*O+2],T);var I=E.distanceSquared(d);!i(E,x,y,T)&&!i(E,y,x,T)||I>_||(l.vectorToWorldFrame(t,a,m),l.pointToWorldFrame(n,t,E,f),this.reportIntersection(m,f,e,r,O))}}s.length=0},r.prototype[c.types.TRIMESH]=r.prototype.intersectTrimesh,r.prototype.reportIntersection=function(e,t,n,i,o){var a=this.from,s=this.to,l=a.distanceTo(t),u=this.result;if(!(this.skipBackfaces&&e.dot(this._direction)>0))switch(u.hitFaceIndex="undefined"!=typeof o?o:-1,this.mode){case r.ALL:this.hasHit=!0,u.set(a,s,e,t,n,i,l),u.hasHit=!0,this.callback(u);break;case r.CLOSEST:(l<u.distance||!u.hasHit)&&(this.hasHit=!0,u.hasHit=!0,u.set(a,s,e,t,n,i,l));break;case r.ANY:this.hasHit=!0,u.hasHit=!0,u.set(a,s,e,t,n,i,l),u._shouldStop=!0}};var F=new a,O=new a},function(e,t,n){function r(){this.rayFromWorld=new i,this.rayToWorld=new i,this.hitNormalWorld=new i,this.hitPointWorld=new i,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1}var i=n(543);e.exports=r,r.prototype.reset=function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1},r.prototype.abort=function(){this._shouldStop=!0},r.prototype.set=function(e,t,n,r,i,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(r),this.shape=i,this.body=o,this.distance=a}},function(e,t){function n(){this.equations=[]}e.exports=n,n.prototype.solve=function(e,t){return 0},n.prototype.addEquation=function(e){e.enabled&&this.equations.push(e)},n.prototype.removeEquation=function(e){var t=this.equations,n=t.indexOf(e);n!==-1&&t.splice(n,1)},n.prototype.removeAllEquations=function(){this.equations.length=0}},function(e,t,n){function r(){o.call(this),this.type=i}e.exports=r;var i=n(543),o=n(566);r.prototype=new o,r.prototype.constructObject=function(){return new i}},function(e,t){function n(){this.objects=[],this.type=Object}e.exports=n,n.prototype.release=function(){for(var e=arguments.length,t=0;t!==e;t++)this.objects.push(arguments[t])},n.prototype.get=function(){return 0===this.objects.length?this.constructObject():this.objects.pop()},n.prototype.constructObject=function(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}},function(e,t,n){function r(e,t,n){i.call(this,e,t,-n,n),this.ri=new o,this.rj=new o,this.t=new o}e.exports=r;var i=n(559),o=n(543);n(544);r.prototype=new i,r.prototype.constructor=r;var a=new o,s=new o;r.prototype.computeB=function(e){var t=(this.a,this.b),n=(this.bi,this.bj,this.ri),r=this.rj,i=a,o=s,l=this.t;n.cross(l,i),r.cross(l,o);var u=this.jacobianElementA,c=this.jacobianElementB;l.negate(u.spatial),i.negate(u.rotational),c.spatial.copy(l),c.rotational.copy(o);var h=this.computeGW(),d=this.computeGiMf(),p=-h*t-e*d;return p}},function(e,t,n){function r(e,t,n){n=n||{};var r="undefined"!=typeof n.maxForce?n.maxForce:1e6,l=n.pivotA?n.pivotA.clone():new s,u=n.pivotB?n.pivotB.clone():new s;this.axisA=n.axisA?n.axisA.clone():new s,this.axisB=n.axisB?n.axisB.clone():new s,i.call(this,e,l,t,u,r),this.collideConnected=!!n.collideConnected,this.angle="undefined"!=typeof n.angle?n.angle:0;var c=this.coneEquation=new o(e,t,n),h=this.twistEquation=new a(e,t,n);this.twistAngle="undefined"!=typeof n.twistAngle?n.twistAngle:0,c.maxForce=0,c.minForce=-r,h.maxForce=0,h.minForce=-r,this.equations.push(c,h)}e.exports=r;var i=(n(557),n(569)),o=n(570),a=n(571),s=(n(558),n(543));r.prototype=new i,r.constructor=r;new s,new s;r.prototype.update=function(){var e=this.bodyA,t=this.bodyB,n=this.coneEquation,r=this.twistEquation;i.prototype.update.call(this),e.vectorToWorldFrame(this.axisA,n.axisA),t.vectorToWorldFrame(this.axisB,n.axisB),this.axisA.tangents(r.axisA,r.axisA),e.vectorToWorldFrame(r.axisA,r.axisA),this.axisB.tangents(r.axisB,r.axisB),t.vectorToWorldFrame(r.axisB,r.axisB),n.angle=this.angle,r.maxAngle=this.twistAngle}},function(e,t,n){function r(e,t,n,r,s){i.call(this,e,n),s="undefined"!=typeof s?s:1e6,this.pivotA=t?t.clone():new a,this.pivotB=r?r.clone():new a;var l=this.equationX=new o(e,n),u=this.equationY=new o(e,n),c=this.equationZ=new o(e,n);this.equations.push(l,u,c),l.minForce=u.minForce=c.minForce=-s,l.maxForce=u.maxForce=c.maxForce=s,l.ni.set(1,0,0),u.ni.set(0,1,0),c.ni.set(0,0,1)}e.exports=r;var i=n(557),o=n(558),a=n(543);r.prototype=new i,r.prototype.update=function(){var e=this.bodyA,t=this.bodyB,n=this.equationX,r=this.equationY,i=this.equationZ;e.quaternion.vmult(this.pivotA,n.ri),t.quaternion.vmult(this.pivotB,n.rj),r.ri.copy(n.ri),r.rj.copy(n.rj),i.ri.copy(n.ri),i.rj.copy(n.rj)}},function(e,t,n){function r(e,t,n){n=n||{};var r="undefined"!=typeof n.maxForce?n.maxForce:1e6;o.call(this,e,t,-r,r),this.axisA=n.axisA?n.axisA.clone():new i(1,0,0),this.axisB=n.axisB?n.axisB.clone():new i(0,1,0),this.angle="undefined"!=typeof n.angle?n.angle:0}e.exports=r;var i=n(543),o=(n(544),n(559));r.prototype=new o,r.prototype.constructor=r;var a=new i,s=new i;r.prototype.computeB=function(e){var t=this.a,n=this.b,r=this.axisA,i=this.axisB,o=a,l=s,u=this.jacobianElementA,c=this.jacobianElementB;r.cross(i,o),i.cross(r,l),u.rotational.copy(l),c.rotational.copy(o);var h=Math.cos(this.angle)-r.dot(i),d=this.computeGW(),p=this.computeGiMf(),f=-h*t-d*n-e*p;return f}},function(e,t,n){function r(e,t,n){n=n||{};var r="undefined"!=typeof n.maxForce?n.maxForce:1e6;o.call(this,e,t,-r,r),this.axisA=n.axisA?n.axisA.clone():new i(1,0,0),this.axisB=n.axisB?n.axisB.clone():new i(0,1,0),this.maxAngle=Math.PI/2}e.exports=r;var i=n(543),o=(n(544),n(559));r.prototype=new o,r.prototype.constructor=r;var a=new i,s=new i;r.prototype.computeB=function(e){var t=this.a,n=this.b,r=this.axisA,i=this.axisB,o=a,l=s,u=this.jacobianElementA,c=this.jacobianElementB;r.cross(i,o),i.cross(r,l),u.rotational.copy(l),c.rotational.copy(o);var h=Math.cos(this.maxAngle)-r.dot(i),d=this.computeGW(),p=this.computeGiMf(),f=-h*t-d*n-e*p;return f}},function(e,t,n){function r(e,t,n){n=i.defaults(n,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=r.idCounter++,this.materials=[e,t],this.friction=n.friction,this.restitution=n.restitution,this.contactEquationStiffness=n.contactEquationStiffness,this.contactEquationRelaxation=n.contactEquationRelaxation,this.frictionEquationStiffness=n.frictionEquationStiffness,this.frictionEquationRelaxation=n.frictionEquationRelaxation}var i=n(545);e.exports=r,r.idCounter=0},function(e,t,n){function r(e,t,n,r){var s=r,l=[],u=[],c=[],h=[],d=[],p=Math.cos,f=Math.sin;l.push(new o(t*p(0),t*f(0),.5*-n)),h.push(0),l.push(new o(e*p(0),e*f(0),.5*n)),d.push(1);for(var m=0;m<s;m++){var v=2*Math.PI/s*(m+1),g=2*Math.PI/s*(m+.5);m<s-1?(l.push(new o(t*p(v),t*f(v),.5*-n)),h.push(2*m+2),l.push(new o(e*p(v),e*f(v),.5*n)),d.push(2*m+3),c.push([2*m+2,2*m+3,2*m+1,2*m])):c.push([0,1,2*m+1,2*m]),(s%2===1||m<s/2)&&u.push(new o(p(g),f(g),0))}c.push(d),u.push(new o(0,0,1));for(var E=[],m=0;m<h.length;m++)E.push(h[h.length-m-1]);c.push(E),this.type=i.types.CONVEXPOLYHEDRON,a.call(this,l,c,u)}e.exports=r;var i=n(549),o=n(543),a=(n(550),n(553));r.prototype=new a},function(e,t,n){function r(e,t,n,r){i.call(this,e,t),"undefined"==typeof n&&(n=e.position.distanceTo(t.position)),"undefined"==typeof r&&(r=1e6),this.distance=n;var a=this.distanceEquation=new o(e,t);this.equations.push(a),a.minForce=-r,a.maxForce=r}e.exports=r;var i=n(557),o=n(558);r.prototype=new i,r.prototype.update=function(){var e=this.bodyA,t=this.bodyB,n=this.distanceEquation,r=.5*this.distance,i=n.ni;t.position.vsub(e.position,i),i.normalize(),i.mult(r,n.ri),i.mult(-r,n.rj)}},function(e,t,n){function r(){i.call(this),this.iterations=10,this.tolerance=1e-7}e.exports=r;var i=(n(543),n(550),n(564));r.prototype=new i;var o=[],a=[],s=[];r.prototype.solve=function(e,t){var n,r,i,l,u,c,h=0,d=this.iterations,p=this.tolerance*this.tolerance,f=this.equations,m=f.length,v=t.bodies,g=v.length,E=e;
if(0!==m)for(var y=0;y!==g;y++)v[y].updateSolveMassProperties();var x=a,T=s,b=o;x.length=m,T.length=m,b.length=m;for(var y=0;y!==m;y++){var w=f[y];b[y]=0,T[y]=w.computeB(E),x[y]=1/w.computeC()}if(0!==m){for(var y=0;y!==g;y++){var _=v[y],R=_.vlambda,S=_.wlambda;R.set(0,0,0),S&&S.set(0,0,0)}for(h=0;h!==d;h++){l=0;for(var M=0;M!==m;M++){var w=f[M];n=T[M],r=x[M],c=b[M],u=w.computeGWlambda(),i=r*(n-u-w.eps*c),c+i<w.minForce?i=w.minForce-c:c+i>w.maxForce&&(i=w.maxForce-c),b[M]+=i,l+=i>0?i:-i,w.addToWlambda(i)}if(l*l<p)break}for(var y=0;y!==g;y++){var _=v[y],C=_.velocity,H=_.angularVelocity;C.vadd(_.vlambda,C),H&&H.vadd(_.wlambda,H)}}return h}},function(e,t,n){function r(e,t,n,r,a){i.apply(this),this.nx=n||10,this.ny=r||10,this.nz=a||10,this.aabbMin=e||new o(100,100,100),this.aabbMax=t||new o(-100,-100,-100);var s=this.nx*this.ny*this.nz;if(s<=0)throw"GridBroadphase: Each dimension's n must be >0";this.bins=[],this.binLengths=[],this.bins.length=s,this.binLengths.length=s;for(var l=0;l<s;l++)this.bins[l]=[],this.binLengths[l]=0}e.exports=r;var i=n(555),o=n(543),a=n(549);r.prototype=new i,r.prototype.constructor=r;var s=new o;new o;r.prototype.collisionPairs=function(e,t,n){function r(e,t,n,r,i,o,a){var s=(e-y)*b|0,l=(t-x)*w|0,u=(n-T)*_|0,v=O((r-y)*b),g=O((i-x)*w),E=O((o-T)*_);s<0?s=0:s>=c&&(s=c-1),l<0?l=0:l>=h&&(l=h-1),u<0?u=0:u>=d&&(u=d-1),v<0?v=0:v>=c&&(v=c-1),g<0?g=0:g>=h&&(g=h-1),E<0?E=0:E>=d&&(E=d-1),s*=p,l*=f,u*=m,v*=p,g*=f,E*=m;for(var R=s;R<=v;R+=p)for(var S=l;S<=g;S+=f)for(var M=u;M<=E;M+=m){var C=R+S+M;L[C][k[C]++]=a}}for(var i=e.numObjects(),o=e.bodies,l=this.aabbMax,u=this.aabbMin,c=this.nx,h=this.ny,d=this.nz,p=h*d,f=d,m=1,v=l.x,g=l.y,E=l.z,y=u.x,x=u.y,T=u.z,b=c/(v-y),w=h/(g-x),_=d/(E-T),R=(v-y)/c,S=(g-x)/h,M=(E-T)/d,C=.5*Math.sqrt(R*R+S*S+M*M),H=a.types,A=H.SPHERE,P=H.PLANE,L=(H.BOX,H.COMPOUND,H.CONVEXPOLYHEDRON,this.bins),k=this.binLengths,D=this.bins.length,F=0;F!==D;F++)k[F]=0;for(var O=Math.ceil,u=Math.min,l=Math.max,F=0;F!==i;F++){var B=o[F],N=B.shape;switch(N.type){case A:var I=B.position.x,U=B.position.y,V=B.position.z,z=N.radius;r(I-z,U-z,V-z,I+z,U+z,V+z,B);break;case P:N.worldNormalNeedsUpdate&&N.computeWorldNormal(B.quaternion);var j=N.worldNormal,G=y+.5*R-B.position.x,W=x+.5*S-B.position.y,q=T+.5*M-B.position.z,X=s;X.set(G,W,q);for(var Y=0,K=0;Y!==c;Y++,K+=p,X.y=W,X.x+=R)for(var Q=0,Z=0;Q!==h;Q++,Z+=f,X.z=q,X.y+=S)for(var J=0,$=0;J!==d;J++,$+=m,X.z+=M)if(X.dot(j)<C){var ee=K+Z+$;L[ee][k[ee]++]=B}break;default:B.aabbNeedsUpdate&&B.computeAABB(),r(B.aabb.lowerBound.x,B.aabb.lowerBound.y,B.aabb.lowerBound.z,B.aabb.upperBound.x,B.aabb.upperBound.y,B.aabb.upperBound.z,B)}}for(var F=0;F!==D;F++){var te=k[F];if(te>1)for(var ne=L[F],Y=0;Y!==te;Y++)for(var B=ne[Y],Q=0;Q!==Y;Q++){var re=ne[Q];this.needBroadphaseCollision(B,re)&&this.intersectionTest(B,re,t,n)}}this.makePairsUnique(t,n)}},function(e,t,n){function r(e,t){t=s.defaults(t,{maxValue:null,minValue:null,elementSize:1}),this.data=e,this.maxValue=t.maxValue,this.minValue=t.minValue,this.elementSize=t.elementSize,null===t.minValue&&this.updateMinValue(),null===t.maxValue&&this.updateMaxValue(),this.cacheEnabled=!0,i.call(this),this.pillarConvex=new o,this.pillarOffset=new a,this.type=i.types.HEIGHTFIELD,this.updateBoundingSphereRadius(),this._cachedPillars={}}var i=n(549),o=n(553),a=n(543),s=n(545);e.exports=r,r.prototype=new i,r.prototype.update=function(){this._cachedPillars={}},r.prototype.updateMinValue=function(){for(var e=this.data,t=e[0][0],n=0;n!==e.length;n++)for(var r=0;r!==e[n].length;r++){var i=e[n][r];i<t&&(t=i)}this.minValue=t},r.prototype.updateMaxValue=function(){for(var e=this.data,t=e[0][0],n=0;n!==e.length;n++)for(var r=0;r!==e[n].length;r++){var i=e[n][r];i>t&&(t=i)}this.maxValue=t},r.prototype.setHeightValueAtIndex=function(e,t,n){var r=this.data;r[e][t]=n,this.clearCachedConvexTrianglePillar(e,t,!1),e>0&&(this.clearCachedConvexTrianglePillar(e-1,t,!0),this.clearCachedConvexTrianglePillar(e-1,t,!1)),t>0&&(this.clearCachedConvexTrianglePillar(e,t-1,!0),this.clearCachedConvexTrianglePillar(e,t-1,!1)),t>0&&e>0&&this.clearCachedConvexTrianglePillar(e-1,t-1,!0)},r.prototype.getRectMinMax=function(e,t,n,r,i){i=i||[];for(var o=this.data,a=this.minValue,s=e;s<=n;s++)for(var l=t;l<=r;l++){var u=o[s][l];u>a&&(a=u)}i[0]=this.minValue,i[1]=a},r.prototype.getIndexOfPosition=function(e,t,n,r){var i=this.elementSize,o=this.data,a=Math.floor(e/i),s=Math.floor(t/i);return n[0]=a,n[1]=s,r&&(a<0&&(a=0),s<0&&(s=0),a>=o.length-1&&(a=o.length-1),s>=o[0].length-1&&(s=o[0].length-1)),!(a<0||s<0||a>=o.length-1||s>=o[0].length-1)},r.prototype.getHeightAt=function(e,t,n){var r=[];this.getIndexOfPosition(e,t,r,n);var i=[];return this.getRectMinMax(r[0],r[1]+1,r[0],r[1]+1,i),(i[0]+i[1])/2},r.prototype.getCacheConvexTrianglePillarKey=function(e,t,n){return e+"_"+t+"_"+(n?1:0)},r.prototype.getCachedConvexTrianglePillar=function(e,t,n){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,n)]},r.prototype.setCachedConvexTrianglePillar=function(e,t,n,r,i){this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,n)]={convex:r,offset:i}},r.prototype.clearCachedConvexTrianglePillar=function(e,t,n){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,n)]},r.prototype.getConvexTrianglePillar=function(e,t,n){var r=this.pillarConvex,i=this.pillarOffset;if(this.cacheEnabled){var s=this.getCachedConvexTrianglePillar(e,t,n);if(s)return this.pillarConvex=s.convex,void(this.pillarOffset=s.offset);r=new o,i=new a,this.pillarConvex=r,this.pillarOffset=i}var s=this.data,l=this.elementSize,u=r.faces;r.vertices.length=6;for(var c=0;c<6;c++)r.vertices[c]||(r.vertices[c]=new a);u.length=5;for(var c=0;c<5;c++)u[c]||(u[c]=[]);var h=r.vertices,d=(Math.min(s[e][t],s[e+1][t],s[e][t+1],s[e+1][t+1])-this.minValue)/2+this.minValue;n?(i.set((e+.75)*l,(t+.75)*l,d),h[0].set(.25*l,.25*l,s[e+1][t+1]-d),h[1].set(-.75*l,.25*l,s[e][t+1]-d),h[2].set(.25*l,-.75*l,s[e+1][t]-d),h[3].set(.25*l,.25*l,-d-1),h[4].set(-.75*l,.25*l,-d-1),h[5].set(.25*l,-.75*l,-d-1),u[0][0]=0,u[0][1]=1,u[0][2]=2,u[1][0]=5,u[1][1]=4,u[1][2]=3,u[2][0]=2,u[2][1]=5,u[2][2]=3,u[2][3]=0,u[3][0]=3,u[3][1]=4,u[3][2]=1,u[3][3]=0,u[4][0]=1,u[4][1]=4,u[4][2]=5,u[4][3]=2):(i.set((e+.25)*l,(t+.25)*l,d),h[0].set(-.25*l,-.25*l,s[e][t]-d),h[1].set(.75*l,-.25*l,s[e+1][t]-d),h[2].set(-.25*l,.75*l,s[e][t+1]-d),h[3].set(-.25*l,-.25*l,-d-1),h[4].set(.75*l,-.25*l,-d-1),h[5].set(-.25*l,.75*l,-d-1),u[0][0]=0,u[0][1]=1,u[0][2]=2,u[1][0]=5,u[1][1]=4,u[1][2]=3,u[2][0]=0,u[2][1]=2,u[2][2]=5,u[2][3]=3,u[3][0]=1,u[3][1]=0,u[3][2]=3,u[3][3]=4,u[4][0]=4,u[4][1]=5,u[4][2]=2,u[4][3]=1),r.computeNormals(),r.computeEdges(),r.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(e,t,n,r,i)},r.prototype.calculateLocalInertia=function(e,t){return t=t||new a,t.set(0,0,0),t},r.prototype.volume=function(){return Number.MAX_VALUE},r.prototype.calculateWorldAABB=function(e,t,n,r){n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),r.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},r.prototype.updateBoundingSphereRadius=function(){var e=this.data,t=this.elementSize;this.boundingSphereRadius=new a(e.length*t,e[0].length*t,Math.max(Math.abs(this.maxValue),Math.abs(this.minValue))).norm()}},function(e,t,n){function r(e,t,n){n=n||{};var r="undefined"!=typeof n.maxForce?n.maxForce:1e6,l=n.pivotA?n.pivotA.clone():new s,u=n.pivotB?n.pivotB.clone():new s;i.call(this,e,l,t,u,r);var c=this.axisA=n.axisA?n.axisA.clone():new s(1,0,0);c.normalize();var h=this.axisB=n.axisB?n.axisB.clone():new s(1,0,0);h.normalize();var d=this.rotationalEquation1=new o(e,t,n),p=this.rotationalEquation2=new o(e,t,n),f=this.motorEquation=new a(e,t,r);f.enabled=!1,this.equations.push(d,p,f)}e.exports=r;var i=(n(557),n(569)),o=n(571),a=n(579),s=(n(558),n(543));r.prototype=new i,r.constructor=r,r.prototype.enableMotor=function(){this.motorEquation.enabled=!0},r.prototype.disableMotor=function(){this.motorEquation.enabled=!1},r.prototype.setMotorSpeed=function(e){this.motorEquation.targetVelocity=e},r.prototype.setMotorMaxForce=function(e){this.motorEquation.maxForce=e,this.motorEquation.minForce=-e};var l=new s,u=new s;r.prototype.update=function(){var e=this.bodyA,t=this.bodyB,n=this.motorEquation,r=this.rotationalEquation1,o=this.rotationalEquation2,a=l,s=u,c=this.axisA,h=this.axisB;i.prototype.update.call(this),e.quaternion.vmult(c,a),t.quaternion.vmult(h,s),a.tangents(r.axisA,o.axisA),r.axisB.copy(s),o.axisB.copy(s),this.motorEquation.enabled&&(e.quaternion.vmult(this.axisA,n.axisA),t.quaternion.vmult(this.axisB,n.axisB))}},function(e,t,n){function r(e,t,n){n="undefined"!=typeof n?n:1e6,o.call(this,e,t,-n,n),this.axisA=new i,this.axisB=new i,this.targetVelocity=0}e.exports=r;var i=n(543),o=(n(544),n(559));r.prototype=new o,r.prototype.constructor=r,r.prototype.computeB=function(e){var t=(this.a,this.b),n=(this.bi,this.bj,this.axisA),r=this.axisB,i=this.jacobianElementA,o=this.jacobianElementB;i.rotational.copy(n),r.negate(o.rotational);var a=this.computeGW()-this.targetVelocity,s=this.computeGiMf(),l=-a*t-e*s;return l}},function(e,t,n){function r(e,t,n){n=n||{};var r="undefined"!=typeof n.maxForce?n.maxForce:1e6,s=new a,l=new a,u=new a;e.position.vadd(t.position,u),u.scale(.5,u),t.pointToLocalFrame(u,l),e.pointToLocalFrame(u,s),i.call(this,e,s,t,l,r);var c=this.rotationalEquation1=new o(e,t,n),h=this.rotationalEquation2=new o(e,t,n),d=this.rotationalEquation3=new o(e,t,n);this.equations.push(c,h,d)}e.exports=r;var i=(n(557),n(569)),o=n(571),a=(n(579),n(558),n(543));r.prototype=new i,r.constructor=r;new a,new a;r.prototype.update=function(){var e=this.bodyA,t=this.bodyB,n=(this.motorEquation,this.rotationalEquation1),r=this.rotationalEquation2,o=this.rotationalEquation3;i.prototype.update.call(this),e.vectorToWorldFrame(a.UNIT_X,n.axisA),t.vectorToWorldFrame(a.UNIT_Y,n.axisB),e.vectorToWorldFrame(a.UNIT_Y,r.axisA),t.vectorToWorldFrame(a.UNIT_Z,r.axisB),e.vectorToWorldFrame(a.UNIT_Z,o.axisA),t.vectorToWorldFrame(a.UNIT_X,o.axisB)}},function(e,t,n){function r(){i.apply(this)}e.exports=r;var i=n(555),o=n(542);r.prototype=new i,r.prototype.constructor=r,r.prototype.collisionPairs=function(e,t,n){var r,i,o,a,s=e.bodies,l=s.length;for(r=0;r!==l;r++)for(i=0;i!==r;i++)o=s[r],a=s[i],this.needBroadphaseCollision(o,a)&&this.intersectionTest(o,a,t,n)};new o;r.prototype.aabbQuery=function(e,t,n){n=n||[];for(var r=0;r<e.bodies.length;r++){var i=e.bodies[r];i.aabbNeedsUpdate&&i.computeAABB(),i.aabb.overlaps(t)&&n.push(i)}return n}},function(e,t){function n(){this.matrix={}}e.exports=n,n.prototype.get=function(e,t){if(e=e.id,t=t.id,t>e){var n=t;t=e,e=n}return e+"-"+t in this.matrix},n.prototype.set=function(e,t,n){if(e=e.id,t=t.id,t>e){var r=t;t=e,e=r}n?this.matrix[e+"-"+t]=!0:delete this.matrix[e+"-"+t]},n.prototype.reset=function(){this.matrix={}},n.prototype.setNumObjects=function(e){}},function(e,t,n){function r(){i.call(this),this.type=i.types.PARTICLE}e.exports=r;var i=n(549),o=n(543);r.prototype=new i,r.prototype.constructor=r,r.prototype.calculateLocalInertia=function(e,t){return t=t||new o,t.set(0,0,0),t},r.prototype.volume=function(){return 0},r.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=0},r.prototype.calculateWorldAABB=function(e,t,n,r){n.copy(e),r.copy(e)}},function(e,t,n){function r(e){this.chassisBody=e.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis="undefined"!=typeof e.indexRightAxis?e.indexRightAxis:1,this.indexForwardAxis="undefined"!=typeof e.indexForwardAxis?e.indexForwardAxis:0,this.indexUpAxis="undefined"!=typeof e.indexUpAxis?e.indexUpAxis:2}function i(e,t,n,r,i){var a=0,s=n,l=T,u=b,c=w;e.getVelocityAtWorldPoint(s,l),t.getVelocityAtWorldPoint(s,u),l.vsub(u,c);var h=r.dot(c),d=o(e,n,r),p=o(t,n,r),f=1,m=f/(d+p);return a=-h*m,i<a&&(a=i),a<-i&&(a=-i),a}function o(e,t,n){var r=_,i=R,o=S,a=M;return t.vsub(e.position,r),r.cross(n,i),e.invInertiaWorld.vmult(i,a),a.cross(r,o),e.invMass+n.dot(o)}function a(e,t,n,r,i,o){var a=i.norm2();if(a>1.1)return 0;var s=C,l=H,u=A;e.getVelocityAtWorldPoint(t,s),n.getVelocityAtWorldPoint(r,l),s.vsub(l,u);var c=i.dot(u),h=.2,d=1/(e.invMass+n.invMass),o=-h*c*d;return o}var s=(n(547),n(543)),l=n(550),u=(n(563),n(562)),c=n(585);e.exports=r;var h=(new s,new s,new s,new s),d=new s,p=new s;new u;r.prototype.addWheel=function(e){e=e||{};var t=new c(e),n=this.wheelInfos.length;return this.wheelInfos.push(t),n},r.prototype.setSteeringValue=function(e,t){var n=this.wheelInfos[t];n.steering=e};new s;r.prototype.applyEngineForce=function(e,t){this.wheelInfos[t].engineForce=e},r.prototype.setBrake=function(e,t){this.wheelInfos[t].brake=e},r.prototype.addToWorld=function(e){this.constraints;e.add(this.chassisBody);var t=this;this.preStepCallback=function(){t.updateVehicle(e.dt)},e.addEventListener("preStep",this.preStepCallback),this.world=e},r.prototype.getVehicleAxisWorld=function(e,t){t.set(0===e?1:0,1===e?1:0,2===e?1:0),this.chassisBody.vectorToWorldFrame(t,t)},r.prototype.updateVehicle=function(e){for(var t=this.wheelInfos,n=t.length,r=this.chassisBody,i=0;i<n;i++)this.updateWheelTransform(i);this.currentVehicleSpeedKmHour=3.6*r.velocity.norm();var o=new s;this.getVehicleAxisWorld(this.indexForwardAxis,o),o.dot(r.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1);for(var i=0;i<n;i++)this.castRay(t[i]);this.updateSuspension(e);for(var a=new s,l=new s,i=0;i<n;i++){var u=t[i],c=u.suspensionForce;c>u.maxSuspensionForce&&(c=u.maxSuspensionForce),u.raycastResult.hitNormalWorld.scale(c*e,a),u.raycastResult.hitPointWorld.vsub(r.position,l),r.applyImpulse(a,u.raycastResult.hitPointWorld)}this.updateFriction(e);var h=new s,d=new s,p=new s;for(i=0;i<n;i++){var u=t[i];r.getVelocityAtWorldPoint(u.chassisConnectionPointWorld,p);var f=1;switch(this.indexUpAxis){case 1:f=-1}if(u.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,d);var m=d.dot(u.raycastResult.hitNormalWorld);u.raycastResult.hitNormalWorld.scale(m,h),d.vsub(h,d);var v=d.dot(p);u.deltaRotation=f*v*e/u.radius}!u.sliding&&u.isInContact||0===u.engineForce||!u.useCustomSlidingRotationalSpeed||(u.deltaRotation=(u.engineForce>0?1:-1)*u.customSlidingRotationalSpeed*e),Math.abs(u.brake)>Math.abs(u.engineForce)&&(u.deltaRotation=0),u.rotation+=u.deltaRotation,u.deltaRotation*=.99}},r.prototype.updateSuspension=function(e){for(var t=this.chassisBody,n=t.mass,r=this.wheelInfos,i=r.length,o=0;o<i;o++){var a=r[o];if(a.isInContact){var s,l=a.suspensionRestLength,u=a.suspensionLength,c=l-u;s=a.suspensionStiffness*c*a.clippedInvContactDotSuspension;var h,d=a.suspensionRelativeVelocity;h=d<0?a.dampingCompression:a.dampingRelaxation,s-=h*d,a.suspensionForce=s*n,a.suspensionForce<0&&(a.suspensionForce=0)}else a.suspensionForce=0}},r.prototype.removeFromWorld=function(e){this.constraints;e.remove(this.chassisBody),e.removeEventListener("preStep",this.preStepCallback),this.world=null};var f=new s,m=new s;r.prototype.castRay=function(e){var t=f,n=m;this.updateWheelTransformWorld(e);var r=this.chassisBody,i=-1,o=e.suspensionRestLength+e.radius;e.directionWorld.scale(o,t);var a=e.chassisConnectionPointWorld;a.vadd(t,n);var l=e.raycastResult;l.reset();var u=r.collisionResponse;r.collisionResponse=!1,this.world.rayTest(a,n,l),r.collisionResponse=u;var c=l.body;if(e.raycastResult.groundObject=0,c){i=l.distance,e.raycastResult.hitNormalWorld=l.hitNormalWorld,e.isInContact=!0;var h=l.distance;e.suspensionLength=h-e.radius;var d=e.suspensionRestLength-e.maxSuspensionTravel,p=e.suspensionRestLength+e.maxSuspensionTravel;e.suspensionLength<d&&(e.suspensionLength=d),e.suspensionLength>p&&(e.suspensionLength=p,e.raycastResult.reset());var v=e.raycastResult.hitNormalWorld.dot(e.directionWorld),g=new s;r.getVelocityAtWorldPoint(e.raycastResult.hitPointWorld,g);var E=e.raycastResult.hitNormalWorld.dot(g);if(v>=-.1)e.suspensionRelativeVelocity=0,e.clippedInvContactDotSuspension=10;else{var y=-1/v;e.suspensionRelativeVelocity=E*y,e.clippedInvContactDotSuspension=y}}else e.suspensionLength=e.suspensionRestLength+0*e.maxSuspensionTravel,e.suspensionRelativeVelocity=0,e.directionWorld.scale(-1,e.raycastResult.hitNormalWorld),e.clippedInvContactDotSuspension=1;return i},r.prototype.updateWheelTransformWorld=function(e){e.isInContact=!1;var t=this.chassisBody;t.pointToWorldFrame(e.chassisConnectionPointLocal,e.chassisConnectionPointWorld),t.vectorToWorldFrame(e.directionLocal,e.directionWorld),t.vectorToWorldFrame(e.axleLocal,e.axleWorld)},r.prototype.updateWheelTransform=function(e){var t=h,n=d,r=p,i=this.wheelInfos[e];this.updateWheelTransformWorld(i),i.directionLocal.scale(-1,t),n.copy(i.axleLocal),t.cross(n,r),r.normalize(),n.normalize();var o=i.steering,a=new l;a.setFromAxisAngle(t,o);var s=new l;s.setFromAxisAngle(n,i.rotation);var u=i.worldTransform.quaternion;this.chassisBody.quaternion.mult(a,u),u.mult(s,u),u.normalize();var c=i.worldTransform.position;c.copy(i.directionWorld),c.scale(i.suspensionLength,c),c.vadd(i.chassisConnectionPointWorld,c)};var v=[new s(1,0,0),new s(0,1,0),new s(0,0,1)];r.prototype.getWheelTransformWorld=function(e){return this.wheelInfos[e].worldTransform};var g=new s,E=[],y=[],x=1;r.prototype.updateFriction=function(e){for(var t=g,n=this.wheelInfos,r=n.length,o=this.chassisBody,l=y,u=E,c=0,h=0;h<r;h++){var d=n[h],p=d.raycastResult.body;p&&c++,d.sideImpulse=0,d.forwardImpulse=0,l[h]||(l[h]=new s),u[h]||(u[h]=new s)}for(var h=0;h<r;h++){var d=n[h],p=d.raycastResult.body;if(p){var f=u[h],m=this.getWheelTransformWorld(h);m.vectorToWorldFrame(v[this.indexRightAxis],f);var T=d.raycastResult.hitNormalWorld,b=f.dot(T);T.scale(b,t),f.vsub(t,f),f.normalize(),T.cross(f,l[h]),l[h].normalize(),d.sideImpulse=a(o,d.raycastResult.hitPointWorld,p,d.raycastResult.hitPointWorld,f),d.sideImpulse*=x}}var w=1,_=.5;this.sliding=!1;for(var h=0;h<r;h++){var d=n[h],p=d.raycastResult.body,R=0;if(d.slipInfo=1,p){var S=0,M=d.brake?d.brake:S;R=i(o,p,d.raycastResult.hitPointWorld,l[h],M),R+=d.engineForce*e;var C=M/R;d.slipInfo*=C}if(d.forwardImpulse=0,d.skidInfo=1,p){d.skidInfo=1;var H=d.suspensionForce*e*d.frictionSlip,A=H,P=H*A;d.forwardImpulse=R;var L=d.forwardImpulse*_,k=d.sideImpulse*w,D=L*L+k*k;if(d.sliding=!1,D>P){this.sliding=!0,d.sliding=!0;var C=H/Math.sqrt(D);d.skidInfo*=C}}}if(this.sliding)for(var h=0;h<r;h++){var d=n[h];0!==d.sideImpulse&&d.skidInfo<1&&(d.forwardImpulse*=d.skidInfo,d.sideImpulse*=d.skidInfo)}for(var h=0;h<r;h++){var d=n[h],F=new s;if(F.copy(d.raycastResult.hitPointWorld),0!==d.forwardImpulse){var O=new s;l[h].scale(d.forwardImpulse,O),o.applyImpulse(O,F)}if(0!==d.sideImpulse){var p=d.raycastResult.body,B=new s;B.copy(d.raycastResult.hitPointWorld);var N=new s;u[h].scale(d.sideImpulse,N),o.pointToLocalFrame(F,F),F["xyz"[this.indexUpAxis]]*=d.rollInfluence,o.pointToWorldFrame(F,F),o.applyImpulse(N,F),N.scale(-1,N),p.applyImpulse(N,B)}}};var T=new s,b=new s,w=new s,_=new s,R=new s,S=new s,M=new s,C=new s,H=new s,A=new s},function(e,t,n){function r(e){e=s.defaults(e,{chassisConnectionPointLocal:new i,chassisConnectionPointWorld:new i,directionLocal:new i,directionWorld:new i,axleLocal:new i,axleWorld:new i,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:1e4,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=e.maxSuspensionTravel,this.customSlidingRotationalSpeed=e.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=e.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=e.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=e.chassisConnectionPointWorld.clone(),this.directionLocal=e.directionLocal.clone(),this.directionWorld=e.directionWorld.clone(),this.axleLocal=e.axleLocal.clone(),this.axleWorld=e.axleWorld.clone(),this.suspensionRestLength=e.suspensionRestLength,this.suspensionMaxLength=e.suspensionMaxLength,this.radius=e.radius,this.suspensionStiffness=e.suspensionStiffness,this.dampingCompression=e.dampingCompression,this.dampingRelaxation=e.dampingRelaxation,this.frictionSlip=e.frictionSlip,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=e.rollInfluence,this.maxSuspensionForce=e.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=e.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new a,this.worldTransform=new o,this.isInContact=!1}var i=n(543),o=n(554),a=n(563),s=n(545);e.exports=r;var l=new i,u=new i,l=new i;r.prototype.updateWheel=function(e){var t=this.raycastResult;if(this.isInContact){var n=t.hitNormalWorld.dot(t.directionWorld);t.hitPointWorld.vsub(e.position,u),e.getVelocityAtWorldPoint(u,l);var r=t.hitNormalWorld.dot(l);if(n>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=10;else{var i=-1/n;this.suspensionRelativeVelocity=r*i,this.clippedInvContactDotSuspension=i}}else t.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,t.directionWorld.scale(-1,t.hitNormalWorld),this.clippedInvContactDotSuspension=1}},function(e,t,n){function r(e){if(this.wheelBodies=[],this.coordinateSystem="undefined"==typeof e.coordinateSystem?new s(1,2,3):e.coordinateSystem.clone(),this.chassisBody=e.chassisBody,!this.chassisBody){var t=new a(new s(5,2,.5));this.chassisBody=new i(1,t)}this.constraints=[],this.wheelAxes=[],this.wheelForces=[]}var i=n(547),o=n(587),a=n(552),s=n(543),l=n(578);e.exports=r,r.prototype.addWheel=function(e){e=e||{};var t=e.body;t||(t=new i(1,new o(1.2))),this.wheelBodies.push(t),this.wheelForces.push(0);var n=(new s,"undefined"!=typeof e.position?e.position.clone():new s),r=new s;this.chassisBody.pointToWorldFrame(n,r),t.position.set(r.x,r.y,r.z);var a="undefined"!=typeof e.axis?e.axis.clone():new s(0,1,0);this.wheelAxes.push(a);var u=new l(this.chassisBody,t,{pivotA:n,axisA:a,pivotB:s.ZERO,axisB:a,collideConnected:!1});return this.constraints.push(u),this.wheelBodies.length-1},r.prototype.setSteeringValue=function(e,t){var n=this.wheelAxes[t],r=Math.cos(e),i=Math.sin(e),o=n.x,a=n.y;this.constraints[t].axisA.set(r*o-i*a,i*o+r*a,0)},r.prototype.setMotorSpeed=function(e,t){var n=this.constraints[t];n.enableMotor(),n.motorTargetVelocity=e},r.prototype.disableMotor=function(e){var t=this.constraints[e];t.disableMotor()};var u=new s;r.prototype.setWheelForce=function(e,t){this.wheelForces[t]=e},r.prototype.applyWheelForce=function(e,t){var n=this.wheelAxes[t],r=this.wheelBodies[t],i=r.torque;n.scale(e,u),r.vectorToWorldFrame(u,u),i.vadd(u,i)},r.prototype.addToWorld=function(e){for(var t=this.constraints,n=this.wheelBodies.concat([this.chassisBody]),r=0;r<n.length;r++)e.add(n[r]);for(var r=0;r<t.length;r++)e.addConstraint(t[r]);e.addEventListener("preStep",this._update.bind(this))},r.prototype._update=function(){for(var e=this.wheelForces,t=0;t<e.length;t++)this.applyWheelForce(e[t],t)},r.prototype.removeFromWorld=function(e){for(var t=this.constraints,n=this.wheelBodies.concat([this.chassisBody]),r=0;r<n.length;r++)e.remove(n[r]);for(var r=0;r<t.length;r++)e.removeConstraint(t[r])};var c=new s;r.prototype.getWheelSpeed=function(e){var t=this.wheelAxes[e],n=this.wheelBodies[e],r=n.angularVelocity;return this.chassisBody.vectorToWorldFrame(t,c),r.dot(c)}},function(e,t,n){function r(e){if(i.call(this),this.radius=void 0!==e?Number(e):1,this.type=i.types.SPHERE,this.radius<0)throw new Error("The sphere radius cannot be negative.");this.updateBoundingSphereRadius()}e.exports=r;var i=n(549),o=n(543);r.prototype=new i,r.prototype.constructor=r,r.prototype.calculateLocalInertia=function(e,t){t=t||new o;var n=2*e*this.radius*this.radius/5;return t.x=n,t.y=n,t.z=n,t},r.prototype.volume=function(){return 4*Math.PI*this.radius/3},r.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.radius},r.prototype.calculateWorldAABB=function(e,t,n,r){for(var i=this.radius,o=["x","y","z"],a=0;a<o.length;a++){var s=o[a];n[s]=e[s]-i,r[s]=e[s]+i}}},function(e,t,n){function r(e){i.apply(this),this.axisList=[],this.world=null,this.axisIndex=0;var t=this.axisList;this._addBodyHandler=function(e){t.push(e.body)},this._removeBodyHandler=function(e){var n=t.indexOf(e.body);n!==-1&&t.splice(n,1)},e&&this.setWorld(e)}var i=(n(549),n(555));e.exports=r,r.prototype=new i,r.prototype.setWorld=function(e){this.axisList.length=0;for(var t=0;t<e.bodies.length;t++)this.axisList.push(e.bodies[t]);e.removeEventListener("addBody",this._addBodyHandler),e.removeEventListener("removeBody",this._removeBodyHandler),e.addEventListener("addBody",this._addBodyHandler),e.addEventListener("removeBody",this._removeBodyHandler),this.world=e,this.dirty=!0},r.insertionSortX=function(e){for(var t=1,n=e.length;t<n;t++){for(var r=e[t],i=t-1;i>=0&&!(e[i].aabb.lowerBound.x<=r.aabb.lowerBound.x);i--)e[i+1]=e[i];e[i+1]=r}return e},r.insertionSortY=function(e){for(var t=1,n=e.length;t<n;t++){for(var r=e[t],i=t-1;i>=0&&!(e[i].aabb.lowerBound.y<=r.aabb.lowerBound.y);i--)e[i+1]=e[i];e[i+1]=r}return e},r.insertionSortZ=function(e){for(var t=1,n=e.length;t<n;t++){for(var r=e[t],i=t-1;i>=0&&!(e[i].aabb.lowerBound.z<=r.aabb.lowerBound.z);i--)e[i+1]=e[i];e[i+1]=r}return e},r.prototype.collisionPairs=function(e,t,n){var i,o,a=this.axisList,s=a.length,l=this.axisIndex;for(this.dirty&&(this.sortList(),this.dirty=!1),i=0;i!==s;i++){var u=a[i];for(o=i+1;o<s;o++){var c=a[o];if(this.needBroadphaseCollision(u,c)){if(!r.checkBounds(u,c,l))break;this.intersectionTest(u,c,t,n)}}}},r.prototype.sortList=function(){for(var e=this.axisList,t=this.axisIndex,n=e.length,i=0;i!==n;i++){var o=e[i];o.aabbNeedsUpdate&&o.computeAABB()}0===t?r.insertionSortX(e):1===t?r.insertionSortY(e):2===t&&r.insertionSortZ(e)},r.checkBounds=function(e,t,n){var r,i;0===n?(r=e.position.x,i=t.position.x):1===n?(r=e.position.y,i=t.position.y):2===n&&(r=e.position.z,i=t.position.z);var o=e.boundingRadius,a=t.boundingRadius,s=r+o,l=i-a;return l<s},r.prototype.autoDetectAxis=function(){for(var e=0,t=0,n=0,r=0,i=0,o=0,a=this.axisList,s=a.length,l=1/s,u=0;u!==s;u++){var c=a[u],h=c.position.x;e+=h,t+=h*h;var d=c.position.y;n+=d,r+=d*d;var p=c.position.z;i+=p,o+=p*p}var f=t-e*e*l,m=r-n*n*l,v=o-i*i*l;f>m?f>v?this.axisIndex=0:this.axisIndex=2:m>v?this.axisIndex=1:this.axisIndex=2},r.prototype.aabbQuery=function(e,t,n){n=n||[],this.dirty&&(this.sortList(),this.dirty=!1);var r=this.axisIndex,i="x";1===r&&(i="y"),2===r&&(i="z");for(var o=this.axisList,a=(t.lowerBound[i],t.upperBound[i],0);a<o.length;a++){var s=o[a];s.aabbNeedsUpdate&&s.computeAABB(),s.aabb.overlaps(t)&&n.push(s)}return n}},function(e,t,n){function r(){this.particles=[],this.density=1,this.smoothingRadius=1,this.speedOfSound=1,this.viscosity=.01,this.eps=1e-6,this.pressures=[],this.densities=[],this.neighbors=[]}e.exports=r;var i=(n(549),n(543));n(550),n(583),n(547),n(551);r.prototype.add=function(e){this.particles.push(e),this.neighbors.length<this.particles.length&&this.neighbors.push([])},r.prototype.remove=function(e){var t=this.particles.indexOf(e);t!==-1&&(this.particles.splice(t,1),this.neighbors.length>this.particles.length&&this.neighbors.pop())};var o=new i;r.prototype.getNeighbors=function(e,t){for(var n=this.particles.length,r=e.id,i=this.smoothingRadius*this.smoothingRadius,a=o,s=0;s!==n;s++){var l=this.particles[s];l.position.vsub(e.position,a),r!==l.id&&a.norm2()<i&&t.push(l)}};var a=new i,s=new i,l=new i,u=new i,c=new i,h=new i;r.prototype.update=function(){for(var e=this.particles.length,t=a,n=this.speedOfSound,r=this.eps,i=0;i!==e;i++){var o=this.particles[i],d=this.neighbors[i];d.length=0,this.getNeighbors(o,d),d.push(this.particles[i]);for(var p=d.length,f=0,m=0;m!==p;m++){o.position.vsub(d[m].position,t);var v=t.norm(),g=this.w(v);f+=d[m].mass*g}this.densities[i]=f,this.pressures[i]=n*n*(this.densities[i]-this.density)}for(var E=s,y=l,x=u,T=c,b=h,i=0;i!==e;i++){var w=this.particles[i];E.set(0,0,0),y.set(0,0,0);for(var _,R,d=this.neighbors[i],p=d.length,m=0;m!==p;m++){var S=d[m];w.position.vsub(S.position,T);var M=T.norm();_=-S.mass*(this.pressures[i]/(this.densities[i]*this.densities[i]+r)+this.pressures[m]/(this.densities[m]*this.densities[m]+r)),this.gradw(T,x),x.mult(_,x),E.vadd(x,E),S.velocity.vsub(w.velocity,b),b.mult(1/(1e-4+this.densities[i]*this.densities[m])*this.viscosity*S.mass,b),R=this.nablaw(M),b.mult(R,b),y.vadd(b,y)}y.mult(w.mass,y),E.mult(w.mass,E),w.force.vadd(y,w.force),w.force.vadd(E,w.force)}},r.prototype.w=function(e){var t=this.smoothingRadius;return 315/(64*Math.PI*Math.pow(t,9))*Math.pow(t*t-e*e,3)},r.prototype.gradw=function(e,t){var n=e.norm(),r=this.smoothingRadius;e.mult(945/(32*Math.PI*Math.pow(r,9))*Math.pow(r*r-n*n,2),t)},r.prototype.nablaw=function(e){var t=this.smoothingRadius,n=945/(32*Math.PI*Math.pow(t,9))*(t*t-e*e)*(7*e*e-3*t*t);return n}},function(e,t,n){function r(e){for(l.call(this),this.iterations=10,this.tolerance=1e-7,this.subsolver=e,this.nodes=[],this.nodePool=[];this.nodePool.length<128;)this.nodePool.push(this.createNode())}function i(e){for(var t=e.length,n=0;n!==t;n++){var r=e[n];if(!(r.visited||r.body.type&p))return r}return!1}function o(e,t,n,r){for(f.push(e),e.visited=!0,t(e,n,r);f.length;)for(var o,a=f.pop();o=i(a.children);)o.visited=!0,t(o,n,r),f.push(o)}function a(e,t,n){t.push(e.body);for(var r=e.eqs.length,i=0;i!==r;i++){var o=e.eqs[i];n.indexOf(o)===-1&&n.push(o)}}function s(e,t){return t.id-e.id}e.exports=r;var l=(n(543),n(550),n(564)),u=n(547);r.prototype=new l;var c=[],h=[],d={bodies:[]},p=u.STATIC,f=[];r.prototype.createNode=function(){return{body:null,children:[],eqs:[],visited:!1}},r.prototype.solve=function(e,t){for(var n=c,r=this.nodePool,l=t.bodies,u=this.equations,p=u.length,f=l.length,m=this.subsolver;r.length<f;)r.push(this.createNode());n.length=f;for(var v=0;v<f;v++)n[v]=r[v];for(var v=0;v!==f;v++){var g=n[v];g.body=l[v],g.children.length=0,g.eqs.length=0,g.visited=!1}for(var E=0;E!==p;E++){var y=u[E],v=l.indexOf(y.bi),x=l.indexOf(y.bj),T=n[v],b=n[x];T.children.push(b),T.eqs.push(y),b.children.push(T),b.eqs.push(y)}var w,_=0,R=h;m.tolerance=this.tolerance,m.iterations=this.iterations;for(var S=d;w=i(n);){R.length=0,S.bodies.length=0,o(w,a,S.bodies,R);var M=R.length;R=R.sort(s);for(var v=0;v!==M;v++)m.addEquation(R[v]);m.solve(e,S);m.removeAllEquations(),_++}return _}},function(e,t,n){function r(e,t,n){n=n||{},this.restLength="number"==typeof n.restLength?n.restLength:1,this.stiffness=n.stiffness||100,this.damping=n.damping||1,this.bodyA=e,this.bodyB=t,this.localAnchorA=new i,this.localAnchorB=new i,n.localAnchorA&&this.localAnchorA.copy(n.localAnchorA),n.localAnchorB&&this.localAnchorB.copy(n.localAnchorB),n.worldAnchorA&&this.setWorldAnchorA(n.worldAnchorA),n.worldAnchorB&&this.setWorldAnchorB(n.worldAnchorB)}var i=n(543);e.exports=r,r.prototype.setWorldAnchorA=function(e){this.bodyA.pointToLocalFrame(e,this.localAnchorA)},r.prototype.setWorldAnchorB=function(e){this.bodyB.pointToLocalFrame(e,this.localAnchorB)},r.prototype.getWorldAnchorA=function(e){this.bodyA.pointToWorldFrame(this.localAnchorA,e)},r.prototype.getWorldAnchorB=function(e){this.bodyB.pointToWorldFrame(this.localAnchorB,e)};var o=new i,a=new i,s=new i,l=new i,u=new i,c=new i,h=new i,d=new i,p=new i,f=new i,m=new i;r.prototype.applyForce=function(){var e=this.stiffness,t=this.damping,n=this.restLength,r=this.bodyA,i=this.bodyB,v=o,g=a,E=s,y=l,x=m,T=u,b=c,w=h,_=d,R=p,S=f;this.getWorldAnchorA(T),this.getWorldAnchorB(b),T.vsub(r.position,w),b.vsub(i.position,_),b.vsub(T,v);var M=v.norm();g.copy(v),g.normalize(),i.velocity.vsub(r.velocity,E),i.angularVelocity.cross(_,x),E.vadd(x,E),r.angularVelocity.cross(w,x),E.vsub(x,E),g.mult(-e*(M-n)-t*E.dot(g),y),r.force.vsub(y,r.force),i.force.vadd(y,i.force),
w.cross(y,R),_.cross(y,S),r.torque.vsub(R,r.torque),i.torque.vadd(S,i.torque)}},function(e,t,n){function r(e,t){i.call(this),this.type=i.types.TRIMESH,this.vertices=new Float32Array(e),this.indices=new Int16Array(t),this.normals=new Float32Array(t.length),this.aabb=new s,this.edges=null,this.scale=new o(1,1,1),this.tree=new l,this.updateEdges(),this.updateNormals(),this.updateAABB(),this.updateBoundingSphereRadius(),this.updateTree()}e.exports=r;var i=n(549),o=n(543),a=(n(550),n(554)),s=n(542),l=n(593);r.prototype=new i,r.prototype.constructor=r;var u=new o;r.prototype.updateTree=function(){var e=this.tree;e.reset(),e.aabb.copy(this.aabb);var t=this.scale;e.aabb.lowerBound.x*=1/t.x,e.aabb.lowerBound.y*=1/t.y,e.aabb.lowerBound.z*=1/t.z,e.aabb.upperBound.x*=1/t.x,e.aabb.upperBound.y*=1/t.y,e.aabb.upperBound.z*=1/t.z;for(var n=new s,r=new o,i=new o,a=new o,l=[r,i,a],u=0;u<this.indices.length/3;u++){var c=3*u;this._getUnscaledVertex(this.indices[c],r),this._getUnscaledVertex(this.indices[c+1],i),this._getUnscaledVertex(this.indices[c+2],a),n.setFromPoints(l),e.insert(n,u)}e.removeEmptyNodes()};var c=new s;r.prototype.getTrianglesInAABB=function(e,t){c.copy(e);var n=this.scale,r=n.x,i=n.y,o=n.z,a=c.lowerBound,s=c.upperBound;return a.x/=r,a.y/=i,a.z/=o,s.x/=r,s.y/=i,s.z/=o,this.tree.aabbQuery(c,t)},r.prototype.setScale=function(e){var t=this.scale.x===this.scale.y===this.scale.z,n=e.x===e.y===e.z;t&&n||this.updateNormals(),this.scale.copy(e),this.updateAABB(),this.updateBoundingSphereRadius()},r.prototype.updateNormals=function(){for(var e=u,t=this.normals,n=0;n<this.indices.length/3;n++){var i=3*n,o=this.indices[i],a=this.indices[i+1],s=this.indices[i+2];this.getVertex(o,m),this.getVertex(a,v),this.getVertex(s,g),r.computeNormal(v,m,g,e),t[i]=e.x,t[i+1]=e.y,t[i+2]=e.z}},r.prototype.updateEdges=function(){for(var e={},t=function(t,n){var r=i<o?i+"_"+o:o+"_"+i;e[r]=!0},n=0;n<this.indices.length/3;n++){var r=3*n,i=this.indices[r],o=this.indices[r+1],a=this.indices[r+2];t(i,o),t(o,a),t(a,i)}var s=Object.keys(e);this.edges=new Int16Array(2*s.length);for(var n=0;n<s.length;n++){var l=s[n].split("_");this.edges[2*n]=parseInt(l[0],10),this.edges[2*n+1]=parseInt(l[1],10)}},r.prototype.getEdgeVertex=function(e,t,n){var r=this.edges[2*e+(t?1:0)];this.getVertex(r,n)};var h=new o,d=new o;r.prototype.getEdgeVector=function(e,t){var n=h,r=d;this.getEdgeVertex(e,0,n),this.getEdgeVertex(e,1,r),r.vsub(n,t)};var p=new o,f=new o;r.computeNormal=function(e,t,n,r){t.vsub(e,f),n.vsub(t,p),p.cross(f,r),r.isZero()||r.normalize()};var m=new o,v=new o,g=new o;r.prototype.getVertex=function(e,t){var n=this.scale;return this._getUnscaledVertex(e,t),t.x*=n.x,t.y*=n.y,t.z*=n.z,t},r.prototype._getUnscaledVertex=function(e,t){var n=3*e,r=this.vertices;return t.set(r[n],r[n+1],r[n+2])},r.prototype.getWorldVertex=function(e,t,n,r){return this.getVertex(e,r),a.pointToWorldFrame(t,n,r,r),r},r.prototype.getTriangleVertices=function(e,t,n,r){var i=3*e;this.getVertex(this.indices[i],t),this.getVertex(this.indices[i+1],n),this.getVertex(this.indices[i+2],r)},r.prototype.getNormal=function(e,t){var n=3*e;return t.set(this.normals[n],this.normals[n+1],this.normals[n+2])};var E=new s;r.prototype.calculateLocalInertia=function(e,t){this.computeLocalAABB(E);var n=E.upperBound.x-E.lowerBound.x,r=E.upperBound.y-E.lowerBound.y,i=E.upperBound.z-E.lowerBound.z;return t.set(1/12*e*(2*r*2*r+2*i*2*i),1/12*e*(2*n*2*n+2*i*2*i),1/12*e*(2*r*2*r+2*n*2*n))};var y=new o;r.prototype.computeLocalAABB=function(e){var t=e.lowerBound,n=e.upperBound,r=this.vertices.length,i=(this.vertices,y);this.getVertex(0,i),t.copy(i),n.copy(i);for(var o=0;o!==r;o++)this.getVertex(o,i),i.x<t.x?t.x=i.x:i.x>n.x&&(n.x=i.x),i.y<t.y?t.y=i.y:i.y>n.y&&(n.y=i.y),i.z<t.z?t.z=i.z:i.z>n.z&&(n.z=i.z)},r.prototype.updateAABB=function(){this.computeLocalAABB(this.aabb)},r.prototype.updateBoundingSphereRadius=function(){for(var e=0,t=this.vertices,n=new o,r=0,i=t.length/3;r!==i;r++){this.getVertex(r,n);var a=n.norm2();a>e&&(e=a)}this.boundingSphereRadius=Math.sqrt(e)};var x=(new o,new a),T=new s;r.prototype.calculateWorldAABB=function(e,t,n,r){var i=x,o=T;i.position=e,i.quaternion=t,this.aabb.toWorldFrame(i,o),n.copy(o.lowerBound),r.copy(o.upperBound)},r.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},r.createTorus=function(e,t,n,i,o){e=e||1,t=t||.5,n=n||8,i=i||6,o=o||2*Math.PI;for(var a=[],s=[],l=0;l<=n;l++)for(var u=0;u<=i;u++){var c=u/i*o,h=l/n*Math.PI*2,d=(e+t*Math.cos(h))*Math.cos(c),p=(e+t*Math.cos(h))*Math.sin(c),f=t*Math.sin(h);a.push(d,p,f)}for(var l=1;l<=n;l++)for(var u=1;u<=i;u++){var m=(i+1)*l+u-1,v=(i+1)*(l-1)+u-1,g=(i+1)*(l-1)+u,E=(i+1)*l+u;s.push(m,v,E),s.push(v,g,E)}return new r(a,s)}},function(e,t,n){function r(e){e=e||{},this.root=e.root||null,this.aabb=e.aabb?e.aabb.clone():new o,this.data=[],this.children=[]}function i(e,t){t=t||{},t.root=null,t.aabb=e,r.call(this,t),this.maxDepth="undefined"!=typeof t.maxDepth?t.maxDepth:8}var o=n(542),a=n(543);e.exports=i,i.prototype=new r,r.prototype.reset=function(e,t){this.children.length=this.data.length=0},r.prototype.insert=function(e,t,n){var r=this.data;if(n=n||0,!this.aabb.contains(e))return!1;var i=this.children;if(n<(this.maxDepth||this.root.maxDepth)){var o=!1;i.length||(this.subdivide(),o=!0);for(var a=0;8!==a;a++)if(i[a].insert(e,t,n+1))return!0;o&&(i.length=0)}return r.push(t),!0};var s=new a;r.prototype.subdivide=function(){var e=this.aabb,t=e.lowerBound,n=e.upperBound,i=this.children;i.push(new r({aabb:new o({lowerBound:new a(0,0,0)})}),new r({aabb:new o({lowerBound:new a(1,0,0)})}),new r({aabb:new o({lowerBound:new a(1,1,0)})}),new r({aabb:new o({lowerBound:new a(1,1,1)})}),new r({aabb:new o({lowerBound:new a(0,1,1)})}),new r({aabb:new o({lowerBound:new a(0,0,1)})}),new r({aabb:new o({lowerBound:new a(1,0,1)})}),new r({aabb:new o({lowerBound:new a(0,1,0)})})),n.vsub(t,s),s.scale(.5,s);for(var l=this.root||this,u=0;8!==u;u++){var c=i[u];c.root=l;var h=c.aabb.lowerBound;h.x*=s.x,h.y*=s.y,h.z*=s.z,h.vadd(t,h),h.vadd(s,c.aabb.upperBound)}},r.prototype.aabbQuery=function(e,t){for(var n=(this.data,this.children,[this]);n.length;){var r=n.pop();r.aabb.overlaps(e)&&Array.prototype.push.apply(t,r.data),Array.prototype.push.apply(n,r.children)}return t};var l=new o;r.prototype.rayQuery=function(e,t,n){return e.getAABB(l),l.toLocalFrame(t,l),this.aabbQuery(l,n),n},r.prototype.removeEmptyNodes=function(){for(var e=[this];e.length;){for(var t=e.pop(),n=t.children.length-1;n>=0;n--)t.children[n].data.length||t.children.splice(n,1);Array.prototype.push.apply(e,t.children)}}},function(e,t,n){function r(){u.apply(this),this.dt=-1,this.allowSleep=!1,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=0,this.quatNormalizeFast=!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new o,this.broadphase=new E,this.bodies=[],this.solver=new s,this.constraints=[],this.narrowphase=new l(this),this.collisionMatrix=new c,this.collisionMatrixPrevious=new c,this.materials=[],this.contactmaterials=[],this.contactMaterialTable=new f,this.defaultMaterial=new h("default"),this.defaultContactMaterial=new d(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null}}e.exports=r;var i=n(549),o=n(543),a=n(550),s=n(575),l=(n(565),n(558),n(567),n(561)),u=n(548),c=n(546),h=n(551),d=n(572),p=n(547),f=n(595),m=n(563),v=n(542),g=n(562),E=n(581);r.prototype=new u;var y=(new v,new g);if(r.prototype.getContactMaterial=function(e,t){return this.contactMaterialTable.get(e.id,t.id)},r.prototype.numObjects=function(){return this.bodies.length},r.prototype.collisionMatrixTick=function(){var e=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=e,this.collisionMatrix.reset()},r.prototype.add=r.prototype.addBody=function(e){this.bodies.indexOf(e)===-1&&(e.index=this.bodies.length,this.bodies.push(e),e.world=this,e.initPosition.copy(e.position),e.initVelocity.copy(e.velocity),e.timeLastSleepy=this.time,e instanceof p&&(e.initAngularVelocity.copy(e.angularVelocity),e.initQuaternion.copy(e.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=e,this.dispatchEvent(this.addBodyEvent))},r.prototype.addConstraint=function(e){this.constraints.push(e)},r.prototype.removeConstraint=function(e){var t=this.constraints.indexOf(e);t!==-1&&this.constraints.splice(t,1)},r.prototype.rayTest=function(e,t,n){n instanceof m?this.raycastClosest(e,t,{skipBackfaces:!0},n):this.raycastAll(e,t,{skipBackfaces:!0},n)},r.prototype.raycastAll=function(e,t,n,r){return n.mode=g.ALL,n.from=e,n.to=t,n.callback=r,y.intersectWorld(this,n)},r.prototype.raycastAny=function(e,t,n,r){return n.mode=g.ANY,n.from=e,n.to=t,n.result=r,y.intersectWorld(this,n)},r.prototype.raycastClosest=function(e,t,n,r){return n.mode=g.CLOSEST,n.from=e,n.to=t,n.result=r,y.intersectWorld(this,n)},r.prototype.remove=function(e){e.world=null;var t=this.bodies.length-1,n=this.bodies,r=n.indexOf(e);if(r!==-1){n.splice(r,1);for(var i=0;i!==n.length;i++)n[i].index=i;this.collisionMatrix.setNumObjects(t),this.removeBodyEvent.body=e,this.dispatchEvent(this.removeBodyEvent)}},r.prototype.removeBody=r.prototype.remove,r.prototype.addMaterial=function(e){this.materials.push(e)},r.prototype.addContactMaterial=function(e){this.contactmaterials.push(e),this.contactMaterialTable.set(e.materials[0].id,e.materials[1].id,e)},"undefined"==typeof performance&&(performance={}),!performance.now){var x=Date.now();performance.timing&&performance.timing.navigationStart&&(x=performance.timing.navigationStart),performance.now=function(){return Date.now()-x}}var T=new o;r.prototype.step=function(e,t,n){if(n=n||10,t=t||0,0===t)this.internalStep(e),this.time+=e;else{var r=Math.floor((this.time+t)/e)-Math.floor(this.time/e);r=Math.min(r,n);for(var i=performance.now(),o=0;o!==r&&(this.internalStep(e),!(performance.now()-i>1e3*e));o++);this.time+=t;for(var a=this.time%e,s=a/e,l=T,u=this.bodies,c=0;c!==u.length;c++){var h=u[c];h.type!==p.STATIC&&h.sleepState!==p.SLEEPING?(h.position.vsub(h.previousPosition,l),l.scale(s,l),h.position.vadd(l,h.interpolatedPosition)):(h.interpolatedPosition.copy(h.position),h.interpolatedQuaternion.copy(h.quaternion))}}};var b={type:"postStep"},w={type:"preStep"},_={type:"collide",body:null,contact:null},R=[],S=[],M=[],C=[],H=(new o,new o,new o,new o,new o,new o,new o,new o,new o,new a,new a),A=new a,P=new o;r.prototype.internalStep=function(e){this.dt=e;var t,n=this.contacts,r=M,o=C,a=this.numObjects(),s=this.bodies,l=this.solver,u=this.gravity,c=this.doProfiling,h=this.profile,d=p.DYNAMIC,f=this.constraints,m=S,v=(u.norm(),u.x),g=u.y,E=u.z,y=0;for(c&&(t=performance.now()),y=0;y!==a;y++){var x=s[y];if(x.type&d){var T=x.force,L=x.mass;T.x+=L*v,T.y+=L*g,T.z+=L*E}}for(var y=0,k=this.subsystems.length;y!==k;y++)this.subsystems[y].update();c&&(t=performance.now()),r.length=0,o.length=0,this.broadphase.collisionPairs(this,r,o),c&&(h.broadphase=performance.now()-t);var D=f.length;for(y=0;y!==D;y++){var F=f[y];if(!F.collideConnected)for(var O=r.length-1;O>=0;O-=1)(F.bodyA===r[O]&&F.bodyB===o[O]||F.bodyB===r[O]&&F.bodyA===o[O])&&(r.splice(O,1),o.splice(O,1))}this.collisionMatrixTick(),c&&(t=performance.now());var B=R,N=n.length;for(y=0;y!==N;y++)B.push(n[y]);n.length=0;var I=this.frictionEquations.length;for(y=0;y!==I;y++)m.push(this.frictionEquations[y]);this.frictionEquations.length=0,this.narrowphase.getContacts(r,o,this,n,B,this.frictionEquations,m),c&&(h.narrowphase=performance.now()-t),c&&(t=performance.now());for(var y=0;y<this.frictionEquations.length;y++)l.addEquation(this.frictionEquations[y]);for(var U=n.length,V=0;V!==U;V++){var z,F=n[V],x=F.bi,j=F.bj;F.si,F.sj;z=x.material&&j.material?this.getContactMaterial(x.material,j.material)||this.defaultContactMaterial:this.defaultContactMaterial;var G=z.friction;if(x.material&&j.material&&(x.material.friction>=0&&j.material.friction>=0&&(G=x.material.friction*j.material.friction),x.material.restitution>=0&&j.material.restitution>=0&&(F.restitution=x.material.restitution*j.material.restitution)),l.addEquation(F),x.allowSleep&&x.type===p.DYNAMIC&&x.sleepState===p.SLEEPING&&j.sleepState===p.AWAKE&&j.type!==p.STATIC){var W=j.velocity.norm2()+j.angularVelocity.norm2(),q=Math.pow(j.sleepSpeedLimit,2);W>=2*q&&(x._wakeUpAfterNarrowphase=!0)}if(j.allowSleep&&j.type===p.DYNAMIC&&j.sleepState===p.SLEEPING&&x.sleepState===p.AWAKE&&x.type!==p.STATIC){var X=x.velocity.norm2()+x.angularVelocity.norm2(),Y=Math.pow(x.sleepSpeedLimit,2);X>=2*Y&&(j._wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(x,j,!0),this.collisionMatrixPrevious.get(x,j)||(_.body=j,_.contact=F,x.dispatchEvent(_),_.body=x,j.dispatchEvent(_))}for(c&&(h.makeContactConstraints=performance.now()-t,t=performance.now()),y=0;y!==a;y++){var x=s[y];x._wakeUpAfterNarrowphase&&(x.wakeUp(),x._wakeUpAfterNarrowphase=!1)}var D=f.length;for(y=0;y!==D;y++){var F=f[y];F.update();for(var O=0,K=F.equations.length;O!==K;O++){var Q=F.equations[O];l.addEquation(Q)}}l.solve(e,this),c&&(h.solve=performance.now()-t),l.removeAllEquations();var Z=Math.pow;for(y=0;y!==a;y++){var x=s[y];if(x.type&d){var J=Z(1-x.linearDamping,e),$=x.velocity;$.mult(J,$);var ee=x.angularVelocity;if(ee){var te=Z(1-x.angularDamping,e);ee.mult(te,ee)}}}for(this.dispatchEvent(w),y=0;y!==a;y++){var x=s[y];x.preStep&&x.preStep.call(x)}c&&(t=performance.now());var ne=H,re=A,ie=this.stepnumber,oe=p.DYNAMIC|p.KINEMATIC,ae=ie%(this.quatNormalizeSkip+1)===0,se=this.quatNormalizeFast,le=.5*e;i.types.PLANE,i.types.CONVEXPOLYHEDRON;for(y=0;y!==a;y++){var ue=s[y],ce=ue.force,he=ue.torque;if(ue.type&oe&&ue.sleepState!==p.SLEEPING){var de=ue.velocity,pe=ue.angularVelocity,fe=ue.position,me=ue.quaternion,ve=ue.invMass,ge=ue.invInertiaWorld;de.x+=ce.x*ve*e,de.y+=ce.y*ve*e,de.z+=ce.z*ve*e,ue.angularVelocity&&(ge.vmult(he,P),P.mult(e,P),P.vadd(pe,pe)),fe.x+=de.x*e,fe.y+=de.y*e,fe.z+=de.z*e,ue.angularVelocity&&(ne.set(pe.x,pe.y,pe.z,0),ne.mult(me,re),me.x+=le*re.x,me.y+=le*re.y,me.z+=le*re.z,me.w+=le*re.w,ae&&(se?me.normalizeFast():me.normalize())),ue.aabb&&(ue.aabbNeedsUpdate=!0),ue.updateInertiaWorld&&ue.updateInertiaWorld()}}for(this.clearForces(),this.broadphase.dirty=!0,c&&(h.integrate=performance.now()-t),this.time+=e,this.stepnumber+=1,this.dispatchEvent(b),y=0;y!==a;y++){var x=s[y],Ee=x.postStep;Ee&&Ee.call(x)}if(this.allowSleep)for(y=0;y!==a;y++)s[y].sleepTick(this.time)},r.prototype.clearForces=function(){for(var e=this.bodies,t=e.length,n=0;n!==t;n++){var r=e[n];r.force,r.torque;r.force.set(0,0,0),r.torque.set(0,0,0)}}},function(e,t){function n(){this.data={keys:[]}}e.exports=n,n.prototype.get=function(e,t){if(e>t){var n=t;t=e,e=n}return this.data[e+"-"+t]},n.prototype.set=function(e,t,n){if(e>t){var r=t;t=e,e=r}var i=e+"-"+t;this.get(e,t)||this.data.keys.push(i),this.data[i]=n},n.prototype.reset=function(){for(var e=this.data,t=e.keys;t.length>0;){var n=t.pop();delete e[n]}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(199),a=i(o),s=n(109),l=i(s),u=n(112),c=i(u),h=n(113),d=i(h),p=n(117),f=i(p),m=n(118),v=i(m),g=n(2),E=i(g),y=n(498),x=i(y),T=n(126),b=r(T),w=n(540),_=i(w),R=n(532),S=i(R),M=n(503),C=i(M),H=n(506),A=i(H),P=n(597),L=i(P),k=new b.Vector3(0,0,-1),D=new b.Plane,F=function(e){function t(e,n){(0,c.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));r._onMeshMouseDown=function(e,t){var n=r.refs.camera,i=t.point;r.setState((0,a.default)({},r._setClickMarker(i.x,i.y,i.z))),D.setFromNormalAndCoplanarPoint(k.clone().applyQuaternion(n.quaternion),i),r._addMouseConstraint(i,e),window.addEventListener("mousemove",r._onMouseMove,!1),window.addEventListener("mouseup",r._onMouseUp,!1)},r._onMouseUp=function(){window.removeEventListener("mousemove",r._onMouseMove,!1),window.removeEventListener("mouseup",r._onMouseUp,!1),r.setState({clickMarkerVisible:!1}),r.world.removeConstraint(r.mouseConstraint),r.mouseConstraint=!1},r._onMouseMove=function(e){var t=r.refs.mouseInput,n=t.getCameraRay(new b.Vector2(e.clientX,e.clientY)),i=D.intersectLine(new b.Line3(n.origin,n.origin.clone().add(n.direction.clone().multiplyScalar(1e4))));i&&(r.setState((0,a.default)({},r._setClickMarker(i.x,i.y,i.z))),r.jointBody.position.set(i.x,i.y,i.z),r.mouseConstraint.update())};var i=100;r._raycaster=new b.Raycaster,r.fog=new b.Fog(5413,10,40);var o=20;r.lightPosition=new b.Vector3(o,o,o),r.lightTarget=new b.Vector3(0,0,0),r.groundQuaternion=(new b.Quaternion).setFromAxisAngle(new b.Vector3(1,0,0),-Math.PI/2),r.cameraPosition=new b.Vector3(10,2,0),r.cameraQuaternion=(new b.Quaternion).setFromAxisAngle(new b.Vector3(0,1,0),Math.PI/2);var s=new _.default.World,u=[],h=[],d=void 0,p=void 0,m=function(){s.quatNormalizeSkip=0,s.quatNormalizeFast=!1,s.gravity.set(0,-10,0),s.broadphase=new _.default.NaiveBroadphase;for(var e=5,t=new _.default.Box(new _.default.Vec3(.25,.25,.25)),n=function(n){var i=new _.default.Body({mass:e});i.addShape(t),i.position.set(-2.5+5*Math.random(),2.5+5*Math.random(),-2.5+5*Math.random()),s.addBody(i),u.push(i),h.push(function(e){e&&(e.userData._bodyIndex=n,r.meshes.push(e))})},o=0;o<i;++o)n(o);var a=new _.default.Plane,l=new _.default.Body({mass:0});l.addShape(a),l.quaternion.setFromAxisAngle(new _.default.Vec3(1,0,0),-Math.PI/2),s.addBody(l);var c=new _.default.Sphere(.1),d=new _.default.Body({mass:0});d.addShape(c),d.collisionFilterGroup=0,d.collisionFilterMask=0,s.addBody(d),r.jointBody=d};m();var v=1/60,g=function(){s.step(v)},E=function(){return u.map(function(e,t){var n=e.position,r=e.quaternion;return{position:(new b.Vector3).copy(n),quaternion:(new b.Quaternion).copy(r),ref:h[t]}})};return r._onAnimate=function(){g(),r.setState({meshStates:E()}),r.stats.update()},r._addMouseConstraint=function(e,t){var n=e.x,i=e.y,o=e.z;d=u[t];var a=new _.default.Vec3(n,i,o).vsub(d.position),l=d.quaternion.inverse();p=l.vmult(a),r.jointBody.position.set(n,i,o),r.mouseConstraint=new _.default.PointToPointConstraint(d,p,r.jointBody,new _.default.Vec3(0,0,0)),s.addConstraint(r.mouseConstraint),r.world=s},r.state={clickMarkerVisible:!1,clickMarkerPosition:new b.Vector3,meshStates:E()},r.meshes=[],r}return(0,v.default)(t,e),(0,d.default)(t,[{key:"_setClickMarker",value:function(e,t,n){return{clickMarkerPosition:new b.Vector3(e,t,n),clickMarkerVisible:!0}}},{key:"componentDidMount",value:function(){var e=this.refs,t=e.mouseInput,n=e.container;if(this.stats=new A.default,this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",n.appendChild(this.stats.domElement),!t.isReady()){var r=this.refs,i=r.scene,o=r.camera;t.ready(i,n,o),t.restrictIntersections(this.meshes),t.setActive(!1)}}},{key:"componentDidUpdate",value:function(e){var t=this.refs.mouseInput,n=this.props,r=n.width,i=n.height;r===e.width&&i===e.height||t.containerResized()}},{key:"componentWillUnmount",value:function(){delete this.world,delete this.stats}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,i=this.state,o=i.clickMarkerVisible,a=i.clickMarkerPosition,s=i.meshStates,l=20,u=s.map(function(t,n){var r=t.position,i=t.quaternion;return E.default.createElement(L.default,{key:n,position:r,quaternion:i,bodyIndex:n,meshes:e.meshes,onMouseDown:e._onMeshMouseDown})});return E.default.createElement("div",{ref:"container"},E.default.createElement(x.default,{antialias:!0,mainCamera:"camera",width:n,height:r,onAnimate:this._onAnimate,clearColor:this.fog.color,gammaInput:!0,gammaOutput:!0,shadowMapEnabled:!0},E.default.createElement("module",{ref:"mouseInput",descriptor:S.default}),E.default.createElement("resources",null,E.default.createElement("boxGeometry",{resourceId:"cubeGeo",width:.5,height:.5,depth:.5,widthSegments:10,heightSegments:10}),E.default.createElement("meshPhongMaterial",{resourceId:"cubeMaterial",color:8947848})),E.default.createElement("scene",{ref:"scene",fog:this.fog},E.default.createElement("perspectiveCamera",{name:"camera",fov:30,aspect:n/r,near:.5,far:1e4,position:this.cameraPosition,quaternion:this.cameraQuaternion,ref:"camera"}),E.default.createElement("ambientLight",{color:6710886}),E.default.createElement("directionalLight",{color:16777215,intensity:1.75,castShadow:!0,shadowMapWidth:1024,shadowMapHeight:1024,shadowCameraLeft:-l,shadowCameraRight:l,shadowCameraTop:l,shadowCameraBottom:-l,shadowCameraFar:3*l,shadowCameraNear:l,position:this.lightPosition,lookAt:this.lightTarget}),E.default.createElement("mesh",{castShadow:!0,receiveShadow:!0,quaternion:this.groundQuaternion},E.default.createElement("planeBufferGeometry",{width:100,height:100,widthSegments:1,heightSegments:1}),E.default.createElement("meshLambertMaterial",{color:7829367})),u,E.default.createElement("mesh",{visible:o,position:a},E.default.createElement("sphereGeometry",{radius:.2,widthSegments:8,heightSegments:8}),E.default.createElement("meshLambertMaterial",{color:7807505})))))}}]),t}(C.default);t.default=F},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=n(109),l=i(s),u=n(112),c=i(u),h=n(113),d=i(h),p=n(117),f=i(p),m=n(118),v=i(m),g=n(2),E=i(g),y=n(126),x=r(y),T=E.default.PropTypes,b=(a=o=function(e){function t(){var e,n,r,i;(0,c.default)(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=(0,f.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(a))),r._onMouseDown=function(e,t){e.preventDefault(),r.props.onMouseDown(r.refs.mesh.userData._bodyIndex,t)},i=n,(0,f.default)(r,i)}return(0,v.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this.refs.mesh,t=this.props,n=t.bodyIndex,r=t.meshes;e.userData._bodyIndex=n,r.push(e)}},{key:"componentWillUnmount",value:function(){var e=this.refs.mesh,t=this.props.meshes;t.splice(t.indexOf(e),1)}},{key:"render",value:function(){var e=this.props,t=e.position,n=e.quaternion;return E.default.createElement("mesh",{position:t,quaternion:n,ref:"mesh",castShadow:!0,onMouseDown:this._onMouseDown},E.default.createElement("geometryResource",{resourceId:"cubeGeo"}),E.default.createElement("materialResource",{resourceId:"cubeMaterial"}))}}]),t}(E.default.Component),o.propTypes={position:T.instanceOf(x.Vector3).isRequired,quaternion:T.instanceOf(x.Quaternion).isRequired,meshes:T.arrayOf(T.instanceOf(x.Mesh)).isRequired,bodyIndex:T.number.isRequired,onMouseDown:T.func.isRequired},a);t.default=b},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(109),a=i(o),s=n(112),l=i(s),u=n(113),c=i(u),h=n(117),d=i(h),p=n(118),f=i(p),m=n(2),v=i(m),g=n(498),E=i(g),y=n(126),x=r(y),T=n(503),b=i(T),w=n(506),_=i(w),R=n(599),S=i(R),M=function(e){function t(e,n){(0,l.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e,n));r._onAnimate=function(){r._updatePhysics(),r._updateGraphics(),r.stats.update()},r._onBodiesSelectChange=function(e){var t=e.target.value;r.bodies.length=t,r._createBodies(),r.setState({numBodies:t,meshStates:r._getMeshStates()}),r._updateGraphics()};var i=200;r.fog=new x.Fog(5413,10,40);var o=20;r.lightPosition=new x.Vector3(o,o,o),r.lightTarget=new x.Vector3(0,0,0),r.groundQuaternion=(new x.Quaternion).setFromAxisAngle(new x.Vector3(1,0,0),-Math.PI/2),r.cameraPosition=new x.Vector3(10,2,0),r.cameraQuaternion=(new x.Quaternion).setFromAxisAngle(new x.Vector3(0,1,0),Math.PI/2);var s=[];return s.length=i,r.bodies=s,r._createBodies(),r.state={numBodies:i,meshStates:r._getMeshStates()},r}return(0,f.default)(t,e),(0,c.default)(t,[{key:"_getMeshStates",value:function(){return this.bodies.map(function(e){var t=e.position,n=e.quaternion;return{position:(new x.Vector3).copy(t),quaternion:(new x.Quaternion).copy(n)}})}},{key:"_updateGraphics",value:function(){this.setState({meshStates:this._getMeshStates()})}},{key:"_updatePhysics",value:function(){for(var e=(new Date).getTime(),t=this.bodies,n=0;n<t.length;++n){var r=t[n],i=Math.sin(e*r.timeScale);r.quaternion.multiply(r.rotationDeltaPerFrame);var o=r.movementPerFrame;r.position.copy(r.startPosition.clone().add(o.clone().multiplyScalar(i)))}}},{key:"componentDidMount",value:function(){var e=this.refs.container;this.stats=new _.default,this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",e.appendChild(this.stats.domElement)}},{key:"componentWillUnmount",value:function(){delete this.stats}},{key:"_createBodies",value:function(){for(var e=this.bodies,t=e.length,n=0;n<t;++n)e[n]=this._createBody(n)}},{key:"_createBody",value:function(){var e=new x.Vector3(-2.5+5*Math.random(),.5+5*Math.random(),-2.5+5*Math.random());return{position:e,timeScale:.005*Math.random(),startPosition:e.clone(),movementPerFrame:new x.Vector3(Math.random(),Math.random(),Math.random()),rotationDeltaPerFrame:(new x.Quaternion).setFromEuler(new x.Euler(.05*Math.random(),.05*Math.random(),.05*Math.random())),quaternion:new x.Quaternion}}},{key:"_getInputBox",value:function(e){var t=this.state.numBodies;return v.default.createElement("div",{style:{position:"absolute",top:0,color:"white",width:"100%",textAlign:"center",background:"rgba(1,1,1,0.75)"}},v.default.createElement("div",null,e),v.default.createElement("label",null,"Bodies: ",v.default.createElement("select",{value:t,onChange:this._onBodiesSelectChange},[10,50,100,200,300,500,1e3,1500,2e3,2500,3e3].map(function(e){return v.default.createElement("option",{value:e,key:e},e)}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,i=this.state.meshStates,o=20,a=i.map(function(t,n){var r=t.position,i=t.quaternion;return v.default.createElement(S.default,{key:n,position:r,quaternion:i,bodyIndex:n,meshes:e.meshes})});return v.default.createElement("div",{ref:"container"},this._getInputBox("Rotating Cubes - Through React"),v.default.createElement(E.default,{antialias:!0,mainCamera:"camera",width:n,height:r,onAnimate:this._onAnimate,clearColor:this.fog.color,gammaInput:!0,gammaOutput:!0,shadowMapEnabled:!0},v.default.createElement("resources",null,v.default.createElement("boxGeometry",{resourceId:"cubeGeo",width:.5,height:.5,depth:.5,widthSegments:10,heightSegments:10}),v.default.createElement("meshPhongMaterial",{resourceId:"cubeMaterial",color:8947848})),v.default.createElement("scene",{ref:"scene",fog:this.fog},v.default.createElement("perspectiveCamera",{name:"camera",fov:30,aspect:n/r,near:.5,far:1e4,position:this.cameraPosition,quaternion:this.cameraQuaternion,ref:"camera"}),v.default.createElement("ambientLight",{color:6710886}),v.default.createElement("directionalLight",{color:16777215,intensity:1.75,castShadow:!0,shadowMapWidth:1024,shadowMapHeight:1024,shadowCameraLeft:-o,shadowCameraRight:o,shadowCameraTop:o,shadowCameraBottom:-o,shadowCameraFar:3*o,shadowCameraNear:o,position:this.lightPosition,lookAt:this.lightTarget}),v.default.createElement("mesh",{castShadow:!0,receiveShadow:!0,quaternion:this.groundQuaternion},v.default.createElement("planeBufferGeometry",{width:100,height:100,widthSegments:1,heightSegments:1}),v.default.createElement("meshLambertMaterial",{color:7829367})),a)))}}]),t}(b.default);t.default=M},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=n(109),l=i(s),u=n(112),c=i(u),h=n(113),d=i(h),p=n(117),f=i(p),m=n(118),v=i(m),g=n(2),E=i(g),y=n(126),x=r(y),T=E.default.PropTypes,b=new x.Vector3(1,1,1).multiplyScalar(.5),w=(a=o=function(e){function t(){return(0,c.default)(this,t),(0,f.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.position,n=e.quaternion;return E.default.createElement("mesh",{position:t,quaternion:n,scale:b,castShadow:!0},E.default.createElement("geometryResource",{resourceId:"cubeGeo"}),E.default.createElement("materialResource",{resourceId:"cubeMaterial"}))}}]),t}(E.default.Component),o.propTypes={position:T.instanceOf(x.Vector3).isRequired,quaternion:T.instanceOf(x.Quaternion).isRequired},a);t.default=w},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(199),a=i(o),s=n(109),l=i(s),u=n(112),c=i(u),h=n(113),d=i(h),p=n(117),f=i(p),m=n(195),v=i(m),g=n(118),E=i(g),y=n(2),x=i(y),T=n(498),b=i(T),w=n(126),_=r(w),R=n(599),S=i(R),M=n(598),C=i(M),H=function(e){function t(){return(0,c.default)(this,t),(0,f.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,E.default)(t,e),(0,d.default)(t,[{key:"_getMeshStates",value:function(){var e=this.bodies;return e.map(function(e){var t=e.position,n=e.quaternion,r=e.ref;return{position:(new _.Vector3).copy(t),quaternion:(new _.Quaternion).copy(n),ref:r}})}},{key:"_bodyRef",value:function(e,t){null!==t&&(this.bodies[e].body=b.default.findTHREEObject(t))}},{key:"_updateGraphics",value:function(){for(var e=this.bodies,t=0;t<e.length;++t){var n=e[t];n.body&&(n.body.position.copy(n.position),n.body.quaternion.copy(n.quaternion))}}},{key:"_createBody",value:function(e){return(0,a.default)({},(0,v.default)(t.prototype.__proto__||(0,l.default)(t.prototype),"_createBody",this).call(this),{ref:this._bodyRef.bind(this,e)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,i=this.state.meshStates,o=20,a=i.map(function(t,n){var r=t.position,i=t.quaternion,o=t.ref;return x.default.createElement(S.default,{key:n,position:r,quaternion:i,ref:o,meshes:e.meshes})});return x.default.createElement("div",{ref:"container"},this._getInputBox("Rotating Cubes - Direct Updates"),x.default.createElement(b.default,{antialias:!0,mainCamera:"camera",width:n,height:r,onAnimate:this._onAnimate,clearColor:this.fog.color,gammaInput:!0,gammaOutput:!0,shadowMapEnabled:!0},x.default.createElement("resources",null,x.default.createElement("boxGeometry",{resourceId:"cubeGeo",width:.5,height:.5,depth:.5,widthSegments:10,heightSegments:10}),x.default.createElement("meshPhongMaterial",{resourceId:"cubeMaterial",color:8947848})),x.default.createElement("scene",{ref:"scene",fog:this.fog},x.default.createElement("perspectiveCamera",{name:"camera",fov:30,aspect:n/r,near:.5,far:1e4,position:this.cameraPosition,quaternion:this.cameraQuaternion,ref:"camera"}),x.default.createElement("ambientLight",{color:6710886}),x.default.createElement("directionalLight",{color:16777215,intensity:1.75,castShadow:!0,shadowMapWidth:1024,shadowMapHeight:1024,shadowCameraLeft:-o,shadowCameraRight:o,shadowCameraTop:o,shadowCameraBottom:-o,shadowCameraFar:3*o,shadowCameraNear:o,position:this.lightPosition,lookAt:this.lightTarget}),x.default.createElement("mesh",{castShadow:!0,receiveShadow:!0,quaternion:this.groundQuaternion},x.default.createElement("planeBufferGeometry",{width:100,height:100,widthSegments:1,heightSegments:1}),x.default.createElement("meshLambertMaterial",{color:7829367
})),a)))}}]),t}(C.default);t.default=H},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=n(109),s=r(a),l=n(112),u=r(l),c=n(113),h=r(c),d=n(117),p=r(d),f=n(118),m=r(f),v=n(2),g=r(v),E=n(602),y=(r(E),n(631)),x=r(y),T=(o=i=function(e){function t(e,n){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n))}return(0,m.default)(t,e),(0,h.default)(t,[{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return g.default.createElement("div",null,g.default.createElement(x.default,{audioData:this.props.audioData}))}}]),t}(g.default.Component),i.propTypes={width:g.default.PropTypes.number.isRequired,height:g.default.PropTypes.number.isRequired},o);t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(109),o=r(i),a=n(112),s=r(a),l=n(113),u=r(l),c=n(117),h=r(c),d=n(118),p=r(d);n(603),n(609);var f=n(619),m=r(f),v=n(620),g=r(v),E=n(621),y=r(E),x=n(622),T=r(x);n(623),n(624),n(625),n(626),n(627),n(628),n(629),n(630);var b=n(2),w=r(b),_=function(e){function t(e){(0,s.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.state={audioData:e.audioData},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.playRibbons()}},{key:"componentDidUpdate",value:function(){}},{key:"getBoost",value:function(){return this.props.audioData}},{key:"playRibbons",value:function(){function e(){$(".dg").length&&$(".dg").remove();var e=new y.default.GUI;e.add(P,"noiseScale",100,5e3).name("Turbulence"),e.add(P,"noiseSpeed",0,.01).name("Variance"),e.add(P,"noiseSeparation",0,.5).name("Cohesion"),e.add(P,"ribbonSpeed",.1,5).name("Speed"),e.add(P,"usePostProc").name("Post Processing"),e.add(P,"showBounds").name("Show Bounds"),e.add(P,"autoRotate").name("Auto Rotate"),e.close(),a=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),a.position.z=1e3,s=new THREE.Scene,l=new THREE.WebGLRenderer({alpha:!0}),l.setSize(window.innerWidth,window.innerHeight),p=new THREE.Object3D,s.add(p);var i=new THREE.AmbientLight(5263440);s.add(i),h=new g.default,h.domElement.style.position="absolute",h.domElement.style.top="0px",setTimeout(function(){$("#ribbons").append(l.domElement),$("#ribbons").css("background","url(data/006.jpg)")},100),d=new THREE.TrackballControls(a,l.domElement);for(var o=0;o<b;o++)w[o]=m.default.randomVector3(v/2);for(o=0;o<E;o++){var u=new L;u.init(),p.add(u.mesh),x.push(u)}var c=new THREE.Geometry;for(o=0;o<800;o++)c.vertices.push(m.default.randomVector3(v));var T=THREE.ImageUtils.loadTexture("dot.png"),_=new THREE.PointsMaterial({size:10,map:T,blending:THREE.AdditiveBlending,transparent:!0,opacity:.6}),R=new THREE.Points(c,_);p.add(R);var S=new THREE.MeshBasicMaterial({color:0,wireframe:!0}),M=new THREE.BoxGeometry(2*v,2*v,2*v);f=new THREE.Mesh(M,S),p.add(f),window.addEventListener("resize",r,!1),t(),n()}function t(){var e=new THREE.RenderPass(s,a);c=new THREE.ShaderPass(THREE.FXAAShader);var t=new THREE.ShaderPass(THREE.SuperShader);t.renderToScreen=!0,c.uniforms.resolution.value=new THREE.Vector2(1/window.innerWidth,1/window.innerHeight),t.uniforms.glowSize.value=2,u=new THREE.EffectComposer(l),u.addPass(e),u.addPass(c),u.addPass(t)}function n(){requestAnimationFrame(n),R+=P.noiseSpeed;for(var e=0;e<E;e++)x[e].update();d.update(),h.update(),P.usePostProc?u.render():l.render(s,a),P.autoRotate&&(p.rotation.y+=.001,p.rotation.x+=.001),f.visible=P.showBounds}function r(){var e=window.innerWidth,t=window.innerHeight;a.aspect=e/t,a.updateProjectionMatrix(),l.setSize(e,t),c.uniforms.resolution.value=new THREE.Vector2(1/e,1/t),u.setSize(e,t)}var i=this,o=0;o=setInterval(function(){return i.getBoost()},10);var a,s,l,u,c,h,d,p,f,v=1e3,E=600,x=[],b=3,w=[],_=new T.default,R=1e3*Math.random(),S=new THREE.Vector3(0,1,0),M=new THREE.Vector3,C=new THREE.Vector3,H=new THREE.Vector3,A=new THREE.Color,P={noiseSpeed:.001,noiseScale:1200,noiseSeparation:.1,ribbonSpeed:1,usePostProc:!1,showBounds:!1,autoRotate:!0,ribbonWidth:6,startRange:100,clumpiness:.8},L=function(){this.init=function(){this.LEN=40,this.velocity=new THREE.Vector3,this.speed=m.default.randomRange(.1,.5),this.ribbonWidth=m.default.randomRange(2,12),this.head=new THREE.Vector3,this.tail=new THREE.Vector3,this.meshGeom=this.createMeshGeom(),this.reset(),this.meshMaterial=new THREE.MeshBasicMaterial({side:THREE.DoubleSide,vertexColors:THREE.FaceColors,wireframe:!1}),this.mesh=new THREE.Mesh(this.meshGeom,this.meshMaterial)},this.createMeshGeom=function(){var e,t=new THREE.Geometry;for(t.vertexColors=[],e=0;e<this.LEN;e++)t.vertices.push(new THREE.Vector3),t.vertices.push(new THREE.Vector3),t.vertexColors.push(new THREE.Color),t.vertexColors.push(new THREE.Color);for(e=0;e<this.LEN-1;e++)t.faces.push(new THREE.Face3(2*e,2*e+1,2*e+2)),t.faces.push(new THREE.Face3(2*e+1,2*e+3,2*e+2));return t},this.reset=function(){var e;if(this.id=Math.random()*P.noiseSeparation,Math.random()<P.clumpiness){var t=m.default.randomInt(0,b-1);this.head.addVectors(w[t],m.default.randomVector3(P.startRange))}else this.head.copy(m.default.randomVector3(v));for(this.tail.copy(this.head),e=0;e<this.LEN;e++)this.meshGeom.vertices[2*e].copy(this.head),this.meshGeom.vertices[2*e+1].copy(this.head);var n=this.head.x/(v/2)/2+.5;Math.random()<.1&&(n=Math.random());var r=0,i=m.default.randomRange(.2,.6);for(e=0;e<this.LEN-1;e++)A.setHSL(n,r,(1-e/this.LEN)*i/4+3*i/4),this.meshGeom.faces[2*e].color.copy(A),this.meshGeom.faces[2*e+1].color.copy(A);this.meshGeom.verticesNeedUpdate=!0,this.meshGeom.colorsNeedUpdate=!0},this.update=function(){this.tail.copy(this.head),M.copy(this.head).divideScalar(P.noiseScale),this.velocity.x=_.noise4d(M.x,M.y,M.z,0+R+this.id)*this.speed*o,this.velocity.y=_.noise4d(M.x,M.y,M.z,50+R+this.id)*this.speed*o,this.velocity.z=_.noise4d(M.x,M.y,M.z,100+R+this.id)*this.speed*o,this.head.add(this.velocity),(this.head.x>v||this.head.x<-v||this.head.y>v||this.head.y<-v||this.head.z>v||this.head.z<-v)&&this.reset(),C.subVectors(this.head,this.tail).normalize(),M.crossVectors(C,S).normalize(),H.crossVectors(C,M),H.multiplyScalar(this.ribbonWidth);for(var e=this.LEN-1;e>0;e--)this.meshGeom.vertices[2*e].copy(this.meshGeom.vertices[2*(e-1)]),this.meshGeom.vertices[2*e+1].copy(this.meshGeom.vertices[2*(e-1)+1]);this.meshGeom.vertices[0].copy(this.head).add(H),this.meshGeom.vertices[1].copy(this.head).sub(H),this.meshGeom.verticesNeedUpdate=!0}};e()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return w.default.createElement("div",{id:"ribbons"}," ")}}]),t}(w.default.Component);t.default=_},function(e,t,n){var r,i;(function(e){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var a=n(605),s=o(a),l=n(52),u=o(l);/*! jQuery v2.0.0 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
	*/
!function(o,a){function l(e){var t=e.length,n=de.type(e);return!de.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)))}function c(e){var t=Te[e]={};return de.each(e.match(fe)||[],function(e,n){t[n]=!0}),t}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=de.expando+Math.random()}function d(e,t,n){var r;if(n===a&&1===e.nodeType)if(r="data-"+t.replace(Re,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:_e.test(n)?JSON.parse(n):n)}catch(e){}be.set(e,t,n)}else n=a;return n}function p(){return!0}function f(){return!1}function m(){try{return J.activeElement}catch(e){}}function v(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function g(e,t,n){if(de.isFunction(t))return de.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return de.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Fe.test(t))return de.filter(t,e,n);t=de.filter(t,e)}return de.grep(e,function(e){return le.call(t,e)>=0!==n})}function E(e,t){return de.nodeName(e,"table")&&de.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function x(e){var t=We.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function T(e,t){for(var n=e.length,r=0;n>r;r++)we.set(e[r],"globalEval",!t||we.get(t[r],"globalEval"))}function b(e,t){var n,r,i,o,a,s,l,u;if(1===t.nodeType){if(we.hasData(e)&&(o=we.access(e),a=de.extend({},o),u=o.events,we.set(t,a),u)){delete a.handle,a.events={};for(i in u)for(n=0,r=u[i].length;r>n;n++)de.event.add(t,i,u[i][n])}be.hasData(e)&&(s=be.access(e),l=de.extend({},s),be.set(t,l))}}function w(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===a||t&&de.nodeName(e,t)?de.merge([e],n):n}function _(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ze.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function R(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=ot.length;i--;)if(t=ot[i]+n,t in e)return t;return r}function S(e,t){return e=t||e,"none"===de.css(e,"display")||!de.contains(e.ownerDocument,e)}function M(e){return o.getComputedStyle(e,null)}function C(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=we.get(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&S(r)&&(o[a]=we.access(r,"olddisplay",L(r.nodeName)))):o[a]||(i=S(r),(n&&"none"!==n||!i)&&we.set(r,"olddisplay",i?n:de.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function H(e,t,n){var r=Je.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function A(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=de.css(e,n+it[o],!0,i)),r?("content"===n&&(a-=de.css(e,"padding"+it[o],!0,i)),"margin"!==n&&(a-=de.css(e,"border"+it[o]+"Width",!0,i))):(a+=de.css(e,"padding"+it[o],!0,i),"padding"!==n&&(a+=de.css(e,"border"+it[o]+"Width",!0,i)));return a}function P(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=M(e),a=de.support.boxSizing&&"border-box"===de.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Ye(e,t,o),(0>i||null==i)&&(i=e.style[t]),$e.test(i))return i;r=a&&(de.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+A(e,t,n||(a?"border":"content"),r,o)+"px"}function L(e){var t=J,n=tt[e];return n||(n=k(e,t),"none"!==n&&n||(Ke=(Ke||de("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Ke[0].contentWindow||Ke[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=k(e,t),Ke.detach()),tt[e]=n),n}function k(e,t){var n=de(t.createElement(e)).appendTo(t.body),r=de.css(n[0],"display");return n.remove(),r}function D(e,t,n,r){var i;if(de.isArray(t))de.each(t,function(t,i){n||st.test(e)?r(e,i):D(e+"["+("object"==("undefined"==typeof i?"undefined":(0,u.default)(i))?t:"")+"]",i,n,r)});else if(n||"object"!==de.type(t))r(e,t);else for(i in t)D(e+"["+i+"]",t[i],n,r)}function F(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(fe)||[];if(de.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function O(e,t,n,r){function i(l){var u;return o[l]=!0,de.each(e[l]||[],function(e,l){var c=l(t,n,r);return"string"!=typeof c||s||o[c]?s?!(u=c):a:(t.dataTypes.unshift(c),i(c),!1)}),u}var o={},s=e===_t;return i(t.dataTypes[0])||!o["*"]&&i("*")}function B(e,t){var n,r,i=de.ajaxSettings.flatOptions||{};for(n in t)t[n]!==a&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&de.extend(!0,e,r),e}function N(e,t,n){for(var r,i,o,s,l=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),r===a&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in l)if(l[i]&&l[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):a}function I(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function U(){return setTimeout(function(){Lt=a}),Lt=de.now()}function V(e,t){de.each(t,function(t,n){for(var r=(Nt[t]||[]).concat(Nt["*"]),i=0,o=r.length;o>i;i++)if(r[i].call(e,t,n))return})}function z(e,t,n){var r,i,o=0,a=Bt.length,s=de.Deferred().always(function(){delete l.elem}),l=function t(){if(i)return!1;for(var n=Lt||U(),r=Math.max(0,u.startTime+u.duration-n),o=r/u.duration||0,a=1-o,l=0,t=u.tweens.length;t>l;l++)u.tweens[l].run(a);return s.notifyWith(e,[u,a,r]),1>a&&t?r:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:de.extend({},t),opts:de.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Lt||U(),duration:n.duration,tweens:[],createTween:function(t,n){var r=de.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(j(c,u.opts.specialEasing);a>o;o++)if(r=Bt[o].call(u,e,c,u.opts))return r;return V(u,c),de.isFunction(u.opts.start)&&u.opts.start.call(e,u),de.fx.timer(de.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function j(e,t){var n,r,i,o,a;for(n in e)if(r=de.camelCase(n),i=t[r],o=e[n],de.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=de.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function G(e,t,n){var r,i,o,s,l,u,c,h,d,p=this,f=e.style,m={},v=[],g=e.nodeType&&S(e);n.queue||(h=de._queueHooks(e,"fx"),null==h.unqueued&&(h.unqueued=0,d=h.empty.fire,h.empty.fire=function(){h.unqueued||d()}),h.unqueued++,p.always(function(){p.always(function(){h.unqueued--,de.queue(e,"fx").length||h.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===de.css(e,"display")&&"none"===de.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",p.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=we.get(e,"fxshow");for(r in t)if(o=t[r],Dt.exec(o)){if(delete t[r],u=u||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||l===a||l[r]===a)continue;g=!0}v.push(r)}if(s=v.length){l=we.get(e,"fxshow")||we.access(e,"fxshow",{}),"hidden"in l&&(g=l.hidden),u&&(l.hidden=!g),g?de(e).show():p.done(function(){de(e).hide()}),p.done(function(){var t;we.remove(e,"fxshow");for(t in m)de.style(e,t,m[t])});for(r=0;s>r;r++)i=v[r],c=p.createTween(i,g?l[i]:0),m[i]=l[i]||de.style(e,i),i in l||(l[i]=c.start,g&&(c.end=c.start,c.start="width"===i||"height"===i?1:0))}}function W(e,t,n,r,i){return new W.prototype.init(e,t,n,r,i)}function q(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=it[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function X(e){return de.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y,K,Q="undefined"==typeof a?"undefined":(0,u.default)(a),Z=o.location,J=o.document,$=J.documentElement,ee=o.jQuery,te=o.$,ne={},re=[],ie="2.0.0",oe=re.concat,ae=re.push,se=re.slice,le=re.indexOf,ue=ne.toString,ce=ne.hasOwnProperty,he=ie.trim,de=function e(t,n){return new e.fn.init(t,n,Y)},pe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fe=/\S+/g,me=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,ve=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ge=/^-ms-/,Ee=/-([\da-z])/gi,ye=function(e,t){return t.toUpperCase()},xe=function e(){J.removeEventListener("DOMContentLoaded",e,!1),o.removeEventListener("load",e,!1),de.ready()};de.fn=de.prototype={jquery:ie,constructor:de,init:function(e,t,n){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:me.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof de?t[0]:t,de.merge(this,de.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),ve.test(r[1])&&de.isPlainObject(t))for(r in t)de.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=J.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):de.isFunction(e)?n.ready(e):(e.selector!==a&&(this.selector=e.selector,this.context=e.context),de.makeArray(e,this))},selector:"",length:0,toArray:function(){return se.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=de.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return de.each(this,e,t)},ready:function(e){return de.ready.promise().done(e),this},slice:function(){return this.pushStack(se.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(de.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:ae,sort:[].sort,splice:[].splice},de.fn.init.prototype=de.fn,de.extend=de.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},l=1,c=arguments.length,h=!1;for("boolean"==typeof s&&(h=s,s=arguments[1]||{},l=2),"object"==("undefined"==typeof s?"undefined":(0,u.default)(s))||de.isFunction(s)||(s={}),c===l&&(s=this,--l);c>l;l++)if(null!=(e=arguments[l]))for(t in e)n=s[t],r=e[t],s!==r&&(h&&r&&(de.isPlainObject(r)||(i=de.isArray(r)))?(i?(i=!1,o=n&&de.isArray(n)?n:[]):o=n&&de.isPlainObject(n)?n:{},s[t]=de.extend(h,o,r)):r!==a&&(s[t]=r));return s},de.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),noConflict:function(e){return o.$===de&&(o.$=te),e&&o.jQuery===de&&(o.jQuery=ee),de},isReady:!1,readyWait:1,holdReady:function(e){e?de.readyWait++:de.ready(!0)},ready:function(e){(e===!0?--de.readyWait:de.isReady)||(de.isReady=!0,e!==!0&&--de.readyWait>0||(K.resolveWith(J,[de]),de.fn.trigger&&de(J).trigger("ready").off("ready")))},isFunction:function(e){return"function"===de.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==("undefined"==typeof e?"undefined":(0,u.default)(e))||"function"==typeof e?ne[ue.call(e)]||"object":"undefined"==typeof e?"undefined":(0,u.default)(e)},isPlainObject:function(e){if("object"!==de.type(e)||e.nodeType||de.isWindow(e))return!1;try{if(e.constructor&&!ce.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var r=ve.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=de.buildFragment([e],t,i),i&&de(i).remove(),de.merge([],r.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(e){t=a}return(!t||t.getElementsByTagName("parsererror").length)&&de.error("Invalid XML: "+e),t},noop:function(){},globalEval:function(e){var t,n=eval;e=de.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(ge,"ms-").replace(Ee,ye)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=l(e);if(n){if(a)for(;o>i&&(r=t.apply(e[i],n),r!==!1);i++);else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a)for(;o>i&&(r=t.call(e[i],i,e[i]),r!==!1);i++);else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":he.call(e)},makeArray:function(e,t){var n=t||[];return null!=e&&(l(Object(e))?de.merge(n,"string"==typeof e?[e]:e):ae.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:le.call(t,e,n)},merge:function(e,t){var n=t.length,r=e.length,i=0;if("number"==typeof n)for(;n>i;i++)e[r++]=t[i];else for(;t[i]!==a;)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=l(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return oe.apply([],s)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),de.isFunction(e)?(r=se.call(arguments,2),i=function(){return e.apply(t||this,r.concat(se.call(arguments)))},i.guid=e.guid=e.guid||de.guid++,i):a},access:function(e,t,n,r,i,o,s){var l=0,u=e.length,c=null==n;if("object"===de.type(n)){i=!0;for(l in n)de.access(e,t,l,n[l],!0,o,s)}else if(r!==a&&(i=!0,de.isFunction(r)||(s=!0),c&&(s?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(de(e),n)})),t))for(;u>l;l++)t(e[l],n,s?r:r.call(e[l],l,t(e[l],n)));return i?e:c?t.call(e):u?t(e[0],n):o},now:Date.now,swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),de.ready.promise=function(e){return K||(K=de.Deferred(),"complete"===J.readyState?setTimeout(de.ready):(J.addEventListener("DOMContentLoaded",xe,!1),o.addEventListener("load",xe,!1))),K.promise(e)},de.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){ne["[object "+t+"]"]=t.toLowerCase()}),Y=de(J),function(e,t){function n(e){return xe.test(e+"")}function r(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>M.cacheLength&&delete e[t.shift()],e[n]=r}}function i(e){return e[V]=!0,e}function o(e){var t=D.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t,n,r){var i,o,a,s,l,u,c,h,d,p;if((t?t.ownerDocument||t:z)!==D&&k(t),t=t||D,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(O&&!r){if(i=Te.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&U(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return ne.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&j.getElementsByClassName&&t.getElementsByClassName)return ne.apply(n,t.getElementsByClassName(a)),n}if(j.qsa&&(!B||!B.test(e))){if(h=c=V,d=t,p=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=f(e),(c=t.getAttribute("id"))?h=c.replace(_e,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",l=u.length;l--;)u[l]=h+m(u[l]);d=me.test(e)&&t.parentNode||t,p=u.join(",")}if(p)try{return ne.apply(n,d.querySelectorAll(p)),n}catch(e){}finally{c||t.removeAttribute("id")}}}return w(e.replace(he,"$1"),t,n,r)}function s(e,t){var n=t&&e,r=n&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null}function c(e,n,r){var i;return r?t:i=e.getAttribute(n,"type"===n.toLowerCase()?1:2)}function h(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function d(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function p(e){return i(function(t){return t=+t,i(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function f(e,t){var n,r,i,o,s,l,u,c=X[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=M.preFilter;s;){(!n||(r=pe.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(i=[])),n=!1,(r=fe.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(he," ")}),s=s.slice(n.length));for(o in M.filter)!(r=ye[o].exec(s))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?a.error(e):X(e,l).slice(0)}function m(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function v(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=W++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,u,c=G+" "+o;if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(u=t[V]||(t[V]={}),(l=u[r])&&l[0]===c){if((s=l[1])===!0||s===S)return s===!0}else if(l=u[r]=[c],l[1]=e(t,n,a)||S,l[1]===!0)return!0}}function g(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function E(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function y(e,t,n,r,o,a){return r&&!r[V]&&(r=y(r)),o&&!o[V]&&(o=y(o,a)),i(function(i,a,s,l){var u,c,h,d=[],p=[],f=a.length,m=i||b(t||"*",s.nodeType?[s]:s,[]),v=!e||!i&&t?m:E(m,d,e,s,l),g=n?o||(i?e:f||r)?[]:a:v;if(n&&n(v,g,s,l),r)for(u=E(g,p),r(u,[],s,l),c=u.length;c--;)(h=u[c])&&(g[p[c]]=!(v[p[c]]=h));if(i){if(o||e){if(o){for(u=[],c=g.length;c--;)(h=g[c])&&u.push(v[c]=h);o(null,g=[],u,l)}for(c=g.length;c--;)(h=g[c])&&(u=o?ie.call(i,h):d[c])>-1&&(i[u]=!(a[u]=h))}}else g=E(g===a?g.splice(f,g.length):g),o?o(null,a,g,l):ne.apply(a,g)})}function x(e){for(var t,n,r,i=e.length,o=M.relative[e[0].type],a=o||M.relative[" "],s=o?1:0,l=v(function(e){return e===t},a,!0),u=v(function(e){return ie.call(t,e)>-1},a,!0),c=[function(e,n,r){return!o&&(r||n!==P)||((t=n).nodeType?l(e,n,r):u(e,n,r))}];i>s;s++)if(n=M.relative[e[s].type])c=[v(g(c),n)];else{if(n=M.filter[e[s].type].apply(null,e[s].matches),n[V]){for(r=++s;i>r&&!M.relative[e[r].type];r++);return y(s>1&&g(c),s>1&&m(e.slice(0,s-1)).replace(he,"$1"),n,r>s&&x(e.slice(s,r)),i>r&&x(e=e.slice(r)),i>r&&m(e))}c.push(n)}return g(c)}function T(e,t){var n=0,r=t.length>0,o=e.length>0,s=function(i,s,l,u,c){var h,d,p,f=[],m=0,v="0",g=i&&[],y=null!=c,x=P,T=i||o&&M.find.TAG("*",c&&s.parentNode||s),b=G+=null==x?1:Math.random()||.1;for(y&&(P=s!==D&&s,S=n);null!=(h=T[v]);v++){if(o&&h){for(d=0;p=e[d++];)if(p(h,s,l)){u.push(h);break}y&&(G=b,S=++n)}r&&((h=!p&&h)&&m--,i&&g.push(h))}if(m+=v,r&&v!==m){for(d=0;p=t[d++];)p(g,f,s,l);if(i){if(m>0)for(;v--;)g[v]||f[v]||(f[v]=ee.call(u));f=E(f)}ne.apply(u,f),y&&!i&&f.length>0&&m+t.length>1&&a.uniqueSort(u)}return y&&(G=b,P=x),g};return r?i(s):s}function b(e,t,n){for(var r=0,i=t.length;i>r;r++)a(e,t[r],n);return n}function w(e,t,n,r){var i,o,a,s,l,u=f(e);if(!r&&1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&O&&M.relative[o[1].type]){if(t=(M.find.ID(a.matches[0].replace(Re,Se),t)||[])[0],!t)return n;e=e.slice(o.shift().value.length)}for(i=ye.needsContext.test(e)?0:o.length;i--&&(a=o[i],!M.relative[s=a.type]);)if((l=M.find[s])&&(r=l(a.matches[0].replace(Re,Se),me.test(o[0].type)&&t.parentNode||t))){if(o.splice(i,1),e=r.length&&m(o),!e)return ne.apply(n,r),n;break}}return A(e,u)(r,t,!O,n,me.test(e)),n}function _(){}var R,S,M,C,H,A,P,L,k,D,F,O,B,N,I,U,V="sizzle"+-new Date,z=e.document,j={},G=0,W=0,q=r(),X=r(),Y=r(),K=!1,Q=function(){return 0},Z="undefined"==typeof t?"undefined":(0,u.default)(t),J=1<<31,$=[],ee=$.pop,te=$.push,ne=$.push,re=$.slice,ie=$.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},oe="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ae="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",le=se.replace("w","w#"),ue="\\["+ae+"*("+se+")"+ae+"*(?:([*^$|!~]?=)"+ae+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+le+")|)|)"+ae+"*\\]",ce=":("+se+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ue.replace(3,8)+")*)|.*)\\)|)",he=RegExp("^"+ae+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ae+"+$","g"),pe=RegExp("^"+ae+"*,"+ae+"*"),fe=RegExp("^"+ae+"*([>+~]|"+ae+")"+ae+"*"),me=RegExp(ae+"*[+~]"),ve=RegExp("="+ae+"*([^\\]'\"]*)"+ae+"*\\]","g"),ge=RegExp(ce),Ee=RegExp("^"+le+"$"),ye={ID:RegExp("^#("+se+")"),CLASS:RegExp("^\\.("+se+")"),TAG:RegExp("^("+se.replace("w","w*")+")"),ATTR:RegExp("^"+ue),PSEUDO:RegExp("^"+ce),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ae+"*(even|odd|(([+-]|)(\\d*)n|)"+ae+"*(?:([+-]|)"+ae+"*(\\d+)|))"+ae+"*\\)|)","i"),boolean:RegExp("^(?:"+oe+")$","i"),needsContext:RegExp("^"+ae+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ae+"*((?:-\\d)?\\d*)"+ae+"*\\)|)(?=[^-]|$)","i")},xe=/^[^{]+\{\s*\[native \w/,Te=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/^(?:input|select|textarea|button)$/i,we=/^h\d$/i,_e=/'|\\/g,Re=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,Se=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{ne.apply($=re.call(z.childNodes),z.childNodes),$[z.childNodes.length].nodeType}catch(e){ne={apply:$.length?function(e,t){te.apply(e,re.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}H=a.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},k=a.setDocument=function(e){var r=e?e.ownerDocument||e:z;return r!==D&&9===r.nodeType&&r.documentElement?(D=r,F=r.documentElement,O=!H(r),j.getElementsByTagName=o(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),j.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),j.getElementsByClassName=o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),j.sortDetached=o(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),j.getById=o(function(e){return F.appendChild(e).id=V,!r.getElementsByName||!r.getElementsByName(V).length}),j.getById?(M.find.ID=function(e,t){if((0,u.default)(t.getElementById)!==Z&&O){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},M.filter.ID=function(e){var t=e.replace(Re,Se);return function(e){return e.getAttribute("id")===t}}):(M.find.ID=function(e,n){if((0,u.default)(n.getElementById)!==Z&&O){var r=n.getElementById(e);return r?r.id===e||(0,u.default)(r.getAttributeNode)!==Z&&r.getAttributeNode("id").value===e?[r]:t:[]}},M.filter.ID=function(e){var t=e.replace(Re,Se);return function(e){var n=(0,u.default)(e.getAttributeNode)!==Z&&e.getAttributeNode("id");return n&&n.value===t}}),M.find.TAG=j.getElementsByTagName?function(e,n){return(0,u.default)(n.getElementsByTagName)!==Z?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},M.find.CLASS=j.getElementsByClassName&&function(e,n){return(0,u.default)(n.getElementsByClassName)!==Z&&O?n.getElementsByClassName(e):t},N=[],B=[],(j.qsa=n(r.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||B.push("\\["+ae+"*(?:value|"+oe+")"),e.querySelectorAll(":checked").length||B.push(":checked")}),o(function(e){var t=D.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&B.push("[*^$]="+ae+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||B.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),B.push(",.*:")})),(j.matchesSelector=n(I=F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&o(function(e){j.disconnectedMatch=I.call(e,"div"),I.call(e,"[s!='']:x"),N.push("!=",ce)}),B=B.length&&RegExp(B.join("|")),N=N.length&&RegExp(N.join("|")),U=n(F.contains)||F.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Q=F.compareDocumentPosition?function(e,t){if(e===t)return K=!0,0;var n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return n?1&n||!j.sortDetached&&t.compareDocumentPosition(e)===n?e===r||U(z,e)?-1:t===r||U(z,t)?1:L?ie.call(L,e)-ie.call(L,t):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,i=0,o=e.parentNode,a=t.parentNode,l=[e],u=[t];if(e===t)return K=!0,0;if(!o||!a)return e===r?-1:t===r?1:o?-1:a?1:L?ie.call(L,e)-ie.call(L,t):0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;l[i]===u[i];)i++;return i?s(l[i],u[i]):l[i]===z?-1:u[i]===z?1:0},D):D},a.matches=function(e,t){return a(e,null,null,t)},a.matchesSelector=function(e,t){if((e.ownerDocument||e)!==D&&k(e),t=t.replace(ve,"='$1']"),!(!j.matchesSelector||!O||N&&N.test(t)||B&&B.test(t)))try{var n=I.call(e,t);if(n||j.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return a(t,D,null,[e]).length>0},a.contains=function(e,t){return(e.ownerDocument||e)!==D&&k(e),U(e,t)},a.attr=function(e,n){(e.ownerDocument||e)!==D&&k(e);var r=M.attrHandle[n.toLowerCase()],i=r&&r(e,n,!O);return i===t?j.attributes||!O?e.getAttribute(n):(i=e.getAttributeNode(n))&&i.specified?i.value:null:i},a.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},a.uniqueSort=function(e){var t,n=[],r=0,i=0;if(K=!j.detectDuplicates,L=!j.sortStable&&e.slice(0),e.sort(Q),K){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},C=a.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=C(t);return n},M=a.selectors={cacheLength:50,createPseudo:i,match:ye,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Re,Se),e[3]=(e[4]||e[5]||"").replace(Re,Se),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||a.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&a.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return ye.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ge.test(n)&&(t=f(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Re,Se).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=RegExp("(^|"+ae+")"+e+"("+ae+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||(0,u.default)(e.getAttribute)!==Z&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=a.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,h,d,p,f,m=o!==a?"nextSibling":"previousSibling",v=t.parentNode,g=s&&t.nodeName.toLowerCase(),E=!l&&!s;if(v){if(o){for(;m;){for(h=t;h=h[m];)if(s?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?v.firstChild:v.lastChild],a&&E){for(c=v[V]||(v[V]={}),u=c[e]||[],p=u[0]===G&&u[1],d=u[0]===G&&u[2],h=p&&v.childNodes[p];h=++p&&h&&h[m]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===t){c[e]=[G,p,d];break}}else if(E&&(u=(t[V]||(t[V]={}))[e])&&u[0]===G)d=u[1];else for(;(h=++p&&h&&h[m]||(d=p=0)||f.pop())&&((s?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++d||(E&&((h[V]||(h[V]={}))[e]=[G,d]),h!==t)););return d-=i,d===r||0===d%r&&d/r>=0}}},PSEUDO:function(e,t){var n,r=M.pseudos[e]||M.setFilters[e.toLowerCase()]||a.error("unsupported pseudo: "+e);return r[V]?r(t):r.length>1?(n=[e,e,"",t],M.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)i=ie.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:i(function(e){var t=[],n=[],r=A(e.replace(he,"$1"));return r[V]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(e){return function(t){return a(e,t).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:i(function(e){return Ee.test(e||"")||a.error("unsupported lang: "+e),e=e.replace(Re,Se).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===F},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!M.pseudos.empty(e)},header:function(e){return we.test(e.nodeName)},input:function(e){return be.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},
first:p(function(){return[0]}),last:p(function(e,t){return[t-1]}),eq:p(function(e,t,n){return[0>n?n+t:n]}),even:p(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:p(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:p(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:p(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}};for(R in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})M.pseudos[R]=h(R);for(R in{submit:!0,reset:!0})M.pseudos[R]=d(R);A=a.compile=function(e,t){var n,r=[],i=[],o=Y[e+" "];if(!o){for(t||(t=f(e)),n=t.length;n--;)o=x(t[n]),o[V]?r.push(o):i.push(o);o=Y(e,T(i,r))}return o},M.pseudos.nth=M.pseudos.eq,_.prototype=M.filters=M.pseudos,M.setFilters=new _,j.sortStable=V.split("").sort(Q).join("")===V,k(),[0,0].sort(Q),j.detectDuplicates=K,o(function(e){if(e.innerHTML="<a href='#'></a>","#"!==e.firstChild.getAttribute("href"))for(var t="type|href|height|width".split("|"),n=t.length;n--;)M.attrHandle[t[n]]=c}),o(function(e){if(null!=e.getAttribute("disabled"))for(var t=oe.split("|"),n=t.length;n--;)M.attrHandle[t[n]]=l}),de.find=a,de.expr=a.selectors,de.expr[":"]=de.expr.pseudos,de.unique=a.uniqueSort,de.text=a.getText,de.isXMLDoc=a.isXML,de.contains=a.contains}(o);var Te={};de.Callbacks=function(e){e="string"==typeof e?Te[e]||c(e):de.extend({},e);var t,n,r,i,o,s,l=[],u=!e.once&&[],h=function a(c){for(t=e.memory&&c,n=!0,s=i||0,i=0,o=l.length,r=!0;l&&o>s;s++)if(l[s].apply(c[0],c[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,l&&(u?u.length&&a(u.shift()):t?l=[]:d.disable())},d={add:function(){if(l){var n=l.length;!function t(n){de.each(n,function(n,r){var i=de.type(r);"function"===i?e.unique&&d.has(r)||l.push(r):r&&r.length&&"string"!==i&&t(r)})}(arguments),r?o=l.length:t&&(i=n,h(t))}return this},remove:function(){return l&&de.each(arguments,function(e,t){for(var n;(n=de.inArray(t,l,n))>-1;)l.splice(n,1),r&&(o>=n&&o--,s>=n&&s--)}),this},has:function(e){return e?de.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=t=a,this},disabled:function(){return!l},lock:function(){return u=a,t||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!l||n&&!u||(r?u.push(t):h(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},de.extend({Deferred:function(e){var t=[["resolve","done",de.Callbacks("once memory"),"resolved"],["reject","fail",de.Callbacks("once memory"),"rejected"],["notify","progress",de.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return de.Deferred(function(n){de.each(t,function(t,o){var a=o[0],s=de.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&de.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?de.extend(e,r):r}},i={};return r.pipe=r.then,de.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=se.call(arguments),a=o.length,s=1!==a||e&&de.isFunction(e.promise)?a:0,l=1===s?e:de.Deferred(),u=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?se.call(arguments):i,r===t?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(a>1)for(t=Array(a),n=Array(a),r=Array(a);a>i;i++)o[i]&&de.isFunction(o[i].promise)?o[i].promise().done(u(i,r,o)).fail(l.reject).progress(u(i,n,t)):--s;return s||l.resolveWith(r,o),l.promise()}}),de.support=function(e){var t=J.createElement("input"),n=J.createDocumentFragment(),r=J.createElement("div"),i=J.createElement("select"),a=i.appendChild(J.createElement("option"));return t.type?(t.type="checkbox",e.checkOn=""!==t.value,e.optSelected=a.selected,e.reliableMarginRight=!0,e.boxSizingReliable=!0,e.pixelPosition=!1,t.checked=!0,e.noCloneChecked=t.cloneNode(!0).checked,i.disabled=!0,e.optDisabled=!a.disabled,t=J.createElement("input"),t.value="t",t.type="radio",e.radioValue="t"===t.value,t.setAttribute("checked","t"),t.setAttribute("name","t"),n.appendChild(t),e.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,e.focusinBubbles="onfocusin"in o,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===r.style.backgroundClip,de(function(){var t,n,i="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",a=J.getElementsByTagName("body")[0];a&&(t=J.createElement("div"),t.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(t).appendChild(r),r.innerHTML="",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",de.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===r.offsetWidth}),o.getComputedStyle&&(e.pixelPosition="1%"!==(o.getComputedStyle(r,null)||{}).top,e.boxSizingReliable="4px"===(o.getComputedStyle(r,null)||{width:"4px"}).width,n=r.appendChild(J.createElement("div")),n.style.cssText=r.style.cssText=i,n.style.marginRight=n.style.width="0",r.style.width="1px",e.reliableMarginRight=!parseFloat((o.getComputedStyle(n,null)||{}).marginRight)),a.removeChild(t))}),e):e}({});var be,we,_e=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Re=/([A-Z])/g;h.uid=1,h.accepts=function(e){return!e.nodeType||(1===e.nodeType||9===e.nodeType)},h.prototype={key:function(e){if(!h.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=h.uid++;try{t[this.expando]={value:n},(0,s.default)(e,t)}catch(r){t[this.expando]=n,de.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(de.isEmptyObject(o))this.cache[i]=t;else for(r in t)o[r]=t[r]},get:function(e,t){var n=this.cache[this.key(e)];return t===a?n:n[t]},access:function(e,t,n){return t===a||t&&"string"==typeof t&&n===a?this.get(e,t):(this.set(e,t,n),n!==a?n:t)},remove:function(e,t){var n,r,i=this.key(e),o=this.cache[i];if(t===a)this.cache[i]={};else{de.isArray(t)?r=t.concat(t.map(de.camelCase)):t in o?r=[t]:(r=de.camelCase(t),r=r in o?[r]:r.match(fe)||[]),n=r.length;for(;n--;)delete o[r[n]]}},hasData:function(e){return!de.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){delete this.cache[this.key(e)]}},be=new h,we=new h,de.extend({acceptData:h.accepts,hasData:function(e){return be.hasData(e)||we.hasData(e)},data:function(e,t,n){return be.access(e,t,n)},removeData:function(e,t){be.remove(e,t)},_data:function(e,t,n){return we.access(e,t,n)},_removeData:function(e,t){we.remove(e,t)}}),de.fn.extend({data:function(e,t){var n,r,i=this[0],o=0,s=null;if(e===a){if(this.length&&(s=be.get(i),1===i.nodeType&&!we.get(i,"hasDataAttrs"))){for(n=i.attributes;n.length>o;o++)r=n[o].name,0===r.indexOf("data-")&&(r=de.camelCase(r.substring(5)),d(i,r,s[r]));we.set(i,"hasDataAttrs",!0)}return s}return"object"==("undefined"==typeof e?"undefined":(0,u.default)(e))?this.each(function(){be.set(this,e)}):de.access(this,function(t){var n,r=de.camelCase(e);if(i&&t===a){if(n=be.get(i,e),n!==a)return n;if(n=be.get(i,r),n!==a)return n;if(n=d(i,r,a),n!==a)return n}else this.each(function(){var n=be.get(this,r);be.set(this,r,t),-1!==e.indexOf("-")&&n!==a&&be.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){be.remove(this,e)})}}),de.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=we.get(e,t),n&&(!r||de.isArray(n)?r=we.access(e,t,de.makeArray(n)):r.push(n)),r||[]):a},dequeue:function(e,t){t=t||"fx";var n=de.queue(e,t),r=n.length,i=n.shift(),o=de._queueHooks(e,t),a=function(){de.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return we.get(e,n)||we.access(e,n,{empty:de.Callbacks("once memory").add(function(){we.remove(e,[t+"queue",n])})})}}),de.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),n>arguments.length?de.queue(this[0],e):t===a?this:this.each(function(){var n=de.queue(this,e,t);de._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&de.dequeue(this,e)})},dequeue:function(e){return this.each(function(){de.dequeue(this,e)})},delay:function(e,t){return e=de.fx?de.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=de.Deferred(),o=this,s=this.length,l=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=a),e=e||"fx";s--;)n=we.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(l));return l(),i.promise(t)}});var Se,Me,Ce=/[\t\r\n]/g,He=/\r/g,Ae=/^(?:input|select|textarea|button)$/i;de.fn.extend({attr:function(e,t){return de.access(this,de.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){de.removeAttr(this,e)})},prop:function(e,t){return de.access(this,de.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[de.propFix[e]||e]})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,l="string"==typeof e&&e;if(de.isFunction(e))return this.each(function(t){de(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(fe)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ce," "):" ")){for(o=0;i=t[o++];)0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=de.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,l=0===arguments.length||"string"==typeof e&&e;if(de.isFunction(e))return this.each(function(t){de(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(fe)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ce," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?de.trim(r):""}return this},toggleClass:function(e,t){var n="undefined"==typeof e?"undefined":(0,u.default)(e),r="boolean"==typeof t;return de.isFunction(e)?this.each(function(n){de(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var i,o=0,a=de(this),s=t,l=e.match(fe)||[];i=l[o++];)s=r?s:!a.hasClass(i),a[s?"addClass":"removeClass"](i);else(n===Q||"boolean"===n)&&(this.className&&we.set(this,"__className__",this.className),this.className=this.className||e===!1?"":we.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Ce," ").indexOf(t)>=0)return!0;return!1},val:function(e){var t,n,r,i=this[0];return arguments.length?(r=de.isFunction(e),this.each(function(n){var i,o=de(this);1===this.nodeType&&(i=r?e.call(this,n,o.val()):e,null==i?i="":"number"==typeof i?i+="":de.isArray(i)&&(i=de.map(i,function(e){return null==e?"":e+""})),t=de.valHooks[this.type]||de.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&t.set(this,i,"value")!==a||(this.value=i))})):i?(t=de.valHooks[i.type]||de.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==a?n:(n=i.value,"string"==typeof n?n.replace(He,""):null==n?"":n)):void 0}}),de.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||(de.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&de.nodeName(n.parentNode,"optgroup"))){if(t=de(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=de.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=de.inArray(de(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(0,u.default)(e.getAttribute)===Q?de.prop(e,t,n):(1===o&&de.isXMLDoc(e)||(t=t.toLowerCase(),r=de.attrHooks[t]||(de.expr.match.boolean.test(t)?Me:Se)),n===a?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=de.find.attr(e,t),null==i?a:i):null!==n?r&&"set"in r&&(i=r.set(e,n,t))!==a?i:(e.setAttribute(t,n+""),n):(de.removeAttr(e,t),a))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(fe);if(o&&1===e.nodeType)for(;n=o[i++];)r=de.propFix[n]||n,de.expr.match.boolean.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!de.support.radioValue&&"radio"===t&&de.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var r,i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!de.isXMLDoc(e),o&&(t=de.propFix[t]||t,i=de.propHooks[t]),n!==a?i&&"set"in i&&(r=i.set(e,n,t))!==a?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Ae.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Me={set:function(e,t,n){return t===!1?de.removeAttr(e,n):e.setAttribute(n,n),n}},de.each(de.expr.match.boolean.source.match(/\w+/g),function(e,t){var n=de.expr.attrHandle[t]||de.find.attr;de.expr.attrHandle[t]=function(e,t,r){var i=de.expr.attrHandle[t],o=r?a:(de.expr.attrHandle[t]=a)!=n(e,t,r)?t.toLowerCase():null;return de.expr.attrHandle[t]=i,o}}),de.support.optSelected||(de.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),de.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){de.propFix[this.toLowerCase()]=this}),de.each(["radio","checkbox"],function(){de.valHooks[this]={set:function(e,t){return de.isArray(t)?e.checked=de.inArray(de(e).val(),t)>=0:a}},de.support.checkOn||(de.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Pe=/^key/,Le=/^(?:mouse|contextmenu)|click/,ke=/^(?:focusinfocus|focusoutblur)$/,De=/^([^.]*)(?:\.(.+)|)$/;de.event={global:{},add:function(e,t,n,r,i){var o,s,l,c,h,d,p,f,m,v,g,E=we.get(e);if(E){for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=de.guid++),(c=E.events)||(c=E.events={}),(s=E.handle)||(s=E.handle=function(e){return("undefined"==typeof de?"undefined":(0,u.default)(de))===Q||e&&de.event.triggered===e.type?a:de.event.dispatch.apply(s.elem,arguments)},s.elem=e),t=(t||"").match(fe)||[""],h=t.length;h--;)l=De.exec(t[h])||[],m=g=l[1],v=(l[2]||"").split(".").sort(),m&&(p=de.event.special[m]||{},m=(i?p.delegateType:p.bindType)||m,p=de.event.special[m]||{},d=de.extend({type:m,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&de.expr.match.needsContext.test(i),namespace:v.join(".")},o),(f=c[m])||(f=c[m]=[],f.delegateCount=0,p.setup&&p.setup.call(e,r,v,s)!==!1||e.addEventListener&&e.addEventListener(m,s,!1)),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,d):f.push(d),de.event.global[m]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,h,d,p,f,m,v=we.hasData(e)&&we.get(e);if(v&&(l=v.events)){for(t=(t||"").match(fe)||[""],u=t.length;u--;)if(s=De.exec(t[u])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p){for(h=de.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,d=l[p]||[],s=s[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));a&&!d.length&&(h.teardown&&h.teardown.call(e,f,v.handle)!==!1||de.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)de.event.remove(e,p+t[u],n,r,!0);de.isEmptyObject(l)&&(delete v.handle,we.remove(e,"events"))}},trigger:function(e,t,n,r){var i,s,l,c,h,d,p,f=[n||J],m=ce.call(e,"type")?e.type:e,v=ce.call(e,"namespace")?e.namespace.split("."):[];if(s=l=n=n||J,3!==n.nodeType&&8!==n.nodeType&&!ke.test(m+de.event.triggered)&&(m.indexOf(".")>=0&&(v=m.split("."),m=v.shift(),v.sort()),h=0>m.indexOf(":")&&"on"+m,e=e[de.expando]?e:new de.Event(m,"object"==("undefined"==typeof e?"undefined":(0,u.default)(e))&&e),e.isTrigger=r?2:3,e.namespace=v.join("."),e.namespace_re=e.namespace?RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=a,e.target||(e.target=n),t=null==t?[e]:de.makeArray(t,[e]),p=de.event.special[m]||{},r||!p.trigger||p.trigger.apply(n,t)!==!1)){if(!r&&!p.noBubble&&!de.isWindow(n)){for(c=p.delegateType||m,ke.test(c+m)||(s=s.parentNode);s;s=s.parentNode)f.push(s),l=s;l===(n.ownerDocument||J)&&f.push(l.defaultView||l.parentWindow||o)}for(i=0;(s=f[i++])&&!e.isPropagationStopped();)e.type=i>1?c:p.bindType||m,d=(we.get(s,"events")||{})[e.type]&&we.get(s,"handle"),d&&d.apply(s,t),d=h&&s[h],d&&de.acceptData(s)&&d.apply&&d.apply(s,t)===!1&&e.preventDefault();return e.type=m,r||e.isDefaultPrevented()||p._default&&p._default.apply(f.pop(),t)!==!1||!de.acceptData(n)||h&&de.isFunction(n[m])&&!de.isWindow(n)&&(l=n[h],l&&(n[h]=null),de.event.triggered=m,n[m](),de.event.triggered=a,l&&(n[h]=l)),e.result}},dispatch:function(e){e=de.event.fix(e);var t,n,r,i,o,s=[],l=se.call(arguments),u=(we.get(this,"events")||{})[e.type]||[],c=de.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=de.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,r=((de.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l),r!==a&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;l>n;n++)o=t[n],i=o.selector+" ",r[i]===a&&(r[i]=o.needsContext?de(i,this).index(u)>=0:de.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return t.length>l&&s.push({elem:this,handlers:t.slice(l)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||o===a||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[de.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Le.test(i)?this.mouseHooks:Pe.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new de.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return 3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):a},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):a},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&de.nodeName(this,"input")?(this.click(),!1):a},_default:function(e){return de.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==a&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=de.extend(new de.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?de.event.trigger(i,null,t):de.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},de.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},de.Event=function(e,t){return this instanceof de.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?p:f):this.type=e,t&&de.extend(this,t),this.timeStamp=e&&e.timeStamp||de.now(),this[de.expando]=!0,a):new de.Event(e,t)},de.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=p,this.stopPropagation()}},de.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){de.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!de.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),de.support.focusinBubbles||de.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){de.event.simulate(t,e.target,de.event.fix(e),!0)};de.event.special[t]={setup:function(){0===n++&&J.addEventListener(e,r,!0)},teardown:function(){0===--n&&J.removeEventListener(e,r,!0)}}}),de.fn.extend({on:function(e,t,n,r,i){var o,s;if("object"==("undefined"==typeof e?"undefined":(0,u.default)(e))){"string"!=typeof t&&(n=n||t,t=a);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=a):null==r&&("string"==typeof t?(r=n,n=a):(r=n,n=t,t=a)),r===!1)r=f;else if(!r)return this;return 1===i&&(o=r,r=function(e){return de().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=de.guid++)),this.each(function(){de.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,de(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==("undefined"==typeof e?"undefined":(0,u.default)(e))){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=a),n===!1&&(n=f),this.each(function(){de.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){de.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?de.event.trigger(e,t,n,!0):a}});var Fe=/^.[^:#\[\.,]*$/,Oe=de.expr.match.needsContext,Be={children:!0,contents:!0,next:!0,prev:!0};de.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return t=this,this.pushStack(de(e).filter(function(){for(r=0;i>r;r++)if(de.contains(t[r],this))return!0}));for(n=[],r=0;i>r;r++)de.find(e,this[r],n);return n=this.pushStack(i>1?de.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t=de(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(de.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(g(this,e||[],!0))},filter:function(e){return this.pushStack(g(this,e||[],!1))},is:function(e){return!!e&&("string"==typeof e?Oe.test(e)?de(e,this.context).index(this[0])>=0:de.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=Oe.test(e)||"string"!=typeof e?de(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&de.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?de.unique(o):o)},index:function(e){return e?"string"==typeof e?le.call(de(e),this[0]):le.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?de(e,t):de.makeArray(e&&e.nodeType?[e]:e),r=de.merge(this.get(),n);return this.pushStack(de.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),de.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return de.dir(e,"parentNode")},parentsUntil:function(e,t,n){return de.dir(e,"parentNode",n)},next:function(e){return v(e,"nextSibling")},prev:function(e){return v(e,"previousSibling")},nextAll:function(e){return de.dir(e,"nextSibling")},prevAll:function(e){return de.dir(e,"previousSibling")},nextUntil:function(e,t,n){return de.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return de.dir(e,"previousSibling",n)},siblings:function(e){return de.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return de.sibling(e.firstChild)},contents:function(e){return de.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:de.merge([],e.childNodes)}},function(e,t){de.fn[e]=function(n,r){var i=de.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=de.filter(r,i)),this.length>1&&(Be[e]||de.unique(i),"p"===e[0]&&i.reverse()),this.pushStack(i)}}),de.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?de.find.matchesSelector(r,e)?[r]:[]:de.find.matches(e,de.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,t,n){for(var r=[],i=n!==a;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&de(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ie=/<([\w:]+)/,Ue=/<|&#?\w+;/,Ve=/<(?:script|style|link)/i,ze=/^(?:checkbox|radio)$/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,Ge=/^$|\/(?:java|ecma)script/i,We=/^true\/(.*)/,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xe.optgroup=Xe.option,Xe.tbody=Xe.tfoot=Xe.colgroup=Xe.caption=Xe.col=Xe.thead,Xe.th=Xe.td,de.fn.extend({text:function(e){return de.access(this,function(e){return e===a?de.text(this):this.empty().append((this[0]&&this[0].ownerDocument||J).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=E(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=E(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?de.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||de.cleanData(w(n)),n.parentNode&&(t&&de.contains(n.ownerDocument,n)&&T(w(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(de.cleanData(w(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return de.clone(this,e,t)})},html:function(e){return de.access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===a&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ve.test(e)&&!Xe[(Ie.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ne,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(de.cleanData(w(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=de.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(de(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=oe.apply([],e);var r,i,o,a,s,l,u=0,c=this.length,h=this,d=c-1,p=e[0],f=de.isFunction(p);if(f||!(1>=c||"string"!=typeof p||de.support.checkClone)&&je.test(p))return this.each(function(r){var i=h.eq(r);f&&(e[0]=p.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(r=de.buildFragment(e,this[0].ownerDocument,!1,!n&&this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(o=de.map(w(r,"script"),y),a=o.length;c>u;u++)s=r,u!==d&&(s=de.clone(s,!0,!0),a&&de.merge(o,w(s,"script"))),t.call(this[u],s,u);if(a)for(l=o[o.length-1].ownerDocument,de.map(o,x),u=0;a>u;u++)s=o[u],Ge.test(s.type||"")&&!we.access(s,"globalEval")&&de.contains(l,s)&&(s.src?de._evalUrl(s.src):de.globalEval(s.textContent.replace(qe,"")))}return this}}),de.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){de.fn[e]=function(e){for(var n,r=[],i=de(e),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),de(i[a])[t](n),ae.apply(r,n.get());return this.pushStack(r)}}),de.extend({clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=de.contains(e.ownerDocument,e);if(!(de.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||de.isXMLDoc(e)))for(a=w(s),o=w(e),r=0,i=o.length;i>r;r++)_(o[r],a[r]);if(t)if(n)for(o=o||w(e),a=a||w(s),r=0,i=o.length;i>r;r++)b(o[r],a[r]);else b(e,s);return a=w(s,"script"),a.length>0&&T(a,!l&&w(e,"script")),s},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,u,c=0,h=e.length,d=t.createDocumentFragment(),p=[];h>c;c++)if(i=e[c],i||0===i)if("object"===de.type(i))de.merge(p,i.nodeType?[i]:i);else if(Ue.test(i)){for(o=o||d.appendChild(t.createElement("div")),a=(Ie.exec(i)||["",""])[1].toLowerCase(),s=Xe[a]||Xe._default,o.innerHTML=s[1]+i.replace(Ne,"<$1></$2>")+s[2],u=s[0];u--;)o=o.firstChild;de.merge(p,o.childNodes),o=d.firstChild,o.textContent=""}else p.push(t.createTextNode(i));for(d.textContent="",c=0;i=p[c++];)if((!r||-1===de.inArray(i,r))&&(l=de.contains(i.ownerDocument,i),o=w(d.appendChild(i),"script"),l&&T(o),n))for(u=0;i=o[u++];)Ge.test(i.type||"")&&n.push(i);return d},cleanData:function(e){for(var t,n,r,i=e.length,o=0,a=de.event.special;i>o;o++){if(n=e[o],de.acceptData(n)&&(t=we.access(n)))for(r in t.events)a[r]?de.event.remove(n,r):de.removeEvent(n,r,t.handle);be.discard(n),we.discard(n)}},_evalUrl:function(e){return de.ajax({url:e,type:"GET",dataType:"text",async:!1,global:!1,success:de.globalEval})}}),de.fn.extend({wrapAll:function(e){var t;return de.isFunction(e)?this.each(function(t){de(this).wrapAll(e.call(this,t))}):(this[0]&&(t=de(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return de.isFunction(e)?this.each(function(t){de(this).wrapInner(e.call(this,t))}):this.each(function(){var t=de(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=de.isFunction(e);return this.each(function(n){de(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){de.nodeName(this,"body")||de(this).replaceWith(this.childNodes)}).end()}});var Ye,Ke,Qe=/^(none|table(?!-c[ea]).+)/,Ze=/^margin/,Je=RegExp("^("+pe+")(.*)$","i"),$e=RegExp("^("+pe+")(?!px)[a-z%]+$","i"),et=RegExp("^([+-])=("+pe+")","i"),tt={BODY:"block"},nt={position:"absolute",visibility:"hidden",display:"block"},rt={letterSpacing:0,fontWeight:400},it=["Top","Right","Bottom","Left"],ot=["Webkit","O","Moz","ms"];de.fn.extend({
css:function(e,t){return de.access(this,function(e,t,n){var r,i,o={},s=0;if(de.isArray(t)){for(r=M(e),i=t.length;i>s;s++)o[t[s]]=de.css(e,t[s],!1,r);return o}return n!==a?de.style(e,t,n):de.css(e,t)},e,t,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:S(this))?de(this).show():de(this).hide()})}}),de.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ye(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,l=de.camelCase(t),c=e.style;return t=de.cssProps[l]||(de.cssProps[l]=R(c,l)),s=de.cssHooks[t]||de.cssHooks[l],n===a?s&&"get"in s&&(i=s.get(e,!1,r))!==a?i:c[t]:(o="undefined"==typeof n?"undefined":(0,u.default)(n),"string"===o&&(i=et.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(de.css(e,t)),o="number"),null==n||"number"===o&&isNaN(n)||("number"!==o||de.cssNumber[l]||(n+="px"),de.support.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&(n=s.set(e,n,r))===a||(c[t]=n)),a)}},css:function(e,t,n,r){var i,o,s,l=de.camelCase(t);return t=de.cssProps[l]||(de.cssProps[l]=R(e.style,l)),s=de.cssHooks[t]||de.cssHooks[l],s&&"get"in s&&(i=s.get(e,!0,n)),i===a&&(i=Ye(e,t,r)),"normal"===i&&t in rt&&(i=rt[t]),""===n||n?(o=parseFloat(i),n===!0||de.isNumeric(o)?o||0:i):i}}),Ye=function(e,t,n){var r,i,o,s=n||M(e),l=s?s.getPropertyValue(t)||s[t]:a,u=e.style;return s&&(""!==l||de.contains(e.ownerDocument,e)||(l=de.style(e,t)),$e.test(l)&&Ze.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=s.width,u.width=r,u.minWidth=i,u.maxWidth=o)),l},de.each(["height","width"],function(e,t){de.cssHooks[t]={get:function(e,n,r){return n?0===e.offsetWidth&&Qe.test(de.css(e,"display"))?de.swap(e,nt,function(){return P(e,t,r)}):P(e,t,r):a},set:function(e,n,r){var i=r&&M(e);return H(e,n,r?A(e,t,r,de.support.boxSizing&&"border-box"===de.css(e,"boxSizing",!1,i),i):0)}}}),de(function(){de.support.reliableMarginRight||(de.cssHooks.marginRight={get:function(e,t){return t?de.swap(e,{display:"inline-block"},Ye,[e,"marginRight"]):a}}),!de.support.pixelPosition&&de.fn.position&&de.each(["top","left"],function(e,t){de.cssHooks[t]={get:function(e,n){return n?(n=Ye(e,t),$e.test(n)?de(e).position()[t]+"px":n):a}}})}),de.expr&&de.expr.filters&&(de.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight},de.expr.filters.visible=function(e){return!de.expr.filters.hidden(e)}),de.each({margin:"",padding:"",border:"Width"},function(e,t){de.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+it[r]+t]=o[r]||o[r-2]||o[0];return i}},Ze.test(e)||(de.cssHooks[e+t].set=H)});var at=/%20/g,st=/\[\]$/,lt=/\r?\n/g,ut=/^(?:submit|button|image|reset|file)$/i,ct=/^(?:input|select|textarea|keygen)/i;de.fn.extend({serialize:function(){return de.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=de.prop(this,"elements");return e?de.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!de(this).is(":disabled")&&ct.test(this.nodeName)&&!ut.test(e)&&(this.checked||!ze.test(e))}).map(function(e,t){var n=de(this).val();return null==n?null:de.isArray(n)?de.map(n,function(e){return{name:t.name,value:e.replace(lt,"\r\n")}}):{name:t.name,value:n.replace(lt,"\r\n")}}).get()}}),de.param=function(e,t){var n,r=[],i=function(e,t){t=de.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===a&&(t=de.ajaxSettings&&de.ajaxSettings.traditional),de.isArray(e)||e.jquery&&!de.isPlainObject(e))de.each(e,function(){i(this.name,this.value)});else for(n in e)D(n,e[n],t,i);return r.join("&").replace(at,"+")},de.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){de.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),de.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var ht,dt,pt=de.now(),ft=/\?/,mt=/#.*$/,vt=/([?&])_=[^&]*/,gt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Et=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,yt=/^(?:GET|HEAD)$/,xt=/^\/\//,Tt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,bt=de.fn.load,wt={},_t={},Rt="*/".concat("*");try{dt=Z.href}catch(e){dt=J.createElement("a"),dt.href="",dt=dt.href}ht=Tt.exec(dt.toLowerCase())||[],de.fn.load=function(e,t,n){if("string"!=typeof e&&bt)return bt.apply(this,arguments);var r,i,o,s=this,l=e.indexOf(" ");return l>=0&&(r=e.slice(l),e=e.slice(0,l)),de.isFunction(t)?(n=t,t=a):t&&"object"==("undefined"==typeof t?"undefined":(0,u.default)(t))&&(i="POST"),s.length>0&&de.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?de("<div>").append(de.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},de.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){de.fn[t]=function(e){return this.on(t,e)}}),de.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:dt,type:"GET",isLocal:Et.test(ht[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":de.parseJSON,"text xml":de.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?B(B(e,de.ajaxSettings),t):B(de.ajaxSettings,e)},ajaxPrefilter:F(wt),ajaxTransport:F(_t),ajax:function(e,t){function n(e,t,n,s){var u,c,d,y,x,b=t;2!==T&&(T=2,l&&clearTimeout(l),r=a,o=s||"",w.readyState=e>0?4:0,u=e>=200&&300>e||304===e,n&&(y=N(p,w,n)),y=I(p,y,w,u),u?(p.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(de.lastModified[i]=x),x=w.getResponseHeader("etag"),x&&(de.etag[i]=x)),204===e?b="nocontent":304===e?b="notmodified":(b=y.state,c=y.data,d=y.error,u=!d)):(d=b,(e||!b)&&(b="error",0>e&&(e=0))),w.status=e,w.statusText=(t||b)+"",u?v.resolveWith(f,[c,b,w]):v.rejectWith(f,[w,b,d]),w.statusCode(E),E=a,h&&m.trigger(u?"ajaxSuccess":"ajaxError",[w,p,u?c:d]),g.fireWith(f,[w,b]),h&&(m.trigger("ajaxComplete",[w,p]),--de.active||de.event.trigger("ajaxStop")))}"object"==("undefined"==typeof e?"undefined":(0,u.default)(e))&&(t=e,e=a),t=t||{};var r,i,o,s,l,c,h,d,p=de.ajaxSetup({},t),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?de(f):de.event,v=de.Deferred(),g=de.Callbacks("once memory"),E=p.statusCode||{},y={},x={},T=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===T){if(!s)for(s={};t=gt.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===T?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return T||(e=x[n]=x[n]||e,y[e]=t),this},overrideMimeType:function(e){return T||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>T)for(t in e)E[t]=[E[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return r&&r.abort(t),n(0,t),this}};if(v.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,p.url=((e||p.url||dt)+"").replace(mt,"").replace(xt,ht[1]+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=de.trim(p.dataType||"*").toLowerCase().match(fe)||[""],null==p.crossDomain&&(c=Tt.exec(p.url.toLowerCase()),p.crossDomain=!(!c||c[1]===ht[1]&&c[2]===ht[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(ht[3]||("http:"===ht[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=de.param(p.data,p.traditional)),O(wt,p,t,w),2===T)return w;h=p.global,h&&0===de.active++&&de.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!yt.test(p.type),i=p.url,p.hasContent||(p.data&&(i=p.url+=(ft.test(i)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=vt.test(i)?i.replace(vt,"$1_="+pt++):i+(ft.test(i)?"&":"?")+"_="+pt++)),p.ifModified&&(de.lastModified[i]&&w.setRequestHeader("If-Modified-Since",de.lastModified[i]),de.etag[i]&&w.setRequestHeader("If-None-Match",de.etag[i])),(p.data&&p.hasContent&&p.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Rt+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)w.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(p.beforeSend.call(f,w,p)===!1||2===T))return w.abort();b="abort";for(d in{success:1,error:1,complete:1})w[d](p[d]);if(r=O(_t,p,t,w)){w.readyState=1,h&&m.trigger("ajaxSend",[w,p]),p.async&&p.timeout>0&&(l=setTimeout(function(){w.abort("timeout")},p.timeout));try{T=1,r.send(y,n)}catch(e){if(!(2>T))throw e;n(-1,e)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return de.get(e,t,n,"json")},getScript:function(e,t){return de.get(e,a,t,"script")}}),de.each(["get","post"],function(e,t){de[t]=function(e,n,r,i){return de.isFunction(n)&&(i=i||r,r=n,n=a),de.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),de.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return de.globalEval(e),e}}}),de.ajaxPrefilter("script",function(e){e.cache===a&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),de.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=de("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var St=[],Mt=/(=)\?(?=&|$)|\?\?/;de.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=St.pop()||de.expando+"_"+pt++;return this[e]=!0,e}}),de.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,s,l=e.jsonp!==!1&&(Mt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Mt.test(e.data)&&"data");return l||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=de.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,l?e[l]=e[l].replace(Mt,"$1"+r):e.jsonp!==!1&&(e.url+=(ft.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||de.error(r+" was not called"),s[0]},e.dataTypes[0]="json",i=o[r],o[r]=function(){s=arguments},n.always(function(){o[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,St.push(r)),s&&de.isFunction(i)&&i(s[0]),s=i=a}),"script"):a}),de.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Ct=de.ajaxSettings.xhr(),Ht={0:200,1223:204},At=0,Pt={};o.ActiveXObject&&de(o).on("unload",function(){for(var e in Pt)Pt[e]();Pt=a}),de.support.cors=!!Ct&&"withCredentials"in Ct,de.support.ajax=Ct=!!Ct,de.ajaxTransport(function(e){var t;return de.support.cors||Ct&&!e.crossDomain?{send:function(n,r){var i,o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Pt[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status||404,s.statusText):r(Ht[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:a,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Pt[o=At++]=t("abort"),s.send(e.hasContent&&e.data||null)},abort:function(){t&&t()}}:a});var Lt,kt,Dt=/^(?:toggle|show|hide)$/,Ft=RegExp("^(?:([+-])=|)("+pe+")([a-z%]*)$","i"),Ot=/queueHooks$/,Bt=[G],Nt={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Ft.exec(t),a=i.cur(),s=+a||0,l=1,u=20;if(o){if(n=+o[2],r=o[3]||(de.cssNumber[e]?"":"px"),"px"!==r&&s){s=de.css(i.elem,e,!0)||n||1;do l=l||".5",s/=l,de.style(i.elem,e,s+r);while(l!==(l=i.cur()/a)&&1!==l&&--u)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};de.Animation=de.extend(z,{tweener:function(e,t){de.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],Nt[n]=Nt[n]||[],Nt[n].unshift(t)},prefilter:function(e,t){t?Bt.unshift(e):Bt.push(e)}}),de.Tween=W,W.prototype={constructor:W,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(de.cssNumber[n]?"":"px")},cur:function(){var e=W.propHooks[this.prop];return e&&e.get?e.get(this):W.propHooks._default.get(this)},run:function(e){var t,n=W.propHooks[this.prop];return this.pos=t=this.options.duration?de.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=de.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){de.fx.step[e.prop]?de.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[de.cssProps[e.prop]]||de.cssHooks[e.prop])?de.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},de.each(["toggle","show","hide"],function(e,t){var n=de.fn[t];de.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(q(t,!0),e,r,i)}}),de.fn.extend({fadeTo:function(e,t,n,r){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=de.isEmptyObject(e),o=de.speed(t,n,r),a=function t(){var n=z(this,de.extend({},e),o);t.finish=function(){n.stop(!0)},(i||we.get(this,"finish"))&&n.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=a),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=de.timers,a=we.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&Ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&de.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=we.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=de.timers,a=r?r.length:0;for(n.finish=!0,de.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),de.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){de.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),de.speed=function(e,t,n){var r=e&&"object"==("undefined"==typeof e?"undefined":(0,u.default)(e))?de.extend({},e):{complete:n||!n&&t||de.isFunction(e)&&e,duration:e,easing:n&&t||t&&!de.isFunction(t)&&t};return r.duration=de.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in de.fx.speeds?de.fx.speeds[r.duration]:de.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){de.isFunction(r.old)&&r.old.call(this),r.queue&&de.dequeue(this,r.queue)},r},de.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},de.timers=[],de.fx=W.prototype.init,de.fx.tick=function(){var e,t=de.timers,n=0;for(Lt=de.now();t.length>n;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||de.fx.stop(),Lt=a},de.fx.timer=function(e){e()&&de.timers.push(e)&&de.fx.start()},de.fx.interval=13,de.fx.start=function(){kt||(kt=setInterval(de.fx.tick,de.fx.interval))},de.fx.stop=function(){clearInterval(kt),kt=null},de.fx.speeds={slow:600,fast:200,_default:400},de.fx.step={},de.expr&&de.expr.filters&&(de.expr.filters.animated=function(e){return de.grep(de.timers,function(t){return e===t.elem}).length}),de.fn.offset=function(e){if(arguments.length)return e===a?this:this.each(function(t){de.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(t=o.documentElement,de.contains(t,r)?((0,u.default)(r.getBoundingClientRect)!==Q&&(i=r.getBoundingClientRect()),n=X(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i):void 0},de.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,u,c=de.css(e,"position"),h=de(e),d={};"static"===c&&(e.style.position="relative"),s=h.offset(),o=de.css(e,"top"),l=de.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(r=h.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),de.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):h.css(d)}},de.fn.extend({position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===de.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),de.nodeName(e[0],"html")||(r=e.offset()),r.top+=de.css(e[0],"borderTopWidth",!0),r.left+=de.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-de.css(n,"marginTop",!0),left:t.left-r.left-de.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||$;e&&!de.nodeName(e,"html")&&"static"===de.css(e,"position");)e=e.offsetParent;return e||$})}}),de.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;de.fn[e]=function(r){return de.access(this,function(e,r,i){var s=X(e);return i===a?s?s[t]:e[r]:(s?s.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i,a)},e,r,arguments.length,null)}}),de.each({Height:"height",Width:"width"},function(e,t){de.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){de.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return de.access(this,function(t,n,r){var i;return de.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===a?de.css(t,n,s):de.style(t,n,r,s)},t,o?r:a,o,null)}})}),de.fn.size=function(){return this.length},de.fn.andSelf=de.fn.addBack,"object"==(0,u.default)(e)&&"object"==(0,u.default)(e.exports)?e.exports=de:n(608)&&(r=[],i=function(){return de}.apply(t,r),!(i!==a&&(e.exports=i))),"object"==("undefined"==typeof o?"undefined":(0,u.default)(o))&&"object"==(0,u.default)(o.document)&&(o.jQuery=o.$=de)}(window)}).call(t,n(604)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){e.exports={default:n(606),__esModule:!0}},function(e,t,n){n(607);var r=n(47).Object;e.exports=function(e,t){return r.defineProperties(e,t)}},function(e,t,n){var r=n(46);r(r.S+r.F*!n(40),"Object",{defineProperties:n(65)})},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}var i,o,a=n(52),s=r(a),l=n(123),u=r(l),c=n(610),h=r(c),d=n(605),p=r(d),f=n(114),m=r(f),v=n(612),g=r(v),E=n(616),y=r(E);THREE={REVISION:"73"},i=THREE,o="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==o&&(e.exports=o)),void 0!==self.requestAnimationFrame&&void 0!==self.cancelAnimationFrame||function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!self.requestAnimationFrame;++n)self.requestAnimationFrame=self[t[n]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[t[n]+"CancelAnimationFrame"]||self[t[n]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(t){var n=Date.now(),r=Math.max(0,16-(n-e)),i=self.setTimeout(function(){t(n+r)},r);return e=n+r,i}),void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(e){self.clearTimeout(e)})}(),void 0===self.performance&&(self.performance={}),void 0===self.performance.now&&function(){var e=Date.now();self.performance.now=function(){return Date.now()-e}}(),void 0===y.default&&(Number.EPSILON=Math.pow(2,-52)),void 0===g.default&&(Math.sign=function(e){return 0>e?-1:0<e?1:+e}),void 0===Function.prototype.name&&void 0!==m.default&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.MinEquation=103,THREE.MaxEquation=104,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.NeverDepth=0,THREE.AlwaysDepth=1,THREE.LessDepth=2,THREE.LessEqualDepth=3,THREE.EqualDepth=4,THREE.GreaterEqualDepth=5,THREE.GreaterDepth=6,THREE.NotEqualDepth=7,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=300,THREE.CubeReflectionMapping=301,THREE.CubeRefractionMapping=302,THREE.EquirectangularReflectionMapping=303,THREE.EquirectangularRefractionMapping=304,THREE.SphericalReflectionMapping=305,THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.HalfFloatType=1025,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGBEFormat=THREE.RGBAFormat,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.RGB_PVRTC_4BPPV1_Format=2100,THREE.RGB_PVRTC_2BPPV1_Format=2101,THREE.RGBA_PVRTC_4BPPV1_Format=2102,THREE.RGBA_PVRTC_2BPPV1_Format=2103,THREE.LoopOnce=2200,THREE.LoopRepeat=2201,THREE.LoopPingPong=2202,THREE.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},THREE.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},THREE.Color=function(e){return 3===arguments.length?this.fromArray(arguments):this.set(e)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(e){return e instanceof THREE.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return 0>n&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:.5>n?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){return t=THREE.Math.euclideanModulo(t,1),n=THREE.Math.clamp(n,0,1),r=THREE.Math.clamp(r,0,1),0===n?this.r=this.g=this.b=r:(n=.5>=r?r*(1+n):r+n-r*n,r=2*r-n,this.r=e(r,n,t+1/3),this.g=e(r,n,t),this.b=e(r,n,t-1/3)),this}}(),setStyle:function(e){function t(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r=n[2];switch(n[1]){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){var r=parseFloat(n[1])/360,i=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(r,i,o)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){if(n=n[1],r=n.length,3===r)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,this;if(6===r)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,this}return e&&0<e.length&&(n=THREE.ColorKeywords[e],void 0!==n?this.setHex(n):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=0<t?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e=e||{h:0,s:0,l:0};var t,n=this.r,r=this.g,i=this.b,o=Math.max(n,r,i),a=Math.min(n,r,i),s=(a+o)/2;if(a===o)a=t=0;else{var l=o-a,a=.5>=s?l/(o+a):l/(2-o-a);switch(o){case n:t=(r-i)/l+(r<i?6:0);break;case r:t=(i-n)/l+2;break;case i:t=(n-r)/l+4}t/=6}return e.h=t,e.s=a,e.l=s,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,r){
return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1==e instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),r=Math.cos(e._y/2),i=Math.cos(e._z/2),o=Math.sin(e._x/2),a=Math.sin(e._y/2),s=Math.sin(e._z/2),l=e.order;return"XYZ"===l?(this._x=o*r*i+n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i-o*a*s):"YXZ"===l?(this._x=o*r*i+n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i+o*a*s):"ZXY"===l?(this._x=o*r*i-n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i-o*a*s):"ZYX"===l?(this._x=o*r*i-n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i+o*a*s):"YZX"===l?(this._x=o*r*i+n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i-o*a*s):"XZY"===l&&(this._x=o*r*i-n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i+o*a*s),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0];e=t[4];var r=t[8],i=t[1],o=t[5],a=t[9],s=t[2],l=t[6],t=t[10],u=n+o+t;return 0<u?(n=.5/Math.sqrt(u+1),this._w=.25/n,this._x=(l-a)*n,this._y=(r-s)*n,this._z=(i-e)*n):n>o&&n>t?(n=2*Math.sqrt(1+n-o-t),this._w=(l-a)/n,this._x=.25*n,this._y=(e+i)/n,this._z=(r+s)/n):o>t?(n=2*Math.sqrt(1+o-n-t),this._w=(r-s)/n,this._x=(e+i)/n,this._y=.25*n,this._z=(a+l)/n):(n=2*Math.sqrt(1+t-n-o),this._w=(i-e)/n,this._x=(r+s)/n,this._y=(a+l)/n,this._z=.25*n),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t;return function(n,r){return void 0===e&&(e=new THREE.Vector3),t=n.dot(r)+1,1e-6>t?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,r),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+o*a+r*l-i*s,this._y=r*u+o*s+i*a-n*l,this._z=i*u+o*l+n*s-r*a,this._w=o*u-n*a-r*s-i*l,this.onChangeCallback(),this},multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(0>a?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),1<=a)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.acos(a),l=Math.sqrt(1-a*a);return.001>Math.abs(l)?(this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this):(a=Math.sin((1-t)*s)/l,s=Math.sin(t*s)/l,this._w=o*a+this._w*s,this._x=n*a+this._x*s,this._y=r*a+this._y*s,this._z=i*a+this._z*s,this.onChangeCallback(),this)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},THREE.Quaternion.slerp=function(e,t,n,r){return n.copy(e).slerp(t,r)},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):this.y=this.x=0,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new THREE.Vector2,t=new THREE.Vector2),e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return e=this.y-e.y,t*t+e*e},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}},THREE.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):this.z=this.y=this.x=0,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return!1==t instanceof THREE.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromEuler(t)),this}}(),applyAxisAngle:function(){var e;return function(t,n){return void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,n)),this}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[3]*n+e[6]*r,this.y=e[1]*t+e[4]*n+e[7]*r,this.z=e[2]*t+e[5]*n+e[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r+e[12],this.y=e[1]*t+e[5]*n+e[9]*r+e[13],this.z=e[2]*t+e[6]*n+e[10]*r+e[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z;e=e.elements;var i=1/(e[3]*t+e[7]*n+e[11]*r+e[15]);return this.x=(e[0]*t+e[4]*n+e[8]*r+e[12])*i,this.y=(e[1]*t+e[5]*n+e[9]*r+e[13])*i,this.z=(e[2]*t+e[6]*n+e[10]*r+e[14])*i,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z;e=e.w;var s=e*t+o*r-a*n,l=e*n+a*t-i*r,u=e*r+i*n-o*t,t=-i*t-o*n-a*r;return this.x=s*e+t*-i+l*-a-u*-o,this.y=l*e+t*-o+u*-i-s*-a,this.z=u*e+t*-a+s*-o-l*-i,this},project:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyProjection(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r,this.y=e[1]*t+e[5]*n+e[9]*r,this.z=e[2]*t+e[6]*n+e[10]*r,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new THREE.Vector3,t=new THREE.Vector3),e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e),this},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(){var e,t;return function(n){return void 0===e&&(e=new THREE.Vector3),e.copy(n).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){return e=this.dot(e)/(this.length()*e.length()),Math.acos(THREE.Math.clamp(e,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return e=this.z-e.z,t*t+n*n+e*e},setEulerFromRotationMatrix:function(e,t){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(e,t){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),n=this.set(e.elements[4],e.elements[5],e.elements[6]).length();return e=this.set(e.elements[8],e.elements[9],e.elements[10]).length(),this.x=t,this.y=n,this.z=e,this},setFromMatrixColumn:function(e,t){var n=4*e,r=t.elements;return this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this}},THREE.Vector4=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):this.w=this.z=this.y=this.x=0,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r+e[12]*i,this.y=e[1]*t+e[5]*n+e[9]*r+e[13]*i,this.z=e[2]*t+e[6]*n+e[10]*r+e[14]*i,this.w=e[3]*t+e[7]*n+e[11]*r+e[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.z=this.y=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r;e=e.elements;var i=e[0];r=e[4];var o=e[8],a=e[1],s=e[5],l=e[9];n=e[2],t=e[6];var u=e[10];return.01>Math.abs(r-a)&&.01>Math.abs(o-n)&&.01>Math.abs(l-t)?.1>Math.abs(r+a)&&.1>Math.abs(o+n)&&.1>Math.abs(l+t)&&.1>Math.abs(i+s+u-3)?(this.set(1,0,0,0),this):(e=Math.PI,i=(i+1)/2,s=(s+1)/2,u=(u+1)/2,r=(r+a)/4,o=(o+n)/4,l=(l+t)/4,i>s&&i>u?.01>i?(t=0,r=n=.707106781):(t=Math.sqrt(i),n=r/t,r=o/t):s>u?.01>s?(t=.707106781,n=0,r=.707106781):(n=Math.sqrt(s),t=r/n,r=l/n):.01>u?(n=t=.707106781,r=0):(r=Math.sqrt(u),t=o/r,n=l/r),this.set(t,n,r,e),this):(e=Math.sqrt((t-l)*(t-l)+(o-n)*(o-n)+(a-r)*(a-r)),.001>Math.abs(e)&&(e=1),this.x=(t-l)/e,this.y=(o-n)/e,this.z=(a-r)/e,this.w=Math.acos((i+s+u-1)/2),this)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new THREE.Vector4,t=new THREE.Vector4),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this.w=e.array[t+3],this}},THREE.Euler=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=THREE.Math.clamp,i=e.elements;e=i[0];var o=i[4],a=i[8],s=i[1],l=i[5],u=i[9],c=i[2],h=i[6],i=i[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(r(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(-u,i),this._z=Math.atan2(-o,e)):(this._x=Math.atan2(h,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(u,-1,1)),.99999>Math.abs(u)?(this._y=Math.atan2(a,i),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,e),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(h,-1,1)),.99999>Math.abs(h)?(this._y=Math.atan2(-c,i),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,e))):"ZYX"===t?(this._y=Math.asin(-r(c,-1,1)),.99999>Math.abs(c)?(this._x=Math.atan2(h,i),this._z=Math.atan2(s,e)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(r(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,e)):(this._x=0,this._y=Math.atan2(a,i))):"XZY"===t?(this._z=Math.asin(-r(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,e)):(this._x=Math.atan2(-u,i),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,n,r){return void 0===e&&(e=new THREE.Matrix4),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r),this}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new THREE.Quaternion;return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},THREE.Line3=function(e,t){this.start=void 0!==e?e:new THREE.Vector3,this.end=void 0!==t?t:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){return(e||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new THREE.Vector3;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),i=t.dot(e)/i;return r&&(i=THREE.Math.clamp(i,0,1)),i}}(),closestPointToPoint:function(e,t,n){return e=this.closestPointToPointParameter(e,t),n=n||new THREE.Vector3,this.delta(n).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},THREE.Box2=function(e,t){this.min=void 0!==e?e:new THREE.Vector2(1/0,1/0),this.max=void 0!==t?t:new THREE.Vector2(-(1/0),-(1/0))},THREE.Box2.prototype={constructor:THREE.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector2;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){return(e||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new THREE.Vector2).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new THREE.Vector2).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector2;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},THREE.Box3=function(e,t){this.min=void 0!==e?e:new THREE.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new THREE.Vector3(-(1/0),-(1/0),-(1/0))},THREE.Box3.prototype={constructor:THREE.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector3;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(){var e=new THREE.Vector3;return function(t){var n=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var r=t.geometry;if(void 0!==r)if(r instanceof THREE.Geometry)for(var i=r.vertices,r=0,o=i.length;r<o;r++)e.copy(i[r]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e);else if(r instanceof THREE.BufferGeometry&&void 0!==r.attributes.position)for(i=r.attributes.position.array,r=0,o=i.length;r<o;r+=3)e.set(i[r],i[r+1],i[r+2]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){return(e||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new THREE.Vector3).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},clampPoint:function(e,t){return(t||new THREE.Vector3).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new THREE.Vector3;return function(t){return t=t||new THREE.Sphere,t.center=this.center(),t.radius=.5*this.size(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];
return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(e,t,n,r,i,o,a,s,l){var u=this.elements;return u[0]=e,u[3]=t,u[6]=n,u[1]=r,u[4]=i,u[7]=o,u[2]=a,u[5]=s,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){return e=e.elements,this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e;return function(t,n,r){void 0===e&&(e=new THREE.Vector3),void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0;i<r;i+=3,n+=3)e.fromArray(t,n),e.applyMatrix3(this),e.toArray(t,n);return t}}(),applyToBuffer:function(){var e;return function(t,n,r){void 0===e&&(e=new THREE.Vector3),void 0===n&&(n=0),void 0===r&&(r=t.length/t.itemSize);for(var i=0;i<r;i++,n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],e=e[8];return t*o*e-t*a*l-n*i*e+n*a*s+r*i*l-r*o*s},getInverse:function(e,t){var n=e.elements,r=this.elements;if(r[0]=n[10]*n[5]-n[6]*n[9],r[1]=-n[10]*n[1]+n[2]*n[9],r[2]=n[6]*n[1]-n[2]*n[5],r[3]=-n[10]*n[4]+n[6]*n[8],r[4]=n[10]*n[0]-n[2]*n[8],r[5]=-n[6]*n[0]+n[2]*n[4],r[6]=n[9]*n[4]-n[5]*n[8],r[7]=-n[9]*n[0]+n[1]*n[8],r[8]=n[5]*n[0]-n[1]*n[4],n=n[0]*r[0]+n[1]*r[3]+n[2]*r[6],0===n){if(t)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/n),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}},THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,n,r,i,o,a,s,l,u,c,h,d,p,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=h,v[3]=d,v[7]=p,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements;return e=e.elements,t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(e,t,n){var r=this.elements;return e.set(r[0],r[1],r[2]),t.set(r[4],r[5],r[6]),n.set(r[8],r[9],r[10]),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(t){void 0===e&&(e=new THREE.Vector3);var n=this.elements;t=t.elements;var r=1/e.set(t[0],t[1],t[2]).length(),i=1/e.set(t[4],t[5],t[6]).length(),o=1/e.set(t[8],t[9],t[10]).length();return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[4]=t[4]*i,n[5]=t[5]*i,n[6]=t[6]*i,n[8]=t[8]*o,n[9]=t[9]*o,n[10]=t[10]*o,this}}(),makeRotationFromEuler:function(e){!1==e instanceof THREE.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),n=Math.sin(n),a=Math.cos(r),r=Math.sin(r),s=Math.cos(i),i=Math.sin(i);if("XYZ"===e.order){e=o*s;var l=o*i,u=n*s,c=n*i;t[0]=a*s,t[4]=-a*i,t[8]=r,t[1]=l+u*r,t[5]=e-c*r,t[9]=-n*a,t[2]=c-e*r,t[6]=u+l*r,t[10]=o*a}else"YXZ"===e.order?(e=a*s,l=a*i,u=r*s,c=r*i,t[0]=e+c*n,t[4]=u*n-l,t[8]=o*r,t[1]=o*i,t[5]=o*s,t[9]=-n,t[2]=l*n-u,t[6]=c+e*n,t[10]=o*a):"ZXY"===e.order?(e=a*s,l=a*i,u=r*s,c=r*i,t[0]=e-c*n,t[4]=-o*i,t[8]=u+l*n,t[1]=l+u*n,t[5]=o*s,t[9]=c-e*n,t[2]=-o*r,t[6]=n,t[10]=o*a):"ZYX"===e.order?(e=o*s,l=o*i,u=n*s,c=n*i,t[0]=a*s,t[4]=u*r-l,t[8]=e*r+c,t[1]=a*i,t[5]=c*r+e,t[9]=l*r-u,t[2]=-r,t[6]=n*a,t[10]=o*a):"YZX"===e.order?(e=o*a,l=o*r,u=n*a,c=n*r,t[0]=a*s,t[4]=c-e*i,t[8]=u*i+l,t[1]=i,t[5]=o*s,t[9]=-n*s,t[2]=-r*s,t[6]=l*i+u,t[10]=e-c*i):"XZY"===e.order&&(e=o*a,l=o*r,u=n*a,c=n*r,t[0]=a*s,t[4]=-i,t[8]=r*s,t[1]=e*i+c,t[5]=o*s,t[9]=l*i-u,t[2]=u*i-l,t[6]=n*s,t[10]=c*i+e);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,o=e.w,a=n+n,s=r+r,l=i+i;e=n*a;var u=n*s,n=n*l,c=r*s,r=r*l,i=i*l,a=o*a,s=o*s,o=o*l;return t[0]=1-(c+i),t[4]=u-o,t[8]=n+s,t[1]=u+o,t[5]=1-(e+i),t[9]=r-a,t[2]=n-s,t[6]=r+a,t[10]=1-(e+c),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e,t,n;return function(r,i,o){void 0===e&&(e=new THREE.Vector3),void 0===t&&(t=new THREE.Vector3),void 0===n&&(n=new THREE.Vector3);var a=this.elements;return n.subVectors(r,i).normalize(),0===n.lengthSq()&&(n.z=1),e.crossVectors(o,n).normalize(),0===e.lengthSq()&&(n.x+=1e-4,e.crossVectors(o,n).normalize()),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],E=n[7],y=n[11],n=n[15],x=r[0],T=r[4],b=r[8],w=r[12],_=r[1],R=r[5],S=r[9],M=r[13],C=r[2],H=r[6],A=r[10],P=r[14],L=r[3],k=r[7],D=r[11],r=r[15];return i[0]=o*x+a*_+s*C+l*L,i[4]=o*T+a*R+s*H+l*k,i[8]=o*b+a*S+s*A+l*D,i[12]=o*w+a*M+s*P+l*r,i[1]=u*x+c*_+h*C+d*L,i[5]=u*T+c*R+h*H+d*k,i[9]=u*b+c*S+h*A+d*D,i[13]=u*w+c*M+h*P+d*r,i[2]=p*x+f*_+m*C+v*L,i[6]=p*T+f*R+m*H+v*k,i[10]=p*b+f*S+m*A+v*D,i[14]=p*w+f*M+m*P+v*r,i[3]=g*x+E*_+y*C+n*L,i[7]=g*T+E*R+y*H+n*k,i[11]=g*b+E*S+y*A+n*D,i[15]=g*w+E*M+y*P+n*r,this},multiplyToArray:function(e,t,n){var r=this.elements;return this.multiplyMatrices(e,t),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e;return function(t,n,r){void 0===e&&(e=new THREE.Vector3),void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0;i<r;i+=3,n+=3)e.fromArray(t,n),e.applyMatrix4(this),e.toArray(t,n);return t}}(),applyToBuffer:function(){var e;return function(t,n,r){void 0===e&&(e=new THREE.Vector3),void 0===n&&(n=0),void 0===r&&(r=t.length/t.itemSize);for(var i=0;i<r;i++,n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(e.x,e.y,e.z);return t}}(),rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*s*c-r*l*c-i*a*h+n*l*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*o*h-r*o*d+r*l*u-i*s*u)+e[11]*(+t*l*c-t*a*d-i*o*c+n*o*d+i*a*u-n*l*u)+e[15]*(-r*a*u-t*s*c+t*a*h+r*o*c-n*o*h+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e},getPosition:function(){var e;return function(){void 0===e&&(e=new THREE.Vector3),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[4],a=r[8],s=r[12],l=r[1],u=r[5],c=r[9],h=r[13],d=r[2],p=r[6],f=r[10],m=r[14],v=r[3],g=r[7],E=r[11],r=r[15];if(n[0]=c*m*g-h*f*g+h*p*E-u*m*E-c*p*r+u*f*r,n[4]=s*f*g-a*m*g-s*p*E+o*m*E+a*p*r-o*f*r,n[8]=a*h*g-s*c*g+s*u*E-o*h*E-a*u*r+o*c*r,n[12]=s*c*p-a*h*p-s*u*f+o*h*f+a*u*m-o*c*m,n[1]=h*f*v-c*m*v-h*d*E+l*m*E+c*d*r-l*f*r,n[5]=a*m*v-s*f*v+s*d*E-i*m*E-a*d*r+i*f*r,n[9]=s*c*v-a*h*v-s*l*E+i*h*E+a*l*r-i*c*r,n[13]=a*h*d-s*c*d+s*l*f-i*h*f-a*l*m+i*c*m,n[2]=u*m*v-h*p*v+h*d*g-l*m*g-u*d*r+l*p*r,n[6]=s*p*v-o*m*v-s*d*g+i*m*g+o*d*r-i*p*r,n[10]=o*h*v-s*u*v+s*l*g-i*h*g-o*l*r+i*u*r,n[14]=s*u*d-o*h*d-s*l*p+i*h*p+o*l*m-i*u*m,n[3]=c*p*v-u*f*v-c*d*g+l*f*g+u*d*E-l*p*E,n[7]=o*f*v-a*p*v+a*d*g-i*f*g-o*d*E+i*p*E,n[11]=a*u*v-o*c*v-a*l*g+i*c*g+o*l*E-i*u*E,n[15]=o*c*d-a*u*d+a*l*p-i*c*p-o*l*f+i*u*f,n=i*n[0]+l*n[4]+d*n[8]+v*n[12],0===n){if(t)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/n),this},translate:function(e){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(e){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(e){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(e){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(e,t){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,n=e.x,r=e.y;return e=e.z,t[0]*=n,t[4]*=r,t[8]*=e,t[1]*=n,t[5]*=r,t[9]*=e,t[2]*=n,t[6]*=r,t[10]*=e,t[3]*=n,t[7]*=r,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,u=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,u*a+n,u*s-r*o,0,l*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e,t;return function(n,r,i){void 0===e&&(e=new THREE.Vector3),void 0===t&&(t=new THREE.Matrix4);var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length();0>this.determinant()&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.elements.set(this.elements),n=1/a;var o=1/s,u=1/l;return t.elements[0]*=n,t.elements[1]*=n,t.elements[2]*=n,t.elements[4]*=o,t.elements[5]*=o,t.elements[6]*=o,t.elements[8]*=u,t.elements[9]*=u,t.elements[10]*=u,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=l,this}}(),makeFrustum:function(e,t,n,r,i,o){var a=this.elements;return a[0]=2*i/(t-e),a[4]=0,a[8]=(t+e)/(t-e),a[12]=0,a[1]=0,a[5]=2*i/(r-n),a[9]=(r+n)/(r-n),a[13]=0,a[2]=0,a[6]=0,a[10]=-(o+i)/(o-i),a[14]=-2*o*i/(o-i),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,n,r){e=n*Math.tan(THREE.Math.degToRad(.5*e));var i=-e;return this.makeFrustum(i*t,e*t,i,e,n,r)},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=t-e,l=n-r,u=o-i;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-((t+e)/s),a[1]=0,a[5]=2/l,a[9]=0,a[13]=-((n+r)/l),a[2]=0,a[6]=0,a[10]=-2/u,a[14]=-((o+i)/u),a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){var t=this.elements;e=e.elements;for(var n=0;16>n;n++)if(t[n]!==e[n])return!1;return!0},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}},THREE.Ray=function(e,t){this.origin=void 0!==e?e:new THREE.Vector3,this.direction=void 0!==t?t:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new THREE.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new THREE.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new THREE.Vector3;n.subVectors(e,this.origin);var r=n.dot(this.direction);return 0>r?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new THREE.Vector3;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return 0>n?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(r,i,o,a){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s,l=.5*r.distanceTo(i),u=-this.direction.dot(t),c=n.dot(this.direction),h=-n.dot(t),d=n.lengthSq(),p=Math.abs(1-u*u);return 0<p?(r=u*h-c,i=u*c-h,s=l*p,0<=r?i>=-s?i<=s?(l=1/p,r*=l,i*=l,u=r*(r+u*i+2*c)+i*(u*r+i+2*h)+d):(i=l,r=Math.max(0,-(u*i+c)),u=-r*r+i*(i+2*h)+d):(i=-l,r=Math.max(0,-(u*i+c)),u=-r*r+i*(i+2*h)+d):i<=-s?(r=Math.max(0,-(-u*l+c)),i=0<r?-l:Math.min(Math.max(-l,-h),l),u=-r*r+i*(i+2*h)+d):i<=s?(r=0,i=Math.min(Math.max(-l,-h),l),u=i*(i+2*h)+d):(r=Math.max(0,-(u*l+c)),i=0<r?l:Math.min(Math.max(-l,-h),l),u=-r*r+i*(i+2*h)+d)):(i=0<u?-l:l,r=Math.max(0,-(u*i+c)),u=-r*r+i*(i+2*h)+d),o&&o.copy(this.direction).multiplyScalar(r).add(this.origin),a&&a.copy(t).multiplyScalar(i).add(e),u}}(),isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:function(){var e=new THREE.Vector3;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;return i>o?null:(o=Math.sqrt(o-i),i=r-o,r+=o,0>i&&0>r?null:0>i?this.at(r,n):this.at(i,n))}}(),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0===t?0===e.distanceToPoint(this.origin)?0:null:(e=-(this.origin.dot(e.normal)+e.constant)/t,0<=e?e:null)},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},isIntersectionBox:function(){var e=new THREE.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectBox:function(e,t){var n,r,i,o,a;r=1/this.direction.x,o=1/this.direction.y,a=1/this.direction.z;var s=this.origin;return 0<=r?(n=(e.min.x-s.x)*r,r*=e.max.x-s.x):(n=(e.max.x-s.x)*r,r*=e.min.x-s.x),0<=o?(i=(e.min.y-s.y)*o,o*=e.max.y-s.y):(i=(e.max.y-s.y)*o,o*=e.min.y-s.y),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),0<=a?(i=(e.min.z-s.z)*a,a*=e.max.z-s.z):(i=(e.max.z-s.z)*a,a*=e.min.z-s.z),n>a||i>r?null:((i>n||n!==n)&&(n=i),(a<r||r!==r)&&(r=a),0>r?null:this.at(0<=n?n:r,t)))},intersectTriangle:function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3;return function(i,o,a,s,l){if(t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n),o=this.direction.dot(r),0<o){if(s)return null;s=1}else{if(!(0>o))return null;s=-1,o=-o}return e.subVectors(this.origin,i),i=s*this.direction.dot(n.crossVectors(e,n)),0>i?null:(a=s*this.direction.dot(t.cross(e)),0>a||i+a>o?null:(i=-s*e.dot(r),0>i?null:this.at(i/o,l)))}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},THREE.Sphere=function(e,t){this.center=void 0!==e?e:new THREE.Vector3,this.radius=void 0!==t?t:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new THREE.Box3;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).center(r);for(var i=0,o=0,a=t.length;o<a;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new THREE.Vector3;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){return e=e||new THREE.Box3,e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},THREE.Frustum=function(e,t,n,r,i,o){this.planes=[void 0!==e?e:new THREE.Plane,void 0!==t?t:new THREE.Plane,void 0!==n?n:new THREE.Plane,void 0!==r?r:new THREE.Plane,void 0!==i?i:new THREE.Plane,void 0!==o?o:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;6>n;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements;e=n[0];var r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],l=n[6],u=n[7],c=n[8],h=n[9],d=n[10],p=n[11],f=n[12],m=n[13],v=n[14],n=n[15];return t[0].setComponents(o-e,u-a,p-c,n-f).normalize(),t[1].setComponents(o+e,u+a,p+c,n+f).normalize(),t[2].setComponents(o+r,u+s,p+h,n+m).normalize(),t[3].setComponents(o-r,u-s,p-h,n-m).normalize(),t[4].setComponents(o-i,u-l,p-d,n-v).normalize(),t[5].setComponents(o+i,u+l,p+d,n+v).normalize(),this},intersectsObject:function(){var e=new THREE.Sphere;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes,n=e.center;e=-e.radius;for(var r=0;6>r;r++)if(t[r].distanceToPoint(n)<e)return!1;return!0},intersectsBox:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n){for(var r=this.planes,i=0;6>i;i++){var o=r[i];e.x=0<o.normal.x?n.min.x:n.max.x,t.x=0<o.normal.x?n.max.x:n.min.x,e.y=0<o.normal.y?n.min.y:n.max.y,t.y=0<o.normal.y?n.max.y:n.min.y,e.z=0<o.normal.z?n.min.z:n.max.z,t.z=0<o.normal.z?n.max.z:n.min.z;var a=o.distanceToPoint(e),o=o.distanceToPoint(t);if(0>a&&0>o)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;6>n;n++)if(0>t[n].distanceToPoint(e))return!1;return!0}},THREE.Plane=function(e,t){this.normal=void 0!==e?e:new THREE.Vector3(1,0,0),this.constant=void 0!==t?t:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n,r,i){return r=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize(),this.setFromNormalAndCoplanarPoint(r,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e);return(t||new THREE.Vector3).copy(this.normal).multiplyScalar(n)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>t&&0<e||0>e&&0<t},intersectLine:function(){var e=new THREE.Vector3;return function(t,n){var r=n||new THREE.Vector3,i=t.delta(e),o=this.normal.dot(i);return 0!==o?(o=-(t.start.dot(this.normal)+this.constant)/o,0>o||1<o?void 0:r.copy(i).multiplyScalar(o).add(t.start)):0===this.distanceToPoint(t.start)?r.copy(t.start):void 0}}(),coplanarPoint:function(e){return(e||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Matrix3;return function(r,i){var o=i||n.getNormalMatrix(r),o=e.copy(this.normal).applyMatrix3(o),a=this.coplanarPoint(t);return a.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(o,a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},THREE.Math={generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=Array(36),r=0;return function(){for(var i=0;36>i;i++)8===i||13===i||18===i||23===i?n[i]="-":14===i?n[i]="4":(2>=r&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,n[i]=t[19===i?3&e|8:e]);return n.join("")}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}(),isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}},THREE.Spline=function(e){function t(e,t,n,r,i,o,a){return e=.5*(n-e),r=.5*(r-t),(2*(t-n)+e+r)*a+(-3*(t-n)-2*e-r)*o+e*i+t}this.points=e;var n,r,i,o,a,s,l,u,c,h=[],d={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return n=(this.points.length-1)*e,r=Math.floor(n),i=n-r,h[0]=0===r?r:r-1,h[1]=r,h[2]=r>this.points.length-2?this.points.length-1:r+1,h[3]=r>this.points.length-3?this.points.length-1:r+2,s=this.points[h[0]],l=this.points[h[1]],u=this.points[h[2]],c=this.points[h[3]],o=i*i,a=i*o,d.x=t(s.x,l.x,u.x,c.x,i,o,a),d.y=t(s.y,l.y,u.y,c.y,i,o,a),d.z=t(s.z,l.z,u.z,c.z,i,o,a),d},this.getControlPointsArray=function(){var e,t,n=this.points.length,r=[];for(e=0;e<n;e++)t=this.points[e],r[e]=[t.x,t.y,t.z];return r},this.getLength=function(e){var t,n,r,i=t=t=0,o=new THREE.Vector3,a=new THREE.Vector3,s=[],l=0;for(s[0]=0,e||(e=100),n=this.points.length*e,o.copy(this.points[0]),e=1;e<n;e++)t=e/n,r=this.getPoint(t),a.copy(r),l+=a.distanceTo(o),o.copy(r),t*=this.points.length-1,t=Math.floor(t),t!==i&&(s[t]=l,i=t);return s[s.length]=l,{chunks:s,total:l}},this.reparametrizeByArcLength=function(e){var t,n,r,i,o,a,s=[],l=new THREE.Vector3,u=this.getLength();for(s.push(l.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(n=u.chunks[t]-u.chunks[t-1],a=Math.ceil(e*n/u.total),i=(t-1)/(this.points.length-1),o=t/(this.points.length-1),n=1;n<a-1;n++)r=i+1/a*n*(o-i),r=this.getPoint(r),s.push(l.copy(r).clone());s.push(l.copy(this.points[t]).clone())}this.points=s}},THREE.Triangle=function(e,t,n){this.a=void 0!==e?e:new THREE.Vector3,this.b=void 0!==t?t:new THREE.Vector3,this.c=void 0!==n?n:new THREE.Vector3},THREE.Triangle.normal=function(){var e=new THREE.Vector3;return function(t,n,r,i){return i=i||new THREE.Vector3,i.subVectors(r,n),e.subVectors(t,n),i.cross(e),t=i.lengthSq(),0<t?i.multiplyScalar(1/Math.sqrt(t)):i.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(r,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i),r=e.dot(e),i=e.dot(t),o=e.dot(n);var l=t.dot(t);a=t.dot(n);var u=r*l-i*i;return s=s||new THREE.Vector3,0===u?s.set(-2,-1,-1):(u=1/u,l=(l*o-i*a)*u,r=(r*a-i*o)*u,s.set(1-l-r,r,l))}}(),THREE.Triangle.containsPoint=function(){var e=new THREE.Vector3;return function(t,n,r,i){return t=THREE.Triangle.barycoordFromPoint(t,n,r,i,e),0<=t.x&&0<=t.y&&1>=t.x+t.y}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return THREE.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return THREE.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return THREE.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},THREE.Channels=function(){this.mask=1},THREE.Channels.prototype={constructor:THREE.Channels,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)}},THREE.Clock=function(e){this.autoStart=void 0===e||e,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=self.performance.now(),this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=self.performance.now(),e=.001*(t-this.oldTime);this.oldTime=t,this.elapsedTime+=e}return e}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(e){e.addEventListener=THREE.EventDispatcher.prototype.addEventListener,e.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,e.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=[],r=t.length,i=0;i<r;i++)n[i]=t[i];for(i=0;i<r;i++)n[i].call(this,e)}}}},function(e){function t(e,t){return e.distance-t.distance}function n(e,t,r,i){if(!1!==e.visible&&(e.raycast(t,r),!0===i)){e=e.children,i=0;for(var o=e.length;i<o;i++)n(e[i],t,r,!0)}}e.Raycaster=function(t,n,r,i){
this.ray=new e.Ray(t,n),this.near=r||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},(0,p.default)(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})},e.Raycaster.prototype={constructor:e.Raycaster,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(t,n){n instanceof e.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(this.ray.origin).normalize()):n instanceof e.OrthographicCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,r){var i=[];return n(e,this,i,r),i.sort(t),i},intersectObjects:function(e,r){var i=[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var o=0,a=e.length;o<a;o++)n(e[o],this,i,r);return i.sort(t),i}}}(THREE),THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.channels=new THREE.Channels,this.children=[],this.up=THREE.Object3D.DefaultUp.clone();var e=new THREE.Vector3,t=new THREE.Euler,n=new THREE.Quaternion,r=new THREE.Vector3(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),(0,p.default)(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new THREE.Matrix4},normalMatrix:{value:new THREE.Matrix3}}),this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0),THREE.Object3D.DefaultMatrixAutoUpdate=!0,THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set eulerOrder(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set renderDepth(e){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new THREE.Quaternion;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new THREE.Vector3;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},translateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new THREE.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new THREE.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e instanceof THREE.Object3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(1<arguments.length)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);t=this.children.indexOf(e),-1!==t&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(t,1))},getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return e=e||new THREE.Vector3,this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n){return n=n||new THREE.Quaternion,this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldRotation:function(){var e=new THREE.Quaternion;return function(t){return t=t||new THREE.Euler,this.getWorldQuaternion(e),t.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new THREE.Vector3,t=new THREE.Quaternion;return function(n){return n=n||new THREE.Vector3,this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new THREE.Quaternion;return function(t){return t=t||new THREE.Vector3,this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)},toJSON:function(e){function t(e){var t,n=[];for(t in e){var r=e[t];delete r.metadata,n.push(r)}return n}var n=void 0===e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{}},r.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==(0,h.default)(this.userData)&&(i.userData=this.userData),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),i.material=this.material.uuid),0<this.children.length){i.children=[];for(var o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(n){var n=t(e.geometries),o=t(e.materials),a=t(e.textures);e=t(e.images),0<n.length&&(r.geometries=n),0<o.length&&(r.materials=o),0<a.length&&(r.textures=a),0<e.length&&(r.images=e)}return r.object=i,r},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.rotationAutoUpdate=e.rotationAutoUpdate,this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse((0,h.default)(e.userData)),!0===t)for(var n=0;n<e.children.length;n++)this.add(e.children[n].clone());return this}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Face3=function(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3,this.vertexNormals=Array.isArray(r)?r:[],this.color=i instanceof THREE.Color?i:new THREE.Color,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},THREE.Face4=function(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(e,t,n,i,o,a)},THREE.BufferAttribute=function(e,t){this.uuid=THREE.Math.generateUUID(),this.array=e,this.itemSize=t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.array.length/this.itemSize},set needsUpdate(e){!0===e&&this.version++},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new THREE.Color),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyIndicesArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];t[n++]=o.a,t[n++]=o.b,t[n++]=o.c}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new THREE.Vector2),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new THREE.Vector3),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new THREE.Vector4),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},clone:function(){return(new this.constructor).copy(this)}},THREE.Int8Attribute=function(e,t){return new THREE.BufferAttribute(new Int8Array(e),t)},THREE.Uint8Attribute=function(e,t){return new THREE.BufferAttribute(new Uint8Array(e),t)},THREE.Uint8ClampedAttribute=function(e,t){return new THREE.BufferAttribute(new Uint8ClampedArray(e),t)},THREE.Int16Attribute=function(e,t){return new THREE.BufferAttribute(new Int16Array(e),t)},THREE.Uint16Attribute=function(e,t){return new THREE.BufferAttribute(new Uint16Array(e),t)},THREE.Int32Attribute=function(e,t){return new THREE.BufferAttribute(new Int32Array(e),t)},THREE.Uint32Attribute=function(e,t){return new THREE.BufferAttribute(new Uint32Array(e),t)},THREE.Float32Attribute=function(e,t){return new THREE.BufferAttribute(new Float32Array(e),t)},THREE.Float64Attribute=function(e,t){return new THREE.BufferAttribute(new Float64Array(e),t)},THREE.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new THREE.BufferAttribute(e,t).setDynamic(!0)},THREE.InstancedBufferAttribute=function(e,t,n){THREE.BufferAttribute.call(this,e,t),this.meshPerAttribute=n||1},THREE.InstancedBufferAttribute.prototype=(0,u.default)(THREE.BufferAttribute.prototype),THREE.InstancedBufferAttribute.prototype.constructor=THREE.InstancedBufferAttribute,THREE.InstancedBufferAttribute.prototype.copy=function(e){return THREE.BufferAttribute.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},THREE.InterleavedBuffer=function(e,t){this.uuid=THREE.Math.generateUUID(),this.array=e,this.stride=t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},THREE.InterleavedBuffer.prototype={constructor:THREE.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(e){!0===e&&this.version++},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){this.array=new e.array.constructor(e.array),this.stride=e.stride,this.dynamic=e.dynamic},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)}},THREE.InstancedInterleavedBuffer=function(e,t,n){THREE.InterleavedBuffer.call(this,e,t),this.meshPerAttribute=n||1},THREE.InstancedInterleavedBuffer.prototype=(0,u.default)(THREE.InterleavedBuffer.prototype),THREE.InstancedInterleavedBuffer.prototype.constructor=THREE.InstancedInterleavedBuffer,THREE.InstancedInterleavedBuffer.prototype.copy=function(e){return THREE.InterleavedBuffer.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},THREE.InterleavedBufferAttribute=function(e,t,n){this.uuid=THREE.Math.generateUUID(),this.data=e,this.itemSize=t,this.offset=n},THREE.InterleavedBufferAttribute.prototype={constructor:THREE.InterleavedBufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.data.array.length/this.data.stride},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){for(var t=(new THREE.Matrix3).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(n=0,r=this.faces.length;n<r;n++){e=this.faces[n],e.normal.applyMatrix3(t).normalize();for(var i=0,o=e.vertexNormals.length;i<o;i++)e.vertexNormals[i].applyMatrix3(t).normalize()}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0},rotateX:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,r){return void 0===e&&(e=new THREE.Matrix4),e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,r){return void 0===e&&(e=new THREE.Matrix4),e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new THREE.Object3D),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,r){var i=void 0!==a?[c[e].clone(),c[t].clone(),c[r].clone()]:[],o=void 0!==s?[n.colors[e].clone(),n.colors[t].clone(),n.colors[r].clone()]:[],i=new THREE.Face3(e,t,r,i,o);n.faces.push(i),void 0!==l&&n.faceVertexUvs[0].push([h[e].clone(),h[t].clone(),h[r].clone()]),void 0!==u&&n.faceVertexUvs[1].push([d[e].clone(),d[t].clone(),d[r].clone()])}var n=this,r=null!==e.index?e.index.array:void 0,i=e.attributes,o=i.position.array,a=void 0!==i.normal?i.normal.array:void 0,s=void 0!==i.color?i.color.array:void 0,l=void 0!==i.uv?i.uv.array:void 0,u=void 0!==i.uv2?i.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var c=[],h=[],d=[],p=i=0;i<o.length;i+=3,p+=2)n.vertices.push(new THREE.Vector3(o[i],o[i+1],o[i+2])),void 0!==a&&c.push(new THREE.Vector3(a[i],a[i+1],a[i+2])),void 0!==s&&n.colors.push(new THREE.Color(s[i],s[i+1],s[i+2])),void 0!==l&&h.push(new THREE.Vector2(l[p],l[p+1])),void 0!==u&&d.push(new THREE.Vector2(u[p],u[p+1]));if(void 0!==r)if(o=e.groups,0<o.length)for(i=0;i<o.length;i++)for(var p=o[i],f=p.start,m=p.count,p=f,f=f+m;p<f;p+=3)t(r[p],r[p+1],r[p+2]);else for(i=0;i<r.length;i+=3)t(r[i],r[i+1],r[i+2]);else for(i=0;i<o.length/3;i+=3)t(i,i+1,i+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,t=0===t?1:1/t,n=new THREE.Matrix4;return n.set(t,0,0,-t*e.x,0,t,0,-t*e.y,0,0,t,-t*e.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var e=new THREE.Vector3,t=new THREE.Vector3,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b];e.subVectors(this.vertices[i.c],a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r;for(r=Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)r[t]=new THREE.Vector3;if(e){var i,o,a,s=new THREE.Vector3,l=new THREE.Vector3;for(e=0,t=this.faces.length;e<t;e++)n=this.faces[e],i=this.vertices[n.a],o=this.vertices[n.b],a=this.vertices[n.c],s.subVectors(a,o),l.subVectors(i,o),s.cross(l),r[n.a].add(s),r[n.b].add(s),r[n.c].add(s)}else for(e=0,t=this.faces.length;e<t;e++)n=this.faces[e],r[n.a].add(n.normal),r[n.b].add(n.normal),r[n.c].add(n.normal);for(t=0,n=this.vertices.length;t<n;t++)r[t].normalize();for(e=0,t=this.faces.length;e<t;e++)n=this.faces[e],i=n.vertexNormals,3===i.length?(i[0].copy(r[n.a]),i[1].copy(r[n.b]),i[2].copy(r[n.c])):(i[0]=r[n.a].clone(),i[1]=r[n.b].clone(),i[2]=r[n.c].clone())},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new THREE.Geometry;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[],i=this.morphNormals[e].faceNormals;var a,s,l=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)a=new THREE.Vector3,s={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},i.push(a),l.push(s)}for(l=this.morphNormals[e],o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],a=l.faceNormals[n],s=l.vertexNormals[n],a.copy(i.normal),s.a.copy(i.vertexNormals[0]),s.b.copy(i.vertexNormals[1]),s.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)0<n&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!1==e instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);else{var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,u=this.faceVertexUvs[0];e=e.faceVertexUvs[0],void 0===n&&(n=0),void 0!==t&&(r=(new THREE.Matrix3).getNormalMatrix(t));for(var c=0,h=a.length;c<h;c++){var d=a[c].clone();void 0!==t&&d.applyMatrix4(t),o.push(d)}for(c=0,h=l.length;c<h;c++){var p,a=l[c],f=a.vertexNormals,m=a.vertexColors,d=new THREE.Face3(a.a+i,a.b+i,a.c+i);for(d.normal.copy(a.normal),void 0!==r&&d.normal.applyMatrix3(r).normalize(),t=0,o=f.length;t<o;t++)p=f[t].clone(),void 0!==r&&p.applyMatrix3(r).normalize(),d.vertexNormals.push(p);for(d.color.copy(a.color),t=0,o=m.length;t<o;t++)p=m[t],d.vertexColors.push(p.clone());d.materialIndex=a.materialIndex+n,s.push(d)}for(c=0,h=e.length;c<h;c++)if(n=e[c],r=[],void 0!==n){for(t=0,o=n.length;t<o;t++)r.push(n[t].clone());u.push(r)}}},mergeMesh:function(e){!1==e instanceof THREE.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e):(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,t,n,r={},i=[],o=[],a=Math.pow(10,4);for(t=0,n=this.vertices.length;t<n;t++)e=this.vertices[t],e=Math.round(e.x*a)+"_"+Math.round(e.y*a)+"_"+Math.round(e.z*a),void 0===r[e]?(r[e]=t,i.push(this.vertices[t]),o[t]=i.length-1):o[t]=o[r[e]];for(r=[],t=0,n=this.faces.length;t<n;t++)for(a=this.faces[t],a.a=o[a.a],a.b=o[a.b],a.c=o[a.c],a=[a.a,a.b,a.c],e=0;3>e;e++)if(a[e]===a[(e+1)%3]){r.push(t);break}for(t=r.length-1;0<=t;t--)for(a=r[t],this.faces.splice(a,1),o=0,n=this.faceVertexUvs.length;o<n;o++)this.faceVertexUvs[o].splice(a,1);return t=this.vertices.length-i.length,this.vertices=i,t},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]),n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]?u[t]:(u[t]=l.length/3,l.push(e.x,e.y,e.z),u[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==h[t]?h[t]:(h[t]=c.length,c.push(e.getHex()),h[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]?p[t]:(p[t]=d.length/2,d.push(e.x,e.y),p[t])}var i={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o,a=this.parameters;for(o in a)void 0!==a[o]&&(i[o]=a[o]);return i}for(a=[],o=0;o<this.vertices.length;o++){var s=this.vertices[o];a.push(s.x,s.y,s.z)}var s=[],l=[],u={},c=[],h={},d=[],p={};for(o=0;o<this.faces.length;o++){var f=this.faces[o],m=void 0!==this.faceVertexUvs[0][o],v=0<f.normal.length(),g=0<f.vertexNormals.length,E=1!==f.color.r||1!==f.color.g||1!==f.color.b,y=0<f.vertexColors.length,x=0,x=e(x,0,0),x=e(x,1,!1),x=e(x,2,!1),x=e(x,3,m),x=e(x,4,v),x=e(x,5,g),x=e(x,6,E),x=e(x,7,y);s.push(x),s.push(f.a,f.b,f.c),m&&(m=this.faceVertexUvs[0][o],s.push(r(m[0]),r(m[1]),r(m[2]))),v&&s.push(t(f.normal)),g&&(v=f.vertexNormals,s.push(t(v[0]),t(v[1]),t(v[2]))),E&&s.push(n(f.color)),y&&(f=f.vertexColors,s.push(n(f[0]),n(f[1]),n(f[2])))}return i.data={},i.data.vertices=a,i.data.normals=l,0<c.length&&(i.data.colors=c),0<d.length&&(i.data.uvs=[d]),i.data.faces=s,i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]];for(var t=e.vertices,n=0,r=t.length;n<r;n++)this.vertices.push(t[n].clone());for(t=e.faces,n=0,r=t.length;n<r;n++)this.faces.push(t[n].clone());for(n=0,r=e.faceVertexUvs.length;n<r;n++){t=e.faceVertexUvs[n],void 0===this.faceVertexUvs[n]&&(this.faceVertexUvs[n]=[]);for(var i=0,o=t.length;i<o;i++){for(var a=t[i],s=[],l=0,u=a.length;l<u;l++)s.push(a[l].clone());this.faceVertexUvs[n].push(s)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.DirectGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1},THREE.DirectGeometry.prototype={constructor:THREE.DirectGeometry,computeBoundingBox:THREE.Geometry.prototype.computeBoundingBox,computeBoundingSphere:THREE.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(e){var t,n,r=[];e=e.faces;for(var i=0;i<e.length;i++){var o=e[i];o.materialIndex!==n&&(n=o.materialIndex,void 0!==t&&(t.count=3*i-t.start,r.push(t)),t={start:3*i,materialIndex:n})}void 0!==t&&(t.count=3*i-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t=e.faces,n=e.vertices,r=e.faceVertexUvs,i=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,a=e.morphTargets,s=a.length;if(0<s){for(var l=[],u=0;u<s;u++)l[u]=[];this.morphTargets.position=l}var c=e.morphNormals,h=c.length;if(0<h){for(var d=[],u=0;u<h;u++)d[u]=[];this.morphTargets.normal=d}for(var p=e.skinIndices,f=e.skinWeights,m=p.length===n.length,v=f.length===n.length,u=0;u<t.length;u++){var g=t[u];this.vertices.push(n[g.a],n[g.b],n[g.c]);var E=g.vertexNormals;for(3===E.length?this.normals.push(E[0],E[1],E[2]):(E=g.normal,this.normals.push(E,E,E)),E=g.vertexColors,3===E.length?this.colors.push(E[0],E[1],E[2]):(E=g.color,this.colors.push(E,E,E)),!0===i&&(E=r[0][u],void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2))),!0===o&&(E=r[1][u],void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2))),E=0;E<s;E++){var y=a[E].vertices;l[E].push(y[g.a],y[g.b],y[g.c])}for(E=0;E<h;E++)y=c[E].vertexNormals[u],d[E].push(y.a,y.b,y.c);m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.DirectGeometry.prototype),THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0}},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},getIndex:function(){return this.index},setIndex:function(e){this.index=e},addAttribute:function(e,t,n){!1==t instanceof THREE.BufferAttribute&&!1==t instanceof THREE.InterleavedBufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),
this.addAttribute(e,new THREE.BufferAttribute(t,n))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t)):this.attributes[e]=t},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){delete this.attributes[e]},get drawcalls(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups},get offsets(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0),t=this.attributes.normal,void 0!==t&&((new THREE.Matrix3).getNormalMatrix(e).applyToVector3Array(t.array),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere()},rotateX:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,r){return void 0===e&&(e=new THREE.Matrix4),e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,r){return void 0===e&&(e=new THREE.Matrix4),e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new THREE.Object3D),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e instanceof THREE.Points||e instanceof THREE.Line){e=new THREE.Float32Attribute(3*t.vertices.length,3);var n=new THREE.Float32Attribute(3*t.colors.length,3);this.addAttribute("position",e.copyVector3sArray(t.vertices)),this.addAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length&&(e=new THREE.Float32Attribute(t.lineDistances.length,1),this.addAttribute("lineDistance",e.copyArray(t.lineDistances))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e instanceof THREE.Mesh&&t instanceof THREE.Geometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e instanceof THREE.Mesh){var n=t.__directGeometry;if(void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}return!0===t.verticesNeedUpdate&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new THREE.DirectGeometry).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);this.addAttribute("position",new THREE.BufferAttribute(t,3).copyVector3sArray(e.vertices)),0<e.normals.length&&(t=new Float32Array(3*e.normals.length),this.addAttribute("normal",new THREE.BufferAttribute(t,3).copyVector3sArray(e.normals))),0<e.colors.length&&(t=new Float32Array(3*e.colors.length),this.addAttribute("color",new THREE.BufferAttribute(t,3).copyColorsArray(e.colors))),0<e.uvs.length&&(t=new Float32Array(2*e.uvs.length),this.addAttribute("uv",new THREE.BufferAttribute(t,2).copyVector2sArray(e.uvs))),0<e.uvs2.length&&(t=new Float32Array(2*e.uvs2.length),this.addAttribute("uv2",new THREE.BufferAttribute(t,2).copyVector2sArray(e.uvs2))),0<e.indices.length&&(t=new(65535<e.vertices.length?Uint32Array:Uint16Array)(3*e.indices.length),this.setIndex(new THREE.BufferAttribute(t,1).copyIndicesArray(e.indices))),this.groups=e.groups;for(var n in e.morphTargets){for(var t=[],r=e.morphTargets[n],i=0,o=r.length;i<o;i++){var a=r[i],s=new THREE.Float32Attribute(3*a.length,3);t.push(s.copyVector3sArray(a))}this.morphAttributes[n]=t}return 0<e.skinIndices.length&&(n=new THREE.Float32Attribute(4*e.skinIndices.length,4),this.addAttribute("skinIndex",n.copyVector4sArray(e.skinIndices))),0<e.skinWeights.length&&(n=new THREE.Float32Attribute(4*e.skinWeights.length,4),this.addAttribute("skinWeight",n.copyVector4sArray(e.skinWeights))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){var e=new THREE.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var t=this.attributes.position.array;if(t){var n=this.boundingBox;n.makeEmpty();for(var r=0,i=t.length;r<i;r+=3)e.fromArray(t,r),n.expandByPoint(e)}void 0!==t&&0!==t.length||(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var e=new THREE.Box3,t=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var n=this.attributes.position.array;if(n){e.makeEmpty();for(var r=this.boundingSphere.center,i=0,o=n.length;i<o;i+=3)t.fromArray(n,i),e.expandByPoint(t);e.center(r);for(var a=0,i=0,o=n.length;i<o;i+=3)t.fromArray(n,i),a=Math.max(a,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(r.length),3));else for(var i=t.normal.array,o=0,a=i.length;o<a;o++)i[o]=0;var s,l,u,i=t.normal.array,c=new THREE.Vector3,h=new THREE.Vector3,d=new THREE.Vector3,p=new THREE.Vector3,f=new THREE.Vector3;if(e){e=e.array,0===n.length&&this.addGroup(0,e.length);for(var m=0,v=n.length;m<v;++m)for(o=n[m],a=o.start,s=o.count,o=a,a+=s;o<a;o+=3)s=3*e[o+0],l=3*e[o+1],u=3*e[o+2],c.fromArray(r,s),h.fromArray(r,l),d.fromArray(r,u),p.subVectors(d,h),f.subVectors(c,h),p.cross(f),i[s]+=p.x,i[s+1]+=p.y,i[s+2]+=p.z,i[l]+=p.x,i[l+1]+=p.y,i[l+2]+=p.z,i[u]+=p.x,i[u+1]+=p.y,i[u+2]+=p.z}else for(o=0,a=r.length;o<a;o+=9)c.fromArray(r,o),h.fromArray(r,o+3),d.fromArray(r,o+6),p.subVectors(d,h),f.subVectors(c,h),p.cross(f),i[o]=p.x,i[o+1]=p.y,i[o+2]=p.z,i[o+3]=p.x,i[o+4]=p.y,i[o+5]=p.z,i[o+6]=p.x,i[o+7]=p.y,i[o+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(e){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},merge:function(e,t){if(!1!=e instanceof THREE.BufferGeometry){void 0===t&&(t=0);var n,r=this.attributes;for(n in r)if(void 0!==e.attributes[n])for(var i=r[n].array,o=e.attributes[n],a=o.array,s=0,o=o.itemSize*t;s<a.length;s++,o++)i[o]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e,t,n,r=this.attributes.normal.array,i=0,o=r.length;i<o;i+=3)e=r[i],t=r[i+1],n=r[i+2],e=1/Math.sqrt(e*e+t*t+n*n),r[i]*=e,r[i+1]*=e,r[i+2]*=e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t,n=this.parameters;for(t in n)void 0!==n[t]&&(e[t]=n[t]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(n=Array.prototype.slice.call(r.array),e.data.index={type:r.array.constructor.name,array:n}),r=this.attributes;for(t in r){var i=r[t],n=Array.prototype.slice.call(i.array);e.data.attributes[t]={itemSize:i.itemSize,type:i.array.constructor.name,array:n}}return t=this.groups,0<t.length&&(e.data.groups=JSON.parse((0,h.default)(t))),t=this.boundingSphere,null!==t&&(e.data.boundingSphere={center:t.center.toArray(),radius:t.radius}),e},clone:function(){return(new this.constructor).copy(this)},copy:function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n,t=e.attributes;for(n in t)this.addAttribute(n,t[n].clone());for(e=e.groups,n=0,t=e.length;n<t;n++){var r=e[n];this.addGroup(r.start,r.count)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.BufferGeometry.MaxIndex=65535,THREE.InstancedBufferGeometry=function(){THREE.BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0},THREE.InstancedBufferGeometry.prototype=(0,u.default)(THREE.BufferGeometry.prototype),THREE.InstancedBufferGeometry.prototype.constructor=THREE.InstancedBufferGeometry,THREE.InstancedBufferGeometry.prototype.addGroup=function(e,t,n){this.groups.push({start:e,count:t,instances:n})},THREE.InstancedBufferGeometry.prototype.copy=function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n,t=e.attributes;for(n in t)this.addAttribute(n,t[n].clone());for(e=e.groups,n=0,t=e.length;n<t;n++){var r=e[n];this.addGroup(r.start,r.count,r.instances)}return this},THREE.EventDispatcher.prototype.apply(THREE.InstancedBufferGeometry.prototype),THREE.AnimationAction=function(e,t,n,r,i){if(void 0===e)throw Error("clip is null");this.clip=e,this.localRoot=null,this.startTime=t||0,this.timeScale=n||1,this.weight=r||1,this.loop=i||THREE.LoopRepeat,this.loopCount=0,this.enabled=!0,this.actionTime=-this.startTime,this.clipTime=0,this.propertyBindings=[]},THREE.AnimationAction.prototype={constructor:THREE.AnimationAction,setLocalRoot:function(e){return this.localRoot=e,this},updateTime:function(e){var t=this.clipTime,n=this.loopCount,r=this.clip.duration;return this.actionTime+=e,this.loop===THREE.LoopOnce?(this.loopCount=0,this.clipTime=Math.min(Math.max(this.actionTime,0),r),this.clipTime!==t&&(this.clipTime===r?this.mixer.dispatchEvent({type:"finished",action:this,direction:1}):0===this.clipTime&&this.mixer.dispatchEvent({type:"finished",action:this,direction:-1})),this.clipTime):(this.loopCount=Math.floor(this.actionTime/r),e=this.actionTime-this.loopCount*r,e%=r,this.loop==THREE.LoopPingPong&&1===Math.abs(this.loopCount%2)&&(e=r-e),this.clipTime=e,this.loopCount!==n&&this.mixer.dispatchEvent({type:"loop",action:this,loopDelta:this.loopCount-this.loopCount}),this.clipTime)},syncWith:function(e){return this.actionTime=e.actionTime,this.timeScale=e.timeScale,this},warpToDuration:function(e){return this.timeScale=this.clip.duration/e,this},init:function(e){return this.clipTime=e-this.startTime,this},update:function(e){return this.updateTime(e),this.clip.getAt(this.clipTime)},getTimeScaleAt:function(e){return this.timeScale.getAt?this.timeScale.getAt(e):this.timeScale},getWeightAt:function(e){return this.weight.getAt?this.weight.getAt(e):this.weight}},THREE.AnimationClip=function(e,t,n){if(this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,0>this.duration)for(e=0;e<this.tracks.length;e++)t=this.tracks[e],this.duration=Math.max(t.keys[t.keys.length-1].time);this.trim(),this.optimize(),this.results=[]},THREE.AnimationClip.prototype={constructor:THREE.AnimationClip,getAt:function(e){e=Math.max(0,Math.min(e,this.duration));for(var t=0;t<this.tracks.length;t++)this.results[t]=this.tracks[t].getAt(e);return this.results},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},THREE.AnimationClip.CreateFromMorphTargetSequence=function(e,t,n){for(var r=t.length,i=[],o=0;o<r;o++){var a=[];a.push({time:(o+r-1)%r,value:0}),a.push({time:o,value:1}),a.push({time:(o+1)%r,value:0}),a.sort(THREE.KeyframeTrack.keyComparer),0===a[0].time&&a.push({time:r,value:a[0].value}),i.push(new THREE.NumberKeyframeTrack(".morphTargetInfluences["+t[o].name+"]",a).scale(1/n))}return new THREE.AnimationClip(e,-1,i)},THREE.AnimationClip.findByName=function(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t)return e[n];return null},THREE.AnimationClip.CreateClipsFromMorphTargetSequences=function(e,t){for(var n={},r=/^([\w-]*?)([\d]+)$/,i=0,o=e.length;i<o;i++){var a=e[i],s=a.name.match(r);if(s&&1<s.length){var l=s[1];(s=n[l])||(n[l]=s=[]),s.push(a)}}r=[];for(l in n)r.push(THREE.AnimationClip.CreateFromMorphTargetSequence(l,n[l],t));return r},THREE.AnimationClip.parse=function(e){for(var t=[],n=0;n<e.tracks.length;n++)t.push(THREE.KeyframeTrack.parse(e.tracks[n]).scale(1/e.fps));return new THREE.AnimationClip(e.name,e.duration,t)},THREE.AnimationClip.parseAnimation=function(e,t,n){if(!e)return console.error("  no animation in JSONLoader data"),null;var r=function(e,t,n,r,i){for(var o=[],a=0;a<t.length;a++){var s=t[a];void 0!==s[n]&&o.push({time:s.time,value:i(s)})}return 0<o.length?new r(e,o):null},i=[],o=e.name||"default",a=e.length||-1,s=e.fps||30;e=e.hierarchy||[];for(var l=0;l<e.length;l++){var u=e[l].keys;if(u&&0!=u.length)if(u[0].morphTargets){for(var a={},c=0;c<u.length;c++)if(u[c].morphTargets)for(var h=0;h<u[c].morphTargets.length;h++)a[u[c].morphTargets[h]]=-1;for(var d in a){for(var p=[],h=0;h<u[c].morphTargets.length;h++){var f=u[c];p.push({time:f.time,value:f.morphTarget===d?1:0})}i.push(new THREE.NumberKeyframeTrack(n+".morphTargetInfluence["+d+"]",p))}a=a.length*(s||1)}else c=n+".bones["+t[l].name+"]",(h=r(c+".position",u,"pos",THREE.VectorKeyframeTrack,function(e){return(new THREE.Vector3).fromArray(e.pos)}))&&i.push(h),(h=r(c+".quaternion",u,"rot",THREE.QuaternionKeyframeTrack,function(e){return e.rot.slerp?e.rot.clone():(new THREE.Quaternion).fromArray(e.rot)}))&&i.push(h),(u=r(c+".scale",u,"scl",THREE.VectorKeyframeTrack,function(e){return(new THREE.Vector3).fromArray(e.scl)}))&&i.push(u)}return 0===i.length?null:new THREE.AnimationClip(o,a,i)},THREE.AnimationMixer=function(e){this.root=e,this.time=0,this.timeScale=1,this.actions=[],this.propertyBindingMap={}},THREE.AnimationMixer.prototype={constructor:THREE.AnimationMixer,addAction:function(e){this.actions.push(e),e.init(this.time),e.mixer=this;for(var t=e.clip.tracks,n=e.localRoot||this.root,r=0;r<t.length;r++){var i=t[r],o=n.uuid+"-"+i.name,a=this.propertyBindingMap[o];void 0===a&&(a=new THREE.PropertyBinding(n,i.name),this.propertyBindingMap[o]=a),e.propertyBindings.push(a),a.referenceCount+=1}},removeAllActions:function(){for(var e=0;e<this.actions.length;e++)this.actions[e].mixer=null;for(var t in this.propertyBindingMap)this.propertyBindingMap[t].unbind();return this.actions=[],this.propertyBindingMap={},this},removeAction:function(e){var t=this.actions.indexOf(e);-1!==t&&(this.actions.splice(t,1),e.mixer=null),t=e.localRoot||this.root,e=e.clip.tracks;for(var n=0;n<e.length;n++){var r=t.uuid+"-"+e[n].name,i=this.propertyBindingMap[r];i.referenceCount-=1,0>=i.referenceCount&&(i.unbind(),delete this.propertyBindingMap[r])}return this},findActionByName:function(e){for(var t=0;t<this.actions.length;t++)if(this.actions[t].name===e)return this.actions[t];return null},play:function(e,t){return e.startTime=this.time,this.addAction(e),this},fadeOut:function(e,t){var n=[];return n.push({time:this.time,value:1}),n.push({time:this.time+t,value:0}),e.weight=new THREE.NumberKeyframeTrack("weight",n),this},fadeIn:function(e,t){var n=[];return n.push({time:this.time,value:0}),n.push({time:this.time+t,value:1}),e.weight=new THREE.NumberKeyframeTrack("weight",n),this},warp:function(e,t,n,r){var i=[];return i.push({time:this.time,value:t}),i.push({time:this.time+r,value:n}),e.timeScale=new THREE.NumberKeyframeTrack("timeScale",i),this},crossFade:function(e,t,n,r){if(this.fadeOut(e,n),this.fadeIn(t,n),r){r=e.clip.duration/t.clip.duration;var i=1/r;this.warp(e,1,r,n),this.warp(t,i,1,n)}return this},update:function(e){e*=this.timeScale,this.time+=e;for(var t=0;t<this.actions.length;t++){var n=this.actions[t],r=n.getWeightAt(this.time),i=n.getTimeScaleAt(this.time),i=n.update(e*i);if(!(0>=n.weight)&&n.enabled)for(var o=0;o<i.length;o++)n.propertyBindings[o].accumulate(i[o],r)}for(var a in this.propertyBindingMap)this.propertyBindingMap[a].apply();return this}},THREE.EventDispatcher.prototype.apply(THREE.AnimationMixer.prototype),THREE.AnimationUtils={getEqualsFunc:function(e){return e.equals?function(e,t){return e.equals(t)}:function(e,t){return e===t}},clone:function(e){if("object"===("undefined"==typeof e?"undefined":(0,s.default)(e))){if(e.clone)return e.clone();console.error("can not figure out how to copy exemplarValue",e)}return e},lerp:function(e,t,n,r){return THREE.AnimationUtils.getLerpFunc(e,r)(e,t,n)},lerp_object:function(e,t,n){return e.lerp(t,n)},slerp_object:function(e,t,n){return e.slerp(t,n)},lerp_number:function(e,t,n){return e*(1-n)+t*n},lerp_boolean:function(e,t,n){return.5>n?e:t},lerp_boolean_immediate:function(e,t,n){return e},lerp_string:function(e,t,n){return.5>n?e:t},lerp_string_immediate:function(e,t,n){return e},getLerpFunc:function(e,t){if(void 0===e||null===e)throw Error("examplarValue is null");switch("undefined"==typeof e?"undefined":(0,s.default)(e)){case"object":if(e.lerp)return THREE.AnimationUtils.lerp_object;if(e.slerp)return THREE.AnimationUtils.slerp_object;break;case"number":return THREE.AnimationUtils.lerp_number;case"boolean":return t?THREE.AnimationUtils.lerp_boolean:THREE.AnimationUtils.lerp_boolean_immediate;case"string":return t?THREE.AnimationUtils.lerp_string:THREE.AnimationUtils.lerp_string_immediate}}},THREE.KeyframeTrack=function(e,t){if(void 0===e)throw Error("track name is undefined");if(void 0===t||0===t.length)throw Error("no keys in track named "+e);this.name=e,this.keys=t,this.lastIndex=0,this.validate(),this.optimize()},THREE.KeyframeTrack.prototype={constructor:THREE.KeyframeTrack,getAt:function(e){for(;this.lastIndex<this.keys.length&&e>=this.keys[this.lastIndex].time;)this.lastIndex++;for(;0<this.lastIndex&&e<this.keys[this.lastIndex-1].time;)this.lastIndex--;if(this.lastIndex>=this.keys.length)return this.setResult(this.keys[this.keys.length-1].value),this.result;if(0===this.lastIndex)return this.setResult(this.keys[0].value),this.result;var t=this.keys[this.lastIndex-1];if(this.setResult(t.value),t.constantToNext)return this.result;var n=this.keys[this.lastIndex];return this.result=this.lerpValues(this.result,n.value,(e-t.time)/(n.time-t.time))},shift:function(e){if(0!==e)for(var t=0;t<this.keys.length;t++)this.keys[t].time+=e;return this},scale:function(e){if(1!==e)for(var t=0;t<this.keys.length;t++)this.keys[t].time*=e;return this},trim:function(e,t){for(var n=0,r=1;r<this.keys.length;r++)this.keys[r]<=e&&n++;for(var i=0,r=this.keys.length-2;0<r&&this.keys[r]>=t;r++)i++;return 0<n+i&&(this.keys=this.keys.splice(n,this.keys.length-i-n)),this},validate:function(){var e=null;if(0!==this.keys.length){for(var t=0;t<this.keys.length;t++){var n=this.keys[t];if(!n)return void console.error("  key is null in track",this,t);if("number"!=typeof n.time||isNaN(n.time))return void console.error("  key.time is not a valid number",this,t,n);if(void 0===n.value||null===n.value)return void console.error("  key.value is null in track",this,t,n);if(e&&e.time>n.time)return void console.error("  key.time is less than previous key time, out of order keys",this,t,n,e);e=n}return this}console.error("  track is empty, no keys",this)},optimize:function(){var e=[],t=this.keys[0];e.push(t),THREE.AnimationUtils.getEqualsFunc(t.value);for(var n=1;n<this.keys.length-1;n++){var r=this.keys[n],i=this.keys[n+1];t.time===r.time||this.compareValues(t.value,r.value)&&this.compareValues(r.value,i.value)||(t.constantToNext=this.compareValues(t.value,r.value),e.push(r),t=r)}return e.push(this.keys[this.keys.length-1]),this.keys=e,this}},THREE.KeyframeTrack.keyComparer=function(e,t){return e.time-t.time},THREE.KeyframeTrack.parse=function(e){if(void 0===e.type)throw Error("track type undefined, can not parse");return THREE.KeyframeTrack.GetTrackTypeForTypeName(e.type).parse(e)},THREE.KeyframeTrack.GetTrackTypeForTypeName=function(e){switch(e.toLowerCase()){case"vector":case"vector2":case"vector3":case"vector4":return THREE.VectorKeyframeTrack;case"quaternion":return THREE.QuaternionKeyframeTrack;case"integer":case"scalar":case"double":case"float":case"number":return THREE.NumberKeyframeTrack;case"bool":case"boolean":return THREE.BooleanKeyframeTrack;case"string":return THREE.StringKeyframeTrack}throw Error("Unsupported typeName: "+e)},THREE.PropertyBinding=function(e,t){this.rootNode=e,this.trackName=t,this.referenceCount=0,this.originalValue=null;var n=THREE.PropertyBinding.parseTrackName(t);this.directoryName=n.directoryName,this.nodeName=n.nodeName,this.objectName=n.objectName,this.objectIndex=n.objectIndex,this.propertyName=n.propertyName,this.propertyIndex=n.propertyIndex,this.node=THREE.PropertyBinding.findNode(e,this.nodeName)||e,this.cumulativeValue=null,this.cumulativeWeight=0},THREE.PropertyBinding.prototype={constructor:THREE.PropertyBinding,reset:function(){this.cumulativeValue=null,this.cumulativeWeight=0},accumulate:function(e,t){this.isBound||this.bind(),0===this.cumulativeWeight?0<t&&(null===this.cumulativeValue&&(this.cumulativeValue=THREE.AnimationUtils.clone(e)),this.cumulativeWeight=t):(this.cumulativeValue=this.lerpValue(this.cumulativeValue,e,t/(this.cumulativeWeight+t)),this.cumulativeWeight+=t)},unbind:function(){this.isBound&&(this.setValue(this.originalValue),this.triggerDirty=this.equalsValue=this.lerpValue=this.getValue=this.setValue=null,this.isBound=!1)},bind:function(){if(!this.isBound){var e=this.node;if(e){if(this.objectName){if("materials"===this.objectName){if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials}else if("bones"===this.objectName){if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);for(var e=e.skeleton.bones,t=0;t<e.length;t++)if(e[t].name===this.objectIndex){this.objectIndex=t;break}}else{if(void 0===e[this.objectName])return void console.error("  can not bind to objectName of node, undefined",this);e=e[this.objectName]}if(void 0!==this.objectIndex){if(void 0===e[this.objectIndex])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[this.objectIndex]}}var n=e[this.propertyName];if(n){if(void 0!==this.propertyIndex){if("morphTargetInfluences"===this.propertyName)for(e.geometry||console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this),e.geometry.morphTargets||console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this),t=0;t<this.node.geometry.morphTargets.length;t++)if(e.geometry.morphTargets[t].name===this.propertyIndex){this.propertyIndex=t;break}this.setValue=function(e){return!this.equalsValue(n[this.propertyIndex],e)&&(n[this.propertyIndex]=e,!0)},this.getValue=function(){return n[this.propertyIndex]}}else n.copy?(this.setValue=function(e){return!this.equalsValue(n,e)&&(n.copy(e),!0)},this.getValue=function(){return n}):(this.setValue=function(t){return!this.equalsValue(e[this.propertyName],t)&&(e[this.propertyName]=t,!0)},this.getValue=function(){return e[this.propertyName]});void 0!==e.needsUpdate?this.triggerDirty=function(){this.node.needsUpdate=!0}:void 0!==e.matrixWorldNeedsUpdate&&(this.triggerDirty=function(){e.matrixWorldNeedsUpdate=!0}),this.originalValue=this.getValue(),this.equalsValue=THREE.AnimationUtils.getEqualsFunc(this.originalValue),this.lerpValue=THREE.AnimationUtils.getLerpFunc(this.originalValue,!0),this.isBound=!0}else console.error("  trying to update property for track: "+this.nodeName+"."+this.propertyName+" but it wasn't found.",e)}else console.error("  trying to update node for track: "+this.trackName+" but it wasn't found.")}},apply:function(){if(this.isBound||this.bind(),0<this.cumulativeWeight){if(1>this.cumulativeWeight){var e=1-this.cumulativeWeight;this.cumulativeValue=this.lerpValue(this.cumulativeValue,this.originalValue,e/(this.cumulativeWeight+e))}this.setValue(this.cumulativeValue)&&this.triggerDirty&&this.triggerDirty(),this.cumulativeValue=null,this.cumulativeWeight=0}}},THREE.PropertyBinding.parseTrackName=function(e){var t=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_. ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,n=t.exec(e);if(!n)throw Error("cannot parse trackName at all: "+e);if(n.index===t.lastIndex&&t.lastIndex++,t={directoryName:n[1],nodeName:n[3],objectName:n[5],objectIndex:n[7],propertyName:n[9],propertyIndex:n[11]},null===t.propertyName||0===t.propertyName.length)throw Error("can not parse propertyName from trackName: "+e);return t},THREE.PropertyBinding.findNode=function(e,t){function n(e){for(var n=0;n<e.bones.length;n++){var r=e.bones[n];if(r.name===t)return r}return null}function r(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t||(i=r(i.children)))return i}return null}if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var i=n(e.skeleton);if(i)return i}return e.children&&(i=r(e.children))?i:null},THREE.VectorKeyframeTrack=function(e,t){THREE.KeyframeTrack.call(this,e,t),this.result=this.keys[0].value.clone()},THREE.VectorKeyframeTrack.prototype=(0,u.default)(THREE.KeyframeTrack.prototype),THREE.VectorKeyframeTrack.prototype.constructor=THREE.VectorKeyframeTrack,THREE.VectorKeyframeTrack.prototype.setResult=function(e){this.result.copy(e)},THREE.VectorKeyframeTrack.prototype.lerpValues=function(e,t,n){return e.lerp(t,n)},THREE.VectorKeyframeTrack.prototype.compareValues=function(e,t){return e.equals(t)},THREE.VectorKeyframeTrack.prototype.clone=function(){for(var e=[],t=0;t<this.keys.length;t++){var n=this.keys[t];e.push({time:n.time,value:n.value.clone()})}return new THREE.VectorKeyframeTrack(this.name,e)},THREE.VectorKeyframeTrack.parse=function(e){for(var t=THREE["Vector"+e.keys[0].value.length],n=[],r=0;r<e.keys.length;r++){var i=e.keys[r];n.push({value:(new t).fromArray(i.value),time:i.time})}return new THREE.VectorKeyframeTrack(e.name,n)},THREE.QuaternionKeyframeTrack=function(e,t){THREE.KeyframeTrack.call(this,e,t),this.result=this.keys[0].value.clone()},THREE.QuaternionKeyframeTrack.prototype=(0,u.default)(THREE.KeyframeTrack.prototype),THREE.QuaternionKeyframeTrack.prototype.constructor=THREE.QuaternionKeyframeTrack,THREE.QuaternionKeyframeTrack.prototype.setResult=function(e){this.result.copy(e)},THREE.QuaternionKeyframeTrack.prototype.lerpValues=function(e,t,n){return e.slerp(t,n)},THREE.QuaternionKeyframeTrack.prototype.compareValues=function(e,t){return e.equals(t)},THREE.QuaternionKeyframeTrack.prototype.multiply=function(e){for(var t=0;t<this.keys.length;t++)this.keys[t].value.multiply(e);return this},THREE.QuaternionKeyframeTrack.prototype.clone=function(){for(var e=[],t=0;t<this.keys.length;t++){var n=this.keys[t];e.push({time:n.time,value:n.value.clone()})}return new THREE.QuaternionKeyframeTrack(this.name,e)},THREE.QuaternionKeyframeTrack.parse=function(e){for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n];t.push({value:(new THREE.Quaternion).fromArray(r.value),time:r.time})}return new THREE.QuaternionKeyframeTrack(e.name,t)},THREE.StringKeyframeTrack=function(e,t){THREE.KeyframeTrack.call(this,e,t),this.result=this.keys[0].value},THREE.StringKeyframeTrack.prototype=(0,u.default)(THREE.KeyframeTrack.prototype),THREE.StringKeyframeTrack.prototype.constructor=THREE.StringKeyframeTrack,THREE.StringKeyframeTrack.prototype.setResult=function(e){this.result=e},THREE.StringKeyframeTrack.prototype.lerpValues=function(e,t,n){return 1>n?e:t},THREE.StringKeyframeTrack.prototype.compareValues=function(e,t){return e===t},THREE.StringKeyframeTrack.prototype.clone=function(){for(var e=[],t=0;t<this.keys.length;t++){var n=this.keys[t];e.push({time:n.time,value:n.value})}return new THREE.StringKeyframeTrack(this.name,e)},THREE.StringKeyframeTrack.parse=function(e){return new THREE.StringKeyframeTrack(e.name,e.keys)},THREE.BooleanKeyframeTrack=function(e,t){THREE.KeyframeTrack.call(this,e,t),this.result=this.keys[0].value},THREE.BooleanKeyframeTrack.prototype=(0,u.default)(THREE.KeyframeTrack.prototype),THREE.BooleanKeyframeTrack.prototype.constructor=THREE.BooleanKeyframeTrack,THREE.BooleanKeyframeTrack.prototype.setResult=function(e){this.result=e},THREE.BooleanKeyframeTrack.prototype.lerpValues=function(e,t,n){return 1>n?e:t},THREE.BooleanKeyframeTrack.prototype.compareValues=function(e,t){return e===t},THREE.BooleanKeyframeTrack.prototype.clone=function(){for(var e=[],t=0;t<this.keys.length;t++){var n=this.keys[t];e.push({time:n.time,value:n.value})}return new THREE.BooleanKeyframeTrack(this.name,e)},THREE.BooleanKeyframeTrack.parse=function(e){return new THREE.BooleanKeyframeTrack(e.name,e.keys)},THREE.NumberKeyframeTrack=function(e,t){THREE.KeyframeTrack.call(this,e,t),this.result=this.keys[0].value},THREE.NumberKeyframeTrack.prototype=(0,u.default)(THREE.KeyframeTrack.prototype),THREE.NumberKeyframeTrack.prototype.constructor=THREE.NumberKeyframeTrack,THREE.NumberKeyframeTrack.prototype.setResult=function(e){this.result=e},THREE.NumberKeyframeTrack.prototype.lerpValues=function(e,t,n){return e*(1-n)+t*n},THREE.NumberKeyframeTrack.prototype.compareValues=function(e,t){return e===t},THREE.NumberKeyframeTrack.prototype.clone=function(){for(var e=[],t=0;t<this.keys.length;t++){var n=this.keys[t];e.push({time:n.time,value:n.value})}return new THREE.NumberKeyframeTrack(this.name,e)},THREE.NumberKeyframeTrack.parse=function(e){return new THREE.NumberKeyframeTrack(e.name,e.keys)},THREE.Camera=function(){THREE.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.Camera.prototype.constructor=THREE.Camera,THREE.Camera.prototype.getWorldDirection=function(){var e=new THREE.Quaternion;return function(t){return t=t||new THREE.Vector3,this.getWorldQuaternion(e),
t.set(0,0,-1).applyQuaternion(e)}}(),THREE.Camera.prototype.lookAt=function(){var e=new THREE.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),THREE.Camera.prototype.clone=function(){return(new this.constructor).copy(this)},THREE.Camera.prototype.copy=function(e){return THREE.Object3D.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},THREE.CubeCamera=function(e,t,n){THREE.Object3D.call(this),this.type="CubeCamera";var r=new THREE.PerspectiveCamera(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new THREE.Vector3(1,0,0)),this.add(r);var i=new THREE.PerspectiveCamera(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new THREE.Vector3(-1,0,0)),this.add(i);var o=new THREE.PerspectiveCamera(90,1,e,t);o.up.set(0,0,1),o.lookAt(new THREE.Vector3(0,1,0)),this.add(o);var a=new THREE.PerspectiveCamera(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new THREE.Vector3(0,-1,0)),this.add(a);var s=new THREE.PerspectiveCamera(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new THREE.Vector3(0,0,1)),this.add(s);var l=new THREE.PerspectiveCamera(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new THREE.Vector3(0,0,-1)),this.add(l),this.renderTarget=new THREE.WebGLRenderTargetCube(n,n,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,u=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,s,n),n.texture.generateMipmaps=u,n.activeCubeFace=5,e.render(t,l,n),e.setRenderTarget(null)}},THREE.CubeCamera.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.CubeCamera.prototype.constructor=THREE.CubeCamera,THREE.OrthographicCamera=function(e,t,n,r,i,o){THREE.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=(0,u.default)(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera,THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(n-e,n+e,r+t,r-t,this.near,this.far)},THREE.OrthographicCamera.prototype.copy=function(e){return THREE.Camera.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this},THREE.OrthographicCamera.prototype.toJSON=function(e){return e=THREE.Object3D.prototype.toJSON.call(this,e),e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,e},THREE.PerspectiveCamera=function(e,t,n,r){THREE.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=(0,u.default)(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera,THREE.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*THREE.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,n,r,i,o){this.fullWidth=e,this.fullHeight=t,this.x=n,this.y=r,this.width=i,this.height=o,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=THREE.Math.radToDeg(2*Math.atan(Math.tan(.5*THREE.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var t=this.fullWidth/this.fullHeight,e=Math.tan(THREE.Math.degToRad(.5*e))*this.near,n=-e,r=t*n,t=Math.abs(t*e-r),n=Math.abs(e-n);this.projectionMatrix.makeFrustum(r+this.x*t/this.fullWidth,r+(this.x+this.width)*t/this.fullWidth,e-(this.y+this.height)*n/this.fullHeight,e-this.y*n/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.copy=function(e){return THREE.Camera.prototype.copy.call(this,e),this.fov=e.fov,this.aspect=e.aspect,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this},THREE.PerspectiveCamera.prototype.toJSON=function(e){return e=THREE.Object3D.prototype.toJSON.call(this,e),e.object.zoom=this.zoom,e.object.fov=this.fov,e.object.aspect=this.aspect,e.object.near=this.near,e.object.far=this.far,e},THREE.Light=function(e){THREE.Object3D.call(this),this.type="Light",this.color=new THREE.Color(e),this.receiveShadow=void 0},THREE.Light.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.Light.prototype.constructor=THREE.Light,(0,p.default)(THREE.Light.prototype,{onlyShadow:{set:function(e){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){this.shadow.camera.far=e}},shadowCameraVisible:{set:function(e){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow ) instead.")}},shadowBias:{set:function(e){this.shadow.bias=e}},shadowDarkness:{set:function(e){this.shadow.darkness=e}},shadowMapWidth:{set:function(e){this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){this.shadow.mapSize.height=e}}}),THREE.Light.prototype.copy=function(e){return THREE.Object3D.prototype.copy.call(this,e),this.color.copy(e.color),this},THREE.Light.prototype.toJSON=function(e){return e=THREE.Object3D.prototype.toJSON.call(this,e),e.object.color=this.color.getHex(),void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.intensity&&(e.object.intensity=this.intensity),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.exponent&&(e.object.exponent=this.exponent),e},THREE.LightShadow=function(e){this.camera=e,this.bias=0,this.darkness=1,this.mapSize=new THREE.Vector2(512,512),this.matrix=this.map=null},THREE.LightShadow.prototype={constructor:THREE.LightShadow,copy:function(e){this.camera=e.camera.clone(),this.bias=e.bias,this.darkness=e.darkness,this.mapSize.copy(e.mapSize)},clone:function(){return(new this.constructor).copy(this)}},THREE.AmbientLight=function(e){THREE.Light.call(this,e),this.type="AmbientLight",this.castShadow=void 0},THREE.AmbientLight.prototype=(0,u.default)(THREE.Light.prototype),THREE.AmbientLight.prototype.constructor=THREE.AmbientLight,THREE.DirectionalLight=function(e,t){THREE.Light.call(this,e),this.type="DirectionalLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.shadow=new THREE.LightShadow(new THREE.OrthographicCamera(-500,500,500,-500,50,5e3))},THREE.DirectionalLight.prototype=(0,u.default)(THREE.Light.prototype),THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight,THREE.DirectionalLight.prototype.copy=function(e){return THREE.Light.prototype.copy.call(this,e),this.intensity=e.intensity,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this},THREE.HemisphereLight=function(e,t,n){THREE.Light.call(this,e),this.type="HemisphereLight",this.castShadow=void 0,this.position.set(0,1,0),this.updateMatrix(),this.groundColor=new THREE.Color(t),this.intensity=void 0!==n?n:1},THREE.HemisphereLight.prototype=(0,u.default)(THREE.Light.prototype),THREE.HemisphereLight.prototype.constructor=THREE.HemisphereLight,THREE.HemisphereLight.prototype.copy=function(e){return THREE.Light.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this.intensity=e.intensity,this},THREE.PointLight=function(e,t,n,r){THREE.Light.call(this,e),this.type="PointLight",this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(90,1,1,500))},THREE.PointLight.prototype=(0,u.default)(THREE.Light.prototype),THREE.PointLight.prototype.constructor=THREE.PointLight,THREE.PointLight.prototype.copy=function(e){return THREE.Light.prototype.copy.call(this,e),this.intensity=e.intensity,this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this},THREE.SpotLight=function(e,t,n,r,i,o){THREE.Light.call(this,e),this.type="SpotLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.exponent=void 0!==i?i:10,this.decay=void 0!==o?o:1,this.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(50,1,50,5e3))},THREE.SpotLight.prototype=(0,u.default)(THREE.Light.prototype),THREE.SpotLight.prototype.constructor=THREE.SpotLight,THREE.SpotLight.prototype.copy=function(e){return THREE.Light.prototype.copy.call(this,e),this.intensity=e.intensity,this.distance=e.distance,this.angle=e.angle,this.exponent=e.exponent,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this},THREE.Cache={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},THREE.Loader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,extractUrlBase:function(e){return e=e.split("/"),1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e,t,n;return function(r,i,o){function a(e,n,r,a,s){e=i+e;var u=THREE.Loader.Handlers.get(e);return null!==u?e=u.load(e):(t.setCrossOrigin(o),e=t.load(e)),void 0!==n&&(e.repeat.fromArray(n),1!==n[0]&&(e.wrapS=THREE.RepeatWrapping),1!==n[1]&&(e.wrapT=THREE.RepeatWrapping)),void 0!==r&&e.offset.fromArray(r),void 0!==a&&("repeat"===a[0]&&(e.wrapS=THREE.RepeatWrapping),"mirror"===a[0]&&(e.wrapS=THREE.MirroredRepeatWrapping),"repeat"===a[1]&&(e.wrapT=THREE.RepeatWrapping),"mirror"===a[1]&&(e.wrapT=THREE.MirroredRepeatWrapping)),void 0!==s&&(e.anisotropy=s),n=THREE.Math.generateUUID(),l[n]=e,n}void 0===e&&(e=new THREE.Color),void 0===t&&(t=new THREE.TextureLoader),void 0===n&&(n=new THREE.MaterialLoader);var s,l={},u={uuid:THREE.Math.generateUUID(),type:"MeshLambertMaterial"};for(s in r){var c=r[s];switch(s){case"DbgColor":u.color=c;break;case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":u.name=c;break;case"blending":u.blending=THREE[c];break;case"colorDiffuse":u.color=e.fromArray(c).getHex();break;case"colorSpecular":u.specular=e.fromArray(c).getHex();break;case"colorEmissive":u.emissive=e.fromArray(c).getHex();break;case"specularCoef":u.shininess=c;break;case"shading":"basic"===c.toLowerCase()&&(u.type="MeshBasicMaterial"),"phong"===c.toLowerCase()&&(u.type="MeshPhongMaterial");break;case"mapDiffuse":u.map=a(c,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapLight":u.lightMap=a(c,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":u.aoMap=a(c,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":u.bumpMap=a(c,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=c;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":u.normalMap=a(c,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=[c,c];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":u.specularMap=a(c,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapAlpha":u.alphaMap=a(c,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":u.side=THREE.BackSide;break;case"doubleSided":u.side=THREE.DoubleSide;break;case"transparency":console.warn("THREE.Loader: transparency has been renamed to opacity"),u.opacity=c;break;case"opacity":case"transparent":case"depthTest":case"depthWrite":case"transparent":case"visible":case"wireframe":u[s]=c;break;case"vertexColors":!0===c&&(u.vertexColors=THREE.VertexColors),"face"===c&&(u.vertexColors=THREE.FaceColors);break;default:console.error("Loader.createMaterial: Unsupported",s,c)}}return"MeshPhongMaterial"!==u.type&&delete u.specular,1>u.opacity&&(u.transparent=!0),n.setTextures(l),n.parse(u)}}()},THREE.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n+1];if(t[n].test(e))return i}return null}},THREE.XHRLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(e,t,n,r){var i=this,o=THREE.Cache.get(e);if(void 0!==o)return t&&setTimeout(function(){t(o)},0),o;var a=new XMLHttpRequest;return a.open("GET",e,!0),a.addEventListener("load",function(n){n=n.target.response,THREE.Cache.add(e,n),t&&t(n),i.manager.itemEnd(e)},!1),void 0!==n&&a.addEventListener("progress",function(e){n(e)},!1),a.addEventListener("error",function(t){r&&r(t),i.manager.itemError(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(a.responseType=this.responseType),void 0!==this.withCredentials&&(a.withCredentials=this.withCredentials),a.send(null),i.manager.itemStart(e),a},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e},setWithCredentials:function(e){this.withCredentials=e}},THREE.ImageLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(e,t,n,r){var i=this,o=THREE.Cache.get(e);if(void 0!==o)return i.manager.itemStart(e),t?setTimeout(function(){t(o),i.manager.itemEnd(e)},0):i.manager.itemEnd(e),o;var a=document.createElement("img");return a.addEventListener("load",function(n){THREE.Cache.add(e,this),t&&t(this),i.manager.itemEnd(e)},!1),void 0!==n&&a.addEventListener("progress",function(e){n(e)},!1),a.addEventListener("error",function(t){r&&r(t),i.manager.itemError(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.JSONLoader=function(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.withCredentials=!1},THREE.JSONLoader.prototype={constructor:THREE.JSONLoader,get statusDomElement(){return void 0===this._statusDomElement&&(this._statusDomElement=document.createElement("div")),console.warn("THREE.JSONLoader: .statusDomElement has been removed."),this._statusDomElement},load:function(e,t,n,r){var i=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:THREE.Loader.prototype.extractUrlBase(e);n=new THREE.XHRLoader(this.manager),n.setCrossOrigin(this.crossOrigin),n.setWithCredentials(this.withCredentials),n.load(e,function(n){n=JSON.parse(n);var r=n.metadata;if(void 0!==r){if("object"===r.type)return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===r.type)return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}n=i.parse(n,o),t(n.geometry,n.materials)})},setCrossOrigin:function(e){this.crossOrigin=e},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){var n=new THREE.Geometry,r=void 0!==e.scale?1/e.scale:1;return function(t){var r,i,o,a,s,l,u,c,h,d,p,f,m,v=e.faces;l=e.vertices;var g=e.normals,E=e.colors,y=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&y++;for(r=0;r<y;r++)n.faceVertexUvs[r]=[]}for(a=0,s=l.length;a<s;)r=new THREE.Vector3,r.x=l[a++]*t,r.y=l[a++]*t,r.z=l[a++]*t,n.vertices.push(r);for(a=0,s=v.length;a<s;)if(t=v[a++],h=1&t,o=2&t,r=8&t,u=16&t,d=32&t,l=64&t,t&=128,h){if(h=new THREE.Face3,h.a=v[a],h.b=v[a+1],h.c=v[a+3],p=new THREE.Face3,p.a=v[a+1],p.b=v[a+2],p.c=v[a+3],a+=4,o&&(o=v[a++],h.materialIndex=o,p.materialIndex=o),o=n.faces.length,r)for(r=0;r<y;r++)for(f=e.uvs[r],n.faceVertexUvs[r][o]=[],n.faceVertexUvs[r][o+1]=[],i=0;4>i;i++)c=v[a++],m=f[2*c],c=f[2*c+1],m=new THREE.Vector2(m,c),2!==i&&n.faceVertexUvs[r][o].push(m),0!==i&&n.faceVertexUvs[r][o+1].push(m);if(u&&(u=3*v[a++],h.normal.set(g[u++],g[u++],g[u]),p.normal.copy(h.normal)),d)for(r=0;4>r;r++)u=3*v[a++],d=new THREE.Vector3(g[u++],g[u++],g[u]),2!==r&&h.vertexNormals.push(d),0!==r&&p.vertexNormals.push(d);if(l&&(l=v[a++],l=E[l],h.color.setHex(l),p.color.setHex(l)),t)for(r=0;4>r;r++)l=v[a++],l=E[l],2!==r&&h.vertexColors.push(new THREE.Color(l)),0!==r&&p.vertexColors.push(new THREE.Color(l));n.faces.push(h),n.faces.push(p)}else{if(h=new THREE.Face3,h.a=v[a++],h.b=v[a++],h.c=v[a++],o&&(o=v[a++],h.materialIndex=o),o=n.faces.length,r)for(r=0;r<y;r++)for(f=e.uvs[r],n.faceVertexUvs[r][o]=[],i=0;3>i;i++)c=v[a++],m=f[2*c],c=f[2*c+1],m=new THREE.Vector2(m,c),n.faceVertexUvs[r][o].push(m);if(u&&(u=3*v[a++],h.normal.set(g[u++],g[u++],g[u])),d)for(r=0;3>r;r++)u=3*v[a++],d=new THREE.Vector3(g[u++],g[u++],g[u]),h.vertexNormals.push(d);if(l&&(l=v[a++],h.color.setHex(E[l])),t)for(r=0;3>r;r++)l=v[a++],h.vertexColors.push(new THREE.Color(E[l]));n.faces.push(h)}}(r),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=t)n.skinWeights.push(new THREE.Vector4(e.skinWeights[r],1<t?e.skinWeights[r+1]:0,2<t?e.skinWeights[r+2]:0,3<t?e.skinWeights[r+3]:0));if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=t)n.skinIndices.push(new THREE.Vector4(e.skinIndices[r],1<t?e.skinIndices[r+1]:0,2<t?e.skinIndices[r+2]:0,3<t?e.skinIndices[r+3]:0));n.bones=e.bones,n.bones&&0<n.bones.length&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&console.warn("When skinning, number of vertices ("+n.vertices.length+"), skinIndices ("+n.skinIndices.length+"), and skinWeights ("+n.skinWeights.length+") should match.")}(),function(t){if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;r<i;r++){n.morphTargets[r]={},n.morphTargets[r].name=e.morphTargets[r].name,n.morphTargets[r].vertices=[];for(var o=n.morphTargets[r].vertices,a=e.morphTargets[r].vertices,s=0,l=a.length;s<l;s+=3){var u=new THREE.Vector3;u.x=a[s]*t,u.y=a[s+1]*t,u.z=a[s+2]*t,o.push(u)}}if(void 0!==e.morphColors&&0<e.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),t=n.faces,o=e.morphColors[0].colors,r=0,i=t.length;r<i;r++)t[r].color.fromArray(o,3*r)}(r),function(){var t=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var o=THREE.AnimationClip.parseAnimation(r[i],n.bones);o&&t.push(o)}n.morphTargets&&(r=THREE.AnimationClip.CreateClipsFromMorphTargetSequences(n.morphTargets,10),t=t.concat(r)),0<t.length&&(n.animations=t)}(),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:(r=THREE.Loader.prototype.initMaterials(e.materials,t,this.crossOrigin),{geometry:n,materials:r})}},THREE.LoadingManager=function(e,t,n){var r=this,i=!1,o=0,a=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad)&&r.onLoad()},this.itemError=function(e){void 0!==r.onError&&r.onError(e)}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(e,t,n,r){var i=this,o=new THREE.XHRLoader(i.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE.BufferGeometry,n=e.data.index;void 0!==n&&(n=new self[n.type](n.array),t.setIndex(new THREE.BufferAttribute(n,1)));var r,i=e.data.attributes;for(r in i){var o=i[r],n=new self[o.type](o.array);t.addAttribute(r,new THREE.BufferAttribute(n,o.itemSize))}if(r=e.data.groups||e.data.drawcalls||e.data.offsets,void 0!==r)for(n=0,i=r.length;n!==i;++n)o=r[n],t.addGroup(o.start,o.count);return e=e.data.boundingSphere,void 0!==e&&(r=new THREE.Vector3,void 0!==e.center&&r.fromArray(e.center),t.boundingSphere=new THREE.Sphere(r,e.radius)),t}},THREE.MaterialLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.textures={}},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(e,t,n,r){var i=this,o=new THREE.XHRLoader(i.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},setTextures:function(e){this.textures=e},getTexture:function(e){var t=this.textures;return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]},parse:function(e){var t=new THREE[e.type];if(t.uuid=e.uuid,void 0!==e.name&&(t.name=e.name),void 0!==e.color&&t.color.setHex(e.color),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.shading&&(t.shading=e.shading),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.alphaTest&&(t.alphaTest=e.alphaTest),void 0!==e.depthTest&&(t.depthTest=e.depthTest),void 0!==e.depthWrite&&(t.depthWrite=e.depthWrite),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(t.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.size&&(t.size=e.size),void 0!==e.sizeAttenuation&&(t.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(t.map=this.getTexture(e.map)),void 0!==e.alphaMap&&(t.alphaMap=this.getTexture(e.alphaMap),t.transparent=!0),void 0!==e.bumpMap&&(t.bumpMap=this.getTexture(e.bumpMap)),void 0!==e.bumpScale&&(t.bumpScale=e.bumpScale),void 0!==e.normalMap&&(t.normalMap=this.getTexture(e.normalMap)),e.normalScale&&(t.normalScale=new THREE.Vector2(e.normalScale,e.normalScale)),void 0!==e.displacementMap&&(t.displacementMap=this.getTexture(e.displacementMap)),void 0!==e.displacementScale&&(t.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(t.displacementBias=e.displacementBias),void 0!==e.specularMap&&(t.specularMap=this.getTexture(e.specularMap)),void 0!==e.envMap&&(t.envMap=this.getTexture(e.envMap),t.combine=THREE.MultiplyOperation),e.reflectivity&&(t.reflectivity=e.reflectivity),void 0!==e.lightMap&&(t.lightMap=this.getTexture(e.lightMap)),void 0!==e.lightMapIntensity&&(t.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(t.aoMap=this.getTexture(e.aoMap)),void 0!==e.aoMapIntensity&&(t.aoMapIntensity=e.aoMapIntensity),void 0!==e.materials)for(var n=0,r=e.materials.length;n<r;n++)t.materials.push(this.parse(e.materials[n]));return t}},THREE.ObjectLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.texturePath=""},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this,o=new THREE.XHRLoader(i.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){i.parse(JSON.parse(e),t)},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),r=this.parseImages(e.images,function(){void 0!==t&&t(i)}),r=this.parseTextures(e.textures,r),r=this.parseMaterials(e.materials,r),i=this.parseObject(e.object,n,r);return e.animations&&(i.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0===t||t(i),i},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new THREE.JSONLoader,r=new THREE.BufferGeometryLoader,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new THREE[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"CubeGeometry":a=new THREE.BoxGeometry(s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleBufferGeometry":a=new THREE.CircleBufferGeometry(s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CircleGeometry":a=new THREE.CircleGeometry(s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":a=new THREE.CylinderGeometry(s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":a=new THREE.SphereGeometry(s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"SphereBufferGeometry":a=new THREE.SphereBufferGeometry(s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":a=new THREE.DodecahedronGeometry(s.radius,s.detail);break;case"IcosahedronGeometry":a=new THREE.IcosahedronGeometry(s.radius,s.detail);break;case"OctahedronGeometry":a=new THREE.OctahedronGeometry(s.radius,s.detail);break;case"TetrahedronGeometry":a=new THREE.TetrahedronGeometry(s.radius,s.detail);break;case"RingGeometry":a=new THREE.RingGeometry(s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":a=new THREE.TorusGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":a=new THREE.TorusKnotGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.p,s.q,s.heightScale);break;case"BufferGeometry":a=r.parse(s);break;case"Geometry":a=n.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new THREE.MaterialLoader;r.setTextures(t);for(var i=0,o=e.length;i<o;i++){var a=r.parse(e[i]);n[a.uuid]=a}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=THREE.AnimationClip.parse(e[n]);t.push(r)}return t},parseImages:function(e,t){function n(e){return r.manager.itemStart(e),a.load(e,function(){r.manager.itemEnd(e)})}var r=this,i={};if(void 0!==e&&0<e.length){var o=new THREE.LoadingManager(t),a=new THREE.ImageLoader(o);a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var l=e[o],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:r.texturePath+l.url;i[l.uuid]=n(u)}}return i},parseTextures:function(e,t){function n(e){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),THREE[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=new THREE.Texture(t[a.image]);s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping)),void 0!==a.offset&&(s.offset=new THREE.Vector2(a.offset[0],a.offset[1])),void 0!==a.repeat&&(s.repeat=new THREE.Vector2(a.repeat[0],a.repeat[1])),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),Array.isArray(a.wrap)&&(s.wrapS=n(a.wrap[0]),s.wrapT=n(a.wrap[1])),r[a.uuid]=s}return r},parseObject:function(){var e=new THREE.Matrix4;return function(t,n,r){function i(e){return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),n[e]}function o(e){if(void 0!==e)return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}var a;switch(t.type){case"Scene":a=new THREE.Scene;break;case"PerspectiveCamera":a=new THREE.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":a=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":a=new THREE.AmbientLight(t.color);break;case"DirectionalLight":a=new THREE.DirectionalLight(t.color,t.intensity);break;case"PointLight":a=new THREE.PointLight(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":a=new THREE.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent,t.decay);break;case"HemisphereLight":a=new THREE.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":a=new THREE.Mesh(i(t.geometry),o(t.material));break;case"LOD":a=new THREE.LOD;break;case"Line":a=new THREE.Line(i(t.geometry),o(t.material),t.mode);break;case"PointCloud":case"Points":a=new THREE.Points(i(t.geometry),o(t.material));break;case"Sprite":a=new THREE.Sprite(o(t.material));break;case"Group":a=new THREE.Group;break;default:a=new THREE.Object3D}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.children)for(var s in t.children)a.add(this.parseObject(t.children[s],n,r));if("LOD"===t.type){t=t.levels;for(var l=0;l<t.length;l++){var u=t[l];s=a.getObjectByProperty("uuid",u.object),void 0!==s&&a.addLevel(s,u.distance)}}return a}}()},THREE.TextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(e,t,n,r){var i=new THREE.Texture,o=new THREE.ImageLoader(this.manager);return o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.CubeTextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.CubeTextureLoader.prototype={constructor:THREE.CubeTextureLoader,load:function(e,t,n,r){
function i(n){a.load(e[n],function(e){o.images[n]=e,s++,6===s&&(o.needsUpdate=!0,t&&t(o))},void 0,r)}var o=new THREE.CubeTexture([]),a=new THREE.ImageLoader;a.setCrossOrigin(this.crossOrigin);var s=0;for(n=0;n<e.length;++n)i(n);return o},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this._parser=null},THREE.BinaryTextureLoader.prototype={constructor:THREE.BinaryTextureLoader,load:function(e,t,n,r){var i=this,o=new THREE.DataTexture,a=new THREE.XHRLoader(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setResponseType("arraybuffer"),a.load(e,function(e){(e=i._parser(e))&&(void 0!==e.image?o.image=e.image:void 0!==e.data&&(o.image.width=e.width,o.image.height=e.height,o.image.data=e.data),o.wrapS=void 0!==e.wrapS?e.wrapS:THREE.ClampToEdgeWrapping,o.wrapT=void 0!==e.wrapT?e.wrapT:THREE.ClampToEdgeWrapping,o.magFilter=void 0!==e.magFilter?e.magFilter:THREE.LinearFilter,o.minFilter=void 0!==e.minFilter?e.minFilter:THREE.LinearMipMapLinearFilter,o.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(o.format=e.format),void 0!==e.type&&(o.type=e.type),void 0!==e.mipmaps&&(o.mipmaps=e.mipmaps),1===e.mipmapCount&&(o.minFilter=THREE.LinearFilter),o.needsUpdate=!0,t&&t(o,e))},n,r),o},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.CompressedTextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this._parser=null},THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(e,t,n,r){var i=this,o=[],a=new THREE.CompressedTexture;a.image=o;var s=new THREE.XHRLoader(this.manager);if(s.setCrossOrigin(this.crossOrigin),s.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,u=function(u){s.load(e[u],function(e){e=i._parser(e,!0),o[u]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},l+=1,6===l&&(1===e.mipmapCount&&(a.minFilter=THREE.LinearFilter),a.format=e.format,a.needsUpdate=!0,t&&t(a))},n,r)},c=0,h=e.length;c<h;++c)u(c);else s.load(e,function(e){if(e=i._parser(e,!0),e.isCubemap)for(var n=e.mipmaps.length/e.mipmapCount,r=0;r<n;r++){o[r]={mipmaps:[]};for(var s=0;s<e.mipmapCount;s++)o[r].mipmaps.push(e.mipmaps[r*e.mipmapCount+s]),o[r].format=e.format,o[r].width=e.width,o[r].height=e.height}else a.image.width=e.width,a.image.height=e.height,a.mipmaps=e.mipmaps;1===e.mipmapCount&&(a.minFilter=THREE.LinearFilter),a.format=e.format,a.needsUpdate=!0,t&&t(a)},n,r);return a},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Material",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=THREE.LessEqualDepth,this.colorWrite=this.depthWrite=this.depthTest=!0,this.precision=null,this.polygonOffset=!1,this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0,this._needsUpdate=this.visible=!0},THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0===n)console.warn("THREE.Material: '"+t+"' parameter is undefined.");else{var r=this[t];void 0===r?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):r instanceof THREE.Color?r.set(n):r instanceof THREE.Vector3&&n instanceof THREE.Vector3?r.copy(n):this[t]="overdraw"===t?Number(n):n}}},toJSON:function(e){var t={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};return t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),this.color instanceof THREE.Color&&(t.color=this.color.getHex()),this.emissive instanceof THREE.Color&&(t.emissive=this.emissive.getHex()),this.specular instanceof THREE.Color&&(t.specular=this.specular.getHex()),void 0!==this.shininess&&(t.shininess=this.shininess),this.map instanceof THREE.Texture&&(t.map=this.map.toJSON(e).uuid),this.alphaMap instanceof THREE.Texture&&(t.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap instanceof THREE.Texture&&(t.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap instanceof THREE.Texture&&(t.bumpMap=this.bumpMap.toJSON(e).uuid,t.bumpScale=this.bumpScale),this.normalMap instanceof THREE.Texture&&(t.normalMap=this.normalMap.toJSON(e).uuid,t.normalScale=this.normalScale),this.displacementMap instanceof THREE.Texture&&(t.displacementMap=this.displacementMap.toJSON(e).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.specularMap instanceof THREE.Texture&&(t.specularMap=this.specularMap.toJSON(e).uuid),this.envMap instanceof THREE.Texture&&(t.envMap=this.envMap.toJSON(e).uuid,t.reflectivity=this.reflectivity),void 0!==this.size&&(t.size=this.size),void 0!==this.sizeAttenuation&&(t.sizeAttenuation=this.sizeAttenuation),void 0!==this.vertexColors&&this.vertexColors!==THREE.NoColors&&(t.vertexColors=this.vertexColors),void 0!==this.shading&&this.shading!==THREE.SmoothShading&&(t.shading=this.shading),void 0!==this.blending&&this.blending!==THREE.NormalBlending&&(t.blending=this.blending),void 0!==this.side&&this.side!==THREE.FrontSide&&(t.side=this.side),1>this.opacity&&(t.opacity=this.opacity),!0===this.transparent&&(t.transparent=this.transparent),0<this.alphaTest&&(t.alphaTest=this.alphaTest),!0===this.wireframe&&(t.wireframe=this.wireframe),1<this.wireframeLinewidth&&(t.wireframeLinewidth=this.wireframeLinewidth),t},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.side=e.side,this.opacity=e.opacity,this.transparent=e.transparent,this.blending=e.blending,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.overdraw=e.overdraw,this.visible=e.visible,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})},get wrapAround(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set wrapAround(e){console.warn("THREE."+this.type+": .wrapAround has been removed.")},get wrapRGB(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new THREE.Color}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(e){THREE.Material.call(this),this.type="LineBasicMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.LineBasicMaterial.prototype=(0,u.default)(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial,THREE.LineBasicMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.vertexColors=e.vertexColors,this.fog=e.fog,this},THREE.LineDashedMaterial=function(e){THREE.Material.call(this),this.type="LineDashedMaterial",this.color=new THREE.Color(16777215),this.scale=this.linewidth=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineDashedMaterial.prototype=(0,u.default)(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial,THREE.LineDashedMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this.vertexColors=e.vertexColors,this.fog=e.fog,this},THREE.MeshBasicMaterial=function(e){THREE.Material.call(this),this.type="MeshBasicMaterial",this.color=new THREE.Color(16777215),this.aoMap=this.map=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphTargets=this.skinning=!1,this.setValues(e)},THREE.MeshBasicMaterial.prototype=(0,u.default)(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial,THREE.MeshBasicMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},THREE.MeshLambertMaterial=function(e){THREE.Material.call(this),this.type="MeshLambertMaterial",this.color=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.envMap=this.alphaMap=this.specularMap=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)},THREE.MeshLambertMaterial.prototype=(0,u.default)(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial,THREE.MeshLambertMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.emissive.copy(e.emissive),this.map=e.map,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},THREE.MeshPhongMaterial=function(e){THREE.Material.call(this),this.type="MeshPhongMaterial",this.color=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.metal=!1,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)},THREE.MeshPhongMaterial.prototype=(0,u.default)(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial,THREE.MeshPhongMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.emissive.copy(e.emissive),this.specular.copy(e.specular),this.shininess=e.shininess,this.metal=e.metal,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissiveMap=e.emissiveMap,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},THREE.MeshDepthMaterial=function(e){THREE.Material.call(this),this.type="MeshDepthMaterial",this.wireframe=this.morphTargets=!1,this.wireframeLinewidth=1,this.setValues(e)},THREE.MeshDepthMaterial.prototype=(0,u.default)(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial,THREE.MeshDepthMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},THREE.MeshNormalMaterial.prototype=(0,u.default)(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial,THREE.MeshNormalMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},THREE.MultiMaterial=function(e){this.uuid=THREE.Math.generateUUID(),this.type="MultiMaterial",this.materials=e instanceof Array?e:[],this.visible=!0},THREE.MultiMaterial.prototype={constructor:THREE.MultiMaterial,toJSON:function(){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},t=0,n=this.materials.length;t<n;t++)e.materials.push(this.materials[t].toJSON());return e.visible=this.visible,e},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}},THREE.MeshFaceMaterial=THREE.MultiMaterial,THREE.PointsMaterial=function(e){THREE.Material.call(this),this.type="PointsMaterial",this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.PointsMaterial.prototype=(0,u.default)(THREE.Material.prototype),THREE.PointsMaterial.prototype.constructor=THREE.PointsMaterial,THREE.PointsMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.vertexColors=e.vertexColors,this.fog=e.fog,this},THREE.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new THREE.PointsMaterial(e)},THREE.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new THREE.PointsMaterial(e)},THREE.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new THREE.PointsMaterial(e)},THREE.ShaderMaterial=function(e){THREE.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.vertexColors=THREE.NoColors,this.derivatives=this.morphNormals=this.morphTargets=this.skinning=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))},THREE.ShaderMaterial.prototype=(0,u.default)(THREE.Material.prototype),THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial,THREE.ShaderMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.attributes=e.attributes,this.defines=e.defines,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.derivatives=e.derivatives,this},THREE.ShaderMaterial.prototype.toJSON=function(e){return e=THREE.Material.prototype.toJSON.call(this,e),e.uniforms=this.uniforms,e.attributes=this.attributes,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},THREE.RawShaderMaterial=function(e){THREE.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},THREE.RawShaderMaterial.prototype=(0,u.default)(THREE.ShaderMaterial.prototype),THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial,THREE.SpriteMaterial=function(e){THREE.Material.call(this),this.type="SpriteMaterial",this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},THREE.SpriteMaterial.prototype=(0,u.default)(THREE.Material.prototype),THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial,THREE.SpriteMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.fog=e.fog,this},THREE.Texture=function(e,t,n,r,i,o,a,s,l){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++}),this.uuid=THREE.Math.generateUUID(),this.sourceFile=this.name="",this.image=void 0!==e?e:THREE.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:THREE.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==i?i:THREE.LinearFilter,this.minFilter=void 0!==o?o:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:THREE.RGBAFormat,this.type=void 0!==s?s:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.version=0,this.onUpdate=null},THREE.Texture.DEFAULT_IMAGE=void 0,THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping;THREE.Texture.prototype={constructor:THREE.Texture,set needsUpdate(e){!0===e&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this},toJSON:function(e){if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var t={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=THREE.Math.generateUUID()),void 0===e.images[n.uuid]){var r,i=e.images,o=n.uuid,a=n.uuid;void 0!==n.toDataURL?r=n:(r=document.createElement("canvas"),r.width=n.width,r.height=n.height,r.getContext("2d").drawImage(n,0,0,n.width,n.height)),r=2048<r.width||2048<r.height?r.toDataURL("image/jpeg",.6):r.toDataURL("image/png"),i[o]={uuid:a,url:r}}t.image=n.uuid}return e.textures[this.uuid]=t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===THREE.UVMapping){if(e.multiply(this.repeat),e.add(this.offset),0>e.x||1<e.x)switch(this.wrapS){case THREE.RepeatWrapping:e.x-=Math.floor(e.x);break;case THREE.ClampToEdgeWrapping:e.x=0>e.x?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x-=Math.floor(e.x)}if(0>e.y||1<e.y)switch(this.wrapT){case THREE.RepeatWrapping:e.y-=Math.floor(e.y);break;case THREE.ClampToEdgeWrapping:e.y=0>e.y?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y-=Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CanvasTexture=function(e,t,n,r,i,o,a,s,l){THREE.Texture.call(this,e,t,n,r,i,o,a,s,l),this.needsUpdate=!0},THREE.CanvasTexture.prototype=(0,u.default)(THREE.Texture.prototype),THREE.CanvasTexture.prototype.constructor=THREE.CanvasTexture,THREE.CubeTexture=function(e,t,n,r,i,o,a,s,l){t=void 0!==t?t:THREE.CubeReflectionMapping,THREE.Texture.call(this,e,t,n,r,i,o,a,s,l),this.images=e,this.flipY=!1},THREE.CubeTexture.prototype=(0,u.default)(THREE.Texture.prototype),THREE.CubeTexture.prototype.constructor=THREE.CubeTexture,THREE.CubeTexture.prototype.copy=function(e){return THREE.Texture.prototype.copy.call(this,e),this.images=e.images,this},THREE.CompressedTexture=function(e,t,n,r,i,o,a,s,l,u,c){THREE.Texture.call(this,null,o,a,s,l,u,r,i,c),this.image={width:t,height:n},this.mipmaps=e,this.generateMipmaps=this.flipY=!1},THREE.CompressedTexture.prototype=(0,u.default)(THREE.Texture.prototype),THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture,THREE.DataTexture=function(e,t,n,r,i,o,a,s,l,u,c){THREE.Texture.call(this,null,o,a,s,l,u,r,i,c),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:THREE.NearestFilter,this.minFilter=void 0!==u?u:THREE.NearestFilter,this.generateMipmaps=this.flipY=!1},THREE.DataTexture.prototype=(0,u.default)(THREE.Texture.prototype),THREE.DataTexture.prototype.constructor=THREE.DataTexture,THREE.VideoTexture=function(e,t,n,r,i,o,a,s,l){function u(){requestAnimationFrame(u),e.readyState===e.HAVE_ENOUGH_DATA&&(c.needsUpdate=!0)}THREE.Texture.call(this,e,t,n,r,i,o,a,s,l),this.generateMipmaps=!1;var c=this;u()},THREE.VideoTexture.prototype=(0,u.default)(THREE.Texture.prototype),THREE.VideoTexture.prototype.constructor=THREE.VideoTexture,THREE.Group=function(){THREE.Object3D.call(this),this.type="Group"},THREE.Group.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.Group.prototype.constructor=THREE.Group,THREE.Points=function(e,t){THREE.Object3D.call(this),this.type="Points",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.PointsMaterial({color:16777215*Math.random()})},THREE.Points.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.Points.prototype.constructor=THREE.Points,THREE.Points.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray;return function(n,r){function i(e,i){var a=t.distanceSqToPoint(e);if(a<l){var s=t.closestPointToPoint(e);s.applyMatrix4(o.matrixWorld);var u=n.ray.origin.distanceTo(s);u<n.near||u>n.far||r.push({distance:u,distanceToRay:Math.sqrt(a),point:s.clone(),index:i,face:null,object:o})}}var o=this,a=o.geometry,s=n.params.Points.threshold;if(e.getInverse(this.matrixWorld),t.copy(n.ray).applyMatrix4(e),null===a.boundingBox||!1!==t.isIntersectionBox(a.boundingBox)){var s=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,s=new THREE.Vector3;if(a instanceof THREE.BufferGeometry){var u=a.index,a=a.attributes.position.array;if(null!==u)for(var c=u.array,u=0,h=c.length;u<h;u++){var d=c[u];s.fromArray(a,3*d),i(s,d)}else for(u=0,c=a.length/3;u<c;u++)s.fromArray(a,3*u),i(s,u)}else for(s=a.vertices,u=0,c=s.length;u<c;u++)i(s[u],u)}}}(),THREE.Points.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},THREE.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new THREE.Points(e,t)},THREE.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new THREE.Points(e,t)},THREE.Line=function(e,t,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new THREE.LineSegments(e,t)):(THREE.Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new THREE.Geometry,void(this.material=void 0!==t?t:new THREE.LineBasicMaterial({color:16777215*Math.random()})))},THREE.Line.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.Line.prototype.constructor=THREE.Line,THREE.Line.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,n=new THREE.Sphere;return function(r,i){var o=r.linePrecision,o=o*o,a=this.geometry;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(this.matrixWorld),!1!==r.ray.isIntersectionSphere(n)){e.getInverse(this.matrixWorld),t.copy(r.ray).applyMatrix4(e);var s=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Vector3,c=new THREE.Vector3,h=this instanceof THREE.LineSegments?2:1;if(a instanceof THREE.BufferGeometry){var d=a.index,p=a.attributes;if(null!==d)for(var a=d.array,p=p.position.array,d=0,f=a.length-1;d<f;d+=h){var m=a[d+1];s.fromArray(p,3*a[d]),l.fromArray(p,3*m),m=t.distanceSqToSegment(s,l,c,u),m>o||(c.applyMatrix4(this.matrixWorld),m=r.ray.origin.distanceTo(c),m<r.near||m>r.far||i.push({distance:m,point:u.clone().applyMatrix4(this.matrixWorld),index:d,face:null,faceIndex:null,object:this}))}else for(p=p.position.array,d=0,f=p.length/3-1;d<f;d+=h)s.fromArray(p,3*d),l.fromArray(p,3*d+3),m=t.distanceSqToSegment(s,l,c,u),m>o||(c.applyMatrix4(this.matrixWorld),m=r.ray.origin.distanceTo(c),m<r.near||m>r.far||i.push({distance:m,point:u.clone().applyMatrix4(this.matrixWorld),index:d,face:null,faceIndex:null,object:this}))}else if(a instanceof THREE.Geometry)for(s=a.vertices,l=s.length,d=0;d<l-1;d+=h)m=t.distanceSqToSegment(s[d],s[d+1],c,u),m>o||(c.applyMatrix4(this.matrixWorld),m=r.ray.origin.distanceTo(c),m<r.near||m>r.far||i.push({distance:m,point:u.clone().applyMatrix4(this.matrixWorld),index:d,face:null,faceIndex:null,object:this}))}}}(),THREE.Line.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},THREE.LineStrip=0,THREE.LinePieces=1,THREE.LineSegments=function(e,t){THREE.Line.call(this,e,t),this.type="LineSegments"},THREE.LineSegments.prototype=(0,u.default)(THREE.Line.prototype),THREE.LineSegments.prototype.constructor=THREE.LineSegments,THREE.Mesh=function(e,t){THREE.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.Mesh.prototype.constructor=THREE.Mesh,THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;e<t;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.raycast=function(){function e(e,t,n,r,i,o,a){return THREE.Triangle.barycoordFromPoint(e,t,n,r,m),i.multiplyScalar(m.x),o.multiplyScalar(m.y),a.multiplyScalar(m.z),i.add(o).add(a),i.clone()}function t(e,t,n,r,i,o,a){var s=e.material;return null===(s.side===THREE.BackSide?n.intersectTriangle(o,i,r,!0,a):n.intersectTriangle(r,i,o,s.side!==THREE.DoubleSide,a))?null:(g.copy(a),g.applyMatrix4(e.matrixWorld),n=t.ray.origin.distanceTo(g),n<t.near||n>t.far?null:{distance:n,point:g.clone(),object:e})}function n(n,r,i,o,u,c,h,m){return a.fromArray(o,3*c),s.fromArray(o,3*h),l.fromArray(o,3*m),(n=t(n,r,i,a,s,l,v))&&(u&&(d.fromArray(u,2*c),p.fromArray(u,2*h),f.fromArray(u,2*m),n.uv=e(v,a,s,l,d,p,f)),n.face=new THREE.Face3(c,h,m,THREE.Triangle.normal(a,s,l)),n.faceIndex=c),n}var r=new THREE.Matrix4,i=new THREE.Ray,o=new THREE.Sphere,a=new THREE.Vector3,s=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Vector3,c=new THREE.Vector3,h=new THREE.Vector3,d=new THREE.Vector2,p=new THREE.Vector2,f=new THREE.Vector2,m=new THREE.Vector3,v=new THREE.Vector3,g=new THREE.Vector3;return function(m,g){var E=this.geometry,y=this.material;if(void 0!==y){null===E.boundingSphere&&E.computeBoundingSphere();var x=this.matrixWorld;if(o.copy(E.boundingSphere),o.applyMatrix4(x),!1!==m.ray.isIntersectionSphere(o)&&(r.getInverse(x),i.copy(m.ray).applyMatrix4(r),null===E.boundingBox||!1!==i.isIntersectionBox(E.boundingBox))){var T,b;if(E instanceof THREE.BufferGeometry){var w,_,y=E.index,x=E.attributes,E=x.position.array;if(void 0!==x.uv&&(T=x.uv.array),null!==y)for(var x=y.array,R=0,S=x.length;R<S;R+=3)y=x[R],w=x[R+1],_=x[R+2],(b=n(this,m,i,E,T,y,w,_))&&(b.faceIndex=Math.floor(R/3),g.push(b));else for(R=0,S=E.length;R<S;R+=9)y=R/3,w=y+1,_=y+2,(b=n(this,m,i,E,T,y,w,_))&&(b.index=y,g.push(b))}else if(E instanceof THREE.Geometry){var M,C,x=y instanceof THREE.MeshFaceMaterial,R=!0===x?y.materials:null,S=E.vertices;w=E.faces,_=E.faceVertexUvs[0],0<_.length&&(T=_);for(var H=0,A=w.length;H<A;H++){var P=w[H];if(b=!0===x?R[P.materialIndex]:y,void 0!==b){if(_=S[P.a],M=S[P.b],C=S[P.c],!0===b.morphTargets){b=E.morphTargets;var L=this.morphTargetInfluences;a.set(0,0,0),s.set(0,0,0),l.set(0,0,0);for(var k=0,D=b.length;k<D;k++){var F=L[k];if(0!==F){var O=b[k].vertices;a.addScaledVector(u.subVectors(O[P.a],_),F),s.addScaledVector(c.subVectors(O[P.b],M),F),l.addScaledVector(h.subVectors(O[P.c],C),F)}}a.add(_),s.add(M),l.add(C),_=a,M=s,C=l}(b=t(this,m,i,_,M,C,v))&&(T&&(L=T[H],d.copy(L[0]),p.copy(L[1]),f.copy(L[2]),b.uv=e(v,_,M,C,d,p,f)),b.face=P,b.faceIndex=H,g.push(b))}}}}}}}(),THREE.Mesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},THREE.Bone=function(e){THREE.Object3D.call(this),this.type="Bone",this.skin=e},THREE.Bone.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.Bone.prototype.constructor=THREE.Bone,THREE.Bone.prototype.copy=function(e){return THREE.Object3D.prototype.copy.call(this,e),this.skin=e.skin,this},THREE.Skeleton=function(e,t,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new THREE.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture?(e=Math.sqrt(4*this.bones.length),e=THREE.Math.nextPowerOfTwo(Math.ceil(e)),this.boneTextureHeight=this.boneTextureWidth=e=Math.max(e,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType)):this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),
this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new THREE.Matrix4)},THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new THREE.Matrix4;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},THREE.Skeleton.prototype.pose=function(){for(var e,t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},THREE.Skeleton.prototype.update=function(){var e=new THREE.Matrix4;return function(){for(var t=0,n=this.bones.length;t<n;t++)e.multiplyMatrices(this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix,this.boneInverses[t]),e.flattenToArrayOffset(this.boneMatrices,16*t);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.Skeleton.prototype.clone=function(){return new THREE.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)},THREE.SkinnedMesh=function(e,t,n){if(THREE.Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new THREE.Matrix4,this.bindMatrixInverse=new THREE.Matrix4,e=[],this.geometry&&void 0!==this.geometry.bones){for(var r,i=0,o=this.geometry.bones.length;i<o;++i)r=this.geometry.bones[i],t=new THREE.Bone(this),e.push(t),t.name=r.name,t.position.fromArray(r.pos),t.quaternion.fromArray(r.rotq),void 0!==r.scl&&t.scale.fromArray(r.scl);for(i=0,o=this.geometry.bones.length;i<o;++i)r=this.geometry.bones[i],-1!==r.parent&&null!==r.parent?e[r.parent].add(e[i]):this.add(e[i])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new THREE.Skeleton(e,void 0,n),this.matrixWorld)},THREE.SkinnedMesh.prototype=(0,u.default)(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.constructor=THREE.SkinnedMesh,THREE.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],n=1/t.lengthManhattan();1/0!==n?t.multiplyScalar(n):t.set(1)}},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(e){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},THREE.SkinnedMesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material,this.useVertexTexture).copy(this)},THREE.LOD=function(){THREE.Object3D.call(this),this.type="LOD",(0,p.default)(this,{levels:{enumerable:!0,value:[]},objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}})},THREE.LOD.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.LOD.prototype.constructor=THREE.LOD,THREE.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},THREE.LOD.prototype.getObjectForDistance=function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},THREE.LOD.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),THREE.LOD.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n){var r=this.levels;if(1<r.length){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld),n=e.distanceTo(t),r[0].object.visible=!0;for(var i=1,o=r.length;i<o&&n>=r[i].distance;i++)r[i-1].object.visible=!1,r[i].object.visible=!0;for(;i<o;i++)r[i].object.visible=!1}}}(),THREE.LOD.prototype.copy=function(e){THREE.Object3D.prototype.copy.call(this,e,!1),e=e.levels;for(var t=0,n=e.length;t<n;t++){var r=e[t];this.addLevel(r.object.clone(),r.distance)}return this},THREE.LOD.prototype.toJSON=function(e){e=THREE.Object3D.prototype.toJSON.call(this,e),e.object.levels=[];for(var t=this.levels,n=0,r=t.length;n<r;n++){var i=t[n];e.object.levels.push({object:i.object.uuid,distance:i.distance})}return e},THREE.Sprite=function(){var e=new Uint16Array([0,1,2,0,2,3]),t=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),n=new Float32Array([0,0,1,0,1,1,0,1]),r=new THREE.BufferGeometry;return r.setIndex(new THREE.BufferAttribute(e,1)),r.addAttribute("position",new THREE.BufferAttribute(t,3)),r.addAttribute("uv",new THREE.BufferAttribute(n,2)),function(e){THREE.Object3D.call(this),this.type="Sprite",this.geometry=r,this.material=void 0!==e?e:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.Sprite.prototype.constructor=THREE.Sprite,THREE.Sprite.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.distanceSqToPoint(e);r>this.scale.x*this.scale.y||n.push({distance:Math.sqrt(r),point:this.position,face:null,object:this})}}(),THREE.Sprite.prototype.clone=function(){return new this.constructor(this.material).copy(this)},THREE.Particle=THREE.Sprite,THREE.LensFlare=function(e,t,n,r,i){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,r,i)},THREE.LensFlare.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.LensFlare.prototype.constructor=THREE.LensFlare,THREE.LensFlare.prototype.add=function(e,t,n,r,i,o){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===o&&(o=1),void 0===i&&(i=new THREE.Color(16777215)),void 0===r&&(r=THREE.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:i,blending:r})},THREE.LensFlare.prototype.updateLensFlares=function(){var e,t,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;e<n;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},THREE.LensFlare.prototype.copy=function(e){THREE.Object3D.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},THREE.Scene=function(){THREE.Object3D.call(this),this.type="Scene",this.overrideMaterial=this.fog=null,this.autoUpdate=!0},THREE.Scene.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.Scene.prototype.constructor=THREE.Scene,THREE.Scene.prototype.copy=function(e){return THREE.Object3D.prototype.copy.call(this,e),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},THREE.Fog=function(e,t,n){this.name="",this.color=new THREE.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(e,t){this.name="",this.color=new THREE.Color(e),this.density=void 0!==t?t:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.ShaderChunk={},THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",THREE.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\n\ttotalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n#endif\n",THREE.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif",THREE.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n",THREE.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n",THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n",THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif",THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif",THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif",THREE.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\n\tif ( decayExponent > 0.0 ) {\n\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n}\n\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\n\n\n\tfloat fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\n\n\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\n\n\n\treturn ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( lightDir, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * G * D;\n\n}\n\nvec3 inputToLinear( in vec3 a ) {\n\n\t#ifdef GAMMA_INPUT\n\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n\nvec3 linearToOutput( in vec3 a ) {\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n",THREE.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",THREE.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n",THREE.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n",THREE.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = inputToLinear( emissiveColor.rgb );\n\n\ttotalEmissiveLight *= emissiveColor.rgb;\n\n#endif\n",THREE.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n",THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\n\tenvColor.xyz = inputToLinear( envColor.xyz );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\n#endif\n",THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t#else\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif",THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif",THREE.ShaderChunk.hemilight_fragment="#if MAX_HEMI_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\ttotalAmbientLight += lightColor;\n\n\t}\n\n#endif\n\n",THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\ttotalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n#endif\n",THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif",THREE.ShaderChunk.lights_lambert_pars_vertex="#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n",THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\nvec3 normal = normalize( transformedNormal );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec3 lVector = lightPosition - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\n\t\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = directionalLightDirection[ i ];\n\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\n\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tfloat hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n",THREE.ShaderChunk.lights_phong_fragment="vec3 viewDir = normalize( vViewPosition );\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec3 lightPosition = pointLightPosition[ i ];\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\n\t\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n\t\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = directionalLightDirection[ i ];\n\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * cosineTerm;\n\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\n\n\t}\n\n#endif\n",THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n",THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\n#endif\n",THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif\n",THREE.ShaderChunk.linear_to_gamma_fragment="\n\toutgoingLight = linearToOutput( outgoingLight );\n",THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif",THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif",THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\n\n\tdiffuseColor *= texelColor;\n\n#endif\n",THREE.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif",THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n",THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n\n#endif\n",THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n",THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif",THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.normal_phong_fragment="#ifndef FLAT_SHADED\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n\t#endif\n\n#else\n\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n",THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n",THREE.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\tfor ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tfloat texelSizeY =  1.0 / shadowMapSize[ i ].y;\n\n\t\tfloat shadow = 0.0;\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n\t\tbool isPointLight = shadowDarkness[ i ] < 0.0;\n\n\t\tif ( isPointLight ) {\n\n\t\t\tfloat realShadowDarkness = abs( shadowDarkness[ i ] );\n\n\t\t\tvec3 lightToPosition = vShadowCoord[ i ].xyz;\n\n\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tfloat dp = length( lightToPosition );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\n\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tconst float Dr = 1.25;\n\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tconst float Dr = 2.25;\n\t#endif\n\n\t\t\tfloat os = Dr *  2.0 * texelSizeY;\n\n\t\t\tconst vec3 Gsd = vec3( - 1, 0, 1 );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\t\t\tshadow *= realShadowDarkness * ( 1.0 / 21.0 );\n\n\t#else \n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tfloat dp = length( lightToPosition );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\t\t\tshadow *= realShadowDarkness;\n\n\t#endif\n\n\t\t} else {\n\n#endif \n\t\t\tfloat texelSizeX =  1.0 / shadowMapSize[ i ].x;\n\n\t\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\n\t\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t\tbool frustumTest = all( frustumTestVec );\n\n\t\t\tif ( frustumTest ) {\n\n\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\n\t\t\t\t/*\n\t\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\t\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\t\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\t\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\t\tshadow += 1.0;\n\t\t\t\t\t}\n\t\t\t\t\tshadow /= 9.0;\n\t\t\t\t*/\n\n\t\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t\tconst float ShadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = texelSizeX;\n\t\t\t\tfloat yPixelOffset = texelSizeY;\n\n\t\t\t\tfloat dx0 = - 1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = - 1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfloat fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tshadow *= shadowDarkness[ i ];\n\n\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\n\t\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t\tfloat xPixelOffset = texelSizeX;\n\t\t\t\tfloat yPixelOffset = texelSizeY;\n\n\t\t\t\tfloat dx0 = - 1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = - 1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[ 0 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[ 0 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[ 0 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[ 1 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[ 1 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[ 1 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[ 2 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[ 2 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[ 2 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[ 0 ] = vec3( lessThan( depthKernel[ 0 ], shadowZ ) );\n\t\t\t\tshadowKernel[ 0 ] *= vec3( 0.25 );\n\n\t\t\t\tshadowKernel[ 1 ] = vec3( lessThan( depthKernel[ 1 ], shadowZ ) );\n\t\t\t\tshadowKernel[ 1 ] *= vec3( 0.25 );\n\n\t\t\t\tshadowKernel[ 2 ] = vec3( lessThan( depthKernel[ 2 ], shadowZ ) );\n\t\t\t\tshadowKernel[ 2 ] *= vec3( 0.25 );\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[ i ].xy );\n\n\t\t\t\tshadowKernel[ 0 ] = mix( shadowKernel[ 1 ], shadowKernel[ 0 ], fractionalCoord.x );\n\t\t\t\tshadowKernel[ 1 ] = mix( shadowKernel[ 2 ], shadowKernel[ 1 ], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[ 0 ][ 1 ], shadowKernel[ 0 ][ 0 ], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[ 0 ][ 2 ], shadowKernel[ 0 ][ 1 ], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[ 1 ][ 1 ], shadowKernel[ 1 ][ 0 ], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[ 1 ][ 2 ], shadowKernel[ 1 ][ 1 ], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) ) * shadowDarkness[ i ];\n\n\t#else \n\t\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\tshadow = shadowDarkness[ i ];\n\n\t#endif\n\n\t\t\t}\n\n#ifdef SHADOWMAP_DEBUG\n\n\t\t\tif ( inFrustum ) {\n\n\t\t\t\tif ( i == 0 ) {\n\n\t\t\t\t\toutgoingLight *= vec3( 1.0, 0.5, 0.0 );\n\n\t\t\t\t} else if ( i == 1 ) {\n\n\t\t\t\t\toutgoingLight *= vec3( 0.0, 1.0, 0.8 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\toutgoingLight *= vec3( 0.0, 0.5, 1.0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n#endif\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n\t\t}\n\n#endif\n\n\t\tshadowMask = shadowMask * vec3( 1.0 - shadow );\n\n\t}\n\n#endif\n",
THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n\t#if defined(POINT_LIGHT_SHADOWS)\n\n\n\t\tvoid adjustShadowValue1K( const float testDepth, const vec4 textureData, const float bias, inout float shadowValue ) {\n\n\t\t\tconst vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\t\tif ( testDepth >= dot( textureData, bitSh ) * 1000.0 + bias )\n\t\t\t\tshadowValue += 1.0;\n\n\t\t}\n\n\n\t\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\n\t\t\tvec3 absV = abs( v );\n\n\n\t\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\t\tabsV *= scaleToCube;\n\n\n\t\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\n\n\t\t\tvec2 planar = v.xy;\n\n\t\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\t\tif ( absV.z >= almostOne ) {\n\n\t\t\t\tif ( v.z > 0.0 )\n\t\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\t\tfloat signX = sign( v.x );\n\t\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\t\tfloat signY = sign( v.y );\n\t\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t\t}\n\n\n\t\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t\t}\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n#endif",THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif",THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n",THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n#endif\n",THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif",THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif",THREE.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif",THREE.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif",THREE.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif",THREE.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\n#endif",THREE.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n",THREE.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#else\n\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n\t#endif\n\n#endif\n",THREE.UniformsUtils={merge:function(e){for(var t={},n=0;n<e.length;n++){var r,i=this.clone(e[n]);for(r in i)t[r]=i[r]}return t},clone:function(e){var t,n={};for(t in e){n[t]={};for(var r in e[t]){var i=e[t][r];i instanceof THREE.Color||i instanceof THREE.Vector2||i instanceof THREE.Vector3||i instanceof THREE.Vector4||i instanceof THREE.Matrix3||i instanceof THREE.Matrix4||i instanceof THREE.Texture?n[t][r]=i.clone():Array.isArray(i)?n[t][r]=i.slice():n[t][r]=i}}return n}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"f",value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"f",value:1},displacementBias:{type:"f",value:0}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},pointLightDecay:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]},spotLightDecay:{type:"fv1",value:[]}},points:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\t#endif",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tvec3 totalAmbientLight = vec3( 1.0 );\n\tvec3 shadowMask = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.aomap_fragment,THREE.ShaderChunk.shadowmap_fragment,"\toutgoingLight = diffuseColor.rgb * totalAmbientLight * shadowMask;",THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nuniform vec3 ambientLightColor;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tvec3 totalAmbientLight = ambientLightColor;\n\tvec3 shadowMask = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.shadowmap_fragment,"\t#ifdef DOUBLE_SIDED\n\t\tif ( gl_FrontFacing )\n\t\t\toutgoingLight += diffuseColor.rgb * ( vLightFront * shadowMask + totalAmbientLight ) + emissive;\n\t\telse\n\t\t\toutgoingLight += diffuseColor.rgb * ( vLightBack * shadowMask + totalAmbientLight ) + emissive;\n\t#else\n\t\toutgoingLight += diffuseColor.rgb * ( vLightFront * shadowMask + totalAmbientLight ) + emissive;\n\t#endif",THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.displacementmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.displacementmap_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = - mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.emissivemap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tvec3 totalAmbientLight = ambientLightColor;\n\tvec3 totalEmissiveLight = emissive;\n\tvec3 shadowMask = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.normal_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.hemilight_fragment,THREE.ShaderChunk.aomap_fragment,THREE.ShaderChunk.emissivemap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.shadowmap_fragment,"totalDiffuseLight *= shadowMask;\ntotalSpecularLight *= shadowMask;\n#ifdef METAL\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;\n#else\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;\n#endif",THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},points:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.points,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( psColor, opacity );\n\tvec3 shadowMask = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.shadowmap_fragment,"\toutgoingLight = diffuseColor.rgb * shadowMask;",THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,"\toutgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\n\tgl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\nvec3 direction = normalize( vWorldPosition );\nvec2 sampleUV;\nsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\nsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\ngl_FragColor = texture2D( tEquirect, sampleUV );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n\tres -= res.xxyz * bit_mask;\n\treturn res;\n}\nvoid main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n\t#else\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n\t#endif\n}"].join("\n")},distanceRGBA:{uniforms:{lightPos:{type:"v3",value:new THREE.Vector3(0,0,0)}},vertexShader:["varying vec4 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.worldpos_vertex,"vWorldPosition = worldPosition;\n}"].join("\n"),fragmentShader:["uniform vec3 lightPos;\nvarying vec4 vWorldPosition;",THREE.ShaderChunk.common,"vec4 pack1K ( float depth ) {\n   depth /= 1000.0;\n   const vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = fract( depth * bitSh );\n\tres -= res.xxyz * bitMsk;\n\treturn res; \n}\nfloat unpack1K ( vec4 color ) {\n\tconst vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\treturn dot( color, bitSh ) * 1000.0;\n}\nvoid main () {\n\tgl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );\n}"].join("\n")}},THREE.WebGLRenderer=function(e){function t(e,t,n,r){!0===I&&(e*=r,t*=r,n*=r),Ee.clearColor(e,t,n,r)}function n(){Te.init(),Ee.viewport(ie,oe,ae,se),t(V.r,V.g,V.b,z)}function r(){ne=J=null,te="",ee=-1,fe=!0,Te.reset()}function i(e){e.preventDefault(),r(),n(),be.clear()}function o(e){e=e.target,e.removeEventListener("dispose",o);e:{var t=be.get(e);if(e.image&&t.__image__webglTextureCube)Ee.deleteTexture(t.__image__webglTextureCube);else{if(void 0===t.__webglInit)break e;Ee.deleteTexture(t.__webglTexture)}be.delete(e)}ve.textures--}function a(e){e=e.target,e.removeEventListener("dispose",a);var t=be.get(e),n=be.get(e.texture);if(e&&void 0!==n.__webglTexture){if(Ee.deleteTexture(n.__webglTexture),e instanceof THREE.WebGLRenderTargetCube)for(n=0;6>n;n++)Ee.deleteFramebuffer(t.__webglFramebuffer[n]),Ee.deleteRenderbuffer(t.__webglRenderbuffer[n]);else Ee.deleteFramebuffer(t.__webglFramebuffer),Ee.deleteRenderbuffer(t.__webglRenderbuffer);be.delete(e.texture),be.delete(e)}ve.textures--}function s(e){e=e.target,e.removeEventListener("dispose",s),l(e),be.delete(e)}function l(e){var t=be.get(e).program;e.program=void 0,void 0!==t&&_e.releaseProgram(t)}function u(e,t){return t[0]-e[0]}function c(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function h(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function d(e,t,n,r,i){var o;n.transparent?(r=q,o=++X):(r=G,o=++W),o=r[o],void 0!==o?(o.id=e.id,o.object=e,o.geometry=t,o.material=n,o.z=de.z,o.group=i):(o={id:e.id,object:e,geometry:t,material:n,z:de.z,group:i},r.push(o))}function f(e,t){if(!1!==e.visible){if(0!==(e.channels.mask&t.channels.mask))if(e instanceof THREE.Light)j.push(e);else if(e instanceof THREE.Sprite)K.push(e);else if(e instanceof THREE.LensFlare)Q.push(e);else if(e instanceof THREE.ImmediateRenderObject)!0===Z.sortObjects&&(de.setFromMatrixPosition(e.matrixWorld),de.applyProjection(he)),d(e,null,e.material,de.z,null);else if((e instanceof THREE.Mesh||e instanceof THREE.Line||e instanceof THREE.Points)&&(e instanceof THREE.SkinnedMesh&&e.skeleton.update(),!1===e.frustumCulled||!0===ce.intersectsObject(e))){var n=e.material;if(!0===n.visible){!0===Z.sortObjects&&(de.setFromMatrixPosition(e.matrixWorld),de.applyProjection(he));var r=we.update(e);if(n instanceof THREE.MeshFaceMaterial)for(var i=r.groups,o=n.materials,n=0,a=i.length;n<a;n++){var s=i[n],l=o[s.materialIndex];!0===l.visible&&d(e,r,l,de.z,s)}else d(e,r,n,de.z,null)}}for(r=e.children,n=0,a=r.length;n<a;n++)f(r[n],t)}}function m(e,t,n,r,i){for(var o=0,a=e.length;o<a;o++){var s=e[o],l=s.object,u=s.geometry,c=void 0===i?s.material:i,s=s.group;if(l.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,l.matrixWorld),l.normalMatrix.getNormalMatrix(l.modelViewMatrix),l instanceof THREE.ImmediateRenderObject){v(c);var h=g(t,n,r,c,l);te="",l.render(function(e){Z.renderBufferImmediate(e,h,c)})}else Z.renderBufferDirect(t,n,r,u,c,l,s)}}function v(e){e.side!==THREE.DoubleSide?Te.enable(Ee.CULL_FACE):Te.disable(Ee.CULL_FACE),Te.setFlipSided(e.side===THREE.BackSide),!0===e.transparent?Te.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha):Te.setBlending(THREE.NoBlending),Te.setDepthFunc(e.depthFunc),Te.setDepthTest(e.depthTest),Te.setDepthWrite(e.depthWrite),Te.setColorWrite(e.colorWrite),Te.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function g(e,t,n,r,i){re=0;var o=be.get(r);if(r.needsUpdate||!o.program){e:{var a=be.get(r),u=_e.getParameters(r,t,n,i),c=_e.getProgramCode(r,u),h=a.program,d=!0;if(void 0===h)r.addEventListener("dispose",s);else if(h.code!==c)l(r);else{if(void 0!==u.shaderID)break e;d=!1}if(d&&(u.shaderID?(h=THREE.ShaderLib[u.shaderID],a.__webglShader={name:r.type,uniforms:THREE.UniformsUtils.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}):a.__webglShader={name:r.type,uniforms:r.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader},r.__webglShader=a.__webglShader,h=_e.acquireProgram(r,u,c),a.program=h,r.program=h),u=h.getAttributes(),r.morphTargets)for(c=r.numSupportedMorphTargets=0;c<Z.maxMorphTargets;c++)0<=u["morphTarget"+c]&&r.numSupportedMorphTargets++;if(r.morphNormals)for(c=r.numSupportedMorphNormals=0;c<Z.maxMorphNormals;c++)0<=u["morphNormal"+c]&&r.numSupportedMorphNormals++;a.uniformsList=[];var p,u=a.program.getUniforms();for(p in a.__webglShader.uniforms)(c=u[p])&&a.uniformsList.push([a.__webglShader.uniforms[p],c])}r.needsUpdate=!1}if(c=h=d=!1,a=o.program,p=a.getUniforms(),u=o.__webglShader.uniforms,a.id!==J&&(Ee.useProgram(a.program),J=a.id,c=h=d=!0),r.id!==ee&&(-1===ee&&(c=!0),ee=r.id,h=!0),(d||e!==ne)&&(Ee.uniformMatrix4fv(p.projectionMatrix,!1,e.projectionMatrix.elements),xe.logarithmicDepthBuffer&&Ee.uniform1f(p.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==ne&&(ne=e),(r instanceof THREE.ShaderMaterial||r instanceof THREE.MeshPhongMaterial||r.envMap)&&void 0!==p.cameraPosition&&(de.setFromMatrixPosition(e.matrixWorld),Ee.uniform3f(p.cameraPosition,de.x,de.y,de.z)),(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshBasicMaterial||r instanceof THREE.ShaderMaterial||r.skinning)&&void 0!==p.viewMatrix&&Ee.uniformMatrix4fv(p.viewMatrix,!1,e.matrixWorldInverse.elements)),r.skinning&&(i.bindMatrix&&void 0!==p.bindMatrix&&Ee.uniformMatrix4fv(p.bindMatrix,!1,i.bindMatrix.elements),i.bindMatrixInverse&&void 0!==p.bindMatrixInverse&&Ee.uniformMatrix4fv(p.bindMatrixInverse,!1,i.bindMatrixInverse.elements),
xe.floatVertexTextures&&i.skeleton&&i.skeleton.useVertexTexture?(void 0!==p.boneTexture&&(d=y(),Ee.uniform1i(p.boneTexture,d),Z.setTexture(i.skeleton.boneTexture,d)),void 0!==p.boneTextureWidth&&Ee.uniform1i(p.boneTextureWidth,i.skeleton.boneTextureWidth),void 0!==p.boneTextureHeight&&Ee.uniform1i(p.boneTextureHeight,i.skeleton.boneTextureHeight)):i.skeleton&&i.skeleton.boneMatrices&&void 0!==p.boneGlobalMatrices&&Ee.uniformMatrix4fv(p.boneGlobalMatrices,!1,i.skeleton.boneMatrices)),h){if(n&&r.fog&&(u.fogColor.value=n.color,n instanceof THREE.Fog?(u.fogNear.value=n.near,u.fogFar.value=n.far):n instanceof THREE.FogExp2&&(u.fogDensity.value=n.density)),r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r.lights){if(fe){var f,m,v,g,c=!0,T=d=0,b=0,w=me,S=e.matrixWorldInverse,M=w.directional.colors,C=w.directional.positions,H=w.point.colors,P=w.point.positions,L=w.point.distances,k=w.point.decays,D=w.spot.colors,F=w.spot.positions,O=w.spot.distances,B=w.spot.directions,N=w.spot.anglesCos,I=w.spot.exponents,U=w.spot.decays,V=w.hemi.skyColors,z=w.hemi.groundColors,j=w.hemi.positions,G=0,W=0,q=0,X=0,Y=0,K=0,Q=0,$=0,te=f=0;for(n=g=te=0,h=t.length;n<h;n++)f=t[n],m=f.color,v=f.intensity,g=f.distance,f instanceof THREE.AmbientLight?f.visible&&(d+=m.r,T+=m.g,b+=m.b):f instanceof THREE.DirectionalLight?(Y+=1,f.visible&&(pe.setFromMatrixPosition(f.matrixWorld),de.setFromMatrixPosition(f.target.matrixWorld),pe.sub(de),pe.transformDirection(S),f=3*G,C[f+0]=pe.x,C[f+1]=pe.y,C[f+2]=pe.z,x(M,f,m,v),G+=1)):f instanceof THREE.PointLight?(K+=1,f.visible&&(te=3*W,x(H,te,m,v),de.setFromMatrixPosition(f.matrixWorld),de.applyMatrix4(S),P[te+0]=de.x,P[te+1]=de.y,P[te+2]=de.z,L[W]=g,k[W]=0===f.distance?0:f.decay,W+=1)):f instanceof THREE.SpotLight?(Q+=1,f.visible&&(te=3*q,x(D,te,m,v),pe.setFromMatrixPosition(f.matrixWorld),de.copy(pe).applyMatrix4(S),F[te+0]=de.x,F[te+1]=de.y,F[te+2]=de.z,O[q]=g,de.setFromMatrixPosition(f.target.matrixWorld),pe.sub(de),pe.transformDirection(S),B[te+0]=pe.x,B[te+1]=pe.y,B[te+2]=pe.z,N[q]=Math.cos(f.angle),I[q]=f.exponent,U[q]=0===f.distance?0:f.decay,q+=1)):f instanceof THREE.HemisphereLight&&($+=1,f.visible&&(pe.setFromMatrixPosition(f.matrixWorld),pe.transformDirection(S),g=3*X,j[g+0]=pe.x,j[g+1]=pe.y,j[g+2]=pe.z,m=f.color,f=f.groundColor,x(V,g,m,v),x(z,g,f,v),X+=1));for(n=3*G,h=Math.max(M.length,3*Y);n<h;n++)M[n]=0;for(n=3*W,h=Math.max(H.length,3*K);n<h;n++)H[n]=0;for(n=3*q,h=Math.max(D.length,3*Q);n<h;n++)D[n]=0;for(n=3*X,h=Math.max(V.length,3*$);n<h;n++)V[n]=0;for(n=3*X,h=Math.max(z.length,3*$);n<h;n++)z[n]=0;w.directional.length=G,w.point.length=W,w.spot.length=q,w.hemi.length=X,w.ambient[0]=d,w.ambient[1]=T,w.ambient[2]=b,fe=!1}c?(c=me,u.ambientLightColor.value=c.ambient,u.directionalLightColor.value=c.directional.colors,u.directionalLightDirection.value=c.directional.positions,u.pointLightColor.value=c.point.colors,u.pointLightPosition.value=c.point.positions,u.pointLightDistance.value=c.point.distances,u.pointLightDecay.value=c.point.decays,u.spotLightColor.value=c.spot.colors,u.spotLightPosition.value=c.spot.positions,u.spotLightDistance.value=c.spot.distances,u.spotLightDirection.value=c.spot.directions,u.spotLightAngleCos.value=c.spot.anglesCos,u.spotLightExponent.value=c.spot.exponents,u.spotLightDecay.value=c.spot.decays,u.hemisphereLightSkyColor.value=c.hemi.skyColors,u.hemisphereLightGroundColor.value=c.hemi.groundColors,u.hemisphereLightDirection.value=c.hemi.positions,E(u,!0)):E(u,!1)}if(r instanceof THREE.MeshBasicMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshPhongMaterial){u.opacity.value=r.opacity,u.diffuse.value=r.color,r.emissive&&(u.emissive.value=r.emissive),u.map.value=r.map,u.specularMap.value=r.specularMap,u.alphaMap.value=r.alphaMap,r.aoMap&&(u.aoMap.value=r.aoMap,u.aoMapIntensity.value=r.aoMapIntensity);var ie;r.map?ie=r.map:r.specularMap?ie=r.specularMap:r.displacementMap?ie=r.displacementMap:r.normalMap?ie=r.normalMap:r.bumpMap?ie=r.bumpMap:r.alphaMap?ie=r.alphaMap:r.emissiveMap&&(ie=r.emissiveMap),void 0!==ie&&(ie instanceof THREE.WebGLRenderTarget&&(ie=ie.texture),c=ie.offset,ie=ie.repeat,u.offsetRepeat.value.set(c.x,c.y,ie.x,ie.y)),u.envMap.value=r.envMap,u.flipEnvMap.value=r.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,u.reflectivity.value=r.reflectivity,u.refractionRatio.value=r.refractionRatio}if(r instanceof THREE.LineBasicMaterial?(u.diffuse.value=r.color,u.opacity.value=r.opacity):r instanceof THREE.LineDashedMaterial?(u.diffuse.value=r.color,u.opacity.value=r.opacity,u.dashSize.value=r.dashSize,u.totalSize.value=r.dashSize+r.gapSize,u.scale.value=r.scale):r instanceof THREE.PointsMaterial?(u.psColor.value=r.color,u.opacity.value=r.opacity,u.size.value=r.size,u.scale.value=A.height/2,u.map.value=r.map,null!==r.map&&(e=r.map.offset,ie=r.map.repeat,u.offsetRepeat.value.set(e.x,e.y,ie.x,ie.y))):r instanceof THREE.MeshPhongMaterial?(u.specular.value=r.specular,u.shininess.value=Math.max(r.shininess,1e-4),r.lightMap&&(u.lightMap.value=r.lightMap,u.lightMapIntensity.value=r.lightMapIntensity),r.emissiveMap&&(u.emissiveMap.value=r.emissiveMap),r.bumpMap&&(u.bumpMap.value=r.bumpMap,u.bumpScale.value=r.bumpScale),r.normalMap&&(u.normalMap.value=r.normalMap,u.normalScale.value.copy(r.normalScale)),r.displacementMap&&(u.displacementMap.value=r.displacementMap,u.displacementScale.value=r.displacementScale,u.displacementBias.value=r.displacementBias)):r instanceof THREE.MeshDepthMaterial?(u.mNear.value=e.near,u.mFar.value=e.far,u.opacity.value=r.opacity):r instanceof THREE.MeshNormalMaterial&&(u.opacity.value=r.opacity),i.receiveShadow&&!r._shadowPass&&u.shadowMatrix)for(e=r=0,ie=t.length;e<ie;e++)c=t[e],!0===c.castShadow&&(c instanceof THREE.PointLight||c instanceof THREE.SpotLight||c instanceof THREE.DirectionalLight)&&(n=c.shadow,c instanceof THREE.PointLight?(de.setFromMatrixPosition(c.matrixWorld).negate(),n.matrix.identity().setPosition(de),u.shadowDarkness.value[r]=-n.darkness):u.shadowDarkness.value[r]=n.darkness,u.shadowMatrix.value[r]=n.matrix,u.shadowMap.value[r]=n.map,u.shadowMapSize.value[r]=n.mapSize,u.shadowBias.value[r]=n.bias,r++);for(t=o.uniformsList,o=0,r=t.length;o<r;o++)if(e=t[o][0],!1!==e.needsUpdate)switch(u=e.type,n=e.value,ie=t[o][1],u){case"1i":Ee.uniform1i(ie,n);break;case"1f":Ee.uniform1f(ie,n);break;case"2f":Ee.uniform2f(ie,n[0],n[1]);break;case"3f":Ee.uniform3f(ie,n[0],n[1],n[2]);break;case"4f":Ee.uniform4f(ie,n[0],n[1],n[2],n[3]);break;case"1iv":Ee.uniform1iv(ie,n);break;case"3iv":Ee.uniform3iv(ie,n);break;case"1fv":Ee.uniform1fv(ie,n);break;case"2fv":Ee.uniform2fv(ie,n);break;case"3fv":Ee.uniform3fv(ie,n);break;case"4fv":Ee.uniform4fv(ie,n);break;case"Matrix3fv":Ee.uniformMatrix3fv(ie,!1,n);break;case"Matrix4fv":Ee.uniformMatrix4fv(ie,!1,n);break;case"i":Ee.uniform1i(ie,n);break;case"f":Ee.uniform1f(ie,n);break;case"v2":Ee.uniform2f(ie,n.x,n.y);break;case"v3":Ee.uniform3f(ie,n.x,n.y,n.z);break;case"v4":Ee.uniform4f(ie,n.x,n.y,n.z,n.w);break;case"c":Ee.uniform3f(ie,n.r,n.g,n.b);break;case"iv1":Ee.uniform1iv(ie,n);break;case"iv":Ee.uniform3iv(ie,n);break;case"fv1":Ee.uniform1fv(ie,n);break;case"fv":Ee.uniform3fv(ie,n);break;case"v2v":for(void 0===e._array&&(e._array=new Float32Array(2*n.length)),h=u=0,c=n.length;u<c;u++,h+=2)e._array[h+0]=n[u].x,e._array[h+1]=n[u].y;Ee.uniform2fv(ie,e._array);break;case"v3v":for(void 0===e._array&&(e._array=new Float32Array(3*n.length)),h=u=0,c=n.length;u<c;u++,h+=3)e._array[h+0]=n[u].x,e._array[h+1]=n[u].y,e._array[h+2]=n[u].z;Ee.uniform3fv(ie,e._array);break;case"v4v":for(void 0===e._array&&(e._array=new Float32Array(4*n.length)),h=u=0,c=n.length;u<c;u++,h+=4)e._array[h+0]=n[u].x,e._array[h+1]=n[u].y,e._array[h+2]=n[u].z,e._array[h+3]=n[u].w;Ee.uniform4fv(ie,e._array);break;case"m3":Ee.uniformMatrix3fv(ie,!1,n.elements);break;case"m3v":for(void 0===e._array&&(e._array=new Float32Array(9*n.length)),u=0,c=n.length;u<c;u++)n[u].flattenToArrayOffset(e._array,9*u);Ee.uniformMatrix3fv(ie,!1,e._array);break;case"m4":Ee.uniformMatrix4fv(ie,!1,n.elements);break;case"m4v":for(void 0===e._array&&(e._array=new Float32Array(16*n.length)),u=0,c=n.length;u<c;u++)n[u].flattenToArrayOffset(e._array,16*u);Ee.uniformMatrix4fv(ie,!1,e._array);break;case"t":if(h=y(),Ee.uniform1i(ie,h),!n)continue;n instanceof THREE.CubeTexture||Array.isArray(n.image)&&6===n.image.length?_(n,h):n instanceof THREE.WebGLRenderTargetCube?R(n.texture,h):n instanceof THREE.WebGLRenderTarget?Z.setTexture(n.texture,h):Z.setTexture(n,h);break;case"tv":for(void 0===e._array&&(e._array=[]),u=0,c=e.value.length;u<c;u++)e._array[u]=y();for(Ee.uniform1iv(ie,e._array),u=0,c=e.value.length;u<c;u++)n=e.value[u],h=e._array[u],n&&(n instanceof THREE.CubeTexture||n.image instanceof Array&&6===n.image.length?_(n,h):n instanceof THREE.WebGLRenderTarget?Z.setTexture(n.texture,h):n instanceof THREE.WebGLRenderTargetCube?R(n.texture,h):Z.setTexture(n,h));break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+u)}}return Ee.uniformMatrix4fv(p.modelViewMatrix,!1,i.modelViewMatrix.elements),p.normalMatrix&&Ee.uniformMatrix3fv(p.normalMatrix,!1,i.normalMatrix.elements),void 0!==p.modelMatrix&&Ee.uniformMatrix4fv(p.modelMatrix,!1,i.matrixWorld.elements),a}function E(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLightColor.needsUpdate=t,e.directionalLightDirection.needsUpdate=t,e.pointLightColor.needsUpdate=t,e.pointLightPosition.needsUpdate=t,e.pointLightDistance.needsUpdate=t,e.pointLightDecay.needsUpdate=t,e.spotLightColor.needsUpdate=t,e.spotLightPosition.needsUpdate=t,e.spotLightDistance.needsUpdate=t,e.spotLightDirection.needsUpdate=t,e.spotLightAngleCos.needsUpdate=t,e.spotLightExponent.needsUpdate=t,e.spotLightDecay.needsUpdate=t,e.hemisphereLightSkyColor.needsUpdate=t,e.hemisphereLightGroundColor.needsUpdate=t,e.hemisphereLightDirection.needsUpdate=t}function y(){var e=re;return e>=xe.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+xe.maxTextures),re+=1,e}function x(e,t,n,r){e[t+0]=n.r*r,e[t+1]=n.g*r,e[t+2]=n.b*r}function T(e,t,n){n?(Ee.texParameteri(e,Ee.TEXTURE_WRAP_S,H(t.wrapS)),Ee.texParameteri(e,Ee.TEXTURE_WRAP_T,H(t.wrapT)),Ee.texParameteri(e,Ee.TEXTURE_MAG_FILTER,H(t.magFilter)),Ee.texParameteri(e,Ee.TEXTURE_MIN_FILTER,H(t.minFilter))):(Ee.texParameteri(e,Ee.TEXTURE_WRAP_S,Ee.CLAMP_TO_EDGE),Ee.texParameteri(e,Ee.TEXTURE_WRAP_T,Ee.CLAMP_TO_EDGE),t.wrapS===THREE.ClampToEdgeWrapping&&t.wrapT===THREE.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",t),Ee.texParameteri(e,Ee.TEXTURE_MAG_FILTER,C(t.magFilter)),Ee.texParameteri(e,Ee.TEXTURE_MIN_FILTER,C(t.minFilter)),t.minFilter!==THREE.NearestFilter&&t.minFilter!==THREE.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",t)),!(n=ye.get("EXT_texture_filter_anisotropic"))||t.type===THREE.FloatType&&null===ye.get("OES_texture_float_linear")||t.type===THREE.HalfFloatType&&null===ye.get("OES_texture_half_float_linear")||!(1<t.anisotropy||be.get(t).__currentAnisotropy)||(Ee.texParameterf(e,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,Z.getMaxAnisotropy())),be.get(t).__currentAnisotropy=t.anisotropy)}function b(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),r=document.createElement("canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function w(e){return THREE.Math.isPowerOfTwo(e.width)&&THREE.Math.isPowerOfTwo(e.height)}function _(e,t){var n=be.get(e);if(6===e.image.length)if(0<e.version&&n.__version!==e.version){n.__image__webglTextureCube||(e.addEventListener("dispose",o),n.__image__webglTextureCube=Ee.createTexture(),ve.textures++),Te.activeTexture(Ee.TEXTURE0+t),Te.bindTexture(Ee.TEXTURE_CUBE_MAP,n.__image__webglTextureCube),Ee.pixelStorei(Ee.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var r=e instanceof THREE.CompressedTexture,i=e.image[0]instanceof THREE.DataTexture,a=[],s=0;6>s;s++)a[s]=!Z.autoScaleCubemaps||r||i?i?e.image[s].image:e.image[s]:b(e.image[s],xe.maxCubemapSize);var l=w(a[0]),u=H(e.format),c=H(e.type);for(T(Ee.TEXTURE_CUBE_MAP,e,l),s=0;6>s;s++)if(r)for(var h,d=a[s].mipmaps,p=0,f=d.length;p<f;p++)h=d[p],e.format!==THREE.RGBAFormat&&e.format!==THREE.RGBFormat?-1<Te.getCompressedTextureFormats().indexOf(u)?Te.compressedTexImage2D(Ee.TEXTURE_CUBE_MAP_POSITIVE_X+s,p,u,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):Te.texImage2D(Ee.TEXTURE_CUBE_MAP_POSITIVE_X+s,p,u,h.width,h.height,0,u,c,h.data);else i?Te.texImage2D(Ee.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,u,a[s].width,a[s].height,0,u,c,a[s].data):Te.texImage2D(Ee.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,u,u,c,a[s]);e.generateMipmaps&&l&&Ee.generateMipmap(Ee.TEXTURE_CUBE_MAP),n.__version=e.version,e.onUpdate&&e.onUpdate(e)}else Te.activeTexture(Ee.TEXTURE0+t),Te.bindTexture(Ee.TEXTURE_CUBE_MAP,n.__image__webglTextureCube)}function R(e,t){Te.activeTexture(Ee.TEXTURE0+t),Te.bindTexture(Ee.TEXTURE_CUBE_MAP,be.get(e).__webglTexture)}function S(e,t,n){Ee.bindFramebuffer(Ee.FRAMEBUFFER,e),Ee.framebufferTexture2D(Ee.FRAMEBUFFER,Ee.COLOR_ATTACHMENT0,n,be.get(t.texture).__webglTexture,0)}function M(e,t){Ee.bindRenderbuffer(Ee.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(Ee.renderbufferStorage(Ee.RENDERBUFFER,Ee.DEPTH_COMPONENT16,t.width,t.height),Ee.framebufferRenderbuffer(Ee.FRAMEBUFFER,Ee.DEPTH_ATTACHMENT,Ee.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(Ee.renderbufferStorage(Ee.RENDERBUFFER,Ee.DEPTH_STENCIL,t.width,t.height),Ee.framebufferRenderbuffer(Ee.FRAMEBUFFER,Ee.DEPTH_STENCIL_ATTACHMENT,Ee.RENDERBUFFER,e)):Ee.renderbufferStorage(Ee.RENDERBUFFER,Ee.RGBA4,t.width,t.height)}function C(e){return e===THREE.NearestFilter||e===THREE.NearestMipMapNearestFilter||e===THREE.NearestMipMapLinearFilter?Ee.NEAREST:Ee.LINEAR}function H(e){var t;if(e===THREE.RepeatWrapping)return Ee.REPEAT;if(e===THREE.ClampToEdgeWrapping)return Ee.CLAMP_TO_EDGE;if(e===THREE.MirroredRepeatWrapping)return Ee.MIRRORED_REPEAT;if(e===THREE.NearestFilter)return Ee.NEAREST;if(e===THREE.NearestMipMapNearestFilter)return Ee.NEAREST_MIPMAP_NEAREST;if(e===THREE.NearestMipMapLinearFilter)return Ee.NEAREST_MIPMAP_LINEAR;if(e===THREE.LinearFilter)return Ee.LINEAR;if(e===THREE.LinearMipMapNearestFilter)return Ee.LINEAR_MIPMAP_NEAREST;if(e===THREE.LinearMipMapLinearFilter)return Ee.LINEAR_MIPMAP_LINEAR;if(e===THREE.UnsignedByteType)return Ee.UNSIGNED_BYTE;if(e===THREE.UnsignedShort4444Type)return Ee.UNSIGNED_SHORT_4_4_4_4;if(e===THREE.UnsignedShort5551Type)return Ee.UNSIGNED_SHORT_5_5_5_1;if(e===THREE.UnsignedShort565Type)return Ee.UNSIGNED_SHORT_5_6_5;if(e===THREE.ByteType)return Ee.BYTE;if(e===THREE.ShortType)return Ee.SHORT;if(e===THREE.UnsignedShortType)return Ee.UNSIGNED_SHORT;if(e===THREE.IntType)return Ee.INT;if(e===THREE.UnsignedIntType)return Ee.UNSIGNED_INT;if(e===THREE.FloatType)return Ee.FLOAT;if(t=ye.get("OES_texture_half_float"),null!==t&&e===THREE.HalfFloatType)return t.HALF_FLOAT_OES;if(e===THREE.AlphaFormat)return Ee.ALPHA;if(e===THREE.RGBFormat)return Ee.RGB;if(e===THREE.RGBAFormat)return Ee.RGBA;if(e===THREE.LuminanceFormat)return Ee.LUMINANCE;if(e===THREE.LuminanceAlphaFormat)return Ee.LUMINANCE_ALPHA;if(e===THREE.AddEquation)return Ee.FUNC_ADD;if(e===THREE.SubtractEquation)return Ee.FUNC_SUBTRACT;if(e===THREE.ReverseSubtractEquation)return Ee.FUNC_REVERSE_SUBTRACT;if(e===THREE.ZeroFactor)return Ee.ZERO;if(e===THREE.OneFactor)return Ee.ONE;if(e===THREE.SrcColorFactor)return Ee.SRC_COLOR;if(e===THREE.OneMinusSrcColorFactor)return Ee.ONE_MINUS_SRC_COLOR;if(e===THREE.SrcAlphaFactor)return Ee.SRC_ALPHA;if(e===THREE.OneMinusSrcAlphaFactor)return Ee.ONE_MINUS_SRC_ALPHA;if(e===THREE.DstAlphaFactor)return Ee.DST_ALPHA;if(e===THREE.OneMinusDstAlphaFactor)return Ee.ONE_MINUS_DST_ALPHA;if(e===THREE.DstColorFactor)return Ee.DST_COLOR;if(e===THREE.OneMinusDstColorFactor)return Ee.ONE_MINUS_DST_COLOR;if(e===THREE.SrcAlphaSaturateFactor)return Ee.SRC_ALPHA_SATURATE;if(t=ye.get("WEBGL_compressed_texture_s3tc"),null!==t){if(e===THREE.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===THREE.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t=ye.get("WEBGL_compressed_texture_pvrtc"),null!==t){if(e===THREE.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===THREE.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===THREE.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===THREE.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t=ye.get("EXT_blend_minmax"),null!==t){if(e===THREE.MinEquation)return t.MIN_EXT;if(e===THREE.MaxEquation)return t.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION),e=e||{};var A=void 0!==e.canvas?e.canvas:document.createElement("canvas"),P=void 0!==e.context?e.context:null,L=A.width,k=A.height,D=1,F=void 0!==e.alpha&&e.alpha,O=void 0===e.depth||e.depth,B=void 0===e.stencil||e.stencil,N=void 0!==e.antialias&&e.antialias,I=void 0===e.premultipliedAlpha||e.premultipliedAlpha,U=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,V=new THREE.Color(0),z=0,j=[],G=[],W=-1,q=[],X=-1,Y=new Float32Array(8),K=[],Q=[];this.domElement=A,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.gammaFactor=2,this.gammaOutput=this.gammaInput=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0;var Z=this,J=null,$=null,ee=-1,te="",ne=null,re=0,ie=0,oe=0,ae=A.width,se=A.height,le=0,ue=0,ce=new THREE.Frustum,he=new THREE.Matrix4,de=new THREE.Vector3,pe=new THREE.Vector3,fe=!0,me={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[],decays:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[],decays:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},ve={geometries:0,textures:0},ge={calls:0,vertices:0,faces:0,points:0};this.info={render:ge,memory:ve,programs:null};var Ee;try{if(F={alpha:F,depth:O,stencil:B,antialias:N,premultipliedAlpha:I,preserveDrawingBuffer:U},Ee=P||A.getContext("webgl",F)||A.getContext("experimental-webgl",F),null===Ee){if(null!==A.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context."}A.addEventListener("webglcontextlost",i,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var ye=new THREE.WebGLExtensions(Ee);ye.get("OES_texture_float"),ye.get("OES_texture_float_linear"),ye.get("OES_texture_half_float"),ye.get("OES_texture_half_float_linear"),ye.get("OES_standard_derivatives"),ye.get("ANGLE_instanced_arrays"),ye.get("OES_element_index_uint")&&(THREE.BufferGeometry.MaxIndex=4294967296);var xe=new THREE.WebGLCapabilities(Ee,ye,e),Te=new THREE.WebGLState(Ee,ye,H),be=new THREE.WebGLProperties,we=new THREE.WebGLObjects(Ee,be,this.info),_e=new THREE.WebGLPrograms(this,xe);this.info.programs=_e.programs;var Re=new THREE.WebGLBufferRenderer(Ee,ye,ge),Se=new THREE.WebGLIndexedBufferRenderer(Ee,ye,ge);n(),this.context=Ee,this.capabilities=xe,this.extensions=ye,this.state=Te;var Me=new THREE.WebGLShadowMap(this,j,we);this.shadowMap=Me;var Ce=new THREE.SpritePlugin(this,K),He=new THREE.LensFlarePlugin(this,Q);this.getContext=function(){return Ee},this.getContextAttributes=function(){return Ee.getContextAttributes()},this.forceContextLoss=function(){ye.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){var e;return function(){if(void 0!==e)return e;var t=ye.get("EXT_texture_filter_anisotropic");return e=null!==t?Ee.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return xe.precision},this.getPixelRatio=function(){return D},this.setPixelRatio=function(e){void 0!==e&&(D=e)},this.getSize=function(){return{width:L,height:k}},this.setSize=function(e,t,n){L=e,k=t,A.width=e*D,A.height=t*D,!1!==n&&(A.style.width=e+"px",A.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,r){ie=e*D,oe=t*D,ae=n*D,se=r*D,Ee.viewport(ie,oe,ae,se)},this.getViewport=function(e){e.x=ie/D,e.y=oe/D,e.z=ae/D,e.w=se/D},this.setScissor=function(e,t,n,r){Ee.scissor(e*D,t*D,n*D,r*D)},this.enableScissorTest=function(e){Te.setScissorTest(e)},this.getClearColor=function(){return V},this.setClearColor=function(e,n){V.set(e),z=void 0!==n?n:1,t(V.r,V.g,V.b,z)},this.getClearAlpha=function(){return z},this.setClearAlpha=function(e){z=e,t(V.r,V.g,V.b,z)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=Ee.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=Ee.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=Ee.STENCIL_BUFFER_BIT),Ee.clear(r)},this.clearColor=function(){Ee.clear(Ee.COLOR_BUFFER_BIT)},this.clearDepth=function(){Ee.clear(Ee.DEPTH_BUFFER_BIT)},this.clearStencil=function(){Ee.clear(Ee.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.resetGLState=r,this.dispose=function(){A.removeEventListener("webglcontextlost",i,!1)},this.renderBufferImmediate=function(e,t,n){Te.initAttributes();var r=be.get(e);if(e.hasPositions&&!r.position&&(r.position=Ee.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=Ee.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=Ee.createBuffer()),e.hasColors&&!r.color&&(r.color=Ee.createBuffer()),t=t.getAttributes(),e.hasPositions&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,r.position),Ee.bufferData(Ee.ARRAY_BUFFER,e.positionArray,Ee.DYNAMIC_DRAW),Te.enableAttribute(t.position),Ee.vertexAttribPointer(t.position,3,Ee.FLOAT,!1,0,0)),e.hasNormals){if(Ee.bindBuffer(Ee.ARRAY_BUFFER,r.normal),"MeshPhongMaterial"!==n.type&&n.shading===THREE.FlatShading)for(var i=0,o=3*e.count;i<o;i+=9){var a=e.normalArray,s=(a[i+0]+a[i+3]+a[i+6])/3,l=(a[i+1]+a[i+4]+a[i+7])/3,u=(a[i+2]+a[i+5]+a[i+8])/3;a[i+0]=s,a[i+1]=l,a[i+2]=u,a[i+3]=s,a[i+4]=l,a[i+5]=u,a[i+6]=s,a[i+7]=l,a[i+8]=u}Ee.bufferData(Ee.ARRAY_BUFFER,e.normalArray,Ee.DYNAMIC_DRAW),Te.enableAttribute(t.normal),Ee.vertexAttribPointer(t.normal,3,Ee.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,r.uv),Ee.bufferData(Ee.ARRAY_BUFFER,e.uvArray,Ee.DYNAMIC_DRAW),Te.enableAttribute(t.uv),Ee.vertexAttribPointer(t.uv,2,Ee.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==THREE.NoColors&&(Ee.bindBuffer(Ee.ARRAY_BUFFER,r.color),Ee.bufferData(Ee.ARRAY_BUFFER,e.colorArray,Ee.DYNAMIC_DRAW),Te.enableAttribute(t.color),Ee.vertexAttribPointer(t.color,3,Ee.FLOAT,!1,0,0)),Te.disableUnusedAttributes(),Ee.drawArrays(Ee.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o,a){v(i);var s=g(e,t,n,i,o),l=!1;if(e=r.id+"_"+s.id+"_"+i.wireframe,e!==te&&(te=e,l=!0),t=o.morphTargetInfluences,void 0!==t){for(e=[],n=0,l=t.length;n<l;n++){var c=t[n];e.push([c,n])}e.sort(u),8<e.length&&(e.length=8);var h=r.morphAttributes;for(n=0,l=e.length;n<l;n++)c=e[n],Y[n]=c[0],0!==c[0]?(t=c[1],!0===i.morphTargets&&h.position&&r.addAttribute("morphTarget"+n,h.position[t]),!0===i.morphNormals&&h.normal&&r.addAttribute("morphNormal"+n,h.normal[t])):(!0===i.morphTargets&&r.removeAttribute("morphTarget"+n),!0===i.morphNormals&&r.removeAttribute("morphNormal"+n));e=s.getUniforms(),null!==e.morphTargetInfluences&&Ee.uniform1fv(e.morphTargetInfluences,Y),l=!0}if(t=r.index,n=r.attributes.position,!0===i.wireframe&&(t=we.getWireframeAttribute(r)),null!==t?(e=Se,e.setIndex(t)):e=Re,l){var d,l=void 0;if(r instanceof THREE.InstancedBufferGeometry&&(d=ye.get("ANGLE_instanced_arrays"),null===d))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===l&&(l=0),Te.initAttributes();var p,c=r.attributes,s=s.getAttributes(),h=i.defaultAttributeValues;for(p in s){var f=s[p];if(0<=f){var m=c[p];if(void 0!==m){var E=m.itemSize,y=we.getAttributeBuffer(m);if(m instanceof THREE.InterleavedBufferAttribute){var x=m.data,T=x.stride,m=m.offset;x instanceof THREE.InstancedInterleavedBuffer?(Te.enableAttributeAndDivisor(f,x.meshPerAttribute,d),void 0===r.maxInstancedCount&&(r.maxInstancedCount=x.meshPerAttribute*x.count)):Te.enableAttribute(f),Ee.bindBuffer(Ee.ARRAY_BUFFER,y),Ee.vertexAttribPointer(f,E,Ee.FLOAT,!1,T*x.array.BYTES_PER_ELEMENT,(l*T+m)*x.array.BYTES_PER_ELEMENT)}else m instanceof THREE.InstancedBufferAttribute?(Te.enableAttributeAndDivisor(f,m.meshPerAttribute,d),void 0===r.maxInstancedCount&&(r.maxInstancedCount=m.meshPerAttribute*m.count)):Te.enableAttribute(f),Ee.bindBuffer(Ee.ARRAY_BUFFER,y),Ee.vertexAttribPointer(f,E,Ee.FLOAT,!1,0,l*E*4)}else if(void 0!==h&&(E=h[p],void 0!==E))switch(E.length){case 2:Ee.vertexAttrib2fv(f,E);break;case 3:Ee.vertexAttrib3fv(f,E);break;case 4:Ee.vertexAttrib4fv(f,E);break;default:Ee.vertexAttrib1fv(f,E)}}}Te.disableUnusedAttributes()}null!==t&&Ee.bindBuffer(Ee.ELEMENT_ARRAY_BUFFER,we.getAttributeBuffer(t))}d=1/0,null!==t?d=t.count:void 0!==n&&(d=n.count),p=r.drawRange.start,t=r.drawRange.count,n=null!==a?a.start:0,l=null!==a?a.count:1/0,a=Math.max(0,p,n),d=Math.min(0+d,p+t,n+l)-1,d=Math.max(0,d-a+1),o instanceof THREE.Mesh?(!0===i.wireframe?(Te.setLineWidth(i.wireframeLinewidth*D),e.setMode(Ee.LINES)):e.setMode(Ee.TRIANGLES),r instanceof THREE.InstancedBufferGeometry&&0<r.maxInstancedCount?e.renderInstances(r):e.render(a,d)):o instanceof THREE.Line?(r=i.linewidth,void 0===r&&(r=1),Te.setLineWidth(r*D),o instanceof THREE.LineSegments?e.setMode(Ee.LINES):e.setMode(Ee.LINE_STRIP),e.render(a,d)):o instanceof THREE.Points&&(e.setMode(Ee.POINTS),e.render(a,d))},this.render=function(e,t,n,r){if(!1==t instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var i=e.fog;te="",ee=-1,ne=null,fe=!0,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),he.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ce.setFromMatrix(he),j.length=0,X=W=-1,K.length=0,Q.length=0,f(e,t),G.length=W+1,q.length=X+1,!0===Z.sortObjects&&(G.sort(c),q.sort(h)),Me.render(e),ge.calls=0,ge.vertices=0,ge.faces=0,ge.points=0,this.setRenderTarget(n),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),e.overrideMaterial?(r=e.overrideMaterial,m(G,t,j,i,r),m(q,t,j,i,r)):(Te.setBlending(THREE.NoBlending),m(G,t,j,i),m(q,t,j,i)),Ce.render(e,t),He.render(e,t,le,ue),n&&(e=n.texture,t=w(n),e.generateMipmaps&&t&&e.minFilter!==THREE.NearestFilter&&e.minFilter!==THREE.LinearFilter&&(e=n instanceof THREE.WebGLRenderTargetCube?Ee.TEXTURE_CUBE_MAP:Ee.TEXTURE_2D,n=be.get(n.texture).__webglTexture,Te.bindTexture(e,n),Ee.generateMipmap(e),Te.bindTexture(e,null))),Te.setDepthTest(!0),Te.setDepthWrite(!0),Te.setColorWrite(!0)}},this.setFaceCulling=function(e,t){e===THREE.CullFaceNone?Te.disable(Ee.CULL_FACE):(t===THREE.FrontFaceDirectionCW?Ee.frontFace(Ee.CW):Ee.frontFace(Ee.CCW),e===THREE.CullFaceBack?Ee.cullFace(Ee.BACK):e===THREE.CullFaceFront?Ee.cullFace(Ee.FRONT):Ee.cullFace(Ee.FRONT_AND_BACK),Te.enable(Ee.CULL_FACE))},this.setTexture=function(e,t){var n=be.get(e);if(0<e.version&&n.__version!==e.version){var r=e.image;if(void 0===r)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else if(!1===r.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e);else{if(void 0===n.__webglInit&&(n.__webglInit=!0,e.addEventListener("dispose",o),n.__webglTexture=Ee.createTexture(),ve.textures++),Te.activeTexture(Ee.TEXTURE0+t),Te.bindTexture(Ee.TEXTURE_2D,n.__webglTexture),Ee.pixelStorei(Ee.UNPACK_FLIP_Y_WEBGL,e.flipY),Ee.pixelStorei(Ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Ee.pixelStorei(Ee.UNPACK_ALIGNMENT,e.unpackAlignment),e.image=b(e.image,xe.maxTextureSize),(e.wrapS!==THREE.ClampToEdgeWrapping||e.wrapT!==THREE.ClampToEdgeWrapping||e.minFilter!==THREE.NearestFilter&&e.minFilter!==THREE.LinearFilter)&&!1===w(e.image)){if(r=e.image,r instanceof HTMLImageElement||r instanceof HTMLCanvasElement){var i=document.createElement("canvas");i.width=THREE.Math.nearestPowerOfTwo(r.width),i.height=THREE.Math.nearestPowerOfTwo(r.height),i.getContext("2d").drawImage(r,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+r.width+"x"+r.height+"). Resized to "+i.width+"x"+i.height,r),r=i}e.image=r}var a=e.image,r=w(a),i=H(e.format),s=H(e.type);T(Ee.TEXTURE_2D,e,r);var l=e.mipmaps;if(e instanceof THREE.DataTexture)if(0<l.length&&r){for(var u=0,c=l.length;u<c;u++)a=l[u],Te.texImage2D(Ee.TEXTURE_2D,u,i,a.width,a.height,0,i,s,a.data);e.generateMipmaps=!1}else Te.texImage2D(Ee.TEXTURE_2D,0,i,a.width,a.height,0,i,s,a.data);else if(e instanceof THREE.CompressedTexture)for(u=0,c=l.length;u<c;u++)a=l[u],e.format!==THREE.RGBAFormat&&e.format!==THREE.RGBFormat?-1<Te.getCompressedTextureFormats().indexOf(i)?Te.compressedTexImage2D(Ee.TEXTURE_2D,u,i,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Te.texImage2D(Ee.TEXTURE_2D,u,i,a.width,a.height,0,i,s,a.data);else if(0<l.length&&r){for(u=0,c=l.length;u<c;u++)a=l[u],Te.texImage2D(Ee.TEXTURE_2D,u,i,i,s,a);e.generateMipmaps=!1}else Te.texImage2D(Ee.TEXTURE_2D,0,i,i,s,e.image);e.generateMipmaps&&r&&Ee.generateMipmap(Ee.TEXTURE_2D),n.__version=e.version,e.onUpdate&&e.onUpdate(e)}}else Te.activeTexture(Ee.TEXTURE0+t),Te.bindTexture(Ee.TEXTURE_2D,n.__webglTexture)},this.setRenderTarget=function(e){var t=e instanceof THREE.WebGLRenderTargetCube;if(e&&void 0===be.get(e).__webglFramebuffer){var n=be.get(e),r=be.get(e.texture);void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",a),r.__webglTexture=Ee.createTexture(),ve.textures++;var i=w(e),o=H(e.texture.format),s=H(e.texture.type);if(t){for(n.__webglFramebuffer=[],n.__webglRenderbuffer=[],Te.bindTexture(Ee.TEXTURE_CUBE_MAP,r.__webglTexture),T(Ee.TEXTURE_CUBE_MAP,e.texture,i),r=0;6>r;r++)n.__webglFramebuffer[r]=Ee.createFramebuffer(),n.__webglRenderbuffer[r]=Ee.createRenderbuffer(),Te.texImage2D(Ee.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,o,e.width,e.height,0,o,s,null),S(n.__webglFramebuffer[r],e,Ee.TEXTURE_CUBE_MAP_POSITIVE_X+r),M(n.__webglRenderbuffer[r],e);e.texture.generateMipmaps&&i&&Ee.generateMipmap(Ee.TEXTURE_CUBE_MAP)}else n.__webglFramebuffer=Ee.createFramebuffer(),n.__webglRenderbuffer=e.shareDepthFrom?e.shareDepthFrom.__webglRenderbuffer:Ee.createRenderbuffer(),Te.bindTexture(Ee.TEXTURE_2D,r.__webglTexture),T(Ee.TEXTURE_2D,e.texture,i),Te.texImage2D(Ee.TEXTURE_2D,0,o,e.width,e.height,0,o,s,null),S(n.__webglFramebuffer,e,Ee.TEXTURE_2D),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?Ee.framebufferRenderbuffer(Ee.FRAMEBUFFER,Ee.DEPTH_ATTACHMENT,Ee.RENDERBUFFER,n.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&Ee.framebufferRenderbuffer(Ee.FRAMEBUFFER,Ee.DEPTH_STENCIL_ATTACHMENT,Ee.RENDERBUFFER,n.__webglRenderbuffer):M(n.__webglRenderbuffer,e),e.texture.generateMipmaps&&i&&Ee.generateMipmap(Ee.TEXTURE_2D);t?Te.bindTexture(Ee.TEXTURE_CUBE_MAP,null):Te.bindTexture(Ee.TEXTURE_2D,null),Ee.bindRenderbuffer(Ee.RENDERBUFFER,null),Ee.bindFramebuffer(Ee.FRAMEBUFFER,null)}e?(n=be.get(e),r=t?n.__webglFramebuffer[e.activeCubeFace]:n.__webglFramebuffer,n=e.width,i=e.height,s=o=0):(r=null,n=ae,i=se,o=ie,s=oe),r!==$&&(Ee.bindFramebuffer(Ee.FRAMEBUFFER,r),Ee.viewport(o,s,n,i),$=r),t&&(r=be.get(e.texture),Ee.framebufferTexture2D(Ee.FRAMEBUFFER,Ee.COLOR_ATTACHMENT0,Ee.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,0)),
le=n,ue=i},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(!1==e instanceof THREE.WebGLRenderTarget)console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else{var a=be.get(e).__webglFramebuffer;if(a){var s=!1;a!==$&&(Ee.bindFramebuffer(Ee.FRAMEBUFFER,a),s=!0);try{var l=e.texture;l.format!==THREE.RGBAFormat&&H(l.format)!==Ee.getParameter(Ee.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):l.type===THREE.UnsignedByteType||H(l.type)===Ee.getParameter(Ee.IMPLEMENTATION_COLOR_READ_TYPE)||l.type===THREE.FloatType&&ye.get("WEBGL_color_buffer_float")||l.type===THREE.HalfFloatType&&ye.get("EXT_color_buffer_half_float")?Ee.checkFramebufferStatus(Ee.FRAMEBUFFER)===Ee.FRAMEBUFFER_COMPLETE?Ee.readPixels(t,n,r,i,H(l.format),H(l.type),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{s&&Ee.bindFramebuffer(Ee.FRAMEBUFFER,$)}}}},this.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),ye.get("OES_texture_float")},this.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),ye.get("OES_texture_half_float")},this.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),ye.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),ye.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),ye.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),ye.get("EXT_blend_minmax")},this.supportsVertexTextures=function(){return xe.vertexTextures},this.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),ye.get("ANGLE_instanced_arrays")},this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},(0,p.default)(this,{shadowMapEnabled:{get:function(){return Me.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),Me.enabled=e}},shadowMapType:{get:function(){return Me.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),Me.type=e}},shadowMapCullFace:{get:function(){return Me.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),Me.cullFace=e}},shadowMapDebug:{get:function(){return Me.debug},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug."),Me.debug=e}}})},THREE.WebGLRenderTarget=function(e,t,n){this.uuid=THREE.Math.generateUUID(),this.width=e,this.height=t,n=n||{},void 0===n.minFilter&&(n.minFilter=THREE.LinearFilter),this.texture=new THREE.Texture(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.shareDepthFrom=void 0!==n.shareDepthFrom?n.shareDepthFrom:null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,get wrapS(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set wrapS(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e},get wrapT(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set wrapT(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e},get magFilter(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set magFilter(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e},get minFilter(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set minFilter(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e},get anisotropy(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set anisotropy(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e},get offset(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set offset(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e},get repeat(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set repeat(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e},get format(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set format(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e},get type(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set type(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e},get generateMipmaps(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set generateMipmaps(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e},setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose())},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.shareDepthFrom=e.shareDepthFrom,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(e,t,n){THREE.WebGLRenderTarget.call(this,e,t,n),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=(0,u.default)(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube,THREE.WebGLBufferRenderer=function(e,t,n){var r;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.calls++,n.vertices+=i,r===e.TRIANGLES&&(n.faces+=i/3)},this.renderInstances=function(e){var n=t.get("ANGLE_instanced_arrays");if(null===n)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var i=e.attributes.position;i instanceof THREE.InterleavedBufferAttribute?n.drawArraysInstancedANGLE(r,0,i.data.count,e.maxInstancedCount):n.drawArraysInstancedANGLE(r,0,i.count,e.maxInstancedCount)}}},THREE.WebGLIndexedBufferRenderer=function(e,t,n){var r,i,o;this.setMode=function(e){r=e},this.setIndex=function(n){n.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(i=e.UNSIGNED_INT,o=4):(i=e.UNSIGNED_SHORT,o=2)},this.render=function(t,a){e.drawElements(r,a,i,t*o),n.calls++,n.vertices+=a,r===e.TRIANGLES&&(n.faces+=a/3)},this.renderInstances=function(e){var n=t.get("ANGLE_instanced_arrays");null===n?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):n.drawElementsInstancedANGLE(r,e.index.array.length,i,0,e.maxInstancedCount)}},THREE.WebGLExtensions=function(e){var t={};this.get=function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r}},THREE.WebGLCapabilities=function(e,t,n){function r(t){if("highp"===t){if(0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision)return"highp";t="mediump"}return"mediump"===t&&0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision?"mediump":"lowp"}this.getMaxPrecision=r,this.precision=void 0!==n.precision?n.precision:"highp",this.logarithmicDepthBuffer=void 0!==n.logarithmicDepthBuffer&&n.logarithmicDepthBuffer,this.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.maxVertexTextures=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxCubemapSize=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxAttributes=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.maxVertexUniforms=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),this.maxVaryings=e.getParameter(e.MAX_VARYING_VECTORS),this.maxFragmentUniforms=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),this.vertexTextures=0<this.maxVertexTextures,this.floatFragmentTextures=!!t.get("OES_texture_float"),this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures,n=r(this.precision),n!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",n,"instead."),this.precision=n),this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!t.get("EXT_frag_depth"))},THREE.WebGLGeometries=function(e,t,n){function r(e){e=e.target;var a,s=o[e.id].attributes;for(a in s)i(s[a]);e.removeEventListener("dispose",r),delete o[e.id],a=t.get(e),a.wireframe&&i(a.wireframe),n.memory.geometries--}function i(n){var r;r=n instanceof THREE.InterleavedBufferAttribute?t.get(n.data).__webglBuffer:t.get(n).__webglBuffer,void 0!==r&&(e.deleteBuffer(r),n instanceof THREE.InterleavedBufferAttribute?t.delete(n.data):t.delete(n))}var o={};this.get=function(e){var t=e.geometry;if(void 0!==o[t.id])return o[t.id];t.addEventListener("dispose",r);var i;return t instanceof THREE.BufferGeometry?i=t:t instanceof THREE.Geometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new THREE.BufferGeometry).setFromObject(e)),i=t._bufferGeometry),o[t.id]=i,n.memory.geometries++,i}},THREE.WebGLObjects=function(e,t,n){function r(n,r){var i=n instanceof THREE.InterleavedBufferAttribute?n.data:n,o=t.get(i);void 0===o.__webglBuffer?(o.__webglBuffer=e.createBuffer(),e.bindBuffer(r,o.__webglBuffer),e.bufferData(r,i.array,i.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW),o.version=i.version):o.version!==i.version&&(e.bindBuffer(r,o.__webglBuffer),!1===i.dynamic||-1===i.updateRange.count?e.bufferSubData(r,0,i.array):0===i.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,i.updateRange.offset*i.array.BYTES_PER_ELEMENT,i.array.subarray(i.updateRange.offset,i.updateRange.offset+i.updateRange.count)),i.updateRange.count=0),o.version=i.version)}function i(e,t,n){if(t>n){var r=t;t=n,n=r}return r=e[t],void 0===r?(e[t]=[n],!0):-1===r.indexOf(n)&&(r.push(n),!0)}var o=new THREE.WebGLGeometries(e,t,n);this.getAttributeBuffer=function(e){return e instanceof THREE.InterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer},this.getWireframeAttribute=function(n){var o=t.get(n);if(void 0!==o.wireframe)return o.wireframe;var a=[],s=n.index,l=n.attributes;if(n=l.position,null!==s)for(var l={},s=s.array,u=0,c=s.length;u<c;u+=3){var h=s[u+0],d=s[u+1],p=s[u+2];i(l,h,d)&&a.push(h,d),i(l,d,p)&&a.push(d,p),i(l,p,h)&&a.push(p,h)}else for(s=l.position.array,u=0,c=s.length/3-1;u<c;u+=3)h=u+0,d=u+1,p=u+2,a.push(h,d,d,p,p,h);return a=new THREE.BufferAttribute(new(65535<n.count?Uint32Array:Uint16Array)(a),1),r(a,e.ELEMENT_ARRAY_BUFFER),o.wireframe=a},this.update=function(t){var n=o.get(t);t.geometry instanceof THREE.Geometry&&n.updateFromObject(t),t=n.index;var i=n.attributes;null!==t&&r(t,e.ELEMENT_ARRAY_BUFFER);for(var a in i)r(i[a],e.ARRAY_BUFFER);t=n.morphAttributes;for(a in t)for(var i=t[a],s=0,l=i.length;s<l;s++)r(i[s],e.ARRAY_BUFFER);return n}},THREE.WebGLProgram=function(){function e(e){var t,n=[];for(t in e){var r=e[t];!1!==r&&n.push("#define "+t+" "+r)}return n.join("\n")}function t(e){return""!==e}var n=0;return function(r,i,o,a){var s=r.context,l=o.defines,u=o.__webglShader.vertexShader,c=o.__webglShader.fragmentShader,h="SHADOWMAP_TYPE_BASIC";a.shadowMapType===THREE.PCFShadowMap?h="SHADOWMAP_TYPE_PCF":a.shadowMapType===THREE.PCFSoftShadowMap&&(h="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",m="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(o.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:d="ENVMAP_TYPE_CUBE";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:d="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:d="ENVMAP_TYPE_SPHERE"}switch(o.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:f="ENVMAP_MODE_REFRACTION"}switch(o.combine){case THREE.MultiplyOperation:m="ENVMAP_BLENDING_MULTIPLY";break;case THREE.MixOperation:m="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:m="ENVMAP_BLENDING_ADD"}}var v=0<r.gammaFactor?r.gammaFactor:1,g=e(l),E=s.createProgram();o instanceof THREE.RawShaderMaterial?r=l="":(l=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+o.__webglShader.name,g,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.gammaInput?"#define GAMMA_INPUT":"",r.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+v,"#define MAX_DIR_LIGHTS "+a.maxDirLights,"#define MAX_POINT_LIGHTS "+a.maxPointLights,"#define MAX_SPOT_LIGHTS "+a.maxSpotLights,"#define MAX_HEMI_LIGHTS "+a.maxHemiLights,"#define MAX_SHADOWS "+a.maxShadows,"#define MAX_BONES "+a.maxBones,a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+h:"",a.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",0<a.pointLightShadows?"#define POINT_LIGHT_SHADOWS":"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&r.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(t).join("\n"),r=[a.bumpMap||a.normalMap||a.flatShading||o.derivatives?"#extension GL_OES_standard_derivatives : enable":"",a.logarithmicDepthBuffer&&r.extensions.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"","precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+o.__webglShader.name,g,"#define MAX_DIR_LIGHTS "+a.maxDirLights,"#define MAX_POINT_LIGHTS "+a.maxPointLights,"#define MAX_SPOT_LIGHTS "+a.maxSpotLights,"#define MAX_HEMI_LIGHTS "+a.maxHemiLights,"#define MAX_SHADOWS "+a.maxShadows,a.alphaTest?"#define ALPHATEST "+a.alphaTest:"",r.gammaInput?"#define GAMMA_INPUT":"",r.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+v,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.envMap?"#define "+f:"",a.envMap?"#define "+m:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.metal?"#define METAL":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+h:"",a.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",0<a.pointLightShadows?"#define POINT_LIGHT_SHADOWS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&r.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","\n"].filter(t).join("\n")),c=r+c,u=THREE.WebGLShader(s,s.VERTEX_SHADER,l+u),c=THREE.WebGLShader(s,s.FRAGMENT_SHADER,c),s.attachShader(E,u),s.attachShader(E,c),void 0!==o.index0AttributeName?s.bindAttribLocation(E,0,o.index0AttributeName):!0===a.morphTargets&&s.bindAttribLocation(E,0,"position"),s.linkProgram(E),a=s.getProgramInfoLog(E),h=s.getShaderInfoLog(u),d=s.getShaderInfoLog(c),m=f=!0,!1===s.getProgramParameter(E,s.LINK_STATUS)?(f=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(E,s.VALIDATE_STATUS),"gl.getProgramInfoLog",a,h,d)):""!==a?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",a):""!==h&&""!==d||(m=!1),m&&(this.diagnostics={runnable:f,material:o,programLog:a,vertexShader:{log:h,prefix:l},fragmentShader:{log:d,prefix:r}}),s.deleteShader(u),s.deleteShader(c);var y;this.getUniforms=function(){if(void 0===y){for(var e={},t=s.getProgramParameter(E,s.ACTIVE_UNIFORMS),n=0;n<t;n++){var r=s.getActiveUniform(E,n).name,i=s.getUniformLocation(E,r),o=r.lastIndexOf("[0]");-1!==o&&o===r.length-3&&(e[r.substr(0,o)]=i),e[r]=i}y=e}return y};var x;return this.getAttributes=function(){if(void 0===x){for(var e={},t=s.getProgramParameter(E,s.ACTIVE_ATTRIBUTES),n=0;n<t;n++){var r=s.getActiveAttrib(E,n).name;e[r]=s.getAttribLocation(E,r)}x=e}return x},this.destroy=function(){s.deleteProgram(E),this.program=void 0},(0,p.default)(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=n++,this.code=i,this.usedTimes=1,this.program=E,this.vertexShader=u,this.fragmentShader=c,this}}(),THREE.WebGLPrograms=function(e,t){var n=[],r={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},i="precision supportsVertexTextures map envMap envMapMode lightMap aoMap emissiveMap bumpMap normalMap displacementMap specularMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals maxDirLights maxPointLights maxSpotLights maxHemiLights maxShadows shadowMapEnabled pointLightShadows shadowMapType shadowMapDebug alphaTest metal doubleSided flipSided".split(" ");this.getParameters=function(n,i,o,a){var s,l,u,c,h,d=r[n.type];s=h=c=u=l=0;for(var p=i.length;s<p;s++){var f=i[s];!1!==f.visible&&(f instanceof THREE.DirectionalLight&&l++,f instanceof THREE.PointLight&&u++,f instanceof THREE.SpotLight&&c++,f instanceof THREE.HemisphereLight&&h++)}for(var f=s=p=0,m=i.length;f<m;f++){var v=i[f];v.castShadow&&((v instanceof THREE.SpotLight||v instanceof THREE.DirectionalLight)&&p++,v instanceof THREE.PointLight&&(p++,s++))}return i=p,t.floatVertexTextures&&a&&a.skeleton&&a.skeleton.useVertexTexture?p=1024:(p=Math.floor((t.maxVertexUniforms-20)/4),void 0!==a&&a instanceof THREE.SkinnedMesh&&(p=Math.min(a.skeleton.bones.length,p),p<a.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+a.skeleton.bones.length+", this GPU supports just "+p+" (try OpenGL instead of ANGLE)"))),f=e.getPrecision(),null!==n.precision&&(f=t.getMaxPrecision(n.precision),f!==n.precision&&console.warn("THREE.WebGLRenderer.initMaterial:",n.precision,"not supported, using",f,"instead.")),{shaderID:d,precision:f,supportsVertexTextures:t.vertexTextures,map:!!n.map,envMap:!!n.envMap,envMapMode:n.envMap&&n.envMap.mapping,lightMap:!!n.lightMap,aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,displacementMap:!!n.displacementMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,combine:n.combine,vertexColors:n.vertexColors,fog:o,useFog:n.fog,fogExp:o instanceof THREE.FogExp2,flatShading:n.shading===THREE.FlatShading,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:n.skinning,maxBones:p,useVertexTexture:t.floatVertexTextures&&a&&a.skeleton&&a.skeleton.useVertexTexture,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,maxDirLights:l,maxPointLights:u,maxSpotLights:c,maxHemiLights:h,maxShadows:i,pointLightShadows:s,shadowMapEnabled:e.shadowMap.enabled&&a.receiveShadow&&0<i,shadowMapType:e.shadowMap.type,shadowMapDebug:e.shadowMap.debug,alphaTest:n.alphaTest,metal:n.metal,doubleSided:n.side===THREE.DoubleSide,flipSided:n.side===THREE.BackSide}},this.getProgramCode=function(e,t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(r=0;r<i.length;r++){var o=i[r];n.push(o),n.push(t[o])}return n.join()},this.acquireProgram=function(t,r,i){for(var o,a=0,s=n.length;a<s;a++){var l=n[a];if(l.code===i){o=l,++o.usedTimes;break}}return void 0===o&&(o=new THREE.WebGLProgram(e,i,t,r),n.push(o)),o},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n},THREE.WebGLProperties=function(){var e={};this.get=function(t){t=t.uuid;var n=e[t];return void 0===n&&(n={},e[t]=n),n},this.delete=function(t){delete e[t.uuid]},this.clear=function(){e={}}},THREE.WebGLShader=function(){function e(e){e=e.split("\n");for(var t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}return function(t,n,r){var i=t.createShader(n);return t.shaderSource(i,r),t.compileShader(i),!1===t.getShaderParameter(i,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",n===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(i),e(r)),i}}(),THREE.WebGLShadowMap=function(e,t,n){function r(e,t,n,r){var i=e.geometry,o=null,o=d,a=e.customDepthMaterial;return n&&(o=p,a=e.customDistanceMaterial),a?o=a:(e=e instanceof THREE.SkinnedMesh&&t.skinning,a=0,void 0!==i.morphTargets&&0<i.morphTargets.length&&t.morphTargets&&(a|=1),e&&(a|=2),o=o[a]),o.visible=t.visible,o.wireframe=t.wireframe,o.wireframeLinewidth=t.wireframeLinewidth,n&&void 0!==o.uniforms.lightPos&&o.uniforms.lightPos.value.copy(r),o}function i(e,t){if(!1!==e.visible){(e instanceof THREE.Mesh||e instanceof THREE.Line||e instanceof THREE.Points)&&e.castShadow&&(!1===e.frustumCulled||!0===s.intersectsObject(e))&&!0===e.material.visible&&(e.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),h.push(e));for(var n=e.children,r=0,o=n.length;r<o;r++)i(n[r],t)}}var o=e.context,a=e.state,s=new THREE.Frustum,l=new THREE.Matrix4;new THREE.Vector3,new THREE.Vector3;for(var u=new THREE.Vector3,c=new THREE.Vector3,h=[],d=Array(4),p=Array(4),f=[new THREE.Vector3(1,0,0),new THREE.Vector3(-1,0,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1),new THREE.Vector3(0,1,0),new THREE.Vector3(0,-1,0)],m=[new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1)],v=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4],g=new THREE.Vector4,E=THREE.ShaderLib.depthRGBA,y=THREE.UniformsUtils.clone(E.uniforms),x=THREE.ShaderLib.distanceRGBA,T=THREE.UniformsUtils.clone(x.uniforms),b=0;4!==b;++b){var w=0!==(1&b),_=0!==(2&b),R=new THREE.ShaderMaterial({uniforms:y,vertexShader:E.vertexShader,fragmentShader:E.fragmentShader,morphTargets:w,skinning:_});R._shadowPass=!0,d[b]=R,w=new THREE.ShaderMaterial({uniforms:T,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,morphTargets:w,skinning:_}),w._shadowPass=!0,p[b]=w}var S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=THREE.PCFShadowMap,this.cullFace=THREE.CullFaceFront,this.render=function(d){var p,E;if(!1!==S.enabled&&(!1!==S.autoUpdate||!1!==S.needsUpdate)){o.clearColor(1,1,1,1),a.disable(o.BLEND),a.enable(o.CULL_FACE),o.frontFace(o.CCW),o.cullFace(S.cullFace===THREE.CullFaceFront?o.FRONT:o.BACK),a.setDepthTest(!0),e.getViewport(g);for(var y=0,x=t.length;y<x;y++){var T=t[y];if(!0===T.castShadow){var b=T.shadow,w=b.camera,_=b.mapSize;if(T instanceof THREE.PointLight){p=6,E=!0;var R=_.x/4,M=_.y/2;v[0].set(2*R,M,R,M),v[1].set(0,M,R,M),v[2].set(3*R,M,R,M),v[3].set(R,M,R,M),v[4].set(3*R,0,R,M),v[5].set(R,0,R,M)}else p=1,E=!1;for(null===b.map&&(R=THREE.LinearFilter,S.type===THREE.PCFSoftShadowMap&&(R=THREE.NearestFilter),b.map=new THREE.WebGLRenderTarget(_.x,_.y,{minFilter:R,magFilter:R,format:THREE.RGBAFormat}),b.matrix=new THREE.Matrix4,T instanceof THREE.SpotLight&&(w.aspect=_.x/_.y),w.updateProjectionMatrix()),_=b.map,b=b.matrix,c.setFromMatrixPosition(T.matrixWorld),w.position.copy(c),e.setRenderTarget(_),e.clear(),_=0;_<p;_++)for(E?(u.copy(w.position),u.add(f[_]),w.up.copy(m[_]),w.lookAt(u),R=v[_],e.setViewport(R.x,R.y,R.z,R.w)):(u.setFromMatrixPosition(T.target.matrixWorld),w.lookAt(u)),w.updateMatrixWorld(),w.matrixWorldInverse.getInverse(w.matrixWorld),b.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),b.multiply(w.projectionMatrix),b.multiply(w.matrixWorldInverse),l.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),s.setFromMatrix(l),h.length=0,i(d,w),R=0,M=h.length;R<M;R++){var C=h[R],H=n.update(C),A=C.material;if(A instanceof THREE.MeshFaceMaterial)for(var P=H.groups,A=A.materials,L=0,k=P.length;L<k;L++){var D=P[L],F=A[D.materialIndex];!0===F.visible&&(F=r(C,F,E,c),e.renderBufferDirect(w,t,null,H,F,C,D))}else F=r(C,A,E,c),e.renderBufferDirect(w,t,null,H,F,C,null)}e.resetGLState()}}e.setViewport(g.x,g.y,g.z,g.w),d=e.getClearColor(),p=e.getClearAlpha(),e.setClearColor(d,p),a.enable(o.BLEND),S.cullFace===THREE.CullFaceFront&&o.cullFace(o.BACK),e.resetGLState(),S.needsUpdate=!1}}},THREE.WebGLState=function(e,t,n){var r=this,i=new Uint8Array(16),o=new Uint8Array(16),a=new Uint8Array(16),s={},l=null,u=null,c=null,h=null,d=null,p=null,f=null,m=null,v=null,g=null,E=null,y=null,x=null,T=null,b=null,w=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),_=void 0,R={};this.init=function(){e.clearColor(0,0,0,1),e.clearDepth(1),e.clearStencil(0),this.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.frontFace(e.CCW),e.cullFace(e.BACK),this.enable(e.CULL_FACE),this.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA)},this.initAttributes=function(){for(var e=0,t=i.length;e<t;e++)i[e]=0},this.enableAttribute=function(n){i[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),0!==a[n]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),a[n]=0)},this.enableAttributeAndDivisor=function(t,n,r){i[t]=1,0===o[t]&&(e.enableVertexAttribArray(t),o[t]=1),a[t]!==n&&(r.vertexAttribDivisorANGLE(t,n),a[t]=n)},this.disableUnusedAttributes=function(){for(var t=0,n=o.length;t<n;t++)o[t]!==i[t]&&(e.disableVertexAttribArray(t),o[t]=0)},this.enable=function(t){!0!==s[t]&&(e.enable(t),s[t]=!0)},this.disable=function(t){!1!==s[t]&&(e.disable(t),s[t]=!1)},this.getCompressedTextureFormats=function(){if(null===l&&(l=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)l.push(n[r]);return l},this.setBlending=function(t,r,i,o,a,s,l){t!==u&&(t===THREE.NoBlending?this.disable(e.BLEND):t===THREE.AdditiveBlending?(this.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===THREE.SubtractiveBlending?(this.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===THREE.MultiplyBlending?(this.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):t===THREE.CustomBlending?this.enable(e.BLEND):(this.enable(e.BLEND),e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),u=t),t===THREE.CustomBlending?(a=a||r,s=s||i,l=l||o,r===c&&a===p||(e.blendEquationSeparate(n(r),n(a)),c=r,p=a),i===h&&o===d&&s===f&&l===m||(e.blendFuncSeparate(n(i),n(o),n(s),n(l)),h=i,d=o,f=s,m=l)):m=f=p=d=h=c=null},this.setDepthFunc=function(t){if(v!==t){if(t)switch(t){case THREE.NeverDepth:e.depthFunc(e.NEVER);break;case THREE.AlwaysDepth:e.depthFunc(e.ALWAYS);break;case THREE.LessDepth:e.depthFunc(e.LESS);break;case THREE.LessEqualDepth:e.depthFunc(e.LEQUAL);break;case THREE.EqualDepth:e.depthFunc(e.EQUAL);break;case THREE.GreaterEqualDepth:e.depthFunc(e.GEQUAL);break;case THREE.GreaterDepth:e.depthFunc(e.GREATER);break;case THREE.NotEqualDepth:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL);
}else e.depthFunc(e.LEQUAL);v=t}},this.setDepthTest=function(t){t?this.enable(e.DEPTH_TEST):this.disable(e.DEPTH_TEST)},this.setDepthWrite=function(t){g!==t&&(e.depthMask(t),g=t)},this.setColorWrite=function(t){E!==t&&(e.colorMask(t,t,t,t),E=t)},this.setFlipSided=function(t){y!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),y=t)},this.setLineWidth=function(t){t!==x&&(e.lineWidth(t),x=t)},this.setPolygonOffset=function(t,n,r){t?this.enable(e.POLYGON_OFFSET_FILL):this.disable(e.POLYGON_OFFSET_FILL),!t||T===n&&b===r||(e.polygonOffset(n,r),T=n,b=r)},this.setScissorTest=function(t){t?this.enable(e.SCISSOR_TEST):this.disable(e.SCISSOR_TEST)},this.activeTexture=function(t){void 0===t&&(t=e.TEXTURE0+w-1),_!==t&&(e.activeTexture(t),_=t)},this.bindTexture=function(t,n){void 0===_&&r.activeTexture();var i=R[_];void 0===i&&(i={type:void 0,texture:void 0},R[_]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n),i.type=t,i.texture=n)},this.compressedTexImage2D=function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error(e)}},this.texImage2D=function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error(e)}},this.reset=function(){for(var t=0;t<o.length;t++)1===o[t]&&(e.disableVertexAttribArray(t),o[t]=0);s={},y=E=g=u=l=null}},THREE.LensFlarePlugin=function(e,t){var n,r,i,o,a,s,l,u,c,h,d,p,f,m,v,g,E=e.context,y=e.state;this.render=function(x,T,b,w){if(0!==t.length){x=new THREE.Vector3;var _=w/b,R=.5*b,S=.5*w,M=16/w,C=new THREE.Vector2(M*_,M),H=new THREE.Vector3(1,1,0),A=new THREE.Vector2(1,1);if(void 0===f){var M=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),P=new Uint16Array([0,1,2,0,2,3]);d=E.createBuffer(),p=E.createBuffer(),E.bindBuffer(E.ARRAY_BUFFER,d),E.bufferData(E.ARRAY_BUFFER,M,E.STATIC_DRAW),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,p),E.bufferData(E.ELEMENT_ARRAY_BUFFER,P,E.STATIC_DRAW),v=E.createTexture(),g=E.createTexture(),y.bindTexture(E.TEXTURE_2D,v),E.texImage2D(E.TEXTURE_2D,0,E.RGB,16,16,0,E.RGB,E.UNSIGNED_BYTE,null),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),y.bindTexture(E.TEXTURE_2D,g),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,16,16,0,E.RGBA,E.UNSIGNED_BYTE,null),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST);var M=(m=0<E.getParameter(E.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},P=E.createProgram(),L=E.createShader(E.FRAGMENT_SHADER),k=E.createShader(E.VERTEX_SHADER),D="precision "+e.getPrecision()+" float;\n";E.shaderSource(L,D+M.fragmentShader),E.shaderSource(k,D+M.vertexShader),E.compileShader(L),E.compileShader(k),E.attachShader(P,L),E.attachShader(P,k),E.linkProgram(P),f=P,c=E.getAttribLocation(f,"position"),h=E.getAttribLocation(f,"uv"),n=E.getUniformLocation(f,"renderType"),r=E.getUniformLocation(f,"map"),i=E.getUniformLocation(f,"occlusionMap"),o=E.getUniformLocation(f,"opacity"),a=E.getUniformLocation(f,"color"),s=E.getUniformLocation(f,"scale"),l=E.getUniformLocation(f,"rotation"),u=E.getUniformLocation(f,"screenPosition")}for(E.useProgram(f),y.initAttributes(),y.enableAttribute(c),y.enableAttribute(h),y.disableUnusedAttributes(),E.uniform1i(i,0),E.uniform1i(r,1),E.bindBuffer(E.ARRAY_BUFFER,d),E.vertexAttribPointer(c,2,E.FLOAT,!1,16,0),E.vertexAttribPointer(h,2,E.FLOAT,!1,16,8),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,p),y.disable(E.CULL_FACE),E.depthMask(!1),P=0,L=t.length;P<L;P++)if(M=16/w,C.set(M*_,M),k=t[P],x.set(k.matrixWorld.elements[12],k.matrixWorld.elements[13],k.matrixWorld.elements[14]),x.applyMatrix4(T.matrixWorldInverse),x.applyProjection(T.projectionMatrix),H.copy(x),A.x=H.x*R+R,A.y=H.y*S+S,m||0<A.x&&A.x<b&&0<A.y&&A.y<w){y.activeTexture(E.TEXTURE0),y.bindTexture(E.TEXTURE_2D,null),y.activeTexture(E.TEXTURE1),y.bindTexture(E.TEXTURE_2D,v),E.copyTexImage2D(E.TEXTURE_2D,0,E.RGB,A.x-8,A.y-8,16,16,0),E.uniform1i(n,0),E.uniform2f(s,C.x,C.y),E.uniform3f(u,H.x,H.y,H.z),y.disable(E.BLEND),y.enable(E.DEPTH_TEST),E.drawElements(E.TRIANGLES,6,E.UNSIGNED_SHORT,0),y.activeTexture(E.TEXTURE0),y.bindTexture(E.TEXTURE_2D,g),E.copyTexImage2D(E.TEXTURE_2D,0,E.RGBA,A.x-8,A.y-8,16,16,0),E.uniform1i(n,1),y.disable(E.DEPTH_TEST),y.activeTexture(E.TEXTURE1),y.bindTexture(E.TEXTURE_2D,v),E.drawElements(E.TRIANGLES,6,E.UNSIGNED_SHORT,0),k.positionScreen.copy(H),k.customUpdateCallback?k.customUpdateCallback(k):k.updateLensFlares(),E.uniform1i(n,2),y.enable(E.BLEND);for(var D=0,F=k.lensFlares.length;D<F;D++){var O=k.lensFlares[D];.001<O.opacity&&.001<O.scale&&(H.x=O.x,H.y=O.y,H.z=O.z,M=O.size*O.scale/w,C.x=M*_,C.y=M,E.uniform3f(u,H.x,H.y,H.z),E.uniform2f(s,C.x,C.y),E.uniform1f(l,O.rotation),E.uniform1f(o,O.opacity),E.uniform3f(a,O.color.r,O.color.g,O.color.b),y.setBlending(O.blending,O.blendEquation,O.blendSrc,O.blendDst),e.setTexture(O.texture,1),E.drawElements(E.TRIANGLES,6,E.UNSIGNED_SHORT,0))}}y.enable(E.CULL_FACE),y.enable(E.DEPTH_TEST),E.depthMask(!0),e.resetGLState()}}},THREE.SpritePlugin=function(e,t){function n(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var r,i,o,a,s,l,u,c,h,d,p,f,m,v,g,E,y,x,T,b,w,_=e.context,R=e.state,S=new THREE.Vector3,M=new THREE.Quaternion,C=new THREE.Vector3;this.render=function(H,A){if(0!==t.length){if(void 0===b){var P=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),L=new Uint16Array([0,1,2,0,2,3]);x=_.createBuffer(),T=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,x),_.bufferData(_.ARRAY_BUFFER,P,_.STATIC_DRAW),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,T),_.bufferData(_.ELEMENT_ARRAY_BUFFER,L,_.STATIC_DRAW);var P=_.createProgram(),L=_.createShader(_.VERTEX_SHADER),k=_.createShader(_.FRAGMENT_SHADER);_.shaderSource(L,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")),_.shaderSource(k,["precision "+e.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")),_.compileShader(L),_.compileShader(k),_.attachShader(P,L),_.attachShader(P,k),_.linkProgram(P),b=P,E=_.getAttribLocation(b,"position"),y=_.getAttribLocation(b,"uv"),r=_.getUniformLocation(b,"uvOffset"),i=_.getUniformLocation(b,"uvScale"),o=_.getUniformLocation(b,"rotation"),a=_.getUniformLocation(b,"scale"),s=_.getUniformLocation(b,"color"),l=_.getUniformLocation(b,"map"),u=_.getUniformLocation(b,"opacity"),c=_.getUniformLocation(b,"modelViewMatrix"),h=_.getUniformLocation(b,"projectionMatrix"),d=_.getUniformLocation(b,"fogType"),p=_.getUniformLocation(b,"fogDensity"),f=_.getUniformLocation(b,"fogNear"),m=_.getUniformLocation(b,"fogFar"),v=_.getUniformLocation(b,"fogColor"),g=_.getUniformLocation(b,"alphaTest"),P=document.createElement("canvas"),P.width=8,P.height=8,L=P.getContext("2d"),L.fillStyle="white",L.fillRect(0,0,8,8),w=new THREE.Texture(P),w.needsUpdate=!0}_.useProgram(b),R.initAttributes(),R.enableAttribute(E),R.enableAttribute(y),R.disableUnusedAttributes(),R.disable(_.CULL_FACE),R.enable(_.BLEND),_.bindBuffer(_.ARRAY_BUFFER,x),_.vertexAttribPointer(E,2,_.FLOAT,!1,16,0),_.vertexAttribPointer(y,2,_.FLOAT,!1,16,8),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,T),_.uniformMatrix4fv(h,!1,A.projectionMatrix.elements),R.activeTexture(_.TEXTURE0),_.uniform1i(l,0),L=P=0,(k=H.fog)?(_.uniform3f(v,k.color.r,k.color.g,k.color.b),k instanceof THREE.Fog?(_.uniform1f(f,k.near),_.uniform1f(m,k.far),_.uniform1i(d,1),L=P=1):k instanceof THREE.FogExp2&&(_.uniform1f(p,k.density),_.uniform1i(d,2),L=P=2)):(_.uniform1i(d,0),L=P=0);for(var k=0,D=t.length;k<D;k++){var F=t[k];F.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,F.matrixWorld),F.z=-F.modelViewMatrix.elements[14]}t.sort(n);for(var O=[],k=0,D=t.length;k<D;k++){var F=t[k],B=F.material;_.uniform1f(g,B.alphaTest),_.uniformMatrix4fv(c,!1,F.modelViewMatrix.elements),F.matrixWorld.decompose(S,M,C),O[0]=C.x,O[1]=C.y,F=0,H.fog&&B.fog&&(F=L),P!==F&&(_.uniform1i(d,F),P=F),null!==B.map?(_.uniform2f(r,B.map.offset.x,B.map.offset.y),_.uniform2f(i,B.map.repeat.x,B.map.repeat.y)):(_.uniform2f(r,0,0),_.uniform2f(i,1,1)),_.uniform1f(u,B.opacity),_.uniform3f(s,B.color.r,B.color.g,B.color.b),_.uniform1f(o,B.rotation),_.uniform2fv(a,O),R.setBlending(B.blending,B.blendEquation,B.blendSrc,B.blendDst),R.setDepthTest(B.depthTest),R.setDepthWrite(B.depthWrite),B.map&&B.map.image&&B.map.image.width?e.setTexture(B.map,0):e.setTexture(w,0),_.drawElements(_.TRIANGLES,6,_.UNSIGNED_SHORT,0)}R.enable(_.CULL_FACE),e.resetGLState()}}},THREE.CurveUtils={tangentQuadraticBezier:function(e,t,n,r){return 2*(1-e)*(n-t)+2*e*(r-n)},tangentCubicBezier:function(e,t,n,r,i){return-3*t*(1-e)*(1-e)+3*n*(1-e)*(1-e)-6*e*n*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*i},tangentSpline:function(e,t,n,r,i){return 6*e*e-6*e+(3*e*e-4*e+1)+(-6*e*e+6*e)+(3*e*e-2*e)},interpolate:function(e,t,n,r,i){e=.5*(n-e),r=.5*(r-t);var o=i*i;return(2*t-2*n+e+r)*i*o+(-3*t+3*n-2*e-r)*o+e*i+t}},THREE.GeometryUtils={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture is being deprecated. Use THREE.TextureLoader() instead.");var i=new THREE.TextureLoader;return i.setCrossOrigin(this.crossOrigin),e=i.load(e,n,void 0,r),t&&(e.mapping=t),e},loadTextureCube:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube is being deprecated. Use THREE.CubeTextureLoader() instead.");var i=new THREE.CubeTextureLoader;return i.setCrossOrigin(this.crossOrigin),e=i.load(e,n,void 0,r),t&&(e.mapping=t),e},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},THREE.SceneUtils={createMultiMaterialObject:function(e,t){for(var n=new THREE.Group,r=0,i=t.length;r<i;r++)n.add(new THREE.Mesh(e,t[r]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var r=new THREE.Matrix4;r.getInverse(n.matrixWorld),e.applyMatrix(r),t.remove(e),n.add(e)}},THREE.ShapeUtils={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},triangulate:function(){return function(e,t){var n=e.length;if(3>n)return null;var r,i,o,a=[],s=[],l=[];if(0<THREE.ShapeUtils.area(e))for(i=0;i<n;i++)s[i]=i;else for(i=0;i<n;i++)s[i]=n-1-i;var u=2*n;for(i=n-1;2<n;){if(0>=u--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}r=i,n<=r&&(r=0),i=r+1,n<=i&&(i=0),o=i+1,n<=o&&(o=0);var c;e:{var h=c=void 0,d=void 0,p=void 0,f=void 0,m=void 0,v=void 0,g=void 0,E=void 0,h=e[s[r]].x,d=e[s[r]].y,p=e[s[i]].x,f=e[s[i]].y,m=e[s[o]].x,v=e[s[o]].y;if(y.default>(p-h)*(v-d)-(f-d)*(m-h))c=!1;else{var x=void 0,T=void 0,b=void 0,w=void 0,_=void 0,R=void 0,S=void 0,M=void 0,C=void 0,H=void 0,C=M=S=E=g=void 0,x=m-p,T=v-f,b=h-m,w=d-v,_=p-h,R=f-d;for(c=0;c<n;c++)if(g=e[s[c]].x,E=e[s[c]].y,!(g===h&&E===d||g===p&&E===f||g===m&&E===v)&&(S=g-h,M=E-d,C=g-p,H=E-f,g-=m,E-=v,C=x*H-T*C,S=_*M-R*S,M=b*E-w*g,C>=-y.default&&M>=-y.default&&S>=-y.default)){c=!1;break e}c=!0}}if(c){for(a.push([e[s[r]],e[s[i]],e[s[o]]]),l.push([s[r],s[i],s[o]]),r=i,o=i+1;o<n;r++,o++)s[r]=s[o];n--,u=2*n}}return t?l:a}}(),triangulateShape:function(e,t){function n(e,t,n){return e.x!==t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function r(e,t,r,i,o){var a=t.x-e.x,s=t.y-e.y,l=i.x-r.x,u=i.y-r.y,c=e.x-r.x,h=e.y-r.y,d=s*l-a*u,p=s*c-a*h;if(Math.abs(d)>y.default){if(0<d){if(0>p||p>d)return[];if(l=u*c-l*h,0>l||l>d)return[]}else{if(0<p||p<d)return[];if(l=u*c-l*h,0<l||l<d)return[]}return 0===l?!o||0!==p&&p!==d?[e]:[]:l===d?!o||0!==p&&p!==d?[t]:[]:0===p?[r]:p===d?[i]:(o=l/d,[{x:e.x+o*a,y:e.y+o*s}])}return 0!==p||u*c!==l*h?[]:(s=0===a&&0===s,l=0===l&&0===u,s&&l?e.x!==r.x||e.y!==r.y?[]:[e]:s?n(r,i,e)?[e]:[]:l?n(e,t,r)?[r]:[]:(0!==a?(e.x<t.x?(a=e,l=e.x,s=t,e=t.x):(a=t,l=t.x,s=e,e=e.x),r.x<i.x?(t=r,d=r.x,u=i,r=i.x):(t=i,d=i.x,u=r,r=r.x)):(e.y<t.y?(a=e,l=e.y,s=t,e=t.y):(a=t,l=t.y,s=e,e=e.y),r.y<i.y?(t=r,d=r.y,u=i,r=i.y):(t=i,d=i.y,u=r,r=r.y)),l<=d?e<d?[]:e===d?o?[]:[t]:e<=r?[t,s]:[t,u]:l>r?[]:l===r?o?[]:[a]:e<=r?[a,s]:[a,u]))}function i(e,t,n,r){var i=t.x-e.x,o=t.y-e.y;t=n.x-e.x,n=n.y-e.y;var a=r.x-e.x;return r=r.y-e.y,e=i*n-o*t,i=i*r-o*a,Math.abs(e)>y.default?(t=a*n-r*t,0<e?0<=i&&0<=t:0<=i||0<=t):0<i}var o,a,s,l,u,c={};for(s=e.concat(),o=0,a=t.length;o<a;o++)Array.prototype.push.apply(s,t[o]);for(o=0,a=s.length;o<a;o++)u=s[o].x+":"+s[o].y,void 0!==c[u]&&console.warn("THREE.Shape: Duplicate point",u),c[u]=o;o=function(e,t){function n(e,t){var n=v.length-1,r=e-1;0>r&&(r=n);var o=e+1;return o>n&&(o=0),!!(n=i(v[e],v[r],v[o],s[t]))&&(n=s.length-1,r=t-1,0>r&&(r=n),o=t+1,o>n&&(o=0),!!(n=i(s[t],s[r],s[o],v[e])))}function o(e,t){var n,i;for(n=0;n<v.length;n++)if(i=n+1,i%=v.length,i=r(e,t,v[n],v[i],!0),0<i.length)return!0;return!1}function a(e,n){var i,o,a,s;for(i=0;i<g.length;i++)for(o=t[g[i]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,s=r(e,n,o[a],o[s],!0),0<s.length)return!0;return!1}var s,l,u,c,h,d,p,f,m,v=e.concat(),g=[],E=[],y=0;for(l=t.length;y<l;y++)g.push(y);p=0;for(var x=2*g.length;0<g.length;){if(x--,0>x){console.log("Infinite Loop! Holes left:"+g.length+", Probably Hole outside Shape!");break}for(u=p;u<v.length;u++){for(c=v[u],l=-1,y=0;y<g.length;y++)if(h=g[y],d=c.x+":"+c.y+":"+h,void 0===E[d]){for(s=t[h],f=0;f<s.length;f++)if(h=s[f],n(u,f)&&!o(c,h)&&!a(c,h)){l=f,g.splice(y,1),p=v.slice(0,u+1),h=v.slice(u),f=s.slice(l),m=s.slice(0,l+1),v=p.concat(f).concat(m).concat(h),p=u;break}if(0<=l)break;E[d]=!0}if(0<=l)break}}return v}(e,t);var h=THREE.ShapeUtils.triangulate(o,!1);for(o=0,a=h.length;o<a;o++)for(l=h[o],s=0;3>s;s++)u=l[s].x+":"+l[s].y,u=c[u],void 0!==u&&(l[s]=u);return h.concat()},isClockWise:function(e){return 0>THREE.ShapeUtils.area(e)},b2:function(){return function(e,t,n,r){var i=1-e;return i*i*t+2*(1-e)*e*n+e*e*r}}(),b3:function(){return function(e,t,n,r,i){var o=1-e,a=1-e;return o*o*o*t+3*a*a*e*n+3*(1-e)*e*e*r+e*e*e*i}}()},THREE.Audio=function(e){THREE.Object3D.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1},THREE.Audio.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.Audio.prototype.constructor=THREE.Audio,THREE.Audio.prototype.load=function(e){var t=this,n=new XMLHttpRequest;return n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(e){t.context.decodeAudioData(this.response,function(e){t.source.buffer=e,t.autoplay&&t.play()})},n.send(),this},THREE.Audio.prototype.play=function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{var e=this.context.createBufferSource();e.buffer=this.source.buffer,e.loop=this.source.loop,e.onended=this.source.onended,e.start(0,this.startTime),e.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=e,this.connect()}},THREE.Audio.prototype.pause=function(){this.source.stop(),this.startTime=this.context.currentTime},THREE.Audio.prototype.stop=function(){this.source.stop(),this.startTime=0},THREE.Audio.prototype.connect=function(){void 0!==this.filter?(this.source.connect(this.filter),this.filter.connect(this.panner)):this.source.connect(this.panner)},THREE.Audio.prototype.disconnect=function(){void 0!==this.filter?(this.source.disconnect(this.filter),this.filter.disconnect(this.panner)):this.source.disconnect(this.panner)},THREE.Audio.prototype.setFilter=function(e){!0===this.isPlaying?(this.disconnect(),this.filter=e,this.connect()):this.filter=e},THREE.Audio.prototype.getFilter=function(){return this.filter},THREE.Audio.prototype.setPlaybackRate=function(e){this.playbackRate=e,!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate)},THREE.Audio.prototype.getPlaybackRate=function(){return this.playbackRate},THREE.Audio.prototype.onEnded=function(){this.isPlaying=!1};THREE.Audio.prototype.setLoop=function(e){this.source.loop=e};THREE.Audio.prototype.getLoop=function(){return this.source.loop},THREE.Audio.prototype.setRefDistance=function(e){this.panner.refDistance=e},THREE.Audio.prototype.getRefDistance=function(){return this.panner.refDistance},THREE.Audio.prototype.setRolloffFactor=function(e){this.panner.rolloffFactor=e},THREE.Audio.prototype.getRolloffFactor=function(){return this.panner.rolloffFactor},THREE.Audio.prototype.setVolume=function(e){this.gain.gain.value=e},THREE.Audio.prototype.getVolume=function(){return this.gain.gain.value},THREE.Audio.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3;return function(t){THREE.Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}(),THREE.AudioListener=function(){THREE.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},THREE.AudioListener.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.AudioListener.prototype.constructor=THREE.AudioListener,THREE.AudioListener.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3,t=new THREE.Quaternion,n=new THREE.Vector3,r=new THREE.Vector3;return function(i){THREE.Object3D.prototype.updateMatrixWorld.call(this,i),i=this.context.listener;var o=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),i.setPosition(e.x,e.y,e.z),i.setOrientation(r.x,r.y,r.z,o.x,o.y,o.z)}}(),THREE.Curve=function(){},THREE.Curve.prototype={constructor:THREE.Curve,getPoint:function(e){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){return e=this.getUtoTmapping(e),this.getPoint(e)},getPoints:function(e){e||(e=5);var t,n=[];for(t=0;t<=e;t++)n.push(this.getPoint(t/e));return n},getSpacedPoints:function(e){e||(e=5);var t,n=[];for(t=0;t<=e;t++)n.push(this.getPointAt(t/e));return n},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)t=this.getPoint(n/e),o+=t.distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t?t:e*r[o-1];for(var a,s=0,l=o-1;s<=l;)if(i=Math.floor(s+(l-s)/2),a=r[i]-n,0>a)s=i+1;else{if(!(0<a)){l=i;break}l=i-1}return i=l,r[i]===n?i/(o-1):(s=r[i],r=(i+(n-s)/(r[i+1]-s))/(o-1))},getTangent:function(e){var t=e-1e-4;return e+=1e-4,0>t&&(t=0),1<e&&(e=1),t=this.getPoint(t),this.getPoint(e).clone().sub(t).normalize()},getTangentAt:function(e){return e=this.getUtoTmapping(e),this.getTangent(e)}},THREE.Curve.Utils=THREE.CurveUtils,THREE.Curve.create=function(e,t){return e.prototype=(0,u.default)(THREE.Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},THREE.CurvePath=function(){this.curves=[],this.autoClose=!1},THREE.CurvePath.prototype=(0,u.default)(THREE.Curve.prototype),THREE.CurvePath.prototype.constructor=THREE.CurvePath,THREE.CurvePath.prototype.add=function(e){this.curves.push(e)},THREE.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new THREE.LineCurve(t,e))},THREE.CurvePath.prototype.getPoint=function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t)return e=this.curves[r],t=1-(n[r]-t)/e.getLength(),e.getPointAt(t);r++}return null},THREE.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e},THREE.CurvePath.prototype.createPointsGeometry=function(e){return e=this.getPoints(e,!0),this.createGeometry(e)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(e){return e=this.getSpacedPoints(e,!0),this.createGeometry(e)},THREE.CurvePath.prototype.createGeometry=function(e){for(var t=new THREE.Geometry,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new THREE.Vector3(i.x,i.y,i.z||0))}return t},THREE.Path=function(e){THREE.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},THREE.Path.prototype=(0,u.default)(THREE.CurvePath.prototype),THREE.Path.prototype.constructor=THREE.Path,THREE.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},THREE.Path.prototype.moveTo=function(e,t){this.actions.push({action:"moveTo",args:[e,t]})},THREE.Path.prototype.lineTo=function(e,t){var n=this.actions[this.actions.length-1].args,n=new THREE.LineCurve(new THREE.Vector2(n[n.length-2],n[n.length-1]),new THREE.Vector2(e,t));this.curves.push(n),this.actions.push({action:"lineTo",args:[e,t]})},THREE.Path.prototype.quadraticCurveTo=function(e,t,n,r){var i=this.actions[this.actions.length-1].args,i=new THREE.QuadraticBezierCurve(new THREE.Vector2(i[i.length-2],i[i.length-1]),new THREE.Vector2(e,t),new THREE.Vector2(n,r));this.curves.push(i),this.actions.push({action:"quadraticCurveTo",args:[e,t,n,r]})},THREE.Path.prototype.bezierCurveTo=function(e,t,n,r,i,o){var a=this.actions[this.actions.length-1].args,a=new THREE.CubicBezierCurve(new THREE.Vector2(a[a.length-2],a[a.length-1]),new THREE.Vector2(e,t),new THREE.Vector2(n,r),new THREE.Vector2(i,o));this.curves.push(a),this.actions.push({action:"bezierCurveTo",args:[e,t,n,r,i,o]})},THREE.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,n=[new THREE.Vector2(n[n.length-2],n[n.length-1])];Array.prototype.push.apply(n,e),n=new THREE.SplineCurve(n),this.curves.push(n),this.actions.push({action:"splineThru",args:t})},THREE.Path.prototype.arc=function(e,t,n,r,i,o){var a=this.actions[this.actions.length-1].args;this.absarc(e+a[a.length-2],t+a[a.length-1],n,r,i,o)},THREE.Path.prototype.absarc=function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},THREE.Path.prototype.ellipse=function(e,t,n,r,i,o,a,s){var l=this.actions[this.actions.length-1].args;this.absellipse(e+l[l.length-2],t+l[l.length-1],n,r,i,o,a,s)},THREE.Path.prototype.absellipse=function(e,t,n,r,i,o,a,s){var l=[e,t,n,r,i,o,a,s||0];e=new THREE.EllipseCurve(e,t,n,r,i,o,a,s),this.curves.push(e),e=e.getPoint(1),l.push(e.x),l.push(e.y),this.actions.push({action:"ellipse",args:l})},THREE.Path.prototype.getSpacedPoints=function(e,t){e||(e=40);for(var n=[],r=0;r<e;r++)n.push(this.getPoint(r/e));return n},THREE.Path.prototype.getPoints=function(e,t){e=e||12;for(var n,r,i,o,a,s,l,u,c,h,d=THREE.ShapeUtils.b2,p=THREE.ShapeUtils.b3,f=[],m=0,v=this.actions.length;m<v;m++){c=this.actions[m];var g=c.args;switch(c.action){case"moveTo":f.push(new THREE.Vector2(g[0],g[1]));break;case"lineTo":f.push(new THREE.Vector2(g[0],g[1]));break;case"quadraticCurveTo":for(n=g[2],r=g[3],a=g[0],s=g[1],0<f.length?(c=f[f.length-1],l=c.x,u=c.y):(c=this.actions[m-1].args,l=c[c.length-2],u=c[c.length-1]),g=1;g<=e;g++)h=g/e,c=d(h,l,a,n),h=d(h,u,s,r),f.push(new THREE.Vector2(c,h));break;case"bezierCurveTo":for(n=g[4],r=g[5],a=g[0],s=g[1],i=g[2],o=g[3],0<f.length?(c=f[f.length-1],l=c.x,u=c.y):(c=this.actions[m-1].args,l=c[c.length-2],u=c[c.length-1]),g=1;g<=e;g++)h=g/e,c=p(h,l,a,i,n),h=p(h,u,s,o,r),f.push(new THREE.Vector2(c,h));break;case"splineThru":for(c=this.actions[m-1].args,h=[new THREE.Vector2(c[c.length-2],c[c.length-1])],c=e*g[0].length,h=h.concat(g[0]),h=new THREE.SplineCurve(h),g=1;g<=c;g++)f.push(h.getPointAt(g/c));break;case"arc":for(n=g[0],r=g[1],s=g[2],i=g[3],c=g[4],a=!!g[5],l=c-i,u=2*e,g=1;g<=u;g++)h=g/u,a||(h=1-h),h=i+h*l,c=n+s*Math.cos(h),h=r+s*Math.sin(h),f.push(new THREE.Vector2(c,h));break;case"ellipse":n=g[0],r=g[1],s=g[2],o=g[3],i=g[4],c=g[5],a=!!g[6];var E=g[7];l=c-i,u=2*e;var x,T;for(0!==E&&(x=Math.cos(E),T=Math.sin(E)),g=1;g<=u;g++){if(h=g/u,a||(h=1-h),h=i+h*l,c=n+s*Math.cos(h),h=r+o*Math.sin(h),0!==E){var b=c;c=(b-n)*x-(h-r)*T+n,h=(b-n)*T+(h-r)*x+r}f.push(new THREE.Vector2(c,h))}}}return d=f[f.length-1],Math.abs(d.x-f[0].x)<y.default&&Math.abs(d.y-f[0].y)<y.default&&f.splice(f.length-1,1),t&&f.push(f[0]),f},THREE.Path.prototype.toShapes=function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new THREE.Shape;o.actions=i.actions,o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],l=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>y.default){if(0>u&&(a=t[o],l=-l,s=t[i],u=-u),!(e.y<a.y||e.y>s.y))if(e.y===a.y){if(e.x===a.x)return!0}else{if(i=u*(e.x-a.x)-l*(e.y-a.y),0===i)return!0;0>i||(r=!r)}}else if(e.y===a.y&&(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x))return!0}return r}var i=THREE.ShapeUtils.isClockWise,o=function(e){for(var t=[],n=new THREE.Path,r=0,i=e.length;r<i;r++){var o=e[r],a=o.args,o=o.action;"moveTo"===o&&0!==n.actions.length&&(t.push(n),n=new THREE.Path),n[o].apply(n,a)}return 0!==n.actions.length&&t.push(n),t}(this.actions);if(0===o.length)return[];if(!0===t)return n(o);var a,s,l,u=[];if(1===o.length)return s=o[0],l=new THREE.Shape,l.actions=s.actions,l.curves=s.curves,u.push(l),u;var c=!i(o[0].getPoints()),c=e?!c:c;l=[];var h,d=[],p=[],f=0;d[f]=void 0,p[f]=[];for(var m=0,v=o.length;m<v;m++)s=o[m],h=s.getPoints(),a=i(h),(a=e?!a:a)?(!c&&d[f]&&f++,d[f]={s:new THREE.Shape,p:h},d[f].s.actions=s.actions,d[f].s.curves=s.curves,c&&f++,p[f]=[]):p[f].push({h:s,p:h[0]});if(!d[0])return n(o);if(1<d.length){for(m=!1,s=[],i=0,o=d.length;i<o;i++)l[i]=[];for(i=0,o=d.length;i<o;i++)for(a=p[i],c=0;c<a.length;c++){for(f=a[c],h=!0,v=0;v<d.length;v++)r(f.p,d[v].p)&&(i!==v&&s.push({froms:i,tos:v,hole:c}),h?(h=!1,l[v].push(f)):m=!0);h&&l[i].push(f)}0<s.length&&(m||(p=l))}for(m=0,i=d.length;m<i;m++)for(l=d[m].s,u.push(l),s=p[m],o=0,a=s.length;o<a;o++)l.holes.push(s[o].h);return u},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=(0,u.default)(THREE.Path.prototype),THREE.Shape.prototype.constructor=THREE.Shape,THREE.Shape.prototype.extrude=function(e){return new THREE.ExtrudeGeometry(this,e)},THREE.Shape.prototype.makeGeometry=function(e){return new THREE.ShapeGeometry(this,e)},THREE.Shape.prototype.getPointsHoles=function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},THREE.Shape.prototype.extractAllPoints=function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},THREE.Shape.prototype.extractPoints=function(e){return this.extractAllPoints(e);
},THREE.Shape.Utils=THREE.ShapeUtils,THREE.LineCurve=function(e,t){this.v1=e,this.v2=t},THREE.LineCurve.prototype=(0,u.default)(THREE.Curve.prototype),THREE.LineCurve.prototype.constructor=THREE.LineCurve,THREE.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},THREE.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},THREE.LineCurve.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},THREE.QuadraticBezierCurve=function(e,t,n){this.v0=e,this.v1=t,this.v2=n},THREE.QuadraticBezierCurve.prototype=(0,u.default)(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve,THREE.QuadraticBezierCurve.prototype.getPoint=function(e){var t=THREE.ShapeUtils.b2;return new THREE.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y))},THREE.QuadraticBezierCurve.prototype.getTangent=function(e){var t=THREE.CurveUtils.tangentQuadraticBezier;return new THREE.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y)).normalize()},THREE.CubicBezierCurve=function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},THREE.CubicBezierCurve.prototype=(0,u.default)(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve,THREE.CubicBezierCurve.prototype.getPoint=function(e){var t=THREE.ShapeUtils.b3;return new THREE.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},THREE.CubicBezierCurve.prototype.getTangent=function(e){var t=THREE.CurveUtils.tangentCubicBezier;return new THREE.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},THREE.SplineCurve=function(e){this.points=void 0==e?[]:e},THREE.SplineCurve.prototype=(0,u.default)(THREE.Curve.prototype),THREE.SplineCurve.prototype.constructor=THREE.SplineCurve,THREE.SplineCurve.prototype.getPoint=function(e){var t=this.points;e*=t.length-1;var n=Math.floor(e);e-=n;var r=t[0===n?n:n-1],i=t[n],o=t[n>t.length-2?t.length-1:n+1],t=t[n>t.length-3?t.length-1:n+2],n=THREE.CurveUtils.interpolate;return new THREE.Vector2(n(r.x,i.x,o.x,t.x,e),n(r.y,i.y,o.y,t.y,e))},THREE.EllipseCurve=function(e,t,n,r,i,o,a,s){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s||0},THREE.EllipseCurve.prototype=(0,u.default)(THREE.Curve.prototype),THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve,THREE.EllipseCurve.prototype.getPoint=function(e){var t=this.aEndAngle-this.aStartAngle;0>t&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI),t=!0===this.aClockwise?this.aEndAngle+(1-e)*(2*Math.PI-t):this.aStartAngle+e*t,e=this.aX+this.xRadius*Math.cos(t);var n=this.aY+this.yRadius*Math.sin(t);if(0!==this.aRotation){var t=Math.cos(this.aRotation),r=Math.sin(this.aRotation),i=e;e=(i-this.aX)*t-(n-this.aY)*r+this.aX,n=(i-this.aX)*r+(n-this.aY)*t+this.aY}return new THREE.Vector2(e,n)},THREE.ArcCurve=function(e,t,n,r,i,o){THREE.EllipseCurve.call(this,e,t,n,n,r,i,o)},THREE.ArcCurve.prototype=(0,u.default)(THREE.EllipseCurve.prototype),THREE.ArcCurve.prototype.constructor=THREE.ArcCurve,THREE.LineCurve3=THREE.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new THREE.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(e,t,n){this.v0=e,this.v1=t,this.v2=n},function(e){var t=THREE.ShapeUtils.b2;return new THREE.Vector3(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y),t(e,this.v0.z,this.v1.z,this.v2.z))}),THREE.CubicBezierCurve3=THREE.Curve.create(function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},function(e){var t=THREE.ShapeUtils.b3;return new THREE.Vector3(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),THREE.SplineCurve3=THREE.Curve.create(function(e){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0==e?[]:e},function(e){var t=this.points;e*=t.length-1;var n=Math.floor(e);e-=n;var r=t[0==n?n:n-1],i=t[n],o=t[n>t.length-2?t.length-1:n+1],t=t[n>t.length-3?t.length-1:n+2],n=THREE.CurveUtils.interpolate;return new THREE.Vector3(n(r.x,i.x,o.x,t.x,e),n(r.y,i.y,o.y,t.y,e),n(r.z,i.z,o.z,t.z,e))}),THREE.CatmullRomCurve3=function(){function e(){}var t=new THREE.Vector3,n=new e,r=new e,i=new e;return e.prototype.init=function(e,t,n,r){this.c0=e,this.c1=n,this.c2=-3*e+3*t-2*n-r,this.c3=2*e-2*t+n+r},e.prototype.initNonuniformCatmullRom=function(e,t,n,r,i,o,a){e=((t-e)/i-(n-e)/(i+o)+(n-t)/o)*o,r=((n-t)/o-(r-t)/(o+a)+(r-n)/a)*o,this.init(t,n,e,r)},e.prototype.initCatmullRom=function(e,t,n,r,i){this.init(t,n,i*(n-e),i*(r-t))},e.prototype.calc=function(e){var t=e*e;return this.c0+this.c1*e+this.c2*t+this.c3*t*e},THREE.Curve.create(function(e){this.points=e||[]},function(e){var o,a,s=this.points;a=s.length,2>a&&console.log("duh, you need at least 2 points"),e*=a-1,o=Math.floor(e),e-=o,0===e&&o===a-1&&(o=a-2,e=1);var l,u,c;if(0===o?(t.subVectors(s[0],s[1]).add(s[0]),l=t):l=s[o-1],u=s[o],c=s[o+1],o+2<a?s=s[o+2]:(t.subVectors(s[a-1],s[a-2]).add(s[a-2]),s=t),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var h="chordal"===this.type?.5:.25;a=Math.pow(l.distanceToSquared(u),h),o=Math.pow(u.distanceToSquared(c),h),h=Math.pow(c.distanceToSquared(s),h),1e-4>o&&(o=1),1e-4>a&&(a=o),1e-4>h&&(h=o),n.initNonuniformCatmullRom(l.x,u.x,c.x,s.x,a,o,h),r.initNonuniformCatmullRom(l.y,u.y,c.y,s.y,a,o,h),i.initNonuniformCatmullRom(l.z,u.z,c.z,s.z,a,o,h)}else"catmullrom"===this.type&&(a=void 0!==this.tension?this.tension:.5,n.initCatmullRom(l.x,u.x,c.x,s.x,a),r.initCatmullRom(l.y,u.y,c.y,s.y,a),i.initCatmullRom(l.z,u.z,c.z,s.z,a));return new THREE.Vector3(n.calc(e),r.calc(e),i.calc(e))})}(),THREE.ClosedSplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points;e*=t.length-0;var n=Math.floor(e);e-=n;var n=n+(0<n?0:(Math.floor(Math.abs(n)/t.length)+1)*t.length),r=t[(n-1)%t.length],i=t[n%t.length],o=t[(n+1)%t.length],t=t[(n+2)%t.length],n=THREE.CurveUtils.interpolate;return new THREE.Vector3(n(r.x,i.x,o.x,t.x,e),n(r.y,i.y,o.y,t.y,e),n(r.z,i.z,o.z,t.z,e))}),THREE.BoxGeometry=function(e,t,n,r,i,o){function a(e,t,n,r,i,o,a,l){var u,c=s.widthSegments,h=s.heightSegments,d=i/2,p=o/2,f=s.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?u="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(u="y",h=s.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(u="x",c=s.depthSegments);var m=c+1,v=h+1,g=i/c,E=o/h,y=new THREE.Vector3;for(y[u]=0<a?1:-1,i=0;i<v;i++)for(o=0;o<m;o++){var x=new THREE.Vector3;x[e]=(o*g-d)*n,x[t]=(i*E-p)*r,x[u]=a,s.vertices.push(x)}for(i=0;i<h;i++)for(o=0;o<c;o++)p=o+m*i,e=o+m*(i+1),t=o+1+m*(i+1),n=o+1+m*i,r=new THREE.Vector2(o/c,1-i/h),a=new THREE.Vector2(o/c,1-(i+1)/h),u=new THREE.Vector2((o+1)/c,1-(i+1)/h),d=new THREE.Vector2((o+1)/c,1-i/h),p=new THREE.Face3(p+f,e+f,n+f),p.normal.copy(y),p.vertexNormals.push(y.clone(),y.clone(),y.clone()),p.materialIndex=l,s.faces.push(p),s.faceVertexUvs[0].push([r,a,d]),p=new THREE.Face3(e+f,t+f,n+f),p.normal.copy(y),p.vertexNormals.push(y.clone(),y.clone(),y.clone()),p.materialIndex=l,s.faces.push(p),s.faceVertexUvs[0].push([a.clone(),u,d.clone()])}THREE.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.widthSegments=r||1,this.heightSegments=i||1,this.depthSegments=o||1;var s=this;r=e/2,i=t/2,o=n/2,a("z","y",-1,-1,n,t,r,0),a("z","y",1,-1,n,t,-r,1),a("x","z",1,1,e,n,i,2),a("x","z",1,-1,e,n,-i,3),a("x","y",1,-1,e,t,o,4),a("x","y",-1,-1,e,t,-o,5),this.mergeVertices()},THREE.BoxGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry,THREE.BoxGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.BoxGeometry(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)},THREE.CubeGeometry=THREE.BoxGeometry,THREE.CircleGeometry=function(e,t,n,r){THREE.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new THREE.CircleBufferGeometry(e,t,n,r))},THREE.CircleGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry,THREE.CircleGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.CircleGeometry(e.radius,e.segments,e.thetaStart,e.thetaLength)},THREE.CircleBufferGeometry=function(e,t,n,r){THREE.BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||50,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i=t+2,o=new Float32Array(3*i),a=new Float32Array(3*i),i=new Float32Array(2*i);a[2]=1,i[0]=.5,i[1]=.5;for(var s=0,l=3,u=2;s<=t;s++,l+=3,u+=2){var c=n+s/t*r;o[l]=e*Math.cos(c),o[l+1]=e*Math.sin(c),a[l+2]=1,i[u]=(o[l]/e+1)/2,i[u+1]=(o[l+1]/e+1)/2}for(n=[],l=1;l<=t;l++)n.push(l,l+1,0);this.setIndex(new THREE.BufferAttribute(new Uint16Array(n),1)),this.addAttribute("position",new THREE.BufferAttribute(o,3)),this.addAttribute("normal",new THREE.BufferAttribute(a,3)),this.addAttribute("uv",new THREE.BufferAttribute(i,2)),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.CircleBufferGeometry.prototype=(0,u.default)(THREE.BufferGeometry.prototype),THREE.CircleBufferGeometry.prototype.constructor=THREE.CircleBufferGeometry,THREE.CircleBufferGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.CircleBufferGeometry(e.radius,e.segments,e.thetaStart,e.thetaLength)},THREE.CylinderGeometry=function(e,t,n,r,i,o,a,s){THREE.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},e=void 0!==e?e:20,t=void 0!==t?t:20,n=void 0!==n?n:100,r=r||8,i=i||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var l,u,c=n/2,h=[],d=[];for(u=0;u<=i;u++){var p=[],f=[],m=u/i,v=m*(t-e)+e;for(l=0;l<=r;l++){var g=l/r,E=new THREE.Vector3;E.x=v*Math.sin(g*s+a),E.y=-m*n+c,E.z=v*Math.cos(g*s+a),this.vertices.push(E),p.push(this.vertices.length-1),f.push(new THREE.Vector2(g,1-m))}h.push(p),d.push(f)}for(n=(t-e)/n,l=0;l<r;l++)for(0!==e?(a=this.vertices[h[0][l]].clone(),s=this.vertices[h[0][l+1]].clone()):(a=this.vertices[h[1][l]].clone(),s=this.vertices[h[1][l+1]].clone()),a.setY(Math.sqrt(a.x*a.x+a.z*a.z)*n).normalize(),s.setY(Math.sqrt(s.x*s.x+s.z*s.z)*n).normalize(),u=0;u<i;u++){var p=h[u][l],f=h[u+1][l],m=h[u+1][l+1],v=h[u][l+1],g=a.clone(),E=a.clone(),y=s.clone(),x=s.clone(),T=d[u][l].clone(),b=d[u+1][l].clone(),w=d[u+1][l+1].clone(),_=d[u][l+1].clone();this.faces.push(new THREE.Face3(p,f,v,[g,E,x])),this.faceVertexUvs[0].push([T,b,_]),this.faces.push(new THREE.Face3(f,m,v,[E.clone(),y,x.clone()])),this.faceVertexUvs[0].push([b.clone(),w,_.clone()])}if(!1===o&&0<e)for(this.vertices.push(new THREE.Vector3(0,c,0)),l=0;l<r;l++)p=h[0][l],f=h[0][l+1],m=this.vertices.length-1,g=new THREE.Vector3(0,1,0),E=new THREE.Vector3(0,1,0),y=new THREE.Vector3(0,1,0),T=d[0][l].clone(),b=d[0][l+1].clone(),w=new THREE.Vector2(b.x,0),this.faces.push(new THREE.Face3(p,f,m,[g,E,y],void 0,1)),this.faceVertexUvs[0].push([T,b,w]);if(!1===o&&0<t)for(this.vertices.push(new THREE.Vector3(0,-c,0)),l=0;l<r;l++)p=h[i][l+1],f=h[i][l],m=this.vertices.length-1,g=new THREE.Vector3(0,-1,0),E=new THREE.Vector3(0,-1,0),y=new THREE.Vector3(0,-1,0),T=d[i][l+1].clone(),b=d[i][l].clone(),w=new THREE.Vector2(b.x,1),this.faces.push(new THREE.Face3(p,f,m,[g,E,y],void 0,2)),this.faceVertexUvs[0].push([T,b,w]);this.computeFaceNormals()},THREE.CylinderGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry,THREE.CylinderGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)},THREE.EdgesGeometry=function(e,t){function n(e,t){return e-t}THREE.BufferGeometry.call(this);var r,i=Math.cos(THREE.Math.degToRad(void 0!==t?t:1)),o=[0,0],a={},s=["a","b","c"];e instanceof THREE.BufferGeometry?(r=new THREE.Geometry,r.fromBufferGeometry(e)):r=e.clone(),r.mergeVertices(),r.computeFaceNormals();var l=r.vertices;r=r.faces;for(var u=0,c=r.length;u<c;u++)for(var h=r[u],d=0;3>d;d++){o[0]=h[s[d]],o[1]=h[s[(d+1)%3]],o.sort(n);var p=o.toString();void 0===a[p]?a[p]={vert1:o[0],vert2:o[1],face1:u,face2:void 0}:a[p].face2=u}o=[];for(p in a)s=a[p],(void 0===s.face2||r[s.face1].normal.dot(r[s.face2].normal)<=i)&&(u=l[s.vert1],o.push(u.x),o.push(u.y),o.push(u.z),u=l[s.vert2],o.push(u.x),o.push(u.y),o.push(u.z));this.addAttribute("position",new THREE.BufferAttribute(new Float32Array(o),3))},THREE.EdgesGeometry.prototype=(0,u.default)(THREE.BufferGeometry.prototype),THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry,THREE.ExtrudeGeometry=function(e,t){"undefined"!=typeof e&&(THREE.Geometry.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeFaceNormals())},THREE.ExtrudeGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry,THREE.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var n=e.length,r=0;r<n;r++)this.addShape(e[r],t)},THREE.ExtrudeGeometry.prototype.addShape=function(e,t){function n(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function r(e,t,n){var r=1,r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y,s=r*r+i*i;if(Math.abs(r*a-i*o)>y.default){var l=Math.sqrt(s),u=Math.sqrt(o*o+a*a),s=t.x-i/l;if(t=t.y+r/l,o=((n.x-a/u-s)*a-(n.y+o/u-t)*o)/(r*a-i*o),n=s+r*o-e.x,e=t+i*o-e.y,r=n*n+e*e,2>=r)return new THREE.Vector2(n,e);r=Math.sqrt(r/2)}else e=!1,r>y.default?o>y.default&&(e=!0):r<-y.default?o<-y.default&&(e=!0):(0,g.default)(i)===(0,g.default)(a)&&(e=!0),e?(n=-i,e=r,r=Math.sqrt(s)):(n=r,e=i,r=Math.sqrt(s/2));return new THREE.Vector2(n/r,e/r)}function i(e,t){var n,r;for(U=e.length;0<=--U;){n=U,r=U-1,0>r&&(r=e.length-1);for(var i=0,o=x+2*m,i=0;i<o;i++){var a=N*i,s=N*(i+1),l=t+n+a,a=t+r+a,u=t+r+s,s=t+n+s,l=l+C,a=a+C,u=u+C,s=s+C;M.faces.push(new THREE.Face3(l,a,s,null,null,1)),M.faces.push(new THREE.Face3(a,u,s,null,null,1)),l=w.generateSideWallUV(M,l,a,u,s),M.faceVertexUvs[0].push([l[0],l[1],l[3]]),M.faceVertexUvs[0].push([l[1],l[2],l[3]])}}}function o(e,t,n){M.vertices.push(new THREE.Vector3(e,t,n))}function a(e,t,n){e+=C,t+=C,n+=C,M.faces.push(new THREE.Face3(e,t,n,null,null,0)),e=w.generateTopUV(M,e,t,n),M.faceVertexUvs[0].push(e)}var s,l,u,c,h,d=void 0!==t.amount?t.amount:100,p=void 0!==t.bevelThickness?t.bevelThickness:6,f=void 0!==t.bevelSize?t.bevelSize:p-2,m=void 0!==t.bevelSegments?t.bevelSegments:3,v=void 0===t.bevelEnabled||t.bevelEnabled,E=void 0!==t.curveSegments?t.curveSegments:12,x=void 0!==t.steps?t.steps:1,T=t.extrudePath,b=!1,w=void 0!==t.UVGenerator?t.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;T&&(s=T.getSpacedPoints(x),b=!0,v=!1,l=void 0!==t.frames?t.frames:new THREE.TubeGeometry.FrenetFrames(T,x,!1),u=new THREE.Vector3,c=new THREE.Vector3,h=new THREE.Vector3),v||(f=p=m=0);var _,R,S,M=this,C=this.vertices.length,T=e.extractPoints(E),E=T.shape,H=T.holes;if(T=!THREE.ShapeUtils.isClockWise(E)){for(E=E.reverse(),R=0,S=H.length;R<S;R++)_=H[R],THREE.ShapeUtils.isClockWise(_)&&(H[R]=_.reverse());T=!1}var A=THREE.ShapeUtils.triangulateShape(E,H),P=E;for(R=0,S=H.length;R<S;R++)_=H[R],E=E.concat(_);var L,k,D,F,O,B,N=E.length,I=A.length,T=[],U=0;for(D=P.length,L=D-1,k=U+1;U<D;U++,L++,k++)L===D&&(L=0),k===D&&(k=0),T[U]=r(P[U],P[L],P[k]);var V,z=[],j=T.concat();for(R=0,S=H.length;R<S;R++){for(_=H[R],V=[],U=0,D=_.length,L=D-1,k=U+1;U<D;U++,L++,k++)L===D&&(L=0),k===D&&(k=0),V[U]=r(_[U],_[L],_[k]);z.push(V),j=j.concat(V)}for(L=0;L<m;L++){for(D=L/m,F=p*(1-D),k=f*Math.sin(D*Math.PI/2),U=0,D=P.length;U<D;U++)O=n(P[U],T[U],k),o(O.x,O.y,-F);for(R=0,S=H.length;R<S;R++)for(_=H[R],V=z[R],U=0,D=_.length;U<D;U++)O=n(_[U],V[U],k),o(O.x,O.y,-F)}for(k=f,U=0;U<N;U++)O=v?n(E[U],j[U],k):E[U],b?(c.copy(l.normals[0]).multiplyScalar(O.x),u.copy(l.binormals[0]).multiplyScalar(O.y),h.copy(s[0]).add(c).add(u),o(h.x,h.y,h.z)):o(O.x,O.y,0);for(D=1;D<=x;D++)for(U=0;U<N;U++)O=v?n(E[U],j[U],k):E[U],b?(c.copy(l.normals[D]).multiplyScalar(O.x),u.copy(l.binormals[D]).multiplyScalar(O.y),h.copy(s[D]).add(c).add(u),o(h.x,h.y,h.z)):o(O.x,O.y,d/x*D);for(L=m-1;0<=L;L--){for(D=L/m,F=p*(1-D),k=f*Math.sin(D*Math.PI/2),U=0,D=P.length;U<D;U++)O=n(P[U],T[U],k),o(O.x,O.y,d+F);for(R=0,S=H.length;R<S;R++)for(_=H[R],V=z[R],U=0,D=_.length;U<D;U++)O=n(_[U],V[U],k),b?o(O.x,O.y+s[x-1].y,s[x-1].x+F):o(O.x,O.y,d+F)}!function(){if(v){var e;for(e=0*N,U=0;U<I;U++)B=A[U],a(B[2]+e,B[1]+e,B[0]+e);for(e=x+2*m,e*=N,U=0;U<I;U++)B=A[U],a(B[0]+e,B[1]+e,B[2]+e)}else{for(U=0;U<I;U++)B=A[U],a(B[2],B[1],B[0]);for(U=0;U<I;U++)B=A[U],a(B[0]+N*x,B[1]+N*x,B[2]+N*x)}}(),function(){var e=0;for(i(P,e),e+=P.length,R=0,S=H.length;R<S;R++)_=H[R],i(_,e),e+=_.length}()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,n,r){return e=e.vertices,t=e[t],n=e[n],r=e[r],[new THREE.Vector2(t.x,t.y),new THREE.Vector2(n.x,n.y),new THREE.Vector2(r.x,r.y)]},generateSideWallUV:function(e,t,n,r,i){return e=e.vertices,t=e[t],n=e[n],r=e[r],i=e[i],.01>Math.abs(t.y-n.y)?[new THREE.Vector2(t.x,1-t.z),new THREE.Vector2(n.x,1-n.z),new THREE.Vector2(r.x,1-r.z),new THREE.Vector2(i.x,1-i.z)]:[new THREE.Vector2(t.y,1-t.z),new THREE.Vector2(n.y,1-n.z),new THREE.Vector2(r.y,1-r.z),new THREE.Vector2(i.y,1-i.z)]}},THREE.ShapeGeometry=function(e,t){THREE.Geometry.call(this),this.type="ShapeGeometry",!1===Array.isArray(e)&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry,THREE.ShapeGeometry.prototype.addShapeList=function(e,t){for(var n=0,r=e.length;n<r;n++)this.addShape(e[n],t);return this},THREE.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var n,r,i,o=t.material,a=void 0===t.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,s=this.vertices.length;n=e.extractPoints(void 0!==t.curveSegments?t.curveSegments:12);var l=n.shape,u=n.holes;if(!THREE.ShapeUtils.isClockWise(l))for(l=l.reverse(),n=0,r=u.length;n<r;n++)i=u[n],THREE.ShapeUtils.isClockWise(i)&&(u[n]=i.reverse());var c=THREE.ShapeUtils.triangulateShape(l,u);for(n=0,r=u.length;n<r;n++)i=u[n],l=l.concat(i);for(u=l.length,r=c.length,n=0;n<u;n++)i=l[n],this.vertices.push(new THREE.Vector3(i.x,i.y,0));for(n=0;n<r;n++)u=c[n],l=u[0]+s,i=u[1]+s,u=u[2]+s,this.faces.push(new THREE.Face3(l,i,u,null,null,o)),this.faceVertexUvs[0].push(a.generateTopUV(this,l,i,u))},THREE.LatheGeometry=function(e,t,n,r){THREE.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=t||12,n=n||0,r=r||2*Math.PI;for(var i=1/(e.length-1),o=1/t,a=0,s=t;a<=s;a++)for(var l=n+a*o*r,u=Math.cos(l),c=Math.sin(l),l=0,h=e.length;l<h;l++){var d=e[l],p=new THREE.Vector3;p.x=u*d.x-c*d.y,p.y=c*d.x+u*d.y,p.z=d.z,this.vertices.push(p)}for(n=e.length,a=0,s=t;a<s;a++)for(l=0,h=e.length-1;l<h;l++){t=c=l+n*a,r=c+n;var u=c+1+n,c=c+1,d=a*o,p=l*i,f=d+o,m=p+i;this.faces.push(new THREE.Face3(t,r,c)),this.faceVertexUvs[0].push([new THREE.Vector2(d,p),new THREE.Vector2(f,p),new THREE.Vector2(d,m)]),this.faces.push(new THREE.Face3(r,u,c)),this.faceVertexUvs[0].push([new THREE.Vector2(f,p),new THREE.Vector2(f,m),new THREE.Vector2(d,m)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry,THREE.PlaneGeometry=function(e,t,n,r){THREE.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new THREE.PlaneBufferGeometry(e,t,n,r))},THREE.PlaneGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry,THREE.PlaneGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.PlaneGeometry(e.width,e.height,e.widthSegments,e.heightSegments)},THREE.PlaneBufferGeometry=function(e,t,n,r){THREE.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i=e/2,o=t/2;n=Math.floor(n)||1,r=Math.floor(r)||1;var a=n+1,s=r+1,l=e/n,u=t/r;t=new Float32Array(a*s*3),e=new Float32Array(a*s*3);for(var c=new Float32Array(a*s*2),h=0,d=0,p=0;p<s;p++)for(var f=p*u-o,m=0;m<a;m++)t[h]=m*l-i,t[h+1]=-f,e[h+2]=1,c[d]=m/n,c[d+1]=1-p/r,h+=3,d+=2;for(h=0,i=new(65535<t.length/3?Uint32Array:Uint16Array)(n*r*6),p=0;p<r;p++)for(m=0;m<n;m++)o=m+a*(p+1),s=m+1+a*(p+1),l=m+1+a*p,i[h]=m+a*p,i[h+1]=o,i[h+2]=l,i[h+3]=o,i[h+4]=s,i[h+5]=l,h+=6;this.setIndex(new THREE.BufferAttribute(i,1)),this.addAttribute("position",new THREE.BufferAttribute(t,3)),this.addAttribute("normal",new THREE.BufferAttribute(e,3)),this.addAttribute("uv",new THREE.BufferAttribute(c,2))},THREE.PlaneBufferGeometry.prototype=(0,u.default)(THREE.BufferGeometry.prototype),THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry,THREE.PlaneBufferGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.PlaneBufferGeometry(e.width,e.height,e.widthSegments,e.heightSegments)},THREE.RingGeometry=function(e,t,n,r,i,o){THREE.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||0,t=t||50,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):8;var a,s=[],l=e,u=(t-e)/r;for(e=0;e<r+1;e++){for(a=0;a<n+1;a++){var c=new THREE.Vector3,h=i+a/n*o;c.x=l*Math.cos(h),c.y=l*Math.sin(h),this.vertices.push(c),s.push(new THREE.Vector2((c.x/t+1)/2,(c.y/t+1)/2))}l+=u}for(t=new THREE.Vector3(0,0,1),e=0;e<r;e++)for(i=e*(n+1),a=0;a<n;a++)o=h=a+i,u=h+n+1,c=h+n+2,this.faces.push(new THREE.Face3(o,u,c,[t.clone(),t.clone(),t.clone()])),this.faceVertexUvs[0].push([s[o].clone(),s[u].clone(),s[c].clone()]),o=h,u=h+n+2,c=h+1,this.faces.push(new THREE.Face3(o,u,c,[t.clone(),t.clone(),t.clone()])),this.faceVertexUvs[0].push([s[o].clone(),s[u].clone(),s[c].clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,l)},THREE.RingGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.RingGeometry.prototype.constructor=THREE.RingGeometry,THREE.RingGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.RingGeometry(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)},THREE.SphereGeometry=function(e,t,n,r,i,o,a){THREE.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new THREE.SphereBufferGeometry(e,t,n,r,i,o,a))},THREE.SphereGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry,THREE.SphereGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.SphereGeometry(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)},THREE.SphereBufferGeometry=function(e,t,n,r,i,o,a){THREE.BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;for(var s=o+a,l=(t+1)*(n+1),u=new THREE.BufferAttribute(new Float32Array(3*l),3),c=new THREE.BufferAttribute(new Float32Array(3*l),3),l=new THREE.BufferAttribute(new Float32Array(2*l),2),h=0,d=[],p=new THREE.Vector3,f=0;f<=n;f++){for(var m=[],v=f/n,g=0;g<=t;g++){var E=g/t,y=-e*Math.cos(r+E*i)*Math.sin(o+v*a),x=e*Math.cos(o+v*a),T=e*Math.sin(r+E*i)*Math.sin(o+v*a);p.set(y,x,T).normalize(),u.setXYZ(h,y,x,T),c.setXYZ(h,p.x,p.y,p.z),l.setXY(h,E,1-v),m.push(h),h++}d.push(m)}for(r=[],f=0;f<n;f++)for(g=0;g<t;g++)i=d[f][g+1],a=d[f][g],h=d[f+1][g],p=d[f+1][g+1],(0!==f||0<o)&&r.push(i,a,p),(f!==n-1||s<Math.PI)&&r.push(a,h,p);this.setIndex(new(65535<u.count?THREE.Uint32Attribute:THREE.Uint16Attribute)(r,1)),this.addAttribute("position",u),this.addAttribute("normal",c),this.addAttribute("uv",l),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.SphereBufferGeometry.prototype=(0,u.default)(THREE.BufferGeometry.prototype),THREE.SphereBufferGeometry.prototype.constructor=THREE.SphereBufferGeometry,THREE.SphereBufferGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.SphereBufferGeometry(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)},THREE.TorusGeometry=function(e,t,n,r,i){THREE.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||100,t=t||40,n=n||8,r=r||6,i=i||2*Math.PI;for(var o=new THREE.Vector3,a=[],s=[],l=0;l<=n;l++)for(var u=0;u<=r;u++){var c=u/r*i,h=l/n*Math.PI*2;o.x=e*Math.cos(c),o.y=e*Math.sin(c);var d=new THREE.Vector3;d.x=(e+t*Math.cos(h))*Math.cos(c),d.y=(e+t*Math.cos(h))*Math.sin(c),d.z=t*Math.sin(h),this.vertices.push(d),a.push(new THREE.Vector2(u/r,l/n)),s.push(d.clone().sub(o).normalize())}for(l=1;l<=n;l++)for(u=1;u<=r;u++)e=(r+1)*l+u-1,t=(r+1)*(l-1)+u-1,i=(r+1)*(l-1)+u,o=(r+1)*l+u,c=new THREE.Face3(e,t,o,[s[e].clone(),s[t].clone(),s[o].clone()]),this.faces.push(c),this.faceVertexUvs[0].push([a[e].clone(),a[t].clone(),a[o].clone()]),c=new THREE.Face3(t,i,o,[s[t].clone(),s[i].clone(),s[o].clone()]),this.faces.push(c),this.faceVertexUvs[0].push([a[t].clone(),a[i].clone(),a[o].clone()]);this.computeFaceNormals()},THREE.TorusGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry,THREE.TorusGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.TorusGeometry(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)},THREE.TorusKnotGeometry=function(e,t,n,r,i,o,a){function s(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e);return e*=t/n,t=Math.cos(e),o*=r*(2+t)*.5,a=r*(2+t)*a*.5,r=i*r*Math.sin(e)*.5,new THREE.Vector3(o,a,r)}THREE.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,p:i,q:o,heightScale:a},e=e||100,t=t||40,n=n||64,r=r||8,i=i||2,o=o||3,a=a||1;for(var l=Array(n),u=new THREE.Vector3,c=new THREE.Vector3,h=new THREE.Vector3,d=0;d<n;++d){l[d]=Array(r);var p=d/n*2*i*Math.PI,f=s(p,o,i,e,a),p=s(p+.01,o,i,e,a);for(u.subVectors(p,f),c.addVectors(p,f),h.crossVectors(u,c),c.crossVectors(h,u),h.normalize(),c.normalize(),p=0;p<r;++p){var m=p/r*2*Math.PI,v=-t*Math.cos(m),m=t*Math.sin(m),g=new THREE.Vector3;g.x=f.x+v*c.x+m*h.x,g.y=f.y+v*c.y+m*h.y,g.z=f.z+v*c.z+m*h.z,l[d][p]=this.vertices.push(g)-1}}for(d=0;d<n;++d)for(p=0;p<r;++p)i=(d+1)%n,o=(p+1)%r,e=l[d][p],t=l[i][p],i=l[i][o],o=l[d][o],a=new THREE.Vector2(d/n,p/r),u=new THREE.Vector2((d+1)/n,p/r),c=new THREE.Vector2((d+1)/n,(p+1)/r),h=new THREE.Vector2(d/n,(p+1)/r),this.faces.push(new THREE.Face3(e,t,o)),this.faceVertexUvs[0].push([a,u,h]),this.faces.push(new THREE.Face3(t,i,o)),this.faceVertexUvs[0].push([u.clone(),c,h.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry,THREE.TorusKnotGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.TorusKnotGeometry(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.p,e.q,e.heightScale)},THREE.TubeGeometry=function(e,t,n,r,i,o){THREE.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,segments:t,radius:n,radialSegments:r,closed:i,taper:o},t=t||64,n=n||1,r=r||8,i=i||!1,o=o||THREE.TubeGeometry.NoTaper;var a,s,l,u,c,h,d,p,f,m,v=[],g=t+1,E=new THREE.Vector3;for(p=new THREE.TubeGeometry.FrenetFrames(e,t,i),f=p.normals,m=p.binormals,this.tangents=p.tangents,this.normals=f,this.binormals=m,p=0;p<g;p++)for(v[p]=[],l=p/(g-1),d=e.getPointAt(l),a=f[p],s=m[p],c=n*o(l),l=0;l<r;l++)u=l/r*2*Math.PI,h=-c*Math.cos(u),u=c*Math.sin(u),E.copy(d),E.x+=h*a.x+u*s.x,E.y+=h*a.y+u*s.y,E.z+=h*a.z+u*s.z,v[p][l]=this.vertices.push(new THREE.Vector3(E.x,E.y,E.z))-1;for(p=0;p<t;p++)for(l=0;l<r;l++)o=i?(p+1)%t:p+1,g=(l+1)%r,e=v[p][l],n=v[o][l],o=v[o][g],g=v[p][g],E=new THREE.Vector2(p/t,l/r),f=new THREE.Vector2((p+1)/t,l/r),m=new THREE.Vector2((p+1)/t,(l+1)/r),a=new THREE.Vector2(p/t,(l+1)/r),this.faces.push(new THREE.Face3(e,n,g)),this.faceVertexUvs[0].push([E,f,a]),this.faces.push(new THREE.Face3(n,o,g)),this.faceVertexUvs[0].push([f.clone(),m,a.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry,THREE.TubeGeometry.prototype.clone=function(){return new this.constructor(this.parameters.path,this.parameters.segments,this.parameters.radius,this.parameters.radialSegments,this.parameters.closed,this.parameters.taper)},THREE.TubeGeometry.NoTaper=function(e){return 1},THREE.TubeGeometry.SinusoidalTaper=function(e){return Math.sin(Math.PI*e)},THREE.TubeGeometry.FrenetFrames=function(e,t,n){var r=new THREE.Vector3,i=[],o=[],a=[],s=new THREE.Vector3,l=new THREE.Matrix4;t+=1;var u,c,h;for(this.tangents=i,this.normals=o,this.binormals=a,u=0;u<t;u++)c=u/(t-1),i[u]=e.getTangentAt(c),i[u].normalize();for(o[0]=new THREE.Vector3,a[0]=new THREE.Vector3,e=Number.MAX_VALUE,u=Math.abs(i[0].x),c=Math.abs(i[0].y),h=Math.abs(i[0].z),u<=e&&(e=u,r.set(1,0,0)),c<=e&&(e=c,r.set(0,1,0)),h<=e&&r.set(0,0,1),s.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],s),a[0].crossVectors(i[0],o[0]),u=1;u<t;u++)o[u]=o[u-1].clone(),a[u]=a[u-1].clone(),s.crossVectors(i[u-1],i[u]),s.length()>y.default&&(s.normalize(),r=Math.acos(THREE.Math.clamp(i[u-1].dot(i[u]),-1,1)),o[u].applyMatrix4(l.makeRotationAxis(s,r))),a[u].crossVectors(i[u],o[u]);if(n)for(r=Math.acos(THREE.Math.clamp(o[0].dot(o[t-1]),-1,1)),r/=t-1,0<i[0].dot(s.crossVectors(o[0],o[t-1]))&&(r=-r),u=1;u<t;u++)o[u].applyMatrix4(l.makeRotationAxis(i[u],r*u)),a[u].crossVectors(i[u],o[u])},THREE.PolyhedronGeometry=function(e,t,n,r){function i(e){var t=e.normalize().clone();t.index=l.vertices.push(t)-1;var n=Math.atan2(e.z,-e.x)/2/Math.PI+.5;return e=Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5,t.uv=new THREE.Vector2(n,1-e),t}function o(e,t,n,r){r=new THREE.Face3(e.index,t.index,n.index,[e.clone(),t.clone(),n.clone()],void 0,r),l.faces.push(r),v.copy(e).add(t).add(n).divideScalar(3),r=Math.atan2(v.z,-v.x),l.faceVertexUvs[0].push([s(e.uv,e,r),s(t.uv,t,r),s(n.uv,n,r)])}function a(e,t){for(var n=Math.pow(2,t),r=i(l.vertices[e.a]),a=i(l.vertices[e.b]),s=i(l.vertices[e.c]),u=[],c=e.materialIndex,h=0;h<=n;h++){u[h]=[];for(var d=i(r.clone().lerp(s,h/n)),p=i(a.clone().lerp(s,h/n)),f=n-h,m=0;m<=f;m++)u[h][m]=0===m&&h===n?d:i(d.clone().lerp(p,m/f))}for(h=0;h<n;h++)for(m=0;m<2*(n-h)-1;m++)r=Math.floor(m/2),0===m%2?o(u[h][r+1],u[h+1][r],u[h][r],c):o(u[h][r+1],u[h+1][r+1],u[h+1][r],c)}function s(e,t,n){return 0>n&&1===e.x&&(e=new THREE.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new THREE.Vector2(n/2/Math.PI+.5,e.y)),e.clone()}THREE.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;for(var l=this,u=0,c=e.length;u<c;u+=3)i(new THREE.Vector3(e[u],e[u+1],e[u+2]));
e=this.vertices;for(var h=[],d=u=0,c=t.length;u<c;u+=3,d++){var p=e[t[u]],f=e[t[u+1]],m=e[t[u+2]];h[d]=new THREE.Face3(p.index,f.index,m.index,[p.clone(),f.clone(),m.clone()],void 0,d)}for(var v=new THREE.Vector3,u=0,c=h.length;u<c;u++)a(h[u],r);for(u=0,c=this.faceVertexUvs[0].length;u<c;u++)t=this.faceVertexUvs[0][u],r=t[0].x,e=t[1].x,h=t[2].x,d=Math.max(r,e,h),p=Math.min(r,e,h),.9<d&&.1>p&&(.2>r&&(t[0].x+=1),.2>e&&(t[1].x+=1),.2>h&&(t[2].x+=1));for(u=0,c=this.vertices.length;u<c;u++)this.vertices[u].multiplyScalar(n);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,n)},THREE.PolyhedronGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry,THREE.PolyhedronGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.PolyhedronGeometry(e.vertices,e.indices,e.radius,e.detail)},THREE.DodecahedronGeometry=function(e,t){var n=(1+Math.sqrt(5))/2,r=1/n;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}},THREE.DodecahedronGeometry.prototype=(0,u.default)(THREE.PolyhedronGeometry.prototype),THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry,THREE.DodecahedronGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.DodecahedronGeometry(e.radius,e.detail)},THREE.IcosahedronGeometry=function(e,t){var n=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}},THREE.IcosahedronGeometry.prototype=(0,u.default)(THREE.PolyhedronGeometry.prototype),THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry,THREE.IcosahedronGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.IcosahedronGeometry(e.radius,e.detail)},THREE.OctahedronGeometry=function(e,t){THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},THREE.OctahedronGeometry.prototype=(0,u.default)(THREE.PolyhedronGeometry.prototype),THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry,THREE.OctahedronGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.OctahedronGeometry(e.radius,e.detail)},THREE.TetrahedronGeometry=function(e,t){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}},THREE.TetrahedronGeometry.prototype=(0,u.default)(THREE.PolyhedronGeometry.prototype),THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry,THREE.TetrahedronGeometry.prototype.clone=function(){var e=this.parameters;return new THREE.TetrahedronGeometry(e.radius,e.detail)},THREE.ParametricGeometry=function(e,t,n){THREE.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o,a,s=this.vertices,l=this.faces,u=this.faceVertexUvs[0],c=t+1;for(r=0;r<=n;r++)for(a=r/n,i=0;i<=t;i++)o=i/t,o=e(o,a),s.push(o);var h,d,p,f;for(r=0;r<n;r++)for(i=0;i<t;i++)e=r*c+i,s=r*c+i+1,a=(r+1)*c+i+1,o=(r+1)*c+i,h=new THREE.Vector2(i/t,r/n),d=new THREE.Vector2((i+1)/t,r/n),p=new THREE.Vector2((i+1)/t,(r+1)/n),f=new THREE.Vector2(i/t,(r+1)/n),l.push(new THREE.Face3(e,s,o)),u.push([h,d,f]),l.push(new THREE.Face3(s,a,o)),u.push([d.clone(),p,f.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=(0,u.default)(THREE.Geometry.prototype),THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry,THREE.WireframeGeometry=function(e){function t(e,t){return e-t}THREE.BufferGeometry.call(this);var n=[0,0],r={},i=["a","b","c"];if(e instanceof THREE.Geometry){var o=e.vertices,a=e.faces,s=0,l=new Uint32Array(6*a.length);e=0;for(var u=a.length;e<u;e++)for(var c=a[e],h=0;3>h;h++){n[0]=c[i[h]],n[1]=c[i[(h+1)%3]],n.sort(t);var d=n.toString();void 0===r[d]&&(l[2*s]=n[0],l[2*s+1]=n[1],r[d]=!0,s++)}for(n=new Float32Array(6*s),e=0,u=s;e<u;e++)for(h=0;2>h;h++)r=o[l[2*e+h]],s=6*e+3*h,n[s+0]=r.x,n[s+1]=r.y,n[s+2]=r.z;this.addAttribute("position",new THREE.BufferAttribute(n,3))}else if(e instanceof THREE.BufferGeometry){if(null!==e.index){for(u=e.index.array,o=e.attributes.position,i=e.drawcalls,s=0,0===i.length&&e.addGroup(0,u.length),l=new Uint32Array(2*u.length),a=0,c=i.length;a<c;++a){e=i[a],h=e.start,d=e.count,e=h;for(var p=h+d;e<p;e+=3)for(h=0;3>h;h++)n[0]=u[e+h],n[1]=u[e+(h+1)%3],n.sort(t),d=n.toString(),void 0===r[d]&&(l[2*s]=n[0],l[2*s+1]=n[1],r[d]=!0,s++)}for(n=new Float32Array(6*s),e=0,u=s;e<u;e++)for(h=0;2>h;h++)s=6*e+3*h,r=l[2*e+h],n[s+0]=o.getX(r),n[s+1]=o.getY(r),n[s+2]=o.getZ(r)}else for(o=e.attributes.position.array,s=o.length/3,l=s/3,n=new Float32Array(6*s),e=0,u=l;e<u;e++)for(h=0;3>h;h++)s=18*e+6*h,l=9*e+3*h,n[s+0]=o[l],n[s+1]=o[l+1],n[s+2]=o[l+2],r=9*e+(h+1)%3*3,n[s+3]=o[r],n[s+4]=o[r+1],n[s+5]=o[r+2];this.addAttribute("position",new THREE.BufferAttribute(n,3))}},THREE.WireframeGeometry.prototype=(0,u.default)(THREE.BufferGeometry.prototype),THREE.WireframeGeometry.prototype.constructor=THREE.WireframeGeometry,THREE.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);e=new THREE.BufferGeometry,e.addAttribute("position",new THREE.BufferAttribute(t,3)),e.addAttribute("color",new THREE.BufferAttribute(n,3)),t=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors}),THREE.LineSegments.call(this,e,t)},THREE.AxisHelper.prototype=(0,u.default)(THREE.LineSegments.prototype),THREE.AxisHelper.prototype.constructor=THREE.AxisHelper,THREE.ArrowHelper=function(){var e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var t=new THREE.CylinderGeometry(0,.5,1,5,1);return t.translate(0,-.5,0),function(n,r,i,o,a,s){THREE.Object3D.call(this),void 0===o&&(o=16776960),void 0===i&&(i=1),void 0===a&&(a=.2*i),void 0===s&&(s=.2*a),this.position.copy(r),a<i&&(this.line=new THREE.Line(e,new THREE.LineBasicMaterial({color:o})),this.line.matrixAutoUpdate=!1,this.add(this.line)),this.cone=new THREE.Mesh(t,new THREE.MeshBasicMaterial({color:o})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(i,a,s)}}(),THREE.ArrowHelper.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper,THREE.ArrowHelper.prototype.setDirection=function(){var e,t=new THREE.Vector3;return function(n){.99999<n.y?this.quaternion.set(0,0,0,1):-.99999>n.y?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),THREE.ArrowHelper.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),t<e&&(this.line.scale.set(1,e-t,1),this.line.updateMatrix()),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(e){void 0!==this.line&&this.line.material.color.set(e),this.cone.material.color.set(e)},THREE.BoxHelper=function(e){var t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new THREE.BufferGeometry;r.setIndex(new THREE.BufferAttribute(t,1)),r.addAttribute("position",new THREE.BufferAttribute(n,3)),THREE.LineSegments.call(this,r,new THREE.LineBasicMaterial({color:16776960})),void 0!==e&&this.update(e)},THREE.BoxHelper.prototype=(0,u.default)(THREE.LineSegments.prototype),THREE.BoxHelper.prototype.constructor=THREE.BoxHelper,THREE.BoxHelper.prototype.update=function(){var e=new THREE.Box3;return function(t){if(e.setFromObject(t),!e.empty()){t=e.min;var n=e.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),THREE.BoundingBoxHelper=function(e,t){var n=void 0!==t?t:8947848;this.object=e,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:n,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=(0,u.default)(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper,THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(e){function t(e,t,r){n(e,r),n(t,r)}function n(e,t){r.vertices.push(new THREE.Vector3),r.colors.push(new THREE.Color(t)),void 0===o[e]&&(o[e]=[]),o[e].push(r.vertices.length-1)}var r=new THREE.Geometry,i=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),o={};t("n1","n2",16755200),t("n2","n4",16755200),t("n4","n3",16755200),t("n3","n1",16755200),t("f1","f2",16755200),t("f2","f4",16755200),t("f4","f3",16755200),t("f3","f1",16755200),t("n1","f1",16755200),t("n2","f2",16755200),t("n3","f3",16755200),t("n4","f4",16755200),t("p","n1",16711680),t("p","n2",16711680),t("p","n3",16711680),t("p","n4",16711680),t("u1","u2",43775),t("u2","u3",43775),t("u3","u1",43775),t("c","t",16777215),t("p","c",3355443),t("cn1","cn2",3355443),t("cn3","cn4",3355443),t("cf1","cf2",3355443),t("cf3","cf4",3355443),THREE.LineSegments.call(this,r,i),this.camera=e,this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()},THREE.CameraHelper.prototype=(0,u.default)(THREE.LineSegments.prototype),THREE.CameraHelper.prototype.constructor=THREE.CameraHelper;THREE.CameraHelper.prototype.update=function(){function e(e,o,a,s){if(r.set(o,a,s).unproject(i),e=n[e],void 0!==e)for(o=0,a=e.length;o<a;o++)t.vertices[e[o]].copy(r)}var t,n,r=new THREE.Vector3,i=new THREE.Camera;return function(){t=this.geometry,n=this.pointMap,i.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),t.verticesNeedUpdate=!0}}();THREE.DirectionalLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var n=new THREE.Geometry;n.vertices.push(new THREE.Vector3(-t,t,0),new THREE.Vector3(t,t,0),new THREE.Vector3(t,-t,0),new THREE.Vector3(-t,-t,0),new THREE.Vector3(-t,t,0));var r=new THREE.LineBasicMaterial({fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Line(n,r),this.add(this.lightPlane),n=new THREE.Geometry,n.vertices.push(new THREE.Vector3,new THREE.Vector3),r=new THREE.LineBasicMaterial({fog:!1}),r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(n,r),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper,THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(n),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.EdgesHelper=function(e,t,n){t=void 0!==t?t:16777215,THREE.LineSegments.call(this,new THREE.EdgesGeometry(e.geometry,n),new THREE.LineBasicMaterial({color:t})),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.EdgesHelper.prototype=(0,u.default)(THREE.LineSegments.prototype),THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper,THREE.FaceNormalsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1,e=void 0!==n?n:16776960,r=void 0!==r?r:1,t=0,n=this.object.geometry,n instanceof THREE.Geometry?t=n.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),n=new THREE.BufferGeometry,t=new THREE.Float32Attribute(6*t,3),n.addAttribute("position",t),THREE.LineSegments.call(this,n,new THREE.LineBasicMaterial({color:e,linewidth:r})),this.matrixAutoUpdate=!1,this.update()},THREE.FaceNormalsHelper.prototype=(0,u.default)(THREE.LineSegments.prototype),THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper,THREE.FaceNormalsHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Matrix3;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,o=o.faces,s=0,l=0,u=o.length;l<u;l++){var c=o[l],h=c.normal;e.copy(a[c.a]).add(a[c.b]).add(a[c.c]).divideScalar(3).applyMatrix4(r),t.copy(h).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(s,e.x,e.y,e.z),s+=1,i.setXYZ(s,t.x,t.y,t.z),s+=1}return i.needsUpdate=!0,this}}(),THREE.GridHelper=function(e,t){var n=new THREE.Geometry,r=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var i=-e;i<=e;i+=t){n.vertices.push(new THREE.Vector3(-e,0,i),new THREE.Vector3(e,0,i),new THREE.Vector3(i,0,-e),new THREE.Vector3(i,0,e));var o=0===i?this.color1:this.color2;n.colors.push(o,o,o,o)}THREE.LineSegments.call(this,n,r)},THREE.GridHelper.prototype=(0,u.default)(THREE.LineSegments.prototype),THREE.GridHelper.prototype.constructor=THREE.GridHelper,THREE.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color];var n=new THREE.SphereGeometry(t,4,2);n.rotateX(-Math.PI/2);for(var r=0;8>r;r++)n.faces[r].color=this.colors[4>r?0:1];r=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0}),this.lightSphere=new THREE.Mesh(n,r),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper,THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var n=new THREE.SphereGeometry(t,4,2),r=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=(0,u.default)(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper,THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SkeletonHelper=function(e){this.bones=this.getBoneList(e);for(var t=new THREE.Geometry,n=0;n<this.bones.length;n++)this.bones[n].parent instanceof THREE.Bone&&(t.vertices.push(new THREE.Vector3),t.vertices.push(new THREE.Vector3),t.colors.push(new THREE.Color(0,0,1)),t.colors.push(new THREE.Color(0,1,0)));t.dynamic=!0,n=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0}),THREE.LineSegments.call(this,t,n),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},THREE.SkeletonHelper.prototype=(0,u.default)(THREE.LineSegments.prototype),THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper,THREE.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof THREE.Bone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},THREE.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new THREE.Matrix4).getInverse(this.root.matrixWorld),n=new THREE.Matrix4,r=0,i=0;i<this.bones.length;i++){var o=this.bones[i];o.parent instanceof THREE.Bone&&(n.multiplyMatrices(t,o.matrixWorld),e.vertices[r].setFromMatrixPosition(n),n.multiplyMatrices(t,o.parent.matrixWorld),e.vertices[r+1].setFromMatrixPosition(n),r+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},THREE.SpotLightHelper=function(e){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,e=new THREE.CylinderGeometry(0,1,1,8,1,!0),e.translate(0,-.5,0),e.rotateX(-Math.PI/2);var t=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(e,t),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper,THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){var n=this.light.distance?this.light.distance:1e4,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1,e=void 0!==n?n:16711680,r=void 0!==r?r:1,t=0,n=this.object.geometry,n instanceof THREE.Geometry?t=3*n.faces.length:n instanceof THREE.BufferGeometry&&(t=n.attributes.normal.count),n=new THREE.BufferGeometry,t=new THREE.Float32Attribute(6*t,3),n.addAttribute("position",t),THREE.LineSegments.call(this,n,new THREE.LineBasicMaterial({color:e,linewidth:r})),this.matrixAutoUpdate=!1,this.update()},THREE.VertexNormalsHelper.prototype=(0,u.default)(THREE.LineSegments.prototype),THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper,THREE.VertexNormalsHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Matrix3;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a instanceof THREE.Geometry)for(var s=a.vertices,l=a.faces,u=a=0,c=l.length;u<c;u++)for(var h=l[u],d=0,p=h.vertexNormals.length;d<p;d++){var f=h.vertexNormals[d];e.copy(s[h[r[d]]]).applyMatrix4(i),t.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(a,e.x,e.y,e.z),a+=1,o.setXYZ(a,t.x,t.y,t.z),a+=1}else if(a instanceof THREE.BufferGeometry)for(r=a.attributes.position,s=a.attributes.normal,d=a=0,p=r.count;d<p;d++)e.set(r.getX(d),r.getY(d),r.getZ(d)).applyMatrix4(i),t.set(s.getX(d),s.getY(d),s.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(a,e.x,e.y,e.z),a+=1,o.setXYZ(a,t.x,t.y,t.z),a+=1;return o.needsUpdate=!0,this}}(),THREE.WireframeHelper=function(e,t){var n=void 0!==t?t:16777215;THREE.LineSegments.call(this,new THREE.WireframeGeometry(e.geometry),new THREE.LineBasicMaterial({color:n})),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.WireframeHelper.prototype=(0,u.default)(THREE.LineSegments.prototype),THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper,THREE.ImmediateRenderObject=function(e){THREE.Object3D.call(this),this.material=e,this.render=function(e){}},THREE.ImmediateRenderObject.prototype=(0,u.default)(THREE.Object3D.prototype),THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject,THREE.MorphBlendMesh=function(e,t){THREE.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length;this.createAnimation("__default",0,n-1,n/1),this.setAnimationWeight("__default",1)},THREE.MorphBlendMesh.prototype=(0,u.default)(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh,THREE.MorphBlendMesh.prototype.createAnimation=function(e,t,n,r){t={start:t,end:n,length:n-t+1,fps:r,duration:(n-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1},this.animationsMap[e]=t,this.animationsList.push(t)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,n=/([a-z]+)_?(\d+)/,r={},i=this.geometry,o=0,a=i.morphTargets.length;o<a;o++){var s=i.morphTargets[o].name.match(n);if(s&&1<s.length){var l=s[1];r[l]||(r[l]={start:1/0,end:-(1/0)}),s=r[l],o<s.start&&(s.start=o),o>s.end&&(s.end=o),t||(t=l)}}for(l in r)s=r[l],this.createAnimation(l,s.start,s.end,e);this.firstAnimation=t},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){(e=this.animationsMap[e])&&(e.direction=1,e.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){(e=this.animationsMap[e])&&(e.direction=-1,e.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0;return(e=this.animationsMap[e])&&(t=e.time),t},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1;return(e=this.animationsMap[e])&&(t=e.duration),t},THREE.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},THREE.MorphBlendMesh.prototype.stopAnimation=function(e){(e=this.animationsMap[e])&&(e.active=!1)},THREE.MorphBlendMesh.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var r=this.animationsList[t];if(r.active){var i=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||0>r.time)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),0>r.time&&(r.time=0,r.directionBackwards=!1)):(r.time%=r.duration,0>r.time&&(r.time+=r.duration));var o=r.start+THREE.Math.clamp(Math.floor(r.time/i),0,r.length-1),a=r.weight;o!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*a,this.morphTargetInfluences[o]=0,r.lastFrame=r.currentFrame,r.currentFrame=o),i=r.time%i/i,r.directionBackwards&&(i=1-i),r.currentFrame!==r.lastFrame?(this.morphTargetInfluences[r.currentFrame]=i*a,this.morphTargetInfluences[r.lastFrame]=(1-i)*a):this.morphTargetInfluences[r.currentFrame]=a}}}},function(e,t,n){e.exports={default:n(611),__esModule:!0}},function(e,t,n){var r=n(47),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){e.exports={default:n(613),__esModule:!0}},function(e,t,n){n(614),e.exports=n(47).Math.sign},function(e,t,n){var r=n(46);r(r.S,"Math",{sign:n(615)})},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){e.exports={default:n(617),__esModule:!0}},function(e,t,n){n(618),e.exports=Math.pow(2,-52)},function(e,t,n){var r=n(46);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={randomRange:function(e,t){return e+Math.random()*(t-e)},randomInt:function(e,t){return Math.floor(e+Math.random()*(t-e+1))},map:function(e,t,r,i,o){return n.lerp(n.norm(e,t,r),i,o)},lerp:function(e,t,n){return t+(n-t)*e},norm:function(e,t,n){return(e-t)/(n-t)},shuffle:function(e){for(var t,n,r=e.length;r;t=parseInt(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);return e},randomVector3:function(e){return new THREE.Vector3(n.randomRange(-e,e),n.randomRange(-e,e),n.randomRange(-e,e))}};t.default=n},function(e,t){"use strict";console.log("stats"),Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){function t(e){return i.appendChild(e.dom),e}function n(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";r=e}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(e){e.preventDefault(),n(++r%i.children.length)},!1);var o=(performance||Date).now(),a=o,s=0,l=t(new e.Panel("FPS","#0ff","#002")),u=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:t,showPanel:n,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(u.update(e-o,200),e>a+1e3&&(l.update(1e3*s/(e-a),100),a=e,s=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:i,setMode:n}};n.Panel=function(e,t,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,u=3*a,c=2*a,h=3*a,d=15*a,p=74*a,f=30*a,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*a+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,s,l),v.fillStyle=t,v.fillText(e,u,c),v.fillRect(h,d,p,f),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h,d,p,f),{dom:m,update:function(l,g){r=Math.min(r,l),i=Math.max(i,l),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,s,d),v.fillStyle=t,v.fillText(o(l)+" "+e+" ("+o(r)+"-"+o(i)+")",u,c),v.drawImage(m,h+a,d,p-a,f,h,d,p-a,f),v.fillRect(h+p-a,d,a,f),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h+p-a,d,a,o((1-l/g)*f))}}},t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(114),o=r(i),a=n(605),s=r(a),l=n(610),u=r(l),c=n(52),h=r(c);Object.defineProperty(t,"__esModule",{value:!0});var d=d||{};d.gui=d.gui||{},d.utils=d.utils||{},d.controllers=d.controllers||{},d.dom=d.dom||{},d.color=d.color||{},d.utils.css=function(){return{load:function(e,t){var t=t||document,n=t.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t.getElementsByTagName("head")[0].appendChild(n)},inject:function(e,t){var t=t||document,n=document.createElement("style");n.type="text/css",n.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(n)}}}(),d.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),r=e.length-1;r>=0;r--)n=[e[r].apply(this,n)];return n[0]}},each:function(t,n,r){if(e&&t.forEach===e)t.forEach(n,r);else if(t.length===t.length+0)for(var i=0,o=t.length;i<o&&!(i in t&&n.call(r,t[i],i)===this.BREAK);i++);else for(i in t)if(n.call(r,t[i],i)===this.BREAK)break},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}}(),d.controllers.Controller=function(e){var t=function(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onFinishChange=this.__onChange=void 0};return e.extend(t.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(d.utils.common),d.dom.dom=function(e){function t(t){return"0"===t||e.isUndefined(t)?0:(t=t.match(r),e.isNull(t)?0:parseFloat(t[1]))}var n={};e.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(t,r){e.each(t,function(e){n[e]=r})});var r=/(\d+(\.\d+)?)px/,i={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(t,n,r){e.isUndefined(n)&&(n=!0),e.isUndefined(r)&&(r=!0),t.style.position="absolute",n&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,r,i,o){var i=i||{},a=n[r];if(!a)throw Error("Event type "+r+" not supported.");var s=document.createEvent(a);switch(a){case"MouseEvents":s.initMouseEvent(r,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,i.x||i.clientX||0,i.y||i.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":a=s.initKeyboardEvent||s.initKeyEvent,e.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),a(r,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(r,i.bubbles||!1,i.cancelable||!0)}e.defaults(s,o),t.dispatchEvent(s)},bind:function(e,t,n,r){return e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n),i},unbind:function(e,t,n,r){return e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n),
i},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);n.indexOf(t)==-1&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return i},removeClass:function(e,t){if(t){if(void 0!==e.className)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);r!=-1&&(n.splice(r,1),e.className=n.join(" "))}}else e.className=void 0;return i},hasClass:function(e,t){return RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){return e=getComputedStyle(e),t(e["border-left-width"])+t(e["border-right-width"])+t(e["padding-left"])+t(e["padding-right"])+t(e.width)},getHeight:function(e){return e=getComputedStyle(e),t(e["border-top-width"])+t(e["border-bottom-width"])+t(e["padding-top"])+t(e["padding-bottom"])+t(e.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do t.left+=e.offsetLeft,t.top+=e.offsetTop;while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return i}(d.utils.common),d.controllers.OptionController=function(e,t,n){var r=function e(r,i,o){e.superclass.call(this,r,i);var a=this;if(this.__select=document.createElement("select"),n.isArray(o)){var s={};n.each(o,function(e){s[e]=e}),o=s}n.each(o,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)}),this.updateDisplay(),t.bind(this.__select,"change",function(){a.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){return e=r.superclass.prototype.setValue.call(this,e),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(d.controllers.Controller,d.dom.dom,d.utils.common),d.controllers.NumberController=function(e,t){var n=function e(n,r,i){e.superclass.call(this,n,r),i=i||{},this.__min=i.min,this.__max=i.max,this.__step=i.step,n=this.__impliedStep=t.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,n=n.toString(),this.__precision=n.indexOf(".")>-1?n.length-n.indexOf(".")-1:0};return n.superclass=e,t.extend(n.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&e%this.__step!=0&&(e=Math.round(e/this.__step)*this.__step),n.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this}}),n}(d.controllers.Controller,d.utils.common),d.controllers.NumberControllerBox=function(e,t,n){var r=function e(r,i,o){function a(){var e=parseFloat(c.__input.value);n.isNaN(e)||c.setValue(e)}function s(e){var t=u-e.clientY;c.setValue(c.getValue()+t*c.__impliedStep),u=e.clientY}function l(){t.unbind(window,"mousemove",s),t.unbind(window,"mouseup",l)}this.__truncationSuspended=!1,e.superclass.call(this,r,i,o);var u,c=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",a),t.bind(this.__input,"blur",function(){a(),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}),t.bind(this.__input,"mousedown",function(e){t.bind(window,"mousemove",s),t.bind(window,"mouseup",l),u=e.clientY}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(c.__truncationSuspended=!0,this.blur(),c.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,n.extend(r.prototype,e.prototype,{updateDisplay:function(){var e,t=this.__input;if(this.__truncationSuspended)e=this.getValue();else{e=this.getValue();var n=Math.pow(10,this.__precision);e=Math.round(e*n)/n}return t.value=e,r.superclass.prototype.updateDisplay.call(this)}}),r}(d.controllers.NumberController,d.dom.dom,d.utils.common),d.controllers.NumberControllerSlider=function(e,t,n,r,i){var o=function e(n,r,i,o,a){function s(e){e.preventDefault();var n=t.getOffset(u.__background),r=t.getWidth(u.__background);return u.setValue(u.__min+(u.__max-u.__min)*((e.clientX-n.left)/(n.left+r-n.left))),!1}function l(){t.unbind(window,"mousemove",s),t.unbind(window,"mouseup",l),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}e.superclass.call(this,n,r,{min:i,max:o,step:a});var u=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",function(e){t.bind(window,"mousemove",s),t.bind(window,"mouseup",l),s(e)}),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return o.superclass=e,o.useDefaultStyles=function(){n.inject(i)},r.extend(o.prototype,e.prototype,{updateDisplay:function(){return this.__foreground.style.width=(this.getValue()-this.__min)/(this.__max-this.__min)*100+"%",o.superclass.prototype.updateDisplay.call(this)}}),o}(d.controllers.NumberController,d.dom.dom,d.utils.css,d.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),d.controllers.FunctionController=function(e,t,n){var r=function e(n,r,i){e.superclass.call(this,n,r);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===i?"Fire":i,t.bind(this.__button,"click",function(e){return e.preventDefault(),o.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=e,n.extend(r.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(d.controllers.Controller,d.dom.dom,d.utils.common),d.controllers.BooleanController=function(e,t,n){var r=function e(n,r){e.superclass.call(this,n,r);var i=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){return e=r.superclass.prototype.setValue.call(this,e),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(d.controllers.Controller,d.dom.dom,d.utils.common),d.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(t=t.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(d.utils.common),d.color.interpret=function(e,t){var n,r,i=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){return e=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i),null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){return e=e.match(/^#([A-F0-9]{6})$/i),null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:e},CSS_RGB:{read:function(e){return e=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/),null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:e},CSS_RGBA:{read:function(e){return e=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/),null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return function(){r=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(i,function(i){if(i.litmus(e))return t.each(i.conversions,function(i,o){if(n=i.read(e),r===!1&&n!==!1)return r=n,n.conversionName=o,n.conversion=i,t.BREAK}),t.BREAK}),r}}(d.color.toString,d.utils.common),d.GUI=d.gui.GUI=function(e,t,n,r,i,o,a,l,c,d,p,f,m,v,g){function E(e,t,n,o){if(void 0===t[n])throw Error("Object "+t+' has no property "'+n+'"');o.color?t=new p(t,n):(t=[t,n].concat(o.factoryArgs),t=r.apply(e,t)),o.before instanceof i&&(o.before=o.before.__li),T(e,t),v.addClass(t.domElement,"c"),n=document.createElement("span"),v.addClass(n,"property-name"),n.innerHTML=t.property;var a=document.createElement("div");return a.appendChild(n),a.appendChild(t.domElement),o=y(e,a,o.before),v.addClass(o,O.CLASS_CONTROLLER_ROW),v.addClass(o,(0,h.default)(t.getValue())),x(e,o,t),e.__controllers.push(t),t}function y(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,params.before):e.__ul.appendChild(r),e.onResize(),r}function x(e,t,n){if(n.__li=t,n.__gui=e,g.extend(n,{options:function(t){return arguments.length>1?(n.remove(),E(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[g.toArray(arguments)]})):g.isArray(t)||g.isObject(t)?(n.remove(),E(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof c){var r=new l(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});g.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(n,e),i.apply(r,e)}}),v.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof l){var i=function(t){return g.isNumber(n.__min)&&g.isNumber(n.__max)?(n.remove(),E(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=g.compose(i,n.min),n.max=g.compose(i,n.max)}else n instanceof o?(v.bind(t,"click",function(){v.fakeEvent(n.__checkbox,"click")}),v.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof a?(v.bind(t,"click",function(){v.fakeEvent(n.__button,"click")}),v.bind(t,"mouseover",function(){v.addClass(n.__button,"hover")}),v.bind(t,"mouseout",function(){v.removeClass(n.__button,"hover")})):n instanceof p&&(v.addClass(t,"color"),n.updateDisplay=g.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=g.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&M(e.getRoot(),!0),t},n.setValue)}function T(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(r!=-1){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){if(n=n.load.remembered,n[e.preset])n=n[e.preset];else{if(!n[A])return;n=n[A]}n[r]&&void 0!==n[r][t.property]&&(r=n[r][t.property],t.initialValue=r,t.setValue(r))}}}function b(e){var t=e.__save_row=document.createElement("li");v.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),v.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",v.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",v.addClass(r,"button"),v.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",v.addClass(i,"button"),v.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",v.addClass(o,"button"),v.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?g.each(e.load.remembered,function(t,n){S(e,n,n==e.preset)}):S(e,A,!1),v.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(o),H){var t=document.getElementById("dg-save-locally"),s=document.getElementById("dg-local-explain");t.style.display="block",t=document.getElementById("dg-local-storage"),"true"===localStorage.getItem(document.location.href+".isLocal")&&t.setAttribute("checked","checked");var l=function(){s.style.display=e.useLocalStorage?"block":"none"};l(),v.bind(t,"change",function(){e.useLocalStorage=!e.useLocalStorage,l()})}var c=document.getElementById("dg-new-constructor");v.bind(c,"keydown",function(e){e.metaKey&&(67===e.which||67==e.keyCode)&&P.hide()}),v.bind(n,"click",function(){c.innerHTML=(0,u.default)(e.getSaveObject(),void 0,2),P.show(),c.focus(),c.select()}),v.bind(r,"click",function(){e.save()}),v.bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),v.bind(o,"click",function(){e.revert()})}function w(e){function t(t){return t.preventDefault(),i=t.clientX,v.addClass(e.__closeButton,O.CLASS_DRAG),v.bind(window,"mousemove",n),v.bind(window,"mouseup",r),!1}function n(t){return t.preventDefault(),e.width+=i-t.clientX,e.onResize(),i=t.clientX,!1}function r(){v.removeClass(e.__closeButton,O.CLASS_DRAG),v.unbind(window,"mousemove",n),v.unbind(window,"mouseup",r)}e.__resize_handle=document.createElement("div"),g.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var i;v.bind(e.__resize_handle,"mousedown",t),v.bind(e.__closeButton,"mousedown",t),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function _(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function R(e,t){var n={};return g.each(e.__rememberedObjects,function(r,i){var o={};g.each(e.__rememberedObjectIndecesToControllers[i],function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[i]=o}),n}function S(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function M(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function C(e){0!=e.length&&f(function(){C(e)}),g.each(e,function(e){e.updateDisplay()})}e.inject(n);var H,A="Default";try{H="localStorage"in window&&null!==window.localStorage}catch(e){H=!1}var P,L,k=!0,D=!1,F=[],O=function e(t){function n(){localStorage.setItem(document.location.href+".gui",(0,u.default)(i.getSaveObject()))}function r(){var e=i.getRoot();e.width+=1,g.defer(function(){e.width-=1})}var i=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),v.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=g.defaults(t,{autoPlace:!0,width:e.DEFAULT_WIDTH}),t=g.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),g.isUndefined(t.load)?t.load={preset:A}:t.preset&&(t.load.preset=t.preset),g.isUndefined(t.parent)&&t.hideable&&F.push(this),t.resizable=g.isUndefined(t.parent)&&t.resizable,t.autoPlace&&g.isUndefined(t.scrollable)&&(t.scrollable=!0);var o=H&&"true"===localStorage.getItem(document.location.href+".isLocal");if((0,s.default)(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return i.parent?i.getRoot().preset:t.load.preset},set:function(e){for(i.parent?i.getRoot().preset=e:t.load.preset=e,e=0;e<this.__preset_select.length;e++)this.__preset_select[e].value==this.preset&&(this.__preset_select.selectedIndex=e);i.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,_(i,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,l&&(l.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(n){t.closed=n,t.closed?v.addClass(i.__ul,e.CLASS_CLOSED):v.removeClass(i.__ul,e.CLASS_CLOSED),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=n?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return o},set:function(e){H&&((o=e)?v.bind(window,"unload",n):v.unbind(window,"unload",n),localStorage.setItem(document.location.href+".isLocal",e))}}}),g.isUndefined(t.parent)){if(t.closed=!1,v.addClass(this.domElement,e.CLASS_MAIN),v.makeSelectable(this.domElement,!1),H&&o){i.useLocalStorage=!0;var a=localStorage.getItem(document.location.href+".gui");a&&(t.load=JSON.parse(a))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,v.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),v.bind(this.__closeButton,"click",function(){i.closed=!i.closed})}else{void 0===t.closed&&(t.closed=!0);var l=document.createTextNode(t.name);v.addClass(l,"controller-name"),a=y(i,l),v.addClass(this.__ul,e.CLASS_CLOSED),v.addClass(a,"title"),v.bind(a,"click",function(e){return e.preventDefault(),i.closed=!i.closed,!1}),t.closed||(this.closed=!1)}t.autoPlace&&(g.isUndefined(t.parent)&&(k&&(L=document.createElement("div"),v.addClass(L,"dg"),v.addClass(L,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(L),k=!1),L.appendChild(this.domElement),v.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||_(i,t.width)),v.bind(window,"resize",function(){i.onResize()}),v.bind(this.__ul,"webkitTransitionEnd",function(){i.onResize()}),v.bind(this.__ul,"transitionend",function(){i.onResize()}),v.bind(this.__ul,"oTransitionEnd",function(){i.onResize()}),this.onResize(),t.resizable&&w(this),i.getRoot(),t.parent||r()};return O.toggleHide=function(){D=!D,g.each(F,function(e){e.domElement.style.zIndex=D?-999:999,e.domElement.style.opacity=D?0:1})},O.CLASS_AUTO_PLACE="a",O.CLASS_AUTO_PLACE_CONTAINER="ac",O.CLASS_MAIN="main",O.CLASS_CONTROLLER_ROW="cr",O.CLASS_TOO_TALL="taller-than-window",O.CLASS_CLOSED="closed",O.CLASS_CLOSE_BUTTON="close-button",O.CLASS_DRAG="drag",O.DEFAULT_WIDTH=245,O.TEXT_CLOSED="Close Controls",O.TEXT_OPEN="Open Controls",v.bind(window,"keydown",function(e){"text"!==document.activeElement.type&&(72===e.which||72==e.keyCode)&&O.toggleHide()},!1),g.extend(O.prototype,{add:function(e,t){return E(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return E(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;g.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&L.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};return t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]),t=new O(t),this.__folders[e]=t,e=y(this,t.domElement),v.addClass(e,"folder"),t},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=v.getOffset(e.__ul).top,n=0;g.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=v.getHeight(t))}),window.innerHeight-t-20<n?(v.addClass(e.domElement,O.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(v.removeClass(e.domElement,O.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&g.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(g.isUndefined(P)&&(P=new m,P.domElement.innerHTML=t),this.parent)throw Error("You can only call remember on a top level GUI.");var e=this;g.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&b(e),e.__rememberedObjects.indexOf(t)==-1&&e.__rememberedObjects.push(t)}),this.autoPlace&&_(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=R(this)),e.folders={},g.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=R(this),M(this,!1)},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[A]=R(this,!0)),this.load.remembered[e]=R(this),this.preset=e,S(this,e,!0)},revert:function(e){g.each(this.__controllers,function(t){this.getRoot().load.remembered?T(e||this.getRoot(),t):t.setValue(t.initialValue)},this),g.each(this.__folders,function(e){e.revert(e)}),e||M(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&C(this.__listening)}}),O}(d.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",d.controllers.factory=function(e,t,n,r,i,o,a){return function(s,l,u,c){var h=s[l];return a.isArray(u)||a.isObject(u)?new e(s,l,u):a.isNumber(h)?a.isNumber(u)&&a.isNumber(c)?new n(s,l,u,c):new t(s,l,{min:u,max:c}):a.isString(h)?new r(s,l):a.isFunction(h)?new i(s,l,""):a.isBoolean(h)?new o(s,l):void 0}}(d.controllers.OptionController,d.controllers.NumberControllerBox,d.controllers.NumberControllerSlider,d.controllers.StringController=function(e,t,n){var r=function e(n,r){function i(){o.setValue(o.__input.value)}e.superclass.call(this,n,r);var o=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",i),t.bind(this.__input,"change",i),t.bind(this.__input,"blur",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,n.extend(r.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(d.controllers.Controller,d.dom.dom,d.utils.common),d.controllers.FunctionController,d.controllers.BooleanController,d.utils.common),d.controllers.Controller,d.controllers.BooleanController,d.controllers.FunctionController,d.controllers.NumberControllerBox,d.controllers.NumberControllerSlider,d.controllers.OptionController,d.controllers.ColorController=function(e,t,n,r,i){function o(e,t,n,r){e.style.background="",i.each(l,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "})}function a(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var s=function e(s,l){function u(e){p(e),t.bind(window,"mousemove",p),t.bind(window,"mouseup",c)}function c(){t.unbind(window,"mousemove",p),t.unbind(window,"mouseup",c)}function h(){var e=r(this.value);e!==!1?(m.__color.__state=e,m.setValue(m.__color.toOriginal())):this.value=m.__color.toString()}function d(){t.unbind(window,"mousemove",f),t.unbind(window,"mouseup",d)}function p(e){e.preventDefault();var n=t.getWidth(m.__saturation_field),r=t.getOffset(m.__saturation_field),i=(e.clientX-r.left+document.body.scrollLeft)/n,e=1-(e.clientY-r.top+document.body.scrollTop)/n;return e>1?e=1:e<0&&(e=0),i>1?i=1:i<0&&(i=0),m.__color.v=e,m.__color.s=i,m.setValue(m.__color.toOriginal()),!1}function f(e){
e.preventDefault();var n=t.getHeight(m.__hue_field),r=t.getOffset(m.__hue_field),e=1-(e.clientY-r.top+document.body.scrollTop)/n;return e>1?e=1:e<0&&(e=0),m.__color.h=360*e,m.setValue(m.__color.toOriginal()),!1}e.superclass.call(this,s,l),this.__color=new n(this.getValue()),this.__temp=new n(0);var m=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(e){13===e.keyCode&&h.call(this)}),t.bind(this.__input,"blur",h),t.bind(this.__selector,"mousedown",function(){t.addClass(this,"drag").bind(window,"mouseup",function(){t.removeClass(m.__selector,"drag")})});var v=document.createElement("div");i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),i.extend(v.style,{width:"100%",height:"100%",background:"none"}),o(v,"top","rgba(0,0,0,0)","#000"),i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),a(this.__hue_field),i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",u),t.bind(this.__field_knob,"mousedown",u),t.bind(this.__hue_field,"mousedown",function(e){f(e),t.bind(window,"mousemove",f),t.bind(window,"mouseup",d)}),this.__saturation_field.appendChild(v),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};s.superclass=e,i.extend(s.prototype,e.prototype,{updateDisplay:function(){var e=r(this.getValue());if(e!==!1){var t=!1;i.each(n.COMPONENTS,function(n){if(!i.isUndefined(e[n])&&!i.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&i.extend(this.__color.__state,e)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,s=255-a;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toString()),i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+s+","+s+","+s+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];return s}(d.controllers.Controller,d.dom.dom,d.color.Color=function(e,t,n,r){function i(e,t,n){(0,o.default)(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(s(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(s(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function a(e,t){(0,o.default)(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(l(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(l(this),this.__state.space="HSV"),this.__state[t]=e}})}function s(e,n,i){if("HEX"===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,i);else{if("HSV"!==e.__state.space)throw"Corrupted color state";r.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function l(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);r.extend(e.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}var u=function(){if(this.__state=e.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS="r,g,b,h,s,v,hex,a".split(","),r.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),i(u.prototype,"r",2),i(u.prototype,"g",1),i(u.prototype,"b",0),a(u.prototype,"h"),a(u.prototype,"s"),a(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),u}(d.color.interpret,d.color.math=function(){var e;return{hsv_to_rgb:function(e,t,n){var r=e/60-Math.floor(e/60),i=n*(1-t),o=n*(1-r*t),t=n*(1-(1-r)*t),e=[[n,t,i],[o,n,i],[i,n,t],[i,o,n],[t,i,n],[n,i,o]][Math.floor(e/60)%6];return{r:255*e[0],g:255*e[1],b:255*e[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),r=i-r;return 0==i?{h:NaN,s:0,v:0}:(e=e==i?(t-n)/r:t==i?2+(n-e)/r:4+(e-t)/r,e/=6,e<0&&(e+=1),{h:360*e,s:r/i,v:i/255})},rgb_to_hex:function(e,t,n){return e=this.hex_with_component(0,2,e),e=this.hex_with_component(e,1,t),e=this.hex_with_component(e,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(t,n,r){return r<<(e=8*n)|t&~(255<<e)}}}(),d.color.toString,d.utils.common),d.color.interpret,d.utils.common),d.utils.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),d.dom.CenteredDiv=function(e,t){var n=function n(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;e.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var t=this,n=function n(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",n),e.unbind(t.domElement,"transitionend",n),e.unbind(t.domElement,"oTransitionEnd",n)};e.bind(this.domElement,"webkitTransitionEnd",n),e.bind(this.domElement,"transitionend",n),e.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},n}(d.dom.dom,d.utils.common),d.dom.dom,d.utils.common),t.default=d},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){void 0==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(var t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(var t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};n.prototype.dot=function(e,t,n){return e[0]*t+e[1]*n},n.prototype.dot3=function(e,t,n,r){return e[0]*t+e[1]*n+e[2]*r},n.prototype.dot4=function(e,t,n,r,i){return e[0]*t+e[1]*n+e[2]*r+e[3]*i},n.prototype.noise=function(e,t){var n,r,i,o,a,s=.5*(Math.sqrt(3)-1),l=(e+t)*s,u=Math.floor(e+l),c=Math.floor(t+l),h=(3-Math.sqrt(3))/6,d=(u+c)*h,p=u-d,f=c-d,m=e-p,v=t-f;m>v?(o=1,a=0):(o=0,a=1);var g=m-o+h,E=v-a+h,y=m-1+2*h,x=v-1+2*h,T=255&u,b=255&c,w=this.perm[T+this.perm[b]]%12,_=this.perm[T+o+this.perm[b+a]]%12,R=this.perm[T+1+this.perm[b+1]]%12,S=.5-m*m-v*v;S<0?n=0:(S*=S,n=S*S*this.dot(this.grad3[w],m,v));var M=.5-g*g-E*E;M<0?r=0:(M*=M,r=M*M*this.dot(this.grad3[_],g,E));var C=.5-y*y-x*x;return C<0?i=0:(C*=C,i=C*C*this.dot(this.grad3[R],y,x)),70*(n+r+i)},n.prototype.noise3d=function(e,t,n){var r,i,o,a,s,l,u,c,h,d,p=1/3,f=(e+t+n)*p,m=Math.floor(e+f),v=Math.floor(t+f),g=Math.floor(n+f),E=1/6,y=(m+v+g)*E,x=m-y,T=v-y,b=g-y,w=e-x,_=t-T,R=n-b;w>=_?_>=R?(s=1,l=0,u=0,c=1,h=1,d=0):w>=R?(s=1,l=0,u=0,c=1,h=0,d=1):(s=0,l=0,u=1,c=1,h=0,d=1):_<R?(s=0,l=0,u=1,c=0,h=1,d=1):w<R?(s=0,l=1,u=0,c=0,h=1,d=1):(s=0,l=1,u=0,c=1,h=1,d=0);var S=w-s+E,M=_-l+E,C=R-u+E,H=w-c+2*E,A=_-h+2*E,P=R-d+2*E,L=w-1+3*E,k=_-1+3*E,D=R-1+3*E,F=255&m,O=255&v,B=255&g,N=this.perm[F+this.perm[O+this.perm[B]]]%12,I=this.perm[F+s+this.perm[O+l+this.perm[B+u]]]%12,U=this.perm[F+c+this.perm[O+h+this.perm[B+d]]]%12,V=this.perm[F+1+this.perm[O+1+this.perm[B+1]]]%12,z=.6-w*w-_*_-R*R;z<0?r=0:(z*=z,r=z*z*this.dot3(this.grad3[N],w,_,R));var j=.6-S*S-M*M-C*C;j<0?i=0:(j*=j,i=j*j*this.dot3(this.grad3[I],S,M,C));var G=.6-H*H-A*A-P*P;G<0?o=0:(G*=G,o=G*G*this.dot3(this.grad3[U],H,A,P));var W=.6-L*L-k*k-D*D;return W<0?a=0:(W*=W,a=W*W*this.dot3(this.grad3[V],L,k,D)),32*(r+i+o+a)},n.prototype.noise4d=function(e,t,n,r){var i,o,a,s,l,u,c,h,d,p,f,m,v,g,E,y,x,T=this.grad4,b=this.simplex,w=this.perm,_=(Math.sqrt(5)-1)/4,R=(5-Math.sqrt(5))/20,S=(e+t+n+r)*_,M=Math.floor(e+S),C=Math.floor(t+S),H=Math.floor(n+S),A=Math.floor(r+S),P=(M+C+H+A)*R,L=M-P,k=C-P,D=H-P,F=A-P,O=e-L,B=t-k,N=n-D,I=r-F,U=O>B?32:0,V=O>N?16:0,z=B>N?8:0,j=O>I?4:0,G=B>I?2:0,W=N>I?1:0,q=U+V+z+j+G+W;u=b[q][0]>=3?1:0,c=b[q][1]>=3?1:0,h=b[q][2]>=3?1:0,d=b[q][3]>=3?1:0,p=b[q][0]>=2?1:0,f=b[q][1]>=2?1:0,m=b[q][2]>=2?1:0,v=b[q][3]>=2?1:0,g=b[q][0]>=1?1:0,E=b[q][1]>=1?1:0,y=b[q][2]>=1?1:0,x=b[q][3]>=1?1:0;var X=O-u+R,Y=B-c+R,K=N-h+R,Q=I-d+R,Z=O-p+2*R,J=B-f+2*R,$=N-m+2*R,ee=I-v+2*R,te=O-g+3*R,ne=B-E+3*R,re=N-y+3*R,ie=I-x+3*R,oe=O-1+4*R,ae=B-1+4*R,se=N-1+4*R,le=I-1+4*R,ue=255&M,ce=255&C,he=255&H,de=255&A,pe=w[ue+w[ce+w[he+w[de]]]]%32,fe=w[ue+u+w[ce+c+w[he+h+w[de+d]]]]%32,me=w[ue+p+w[ce+f+w[he+m+w[de+v]]]]%32,ve=w[ue+g+w[ce+E+w[he+y+w[de+x]]]]%32,ge=w[ue+1+w[ce+1+w[he+1+w[de+1]]]]%32,Ee=.6-O*O-B*B-N*N-I*I;Ee<0?i=0:(Ee*=Ee,i=Ee*Ee*this.dot4(T[pe],O,B,N,I));var ye=.6-X*X-Y*Y-K*K-Q*Q;ye<0?o=0:(ye*=ye,o=ye*ye*this.dot4(T[fe],X,Y,K,Q));var xe=.6-Z*Z-J*J-$*$-ee*ee;xe<0?a=0:(xe*=xe,a=xe*xe*this.dot4(T[me],Z,J,$,ee));var Te=.6-te*te-ne*ne-re*re-ie*ie;Te<0?s=0:(Te*=Te,s=Te*Te*this.dot4(T[ve],te,ne,re,ie));var be=.6-oe*oe-ae*ae-se*se-le*le;return be<0?l=0:(be*=be,l=be*be*this.dot4(T[ge],oe,ae,se,le)),27*(i+o+a+s+l)},t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(123),o=r(i);THREE.TrackballControls=function(e,t){function n(e){d.enabled!==!1&&(window.removeEventListener("keydown",n),g=v,v===p.NONE&&(e.keyCode!==d.keys[p.ROTATE]||d.noRotate?e.keyCode!==d.keys[p.ZOOM]||d.noZoom?e.keyCode!==d.keys[p.PAN]||d.noPan||(v=p.PAN):v=p.ZOOM:v=p.ROTATE))}function r(e){d.enabled!==!1&&(v=g,window.addEventListener("keydown",n,!1))}function i(e){d.enabled!==!1&&(e.preventDefault(),e.stopPropagation(),v===p.NONE&&(v=e.button),v!==p.ROTATE||d.noRotate?v!==p.ZOOM||d.noZoom?v!==p.PAN||d.noPan||(M.copy(L(e.pageX,e.pageY)),C.copy(M)):(w.copy(L(e.pageX,e.pageY)),_.copy(w)):(x.copy(k(e.pageX,e.pageY)),y.copy(x)),document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",a,!1),d.dispatchEvent(A))}function o(e){d.enabled!==!1&&(e.preventDefault(),e.stopPropagation(),v!==p.ROTATE||d.noRotate?v!==p.ZOOM||d.noZoom?v!==p.PAN||d.noPan||C.copy(L(e.pageX,e.pageY)):_.copy(L(e.pageX,e.pageY)):(y.copy(x),x.copy(k(e.pageX,e.pageY))))}function a(e){d.enabled!==!1&&(e.preventDefault(),e.stopPropagation(),v=p.NONE,document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a),d.dispatchEvent(P))}function s(e){if(d.enabled!==!1){e.preventDefault(),e.stopPropagation();var t=0;e.wheelDelta?t=e.wheelDelta/40:e.detail&&(t=-e.detail/3),w.y+=.01*t,d.dispatchEvent(A),d.dispatchEvent(P)}}function l(e){if(d.enabled!==!1){switch(e.touches.length){case 1:v=p.TOUCH_ROTATE,x.copy(k(e.touches[0].pageX,e.touches[0].pageY)),y.copy(x);break;case 2:v=p.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;S=R=Math.sqrt(t*t+n*n);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;M.copy(L(r,i)),C.copy(M);break;default:v=p.NONE}d.dispatchEvent(A)}}function u(e){if(d.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:y.copy(x),x.copy(k(e.touches[0].pageX,e.touches[0].pageY));break;case 2:var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;S=Math.sqrt(t*t+n*n);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;C.copy(L(r,i));break;default:v=p.NONE}}function c(e){if(d.enabled!==!1){switch(e.touches.length){case 1:y.copy(x),x.copy(k(e.touches[0].pageX,e.touches[0].pageY));break;case 2:R=S=0;var t=(e.touches[0].pageX+e.touches[1].pageX)/2,n=(e.touches[0].pageY+e.touches[1].pageY)/2;C.copy(L(t,n)),M.copy(C)}v=p.NONE,d.dispatchEvent(P)}}function h(e){e.preventDefault()}var d=this,p={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new THREE.Vector3;var f=1e-6,m=new THREE.Vector3,v=p.NONE,g=p.NONE,E=new THREE.Vector3,y=new THREE.Vector2,x=new THREE.Vector2,T=new THREE.Vector3,b=0,w=new THREE.Vector2,_=new THREE.Vector2,R=0,S=0,M=new THREE.Vector2,C=new THREE.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var H={type:"change"},A={type:"start"},P={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},this.handleEvent=function(e){"function"==typeof this[e.type]&&this[e.type](e)};var L=function(){var e=new THREE.Vector2;return function(t,n){return e.set((t-d.screen.left)/d.screen.width,(n-d.screen.top)/d.screen.height),e}}(),k=function(){var e=new THREE.Vector2;return function(t,n){return e.set((t-.5*d.screen.width-d.screen.left)/(.5*d.screen.width),(d.screen.height+2*(d.screen.top-n))/d.screen.width),e}}();this.rotateCamera=function(){var e,t=new THREE.Vector3,n=new THREE.Quaternion,r=new THREE.Vector3,i=new THREE.Vector3,o=new THREE.Vector3,a=new THREE.Vector3;return function(){a.set(x.x-y.x,x.y-y.y,0),e=a.length(),e?(E.copy(d.object.position).sub(d.target),r.copy(E).normalize(),i.copy(d.object.up).normalize(),o.crossVectors(i,r).normalize(),i.setLength(x.y-y.y),o.setLength(x.x-y.x),a.copy(i.add(o)),t.crossVectors(a,E).normalize(),e*=d.rotateSpeed,n.setFromAxisAngle(t,e),E.applyQuaternion(n),d.object.up.applyQuaternion(n),T.copy(t),b=e):!d.staticMoving&&b&&(b*=Math.sqrt(1-d.dynamicDampingFactor),E.copy(d.object.position).sub(d.target),n.setFromAxisAngle(T,b),E.applyQuaternion(n),d.object.up.applyQuaternion(n)),y.copy(x)}}(),this.zoomCamera=function(){var e;v===p.TOUCH_ZOOM_PAN?(e=R/S,R=S,E.multiplyScalar(e)):(e=1+(_.y-w.y)*d.zoomSpeed,1!==e&&e>0&&(E.multiplyScalar(e),d.staticMoving?w.copy(_):w.y+=(_.y-w.y)*this.dynamicDampingFactor))},this.panCamera=function(){var e=new THREE.Vector2,t=new THREE.Vector3,n=new THREE.Vector3;return function(){e.copy(C).sub(M),e.lengthSq()&&(e.multiplyScalar(E.length()*d.panSpeed),n.copy(E).cross(d.object.up).setLength(e.x),n.add(t.copy(d.object.up).setLength(e.y)),d.object.position.add(n),d.target.add(n),d.staticMoving?M.copy(C):M.add(e.subVectors(C,M).multiplyScalar(d.dynamicDampingFactor)))}}(),this.checkDistances=function(){d.noZoom&&d.noPan||(E.lengthSq()>d.maxDistance*d.maxDistance&&(d.object.position.addVectors(d.target,E.setLength(d.maxDistance)),w.copy(_)),E.lengthSq()<d.minDistance*d.minDistance&&(d.object.position.addVectors(d.target,E.setLength(d.minDistance)),w.copy(_)))},this.update=function(){E.subVectors(d.object.position,d.target),d.noRotate||d.rotateCamera(),d.noZoom||d.zoomCamera(),d.noPan||d.panCamera(),d.object.position.addVectors(d.target,E),d.checkDistances(),d.object.lookAt(d.target),m.distanceToSquared(d.object.position)>f&&(d.dispatchEvent(H),m.copy(d.object.position))},this.reset=function(){v=p.NONE,g=p.NONE,d.target.copy(d.target0),d.object.position.copy(d.position0),d.object.up.copy(d.up0),E.subVectors(d.object.position,d.target),d.object.lookAt(d.target),d.dispatchEvent(H),m.copy(d.object.position)},this.dispose=function(){this.domElement.removeEventListener("contextmenu",h,!1),this.domElement.removeEventListener("mousedown",i,!1),this.domElement.removeEventListener("mousewheel",s,!1),this.domElement.removeEventListener("MozMousePixelScroll",s,!1),this.domElement.removeEventListener("touchstart",l,!1),this.domElement.removeEventListener("touchend",c,!1),this.domElement.removeEventListener("touchmove",u,!1),document.removeEventListener("mousemove",o,!1),document.removeEventListener("mouseup",a,!1),window.removeEventListener("keydown",n,!1),window.removeEventListener("keyup",r,!1)},this.domElement.addEventListener("contextmenu",h,!1),this.domElement.addEventListener("mousedown",i,!1),this.domElement.addEventListener("mousewheel",s,!1),this.domElement.addEventListener("MozMousePixelScroll",s,!1),this.domElement.addEventListener("touchstart",l,!1),this.domElement.addEventListener("touchend",c,!1),this.domElement.addEventListener("touchmove",u,!1),window.addEventListener("keydown",n,!1),window.addEventListener("keyup",r,!1),this.handleResize(),this.update()},THREE.TrackballControls.prototype=(0,o.default)(THREE.EventDispatcher.prototype),THREE.TrackballControls.prototype.constructor=THREE.TrackballControls},function(e,t){"use strict";THREE.CopyShader={uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}},function(e,t){"use strict";THREE.FXAAShader={uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1/1024,1/512)}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","void main() {","vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;","vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float lumaNW = dot( rgbNW, luma );","float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaM  = dot( rgbM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec4 rgbA = (1.0/2.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));","vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));","float lumaB = dot(rgbB, vec4(luma, 0.0));","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = rgbA;","} else {","gl_FragColor = rgbB;","}","}"].join("\n")}},function(e,t){"use strict";THREE.RenderPass=function(e,t,n,r,i){this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:1,this.oldClearColor=new THREE.Color,this.oldClearAlpha=1,this.enabled=!0,this.clear=!0,this.needsSwap=!1},THREE.RenderPass.prototype={render:function(e,t,n,r){this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.render(this.scene,this.camera,n,this.clear),this.clearColor&&e.setClearColor(this.oldClearColor,this.oldClearAlpha),this.scene.overrideMaterial=null}}},function(e,t){"use strict";THREE.ShaderPass=function(e,t){this.textureID=void 0!==t?t:"tDiffuse",this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.renderToScreen=!1,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)},THREE.ShaderPass.prototype={render:function(e,t,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}}},function(e,t){"use strict";THREE.MaskPass=function(e,t){this.scene=e,this.camera=t,this.enabled=!0,this.clear=!0,this.needsSwap=!1,this.inverse=!1},THREE.MaskPass.prototype={render:function(e,t,n,r){var i=e.context;i.colorMask(!1,!1,!1,!1),i.depthMask(!1);var o,a;this.inverse?(o=0,a=1):(o=1,a=0),i.enable(i.STENCIL_TEST),i.stencilOp(i.REPLACE,i.REPLACE,i.REPLACE),i.stencilFunc(i.ALWAYS,o,4294967295),i.clearStencil(a),e.render(this.scene,this.camera,n,this.clear),e.render(this.scene,this.camera,t,this.clear),i.colorMask(!0,!0,!0,!0),i.depthMask(!0),i.stencilFunc(i.EQUAL,1,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}},THREE.ClearMaskPass=function(){this.enabled=!0},THREE.ClearMaskPass.prototype={render:function(e,t,n,r){var i=e.context;i.disable(i.STENCIL_TEST)}}},function(e,t){"use strict";THREE.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var n=e.getPixelRatio(),r=Math.floor(e.context.canvas.width/n)||1,i=Math.floor(e.context.canvas.height/n)||1,o={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1};t=new THREE.WebGLRenderTarget(r,i,o)}this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},THREE.EffectComposer.prototype={swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2;var t,n,r=!1,i=this.passes.length;for(n=0;n<i;n++)if(t=this.passes[n],t.enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),t.needsSwap){if(r){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}t instanceof THREE.MaskPass?r=!0:t instanceof THREE.ClearMaskPass&&(r=!1)}},reset:function(e){if(void 0===e){e=this.renderTarget1.clone();var t=this.renderer.getPixelRatio();e.width=Math.floor(this.renderer.context.canvas.width/t),e.height=Math.floor(this.renderer.context.canvas.height/t)}this.renderTarget1.dispose(),this.renderTarget1=e,this.renderTarget2.dispose(),this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t)}}},function(e,t){"use strict";THREE.SuperShader={uniforms:{tDiffuse:{type:"t",value:null},glowAmount:{type:"f",value:.5},glowSize:{type:"f",value:4},resolution:{type:"v2",value:new THREE.Vector2(800,600)},vigOffset:{type:"f",value:1},vigDarkness:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float glowSize;","uniform float glowAmount;","uniform vec2 resolution;","uniform float vigOffset;","uniform float vigDarkness;","uniform float brightness;","uniform float contrast;","uniform float hue;","uniform float saturation;","uniform int mirrorSide;","varying vec2 vUv;","void main() {","float h = glowSize / resolution.x;","float v = glowSize / resolution.y;","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;","vec4 col = texture2D( tDiffuse, vUv );","col = min(col + sum * glowAmount, 1.0);","vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( vigOffset );","col = vec4( mix( col.rgb, vec3( 1.0 - vigDarkness ), dot( uv, uv ) ), col.a );","gl_FragColor = col;","}"].join("\n")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(109),o=r(i),a=n(112),s=r(a),l=n(113),u=r(l),c=n(117),h=r(c),d=n(118),p=r(d),f=n(2),m=r(f);n(632);var v=function(e){function t(e){(0,s.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.state={boost:0,audioUrl:e.audioUrl,playing:!1},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.initFilter()}},{key:"componentDidUpdate",value:function(){}},{key:"initFilter",value:function(){function e(){if(c=getWebGLContext(d),c.disable(c.DEPTH_TEST),c.enable(c.BLEND),c.viewport(0,0,d.width,d.height),!c)return void alert("Looks like your browser / device doesn't support webgl")}function t(){h=new pxBB,y=new pxFbo,x=new pxFbo,T=new pxFbo,w=new pxFbo,b=new pxFbo,_=new pxFbo,R=new pxFbo,y.allocate(d.width,d.height,V),x.allocate(d.width,d.height,V),T.allocate(d.width,d.height,V),w.allocate(d.width,d.height,V),b.allocate(d.width,d.height,V),_.allocate(d.width,d.height,V),R.allocate(d.width,d.height,V),S=createShaderFromScriptElement(c,"baseVs"),C=createShaderFromScriptElement(c,"translateVs"),M=createShaderFromScriptElement(c,"baseFs"),H=createShaderFromScriptElement(c,"contrastFrag"),A=createShaderFromScriptElement(c,"blurFrag"),P=createShaderFromScriptElement(c,"reposFrag"),L=createShaderFromScriptElement(c,"flowFrag"),k=createShaderFromScriptElement(c,"blackFrag"),p=createProgram(c,[S,M]),f=createProgram(c,[S,H]),m=createProgram(c,[S,A]),g=createProgram(c,[C,P]),v=createProgram(c,[S,L]),E=createProgram(c,[S,k]),c.useProgram(m);var e=c.getUniformLocation(m,"step_w");c.uniform1f(e,1.75/d.width);var t=c.getUniformLocation(m,"step_h");c.uniform1f(t,1.75/d.height),c.useProgram(v),c.uniform2f(c.getUniformLocation(v,"scale"),200,200),c.uniform2f(c.getUniformLocation(v,"offset"),10/d.width,10/d.height),c.uniform1f(c.getUniformLocation(v,"lambda"),50),
c.useProgram(g),c.uniform2f(c.getUniformLocation(g,"amt"),.05,.05),F=createAndSetupTexture(c)}function n(){window.requestAnimationFrame(n),U&&(R.start(),h.draw(E,F),x.start(),h.draw(f,D),b.start(),x.draw2(v,_.texture),_.start(),x.draw(p),T.start(),b.draw(m),w.start(),c.useProgram(g),c.uniform1f(c.getUniformLocation(g,"u_mouseX"),N),c.uniform1f(c.getUniformLocation(g,"u_mouseY"),I),R.draw(p),c.enable(c.BLEND),c.blendFunc(c.ONE_MINUS_DST_COLOR,c.DST_COLOR),T.draw(p),y.draw2(g,T.texture),c.disable(c.BLEND),y.start(),w.draw(p),c.bindFramebuffer(c.FRAMEBUFFER,null),y.draw(p),c.bindTexture(c.TEXTURE_2D,D),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,D.image))}function r(){D=createAndSetupTexture(c),D.image=z,c.bindTexture(c.TEXTURE_2D,D),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,D.image)}function i(){y.start(),b.draw(p),c.bindFramebuffer(c.FRAMEBUFFER,null)}function o(e,t,n,r){return(t-e)/t*(r-n)+n}function a(e){O=e.clientX,B=e.clientY,N=o(O,window.innerWidth,1.09,.99),I=o(B,window.innerHeight,1.09,.99)}function s(e){l()}function l(){i(),V=!V,y.allocate(d.width,d.height,V),x.allocate(d.width,d.height,V),T.allocate(d.width,d.height,V),w.allocate(d.width,d.height,V),b.allocate(d.width,d.height,V),_.allocate(d.width,d.height,V),R.allocate(d.width,d.height,V)}function u(){z.src="./video/trim_2.mp4",console.log(z.src),z.loop=!0,z.play(),U=!0}var c,h,d,p,f,m,v,g,E,y,x,T,b,w,_,R,S,M,C,H,A,P,L,k,D,F,O,B,N=1.01,I=1.01,U=!1,V=!1,z=document.createElement("video");d=document.getElementById("canvas"),d.width=window.innerWidth,d.height=window.innerHeight,document.addEventListener("mousemove",a,!1),document.addEventListener("mousedown",s,!1),window.addEventListener("resize",resizeCanvas),e(),t(),r(),resizeCanvas(),n(),setInterval(function(){var e=$("#audioValue").attr("data"),t=10*Math.floor(11*Math.random());console.log(e),e>7&&e<8?(N=o(10*e,window.innerWidth,1.09,.99),I=o(50*e,window.innerHeight,1.09,.99)):e>9&&e<10?(console.log("oink"),N=o(t*e,window.innerWidth,1.09,.99),I=o(t*e,window.innerHeight,1.09,.99)):e>13&&e<14&&l()},100),u()}},{key:"render",value:function(){return m.default.createElement("div",{id:"container"},m.default.createElement("canvas",{id:"canvas"},"Sorry but you're browser doesn't support the canvas :("))}}]),t}(m.default.Component);t.default=v},function(e,t){"use strict"},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=n(109),l=i(s),u=n(112),c=i(u),h=n(113),d=i(h),p=n(117),f=i(p),m=n(118),v=i(m),g=n(2),E=i(g),y=n(126),x=r(y),T=n(634),b=i(T),w=n(635),_=i(w),R=(a=o=function(e){function t(e,n){(0,c.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return console.log(b.default),r.cameraPosition=new x.Vector3(0,0,5),r.state={cubeRotation:new x.Euler},r._onAnimate=function(){r.setState({cubeRotation:new x.Euler(r.state.cubeRotation.x+.1,r.state.cubeRotation.y+.1,0)})},r.playShaderAnimation(),r}return(0,v.default)(t,e),(0,d.default)(t,[{key:"playShaderAnimation",value:function(){function e(){U+=.1;for(var r=(Math.cos(U),Math.sin(.8*U),[]),i=0;i<H.length;i++)n[i]&&r.push(H[i]);P.filters=r.length>0?r:null;for(var i=0;i<F.length;i++){var a=F[i];a.direction+=.01*a.turnSpeed,a.position.x+=Math.sin(a.direction)*a.speed,a.position.y+=Math.cos(a.direction)*a.speed,a.rotation=-a.direction-Math.PI/2,a.position.x<D.x&&(a.position.x+=D.width),a.position.x>D.x+D.width&&(a.position.x-=D.width),a.position.y<D.y&&(a.position.y+=D.height),a.position.y>D.y+D.height&&(a.position.y-=D.height)}o.offset.x=10*U,o.offset.y=10*U,I.tilePosition.x=U*-10,I.tilePosition.y=U*-10,t.render(A),requestAnimFrame(e)}var t=b.default.autoDetectRenderer(630,410);t.view.style.position="absolute",t.view.style.width=window.innerWidth+"px",t.view.style.height=window.innerHeight+"px",t.view.style.display="block";var n=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];setTimeout(function(){document.getElementById("biomes").appendChild(t.view)},300),$(".dg").length&&$(".dg").remove();var r=new _.default.GUI({}),i=b.default.Texture.fromImage("data/t4_biomes_map.jpg"),o=new b.default.DisplacementFilter(i),a=r.addFolder("Displacement");a.add(n,"0").name("apply"),a.add(o.scale,"x",200,200).name("scaleX"),a.add(o.scale,"y",200,200).name("scaleY");var s=new b.default.BlurFilter,l=r.addFolder("Blur");l.add(n,"1").name("apply"),l.add(s,"blurX",0,32).name("blurX"),l.add(s,"blurY",0,32).name("blurY");var u=new b.default.PixelateFilter,c=r.addFolder("Pixelate");c.add(n,"2").name("apply"),c.add(u.size,"x",1,32).name("PixelSizeX"),c.add(u.size,"y",1,32).name("PixelSizeY");var h=new b.default.InvertFilter,d=r.addFolder("Invert");d.add(n,"3").name("apply"),d.add(h,"invert",0,1).name("Invert");var p=new b.default.GrayFilter,f=r.addFolder("Gray");f.add(n,"4").name("apply"),f.add(p,"gray",0,1).name("Gray");var m=new b.default.SepiaFilter,v=r.addFolder("Sepia");v.add(n,"5").name("apply"),v.add(m,"sepia",0,1).name("Sepia");var g=new b.default.TwistFilter,E=r.addFolder("Twist");E.add(n,"6").name("apply"),E.add(g,"angle",0,10).name("Angle"),E.add(g,"radius",0,1).name("Radius"),E.add(g.offset,"x",0,1).name("offset.x"),E.add(g.offset,"y",0,1).name("offset.y");var y=new b.default.DotScreenFilter,x=r.addFolder("DotScreen");x.add(n,"7").name("apply"),x.add(y,"angle",0,10),x.add(y,"scale",0,1);var T=new b.default.ColorStepFilter,w=r.addFolder("ColorStep");w.add(n,"8").name("apply"),w.add(T,"step",1,100),w.add(T,"step",1,100);var R=new b.default.CrossHatchFilter,S=r.addFolder("CrossHatch");S.add(n,"9").name("apply");var M=new b.default.RGBSplitFilter,C=r.addFolder("RGB Splitter");C.add(n,"10").name("apply");var H=[o,s,u,h,p,m,g,y,T,R,M],A=new b.default.Stage(16711680,!0),P=new b.default.DisplayObjectContainer;A.addChild(P),A.interactive=!0;var L=b.default.Sprite.fromImage("data/displacement_BG.jpg");P.addChild(L);for(var k=100,D=new b.default.Rectangle(-k,-k,630+2*k,410+2*k),F=[],O=0;O<20;O++){var B=O%4;B+=1;var N=b.default.Sprite.fromImage("data/displacement_fish"+B+".png");N.anchor.x=N.anchor.y=.5,P.addChild(N),N.direction=Math.random()*Math.PI*2,N.speed=2+2*Math.random(),N.turnSpeed=Math.random()-.8,N.position.x=Math.random()*D.width,N.position.y=Math.random()*D.height,N.scale.x=N.scale.y=.8+.3*Math.random(),F.push(N)}var I=new b.default.TilingSprite(b.default.Texture.fromImage("data/zeldaWaves.png"),630,410);I.alpha=.1,P.addChild(I),o.scale.x=178,o.scale.y=200,y.scale=0;var U=0;requestAnimFrame(e)}},{key:"render",value:function(){var e=this.props;e.width,e.height,e.audioData;return E.default.createElement("div",{id:"biomes"})}}]),t}(E.default.Component),o.propTypes={width:E.default.PropTypes.number.isRequired,height:E.default.PropTypes.number.isRequired},a);t.default=R},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=n(123),s=i(o);/**
	 * @license
	 * pixi.js - v1.4.3
	 * Copyright (c) 2012, Mat Groves
	 * http://goodboydigital.com/
	 *
	 * Compiled: 2014-01-21
	 *
	 * pixi.js is licensed under the MIT License.
	 * http://www.opensource.org/licenses/mit-license.php
	 */
(function(){function n(){return i.Matrix="undefined"!=typeof Float32Array?Float32Array:Array,i.Matrix}var i=i||{};i.WEBGL_RENDERER=0,i.CANVAS_RENDERER=1,i.Point=function(e,t){this.x=e||0,this.y=t||0},i.Point.prototype.clone=function(){return new i.Point(this.x,this.y)},i.Point.prototype.constructor=i.Point,i.Point.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)},i.Rectangle=function(e,t,n,r){this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0},i.Rectangle.prototype.clone=function(){return new i.Rectangle(this.x,this.y,this.width,this.height)},i.Rectangle.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=this.x;if(e>=n&&e<=n+this.width){var r=this.y;if(t>=r&&t<=r+this.height)return!0}return!1},i.Rectangle.prototype.constructor=i.Rectangle,i.Polygon=function(e){if(e instanceof Array||(e=Array.prototype.slice.call(arguments)),"number"==typeof e[0]){for(var t=[],n=0,r=e.length;r>n;n+=2)t.push(new i.Point(e[n],e[n+1]));e=t}this.points=e},i.Polygon.prototype.clone=function(){for(var e=[],t=0;t<this.points.length;t++)e.push(this.points[t].clone());return new i.Polygon(e)},i.Polygon.prototype.contains=function(e,t){for(var n=!1,r=0,i=this.points.length-1;r<this.points.length;i=r++){var o=this.points[r].x,a=this.points[r].y,s=this.points[i].x,l=this.points[i].y,u=a>t!=l>t&&(s-o)*(t-a)/(l-a)+o>e;u&&(n=!n)}return n},i.Polygon.prototype.constructor=i.Polygon,i.Circle=function(e,t,n){this.x=e||0,this.y=t||0,this.radius=n||0},i.Circle.prototype.clone=function(){return new i.Circle(this.x,this.y,this.radius)},i.Circle.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.x-e,r=this.y-t,i=this.radius*this.radius;return n*=n,r*=r,i>=n+r},i.Circle.prototype.constructor=i.Circle,i.Ellipse=function(e,t,n,r){this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0},i.Ellipse.prototype.clone=function(){return new i.Ellipse(this.x,this.y,this.width,this.height)},i.Ellipse.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width-.5,r=(t-this.y)/this.height-.5;return n*=n,r*=r,.25>n+r},i.Ellipse.prototype.getBounds=function(){return new i.Rectangle(this.x,this.y,this.width,this.height)},i.Ellipse.prototype.constructor=i.Ellipse,n(),i.mat3={},i.mat3.create=function(){var e=new i.Matrix(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.mat3.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.mat4={},i.mat4.create=function(){var e=new i.Matrix(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.mat3.multiply=function(e,t,n){n||(n=e);var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=t[0],p=t[1],f=t[2],m=t[3],v=t[4],g=t[5],E=t[6],y=t[7],x=t[8];return n[0]=d*r+p*a+f*u,n[1]=d*i+p*s+f*c,n[2]=d*o+p*l+f*h,n[3]=m*r+v*a+g*u,n[4]=m*i+v*s+g*c,n[5]=m*o+v*l+g*h,n[6]=E*r+y*a+x*u,n[7]=E*i+y*s+x*c,n[8]=E*o+y*l+x*h,n},i.mat3.clone=function(e){var t=new i.Matrix(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.mat3.transpose=function(e,t){if(!t||e===t){var n=e[1],r=e[2],i=e[5];return e[1]=e[3],e[2]=e[6],e[3]=n,e[5]=e[7],e[6]=r,e[7]=i,e}return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t},i.mat3.toMat4=function(e,t){return t||(t=i.mat4.create()),t[15]=1,t[14]=0,t[13]=0,t[12]=0,t[11]=0,t[10]=e[8],t[9]=e[7],t[8]=e[6],t[7]=0,t[6]=e[5],t[5]=e[4],t[4]=e[3],t[3]=0,t[2]=e[2],t[1]=e[1],t[0]=e[0],t},i.mat4.create=function(){var e=new i.Matrix(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.mat4.transpose=function(e,t){if(!t||e===t){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];return e[1]=e[4],e[2]=e[8],e[3]=e[12],e[4]=n,e[6]=e[9],e[7]=e[13],e[8]=r,e[9]=o,e[11]=e[14],e[12]=i,e[13]=a,e[14]=s,e}return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t},i.mat4.multiply=function(e,t,n){n||(n=e);var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],v=e[13],g=e[14],E=e[15],y=t[0],x=t[1],T=t[2],b=t[3];return n[0]=y*r+x*s+T*h+b*m,n[1]=y*i+x*l+T*d+b*v,n[2]=y*o+x*u+T*p+b*g,n[3]=y*a+x*c+T*f+b*E,y=t[4],x=t[5],T=t[6],b=t[7],n[4]=y*r+x*s+T*h+b*m,n[5]=y*i+x*l+T*d+b*v,n[6]=y*o+x*u+T*p+b*g,n[7]=y*a+x*c+T*f+b*E,y=t[8],x=t[9],T=t[10],b=t[11],n[8]=y*r+x*s+T*h+b*m,n[9]=y*i+x*l+T*d+b*v,n[10]=y*o+x*u+T*p+b*g,n[11]=y*a+x*c+T*f+b*E,y=t[12],x=t[13],T=t[14],b=t[15],n[12]=y*r+x*s+T*h+b*m,n[13]=y*i+x*l+T*d+b*v,n[14]=y*o+x*u+T*p+b*g,n[15]=y*a+x*c+T*f+b*E,n},i.identityMatrix=i.mat3.create(),i.DisplayObject=function(){this.last=this,this.first=this,this.position=new i.Point,this.scale=new i.Point(1,1),this.pivot=new i.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=i.mat3.create(),this.localTransform=i.mat3.create(),this.color=[],this.dynamic=!0,this._sr=0,this._cr=1,this.filterArea=new i.Rectangle(0,0,1,1),this._bounds=new i.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null},i.DisplayObject.prototype.constructor=i.DisplayObject,i.DisplayObject.prototype.setInteractive=function(e){this.interactive=e},Object.defineProperty(i.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(e){this._interactive=e,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(i.DisplayObject.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}}),Object.defineProperty(i.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(e){this._mask&&(this._mask.isMask=!1),this._mask=e,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(i.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(e){if(e){for(var t=[],n=0;n<e.length;n++)for(var r=e[n].passes,i=0;i<r.length;i++)t.push(r[i]);this._filterBlock={target:this,filterPasses:t}}this._filters=e}}),i.DisplayObject.prototype.updateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var e=this.localTransform,t=this.parent.worldTransform,n=this.worldTransform;e[0]=this._cr*this.scale.x,e[1]=-this._sr*this.scale.y,e[3]=this._sr*this.scale.x,e[4]=this._cr*this.scale.y;var r=this.pivot.x,i=this.pivot.y,o=e[0],a=e[1],s=this.position.x-e[0]*r-i*e[1],l=e[3],u=e[4],c=this.position.y-e[4]*i-r*e[3],h=t[0],d=t[1],p=t[2],f=t[3],m=t[4],v=t[5];e[2]=s,e[5]=c,n[0]=h*o+d*l,n[1]=h*a+d*u,n[2]=h*s+d*c+p,n[3]=f*o+m*l,n[4]=f*a+m*u,n[5]=f*s+m*c+v,this.worldAlpha=this.alpha*this.parent.worldAlpha},i.DisplayObject.prototype.getBounds=function(){return i.EmptyRectangle},i.DisplayObject.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=i.identityMatrix,this.updateTransform();var t=this.getBounds();return this.worldTransform=e,t},i.DisplayObject.prototype.setStageReference=function(e){this.stage=e,this._interactive&&(this.stage.dirty=!0)},i.DisplayObject.prototype._renderWebGL=function(e){e=e},i.DisplayObject.prototype._renderCanvas=function(e){e=e},i.EmptyRectangle=new i.Rectangle(0,0,0,0),i.DisplayObjectContainer=function(){i.DisplayObject.call(this),this.children=[]},i.DisplayObjectContainer.prototype=(0,s.default)(i.DisplayObject.prototype),i.DisplayObjectContainer.prototype.constructor=i.DisplayObjectContainer,i.DisplayObjectContainer.prototype.addChild=function(e){e.parent&&e!==this&&e.parent.removeChild(e),e.parent=this,this.children.push(e),this.stage&&e.setStageReference(this.stage)},i.DisplayObjectContainer.prototype.addChildAt=function(e,t){if(!(t>=0&&t<=this.children.length))throw new Error(e+" The index "+t+" supplied is out of bounds "+this.children.length);e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),this.stage&&e.setStageReference(this.stage)},i.DisplayObjectContainer.prototype.swapChildren=function(e,t){if(e!==t){var n=this.children.indexOf(e),r=this.children.indexOf(t);if(0>n||0>r)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[n]=t,this.children[r]=e}},i.DisplayObjectContainer.prototype.getChildAt=function(e){if(e>=0&&e<this.children.length)return this.children[e];throw new Error("The supplied DisplayObjects must be a child of the caller "+this)},i.DisplayObjectContainer.prototype.removeChild=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error(e+" The supplied DisplayObject must be a child of the caller "+this);this.stage&&e.removeStageReference(),e.parent=void 0,this.children.splice(t,1)},i.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible){i.DisplayObject.prototype.updateTransform.call(this);for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform()}},i.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return i.EmptyRectangle;for(var e,t,n,r=1/0,o=1/0,a=-1/0,s=-1/0,l=0,u=this.children.length;u>l;l++){var c=this.children[l];c.visible&&(e=this.children[l].getBounds(),r=r<e.x?r:e.x,o=o<e.y?o:e.y,t=e.width+e.x,n=e.height+e.y,a=a>t?a:t,s=s>n?s:n)}var h=this._bounds;return h.x=r,h.y=o,h.width=a-r,h.height=s-o,h},i.DisplayObjectContainer.prototype.setStageReference=function(e){this.stage=e,this._interactive&&(this.stage.dirty=!0);for(var t=0,n=this.children.length;n>t;t++){var r=this.children[t];r.setStageReference(e)}},i.DisplayObjectContainer.prototype.removeStageReference=function(){for(var e=0,t=this.children.length;t>e;e++){var n=this.children[e];n.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},i.DisplayObjectContainer.prototype._renderWebGL=function(e){if(this.visible!==!1&&0!==this.alpha){var t,n;if(this._mask||this._filters){for(this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),t=0,n=this.children.length;n>t;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(e),e.spriteBatch.start()}else for(t=0,n=this.children.length;n>t;t++)this.children[t]._renderWebGL(e)}},i.DisplayObjectContainer.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha){this._mask&&e.maskManager.pushMask(this._mask,e.context);for(var t=0,n=this.children.length;n>t;t++){var r=this.children[t];r._renderCanvas(e)}this._mask&&e.maskManager.popMask(e.context)}},i.blendModes={},i.blendModes.NORMAL=0,i.blendModes.ADD=1,i.blendModes.MULTIPLY=2,i.blendModes.SCREEN=3,i.blendModes.OVERLAY=4,i.blendModes.DARKEN=5,i.blendModes.LIGHTEN=6,i.blendModes.COLOR_DODGE=7,i.blendModes.COLOR_BURN=8,i.blendModes.HARD_LIGHT=9,i.blendModes.SOFT_LIGHT=10,i.blendModes.DIFFERENCE=11,i.blendModes.EXCLUSION=12,i.blendModes.HUE=13,i.blendModes.SATURATION=14,i.blendModes.COLOR=15,i.blendModes.LUMINOSITY=16,i.Sprite=function(e){i.DisplayObjectContainer.call(this),this.anchor=new i.Point,this.texture=e,this._width=0,this._height=0,this.tint=16777215,this.blendMode=i.blendModes.NORMAL,e.baseTexture.hasLoaded?this.onTextureUpdate():(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind)),this.renderable=!0},i.Sprite.prototype=(0,s.default)(i.DisplayObjectContainer.prototype),i.Sprite.prototype.constructor=i.Sprite,Object.defineProperty(i.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(i.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),i.Sprite.prototype.setTexture=function(e){this.texture.baseTexture!==e.baseTexture?(this.textureChange=!0,this.texture=e):this.texture=e,this.cachedTint=16777215,this.updateFrame=!0},i.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height),this.updateFrame=!0},i.Sprite.prototype.getBounds=function(){var e=this.texture.frame.width,t=this.texture.frame.height,n=e*(1-this.anchor.x),r=e*-this.anchor.x,i=t*(1-this.anchor.y),o=t*-this.anchor.y,a=this.worldTransform,s=a[0],l=a[3],u=a[1],c=a[4],h=a[2],d=a[5],p=s*r+u*o+h,f=c*o+l*r+d,m=s*n+u*o+h,v=c*o+l*n+d,g=s*n+u*i+h,E=c*i+l*n+d,y=s*r+u*i+h,x=c*i+l*r+d,T=-1/0,b=-1/0,w=1/0,_=1/0;w=w>p?p:w,w=w>m?m:w,w=w>g?g:w,w=w>y?y:w,_=_>f?f:_,_=_>v?v:_,_=_>E?E:_,_=_>x?x:_,T=p>T?p:T,T=m>T?m:T,T=g>T?g:T,T=y>T?y:T,b=f>b?f:b,b=v>b?v:b,b=E>b?E:b,b=x>b?x:b;var R=this._bounds;return R.x=w,R.width=T-w,R.y=_,R.height=b-_,this._currentBounds=R,R},i.Sprite.prototype._renderWebGL=function(e){if(this.visible!==!1&&0!==this.alpha){var t,n;if(this._mask||this._filters){var r=e.spriteBatch;for(this._mask&&(r.stop(),e.maskManager.pushMask(this.mask,e),r.start()),this._filters&&(r.flush(),e.filterManager.pushFilter(this._filterBlock)),r.render(this),t=0,n=this.children.length;n>t;t++)this.children[t]._renderWebGL(e);r.stop(),this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(e),r.start()}else for(e.spriteBatch.render(this),t=0,n=this.children.length;n>t;t++)this.children[t]._renderWebGL(e)}},i.Sprite.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha){this._mask&&e.maskManager.pushMask(this._mask,e.context);var t=this.texture.frame,n=e.context,r=this.texture;if(t&&t.width&&t.height&&r.baseTexture.source){n.globalAlpha=this.worldAlpha;var o=this.worldTransform;if(n.setTransform(o[0],o[3],o[1],o[4],o[2],o[5]),this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,n.globalCompositeOperation=i.blendModesCanvas[e.currentBlendMode]),16777215!==this.tint){if(this.cachedTint!==this.tint){if(!r.baseTexture.hasLoaded)return;this.cachedTint=this.tint,this.tintedTexture=i.CanvasTinter.getTintedTexture(this,this.tint)}n.drawImage(this.tintedTexture,0,0,t.width,t.height,this.anchor.x*-t.width,this.anchor.y*-t.height,t.width,t.height)}else if(r.trimmed){var a=r.trim;n.drawImage(this.texture.baseTexture.source,t.x,t.y,t.width,t.height,a.x-this.anchor.x*a.realWidth,a.y-this.anchor.y*a.realHeight,t.width,t.height)}else n.drawImage(this.texture.baseTexture.source,t.x,t.y,t.width,t.height,this.anchor.x*-t.width,this.anchor.y*-t.height,t.width,t.height)}for(var s=0,l=this.children.length;l>s;s++){var u=this.children[s];u._renderCanvas(e)}this._mask&&e.maskManager.popMask(e.context)}},i.Sprite.fromFrame=function(e){var t=i.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache'+this);return new i.Sprite(t)},i.Sprite.fromImage=function(e){var t=i.Texture.fromImage(e);return new i.Sprite(t)},i.SpriteBatch=function(e){i.DisplayObjectContainer.call(this),this.textureThing=e,this.ready=!1},i.SpriteBatch.prototype=(0,s.default)(i.DisplayObjectContainer.prototype),i.SpriteBatch.constructor=i.SpriteBatch,i.SpriteBatch.prototype.initWebGL=function(e){this.fastSpriteBatch=new i.WebGLFastSpriteBatch(e),this.ready=!0},i.SpriteBatch.prototype.updateTransform=function(){i.DisplayObject.prototype.updateTransform.call(this)},i.SpriteBatch.prototype._renderWebGL=function(e){this.visible&&(this.ready||this.initWebGL(e.gl),e.spriteBatch.stop(),e.shaderManager.activateShader(e.shaderManager.fastShader),this.fastSpriteBatch.begin(this,e),this.fastSpriteBatch.render(this),e.shaderManager.activateShader(e.shaderManager.defaultShader),e.spriteBatch.start())},i.SpriteBatch.prototype._renderCanvas=function(e){var t=e.context;t.globalAlpha=this.worldAlpha;var n=this.worldTransform;t.setTransform(n[0],n[3],n[1],n[4],n[2],n[5]),t.save();for(var r=0;r<this.children.length;r++){var o=this.children[r],a=o.texture,s=a.frame;o.rotation%(2*Math.PI)===0?t.drawImage(a.baseTexture.source,s.x,s.y,s.width,s.height,o.anchor.x*-s.width*o.scale.x+o.position.x+.5|0,o.anchor.y*-s.height*o.scale.y+o.position.y+.5|0,s.width*o.scale.x,s.height*o.scale.y):(i.DisplayObject.prototype.updateTransform.call(o),n=o.localTransform,t.setTransform(n[0],n[3],n[1],n[4],n[2],n[5]),t.drawImage(a.baseTexture.source,s.x,s.y,s.width,s.height,o.anchor.x*-s.width+.5|0,o.anchor.y*-s.height+.5|0,s.width,s.height))}t.restore()},i.MovieClip=function(e){i.Sprite.call(this,e[0]),this.textures=e,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},i.MovieClip.prototype=(0,s.default)(i.Sprite.prototype),i.MovieClip.prototype.constructor=i.MovieClip,Object.defineProperty(i.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),i.MovieClip.prototype.stop=function(){this.playing=!1},i.MovieClip.prototype.play=function(){this.playing=!0},i.MovieClip.prototype.gotoAndStop=function(e){this.playing=!1,this.currentFrame=e;var t=this.currentFrame+.5|0;this.setTexture(this.textures[t%this.textures.length])},i.MovieClip.prototype.gotoAndPlay=function(e){this.currentFrame=e,this.playing=!0},i.MovieClip.prototype.updateTransform=function(){if(i.Sprite.prototype.updateTransform.call(this),this.playing){this.currentFrame+=this.animationSpeed;var e=this.currentFrame+.5|0;this.loop||e<this.textures.length?this.setTexture(this.textures[e%this.textures.length]):e>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},i.FilterBlock=function(){this.visible=!0,this.renderable=!0},i.Text=function(e,t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),i.Sprite.call(this,i.Texture.fromCanvas(this.canvas)),this.setText(e),this.setStyle(t),this.updateText(),this.dirty=!1},i.Text.prototype=(0,s.default)(i.Sprite.prototype),i.Text.prototype.constructor=i.Text,i.Text.prototype.setStyle=function(e){e=e||{},e.font=e.font||"bold 20pt Arial",e.fill=e.fill||"black",e.align=e.align||"left",e.stroke=e.stroke||"black",e.strokeThickness=e.strokeThickness||0,e.wordWrap=e.wordWrap||!1,e.wordWrapWidth=e.wordWrapWidth||100,this.style=e,this.dirty=!0},i.Text.prototype.setText=function(e){this.text=e.toString()||" ",this.dirty=!0},i.Text.prototype.updateText=function(){this.context.font=this.style.font;var e=this.text;this.style.wordWrap&&(e=this.wordWrap(this.text));for(var t=e.split(/(?:\r\n|\r|\n)/),n=[],r=0,o=0;o<t.length;o++){var a=this.context.measureText(t[o]).width;n[o]=a,r=Math.max(r,a)}this.canvas.width=r+this.style.strokeThickness;var s=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness;for(this.canvas.height=s*t.length,navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle=this.style.fill,this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="top",o=0;o<t.length;o++){var l=new i.Point(this.style.strokeThickness/2,this.style.strokeThickness/2+o*s);"right"===this.style.align?l.x+=r-n[o]:"center"===this.style.align&&(l.x+=(r-n[o])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(t[o],l.x,l.y),this.style.fill&&this.context.fillText(t[o],l.x,l.y)}this.updateTexture()},i.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.frame.width=this.canvas.width,this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.requiresUpdate=!0},i.Text.prototype._renderWebGL=function(e){this.requiresUpdate&&(this.requiresUpdate=!1,i.updateWebGLTexture(this.texture.baseTexture,e.gl)),i.Sprite.prototype._renderWebGL.call(this,e)},i.Text.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),i.Sprite.prototype.updateTransform.call(this)},i.Text.prototype.determineFontHeight=function(e){var t=i.Text.heightCache[e];if(!t){var n=document.getElementsByTagName("body")[0],r=document.createElement("div"),o=document.createTextNode("M");r.appendChild(o),r.setAttribute("style",e+";position:absolute;top:0;left:0"),n.appendChild(r),t=r.offsetHeight,i.Text.heightCache[e]=t,n.removeChild(r)}return t},i.Text.prototype.wordWrap=function(e){for(var t="",n=e.split("\n"),r=0;r<n.length;r++){for(var i=this.style.wordWrapWidth,o=n[r].split(" "),a=0;a<o.length;a++){var s=this.context.measureText(o[a]).width,l=s+this.context.measureText(" ").width;l>i?(a>0&&(t+="\n"),t+=o[a]+" ",i=this.style.wordWrapWidth-s):(i-=l,t+=o[a]+" ")}t+="\n"}return t},i.Text.prototype.destroy=function(e){e&&this.texture.destroy()},i.Text.heightCache={},i.BitmapText=function(e,t){i.DisplayObjectContainer.call(this),this.setText(e),this.setStyle(t),this.updateText(),this.dirty=!1},i.BitmapText.prototype=(0,s.default)(i.DisplayObjectContainer.prototype),i.BitmapText.prototype.constructor=i.BitmapText,i.BitmapText.prototype.setText=function(e){this.text=e||" ",this.dirty=!0},i.BitmapText.prototype.setStyle=function(e){e=e||{},e.align=e.align||"left",this.style=e;var t=e.font.split(" ");this.fontName=t[t.length-1],this.fontSize=t.length>=2?parseInt(t[t.length-2],10):i.BitmapText.fonts[this.fontName].size,this.dirty=!0},i.BitmapText.prototype.updateText=function(){for(var e=i.BitmapText.fonts[this.fontName],t=new i.Point,n=null,r=[],o=0,a=[],s=0,l=this.fontSize/e.size,u=0;u<this.text.length;u++){var c=this.text.charCodeAt(u);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(u)))a.push(t.x),o=Math.max(o,t.x),s++,t.x=0,t.y+=e.lineHeight,n=null;else{var h=e.chars[c];h&&(n&&h[n]&&(t.x+=h.kerning[n]),r.push({texture:h.texture,line:s,charCode:c,position:new i.Point(t.x+h.xOffset,t.y+h.yOffset)}),t.x+=h.xAdvance,n=c)}}a.push(t.x),o=Math.max(o,t.x);var d=[];for(u=0;s>=u;u++){var p=0;"right"===this.style.align?p=o-a[u]:"center"===this.style.align&&(p=(o-a[u])/2),d.push(p)}for(u=0;u<r.length;u++){var f=new i.Sprite(r[u].texture);f.position.x=(r[u].position.x+d[r[u].line])*l,f.position.y=r[u].position.y*l,f.scale.x=f.scale.y=l,this.addChild(f)}this.width=o*l,this.height=(t.y+e.lineHeight)*l},i.BitmapText.prototype.updateTransform=function(){if(this.dirty){for(;this.children.length>0;)this.removeChild(this.getChildAt(0));this.updateText(),this.dirty=!1}i.DisplayObjectContainer.prototype.updateTransform.call(this)},i.BitmapText.fonts={},i.InteractionManager=function(e){this.stage=e,this.mouse=new i.InteractionData,this.touchs={},this.tempPoint=new i.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0},i.InteractionManager.prototype.constructor=i.InteractionManager,i.InteractionManager.prototype.collectInteractiveSprite=function(e,t){for(var n=e.children,r=n.length,i=r-1;i>=0;i--){var o=n[i];o.interactive?(t.interactiveChildren=!0,this.interactiveItems.push(o),o.children.length>0&&this.collectInteractiveSprite(o,o)):(o.__iParent=null,o.children.length>0&&this.collectInteractiveSprite(o,t))}},i.InteractionManager.prototype.setTarget=function(e){this.target=e,null===this.interactionDOMElement&&this.setTargetDomElement(e.view),document.body.addEventListener("mouseup",this.onMouseUp,!0)},i.InteractionManager.prototype.setTargetDomElement=function(e){null!==this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0)),window.navigator.msPointerEnabled&&(e.style["-ms-content-zooming"]="none",e.style["-ms-touch-action"]="none"),this.interactionDOMElement=e,e.addEventListener("mousemove",this.onMouseMove,!0),e.addEventListener("mousedown",this.onMouseDown,!0),e.addEventListener("mouseout",this.onMouseOut,!0),e.addEventListener("touchstart",this.onTouchStart,!0),e.addEventListener("touchend",this.onTouchEnd,!0),e.addEventListener("touchmove",this.onTouchMove,!0)},i.InteractionManager.prototype.update=function(){if(this.target){var e=Date.now(),t=e-this.last;if(t=30*t/1e3,!(1>t)){this.last=e;var n=0;if(this.dirty){this.dirty=!1;var r=this.interactiveItems.length;for(n=0;r>n;n++)this.interactiveItems[n].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)}var i=this.interactiveItems.length;for(this.interactionDOMElement.style.cursor="inherit",n=0;i>n;n++){var o=this.interactiveItems[n];(o.mouseover||o.mouseout||o.buttonMode)&&(o.__hit=this.hitTest(o,this.mouse),this.mouse.target=o,o.__hit?(o.buttonMode&&(this.interactionDOMElement.style.cursor=o.defaultCursor),o.__isOver||(o.mouseover&&o.mouseover(this.mouse),o.__isOver=!0)):o.__isOver&&(o.mouseout&&o.mouseout(this.mouse),o.__isOver=!1))}}}},i.InteractionManager.prototype.onMouseMove=function(e){this.mouse.originalEvent=e||window.event;var t=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(e.clientX-t.left)*(this.target.width/t.width),this.mouse.global.y=(e.clientY-t.top)*(this.target.height/t.height);for(var n=this.interactiveItems.length,r=0;n>r;r++){var i=this.interactiveItems[r];i.mousemove&&i.mousemove(this.mouse)}},i.InteractionManager.prototype.onMouseDown=function(e){this.mouse.originalEvent=e||window.event;for(var t=this.interactiveItems.length,n=0;t>n;n++){var r=this.interactiveItems[n];if((r.mousedown||r.click)&&(r.__mouseIsDown=!0,r.__hit=this.hitTest(r,this.mouse),r.__hit&&(r.mousedown&&r.mousedown(this.mouse),r.__isDown=!0,!r.interactiveChildren)))break}},i.InteractionManager.prototype.onMouseOut=function(){var e=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var t=0;e>t;t++){var n=this.interactiveItems[t];n.__isOver&&(this.mouse.target=n,n.mouseout&&n.mouseout(this.mouse),n.__isOver=!1)}},i.InteractionManager.prototype.onMouseUp=function(e){this.mouse.originalEvent=e||window.event;for(var t=this.interactiveItems.length,n=!1,r=0;t>r;r++){var i=this.interactiveItems[r];(i.mouseup||i.mouseupoutside||i.click)&&(i.__hit=this.hitTest(i,this.mouse),i.__hit&&!n?(i.mouseup&&i.mouseup(this.mouse),i.__isDown&&i.click&&i.click(this.mouse),i.interactiveChildren||(n=!0)):i.__isDown&&i.mouseupoutside&&i.mouseupoutside(this.mouse),i.__isDown=!1)}},i.InteractionManager.prototype.hitTest=function(e,t){var n=t.global;if(!e.worldVisible)return!1;var r=e instanceof i.Sprite,o=e.worldTransform,a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],h=o[5],d=1/(a*c+s*-u),p=c*d*n.x+-s*d*n.y+(h*s-l*c)*d,f=a*d*n.y+-u*d*n.x+(-h*a+l*u)*d;if(t.target=e,e.hitArea&&e.hitArea.contains)return!!e.hitArea.contains(p,f)&&(t.target=e,!0);if(r){var m,v=e.texture.frame.width,g=e.texture.frame.height,E=-v*e.anchor.x;if(p>E&&E+v>p&&(m=-g*e.anchor.y,f>m&&m+g>f))return t.target=e,!0}for(var y=e.children.length,x=0;y>x;x++){var T=e.children[x],b=this.hitTest(T,t);if(b)return t.target=e,!0}return!1},i.InteractionManager.prototype.onTouchMove=function(e){var t,n=this.interactionDOMElement.getBoundingClientRect(),r=e.changedTouches,i=0;for(i=0;i<r.length;i++){var o=r[i];t=this.touchs[o.identifier],t.originalEvent=e||window.event,t.global.x=(o.clientX-n.left)*(this.target.width/n.width),t.global.y=(o.clientY-n.top)*(this.target.height/n.height),navigator.isCocoonJS&&(t.global.x=o.clientX,t.global.y=o.clientY)}var a=this.interactiveItems.length;for(i=0;a>i;i++){var s=this.interactiveItems[i];s.touchmove&&s.touchmove(t)}},i.InteractionManager.prototype.onTouchStart=function(e){for(var t=this.interactionDOMElement.getBoundingClientRect(),n=e.changedTouches,r=0;r<n.length;r++){var o=n[r],a=this.pool.pop();a||(a=new i.InteractionData),a.originalEvent=e||window.event,this.touchs[o.identifier]=a,a.global.x=(o.clientX-t.left)*(this.target.width/t.width),a.global.y=(o.clientY-t.top)*(this.target.height/t.height),navigator.isCocoonJS&&(a.global.x=o.clientX,a.global.y=o.clientY);for(var s=this.interactiveItems.length,l=0;s>l;l++){var u=this.interactiveItems[l];if((u.touchstart||u.tap)&&(u.__hit=this.hitTest(u,a),u.__hit&&(u.touchstart&&u.touchstart(a),u.__isDown=!0,u.__touchData=a,!u.interactiveChildren)))break}}},i.InteractionManager.prototype.onTouchEnd=function(e){for(var t=this.interactionDOMElement.getBoundingClientRect(),n=e.changedTouches,r=0;r<n.length;r++){var i=n[r],o=this.touchs[i.identifier],a=!1;o.global.x=(i.clientX-t.left)*(this.target.width/t.width),o.global.y=(i.clientY-t.top)*(this.target.height/t.height),navigator.isCocoonJS&&(o.global.x=i.clientX,o.global.y=i.clientY);for(var s=this.interactiveItems.length,l=0;s>l;l++){var u=this.interactiveItems[l],c=u.__touchData;u.__hit=this.hitTest(u,o),c===o&&(o.originalEvent=e||window.event,(u.touchend||u.tap)&&(u.__hit&&!a?(u.touchend&&u.touchend(o),u.__isDown&&u.tap&&u.tap(o),u.interactiveChildren||(a=!0)):u.__isDown&&u.touchendoutside&&u.touchendoutside(o),u.__isDown=!1),u.__touchData=null)}this.pool.push(o),this.touchs[i.identifier]=null}},i.InteractionData=function(){this.global=new i.Point,this.local=new i.Point,this.target=null,this.originalEvent=null},i.InteractionData.prototype.getLocalPosition=function(e){var t=e.worldTransform,n=this.global,r=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=1/(r*l+o*-s);return new i.Point(l*c*n.x+-o*c*n.y+(u*o-a*l)*c,r*c*n.y+-s*c*n.x+(-u*r+a*s)*c)},i.InteractionData.prototype.constructor=i.InteractionData,i.Stage=function(e){i.DisplayObjectContainer.call(this),this.worldTransform=i.mat3.create(),this.interactive=!0,this.interactionManager=new i.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new i.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(e)},i.Stage.prototype=(0,s.default)(i.DisplayObjectContainer.prototype),i.Stage.prototype.constructor=i.Stage,i.Stage.prototype.setInteractionDelegate=function(e){this.interactionManager.setTargetDomElement(e)},i.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},i.Stage.prototype.setBackgroundColor=function(e){this.backgroundColor=e||0,this.backgroundColorSplit=i.hex2rgb(this.backgroundColor);var t=this.backgroundColor.toString(16);t="000000".substr(0,6-t.length)+t,this.backgroundColorString="#"+t},i.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global};for(var o=0,l=["ms","moz","webkit","o"],u=0;u<l.length&&!window.requestAnimationFrame;++u)window.requestAnimationFrame=window[l[u]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[l[u]+"CancelAnimationFrame"]||window[l[u]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-o)),r=window.setTimeout(function(){e(t+n)},n);return o=t+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){
clearTimeout(e)}),window.requestAnimFrame=window.requestAnimationFrame,i.hex2rgb=function(e){return[(e>>16&255)/255,(e>>8&255)/255,(255&e)/255]},i.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){var e=Array.prototype.slice;return function(t){function n(){var o=i.concat(e.call(arguments));r.apply(this instanceof n?this:t,o)}var r=this,i=e.call(arguments,1);if("function"!=typeof r)throw new TypeError;return n.prototype=function e(t){return t&&(e.prototype=t),this instanceof e?void 0:new e}(r.prototype),n}}()),i.AjaxRequest=function(){var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return!!window.XMLHttpRequest&&new window.XMLHttpRequest;for(var t=0;t<e.length;t++)try{return new window.ActiveXObject(e[t])}catch(e){}},i.canUseNewCanvasBlendModes=function(){var e=document.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="#000",t.fillRect(0,0,1,1),t.globalCompositeOperation="multiply",t.fillStyle="#fff",t.fillRect(0,0,1,1),0===t.getImageData(0,0,1,1).data[0]},i.getNextPowerOfTwo=function(e){if(e>0&&0===(e&e-1))return e;for(var t=1;e>t;)t<<=1;return t},i.EventTarget=function(){var e={};this.addEventListener=this.on=function(t,n){void 0===e[t]&&(e[t]=[]),-1===e[t].indexOf(n)&&e[t].push(n)},this.dispatchEvent=this.emit=function(t){if(e[t.type]&&e[t.type].length)for(var n=0,r=e[t.type].length;r>n;n++)e[t.type][n](t)},this.removeEventListener=this.off=function(t,n){var r=e[t].indexOf(n);-1!==r&&e[t].splice(r,1)},this.removeAllEventListeners=function(t){var n=e[t];n&&(n.length=0)}},i.autoDetectRenderer=function(e,t,n,r,o){e||(e=800),t||(t=600);var a=function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}();return a?new i.WebGLRenderer(e,t,n,r,o):new i.CanvasRenderer(e,t,n,r)},i.PolyK={},i.PolyK.Triangulate=function(e){var t=!0,n=e.length>>1;if(3>n)return[];for(var r=[],o=[],a=0;n>a;a++)o.push(a);a=0;for(var s=n;s>3;){var l=o[(a+0)%s],u=o[(a+1)%s],c=o[(a+2)%s],h=e[2*l],d=e[2*l+1],p=e[2*u],f=e[2*u+1],m=e[2*c],v=e[2*c+1],g=!1;if(i.PolyK._convex(h,d,p,f,m,v,t)){g=!0;for(var E=0;s>E;E++){var y=o[E];if(y!==l&&y!==u&&y!==c&&i.PolyK._PointInTriangle(e[2*y],e[2*y+1],h,d,p,f,m,v)){g=!1;break}}}if(g)r.push(l,u,c),o.splice((a+1)%s,1),s--,a=0;else if(a++>3*s){if(!t)return window.console.log("PIXI Warning: shape too complex to fill"),[];for(r=[],o=[],a=0;n>a;a++)o.push(a);a=0,s=n,t=!1}}return r.push(o[0],o[1],o[2]),r},i.PolyK._PointInTriangle=function(e,t,n,r,i,o,a,s){var l=a-n,u=s-r,c=i-n,h=o-r,d=e-n,p=t-r,f=l*l+u*u,m=l*c+u*h,v=l*d+u*p,g=c*c+h*h,E=c*d+h*p,y=1/(f*g-m*m),x=(g*v-m*E)*y,T=(f*E-m*v)*y;return x>=0&&T>=0&&1>x+T},i.PolyK._convex=function(e,t,n,r,i,o,a){return(t-r)*(i-n)+(n-e)*(o-r)>=0===a},i.initDefaultShaders=function(){},i.CompileVertexShader=function(e,t){return i._CompileShader(e,t,e.VERTEX_SHADER)},i.CompileFragmentShader=function(e,t){return i._CompileShader(e,t,e.FRAGMENT_SHADER)},i._CompileShader=function(e,t,n){var r=t.join("\n"),i=e.createShader(n);return e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(window.console.log(e.getShaderInfoLog(i)),null)},i.compileProgram=function(e,t,n){var r=i.CompileFragmentShader(e,n),o=i.CompileVertexShader(e,t),a=e.createProgram();return e.attachShader(a,o),e.attachShader(a,r),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||window.console.log("Could not initialise shaders"),a},i.PixiShader=function(e){this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.attributes=[],this.init()},i.PixiShader.prototype.init=function(){var e=this.gl,t=i.compileProgram(e,this.vertexSrc||i.PixiShader.defaultVertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var n in this.uniforms)this.uniforms[n].uniformLocation=e.getUniformLocation(t,n);this.initUniforms(),this.program=t},i.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var n in this.uniforms){e=this.uniforms[n];var r=e.type;"sampler2D"===r?(e._init=!1,null!==e.value&&this.initSampler2D(e)):"mat2"===r||"mat3"===r||"mat4"===r?(e.glMatrix=!0,e.glValueLength=1,"mat2"===r?e.glFunc=t.uniformMatrix2fv:"mat3"===r?e.glFunc=t.uniformMatrix3fv:"mat4"===r&&(e.glFunc=t.uniformMatrix4fv)):(e.glFunc=t["uniform"+r],e.glValueLength="2f"===r||"2i"===r?2:"3f"===r||"3i"===r?3:"4f"===r||"4i"===r?4:1)}},i.PixiShader.prototype.initSampler2D=function(e){if(e.value&&e.value.baseTexture&&e.value.baseTexture.hasLoaded){var t=this.gl;if(t.activeTexture(t["TEXTURE"+this.textureCount]),t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTexture),e.textureData){var n=e.textureData,r=n.magFilter?n.magFilter:t.LINEAR,i=n.minFilter?n.minFilter:t.LINEAR,o=n.wrapS?n.wrapS:t.CLAMP_TO_EDGE,a=n.wrapT?n.wrapT:t.CLAMP_TO_EDGE,s=n.luminance?t.LUMINANCE:t.RGBA;if(n.repeat&&(o=t.REPEAT,a=t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),n.width){var l=n.width?n.width:512,u=n.height?n.height:2,c=n.border?n.border:0;t.texImage2D(t.TEXTURE_2D,0,s,l,u,c,s,t.UNSIGNED_BYTE,null)}else t.texImage2D(t.TEXTURE_2D,0,s,t.RGBA,t.UNSIGNED_BYTE,e.value.baseTexture.source);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,a)}t.uniform1i(e.uniformLocation,this.textureCount),e._init=!0,this.textureCount++}},i.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var n in this.uniforms)e=this.uniforms[n],1===e.glValueLength?e.glMatrix===!0?e.glFunc.call(t,e.uniformLocation,e.transpose,e.value):e.glFunc.call(t,e.uniformLocation,e.value):2===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y):3===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z):4===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w):"sampler2D"===e.type&&(e._init?(t.activeTexture(t["TEXTURE"+this.textureCount]),t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]||i.createWebGLTexture(e.value.baseTexture,t)),t.uniform1i(e.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(e))},i.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec2 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;","   vColor = vec4(color * aColor.x, aColor.x);","}"],i.PixiFastShader=function(e){this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},i.PixiFastShader.prototype.init=function(){var e=this.gl,t=i.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.uMatrix=e.getUniformLocation(t,"uMatrix"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aPositionCoord=e.getAttribLocation(t,"aPositionCoord"),this.aScale=e.getAttribLocation(t,"aScale"),this.aRotation=e.getAttribLocation(t,"aRotation"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=t},i.StripShader=function(){this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","   gl_FragColor = gl_FragColor * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","varying vec2 vTextureCoord;","uniform vec2 offsetVector;","varying float vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"]},i.StripShader.prototype.init=function(){var e=i.gl,t=i.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},i.PrimitiveShader=function(e){this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},i.PrimitiveShader.prototype.init=function(){var e=this.gl,t=i.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},i.WebGLGraphics=function(){},i.WebGLGraphics.renderGraphics=function(e,t){var n=t.gl,r=t.projection,o=t.offset,a=t.shaderManager.primitiveShader;e._webGL[n.id]||(e._webGL[n.id]={points:[],indices:[],lastIndex:0,buffer:n.createBuffer(),indexBuffer:n.createBuffer()});var s=e._webGL[n.id];e.dirty&&(e.dirty=!1,e.clearDirty&&(e.clearDirty=!1,s.lastIndex=0,s.points=[],s.indices=[]),i.WebGLGraphics.updateGraphics(e,n)),t.shaderManager.activatePrimitiveShader(),i.mat3.transpose(e.worldTransform,i.tempMatrix),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.uniformMatrix3fv(a.translationMatrix,!1,i.tempMatrix),n.uniform2f(a.projectionVector,r.x,-r.y),n.uniform2f(a.offsetVector,-o.x,-o.y),n.uniform3fv(a.tintColor,i.hex2rgb(e.tint)),n.uniform1f(a.alpha,e.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,s.buffer),n.vertexAttribPointer(a.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(a.colorAttribute,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,s.indices.length,n.UNSIGNED_SHORT,0),t.shaderManager.deactivatePrimitiveShader()},i.WebGLGraphics.updateGraphics=function(e,t){for(var n=e._webGL[t.id],r=n.lastIndex;r<e.graphicsData.length;r++){var o=e.graphicsData[r];o.type===i.Graphics.POLY?(o.fill&&o.points.length>3&&i.WebGLGraphics.buildPoly(o,n),o.lineWidth>0&&i.WebGLGraphics.buildLine(o,n)):o.type===i.Graphics.RECT?i.WebGLGraphics.buildRectangle(o,n):(o.type===i.Graphics.CIRC||o.type===i.Graphics.ELIP)&&i.WebGLGraphics.buildCircle(o,n)}n.lastIndex=e.graphicsData.length,n.glPoints=new Float32Array(n.points),t.bindBuffer(t.ARRAY_BUFFER,n.buffer),t.bufferData(t.ARRAY_BUFFER,n.glPoints,t.STATIC_DRAW),n.glIndicies=new Uint16Array(n.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n.glIndicies,t.STATIC_DRAW)},i.WebGLGraphics.buildRectangle=function(e,t){var n=e.points,r=n[0],o=n[1],a=n[2],s=n[3];if(e.fill){var l=i.hex2rgb(e.fillColor),u=e.fillAlpha,c=l[0]*u,h=l[1]*u,d=l[2]*u,p=t.points,f=t.indices,m=p.length/6;p.push(r,o),p.push(c,h,d,u),p.push(r+a,o),p.push(c,h,d,u),p.push(r,o+s),p.push(c,h,d,u),p.push(r+a,o+s),p.push(c,h,d,u),f.push(m,m,m+1,m+2,m+3,m+3)}if(e.lineWidth){var v=e.points;e.points=[r,o,r+a,o,r+a,o+s,r,o+s,r,o],i.WebGLGraphics.buildLine(e,t),e.points=v}},i.WebGLGraphics.buildCircle=function(e,t){var n=e.points,r=n[0],o=n[1],a=n[2],s=n[3],l=40,u=2*Math.PI/l,c=0;if(e.fill){var h=i.hex2rgb(e.fillColor),d=e.fillAlpha,p=h[0]*d,f=h[1]*d,m=h[2]*d,v=t.points,g=t.indices,E=v.length/6;for(g.push(E),c=0;l+1>c;c++)v.push(r,o,p,f,m,d),v.push(r+Math.sin(u*c)*a,o+Math.cos(u*c)*s,p,f,m,d),g.push(E++,E++);g.push(E-1)}if(e.lineWidth){var y=e.points;for(e.points=[],c=0;l+1>c;c++)e.points.push(r+Math.sin(u*c)*a,o+Math.cos(u*c)*s);i.WebGLGraphics.buildLine(e,t),e.points=y}},i.WebGLGraphics.buildLine=function(e,t){var n=0,r=e.points;if(0!==r.length){if(e.lineWidth%2)for(n=0;n<r.length;n++)r[n]+=.5;var o=new i.Point(r[0],r[1]),a=new i.Point(r[r.length-2],r[r.length-1]);if(o.x===a.x&&o.y===a.y){r.pop(),r.pop(),a=new i.Point(r[r.length-2],r[r.length-1]);var s=a.x+.5*(o.x-a.x),l=a.y+.5*(o.y-a.y);r.unshift(s,l),r.push(s,l)}var u,c,h,d,p,f,m,v,g,E,y,x,T,b,w,_,R,S,M,C,H,A,P,L=t.points,k=t.indices,D=r.length/2,F=r.length,O=L.length/6,B=e.lineWidth/2,N=i.hex2rgb(e.lineColor),I=e.lineAlpha,U=N[0]*I,V=N[1]*I,z=N[2]*I;for(h=r[0],d=r[1],p=r[2],f=r[3],g=-(d-f),E=h-p,P=Math.sqrt(g*g+E*E),g/=P,E/=P,g*=B,E*=B,L.push(h-g,d-E,U,V,z,I),L.push(h+g,d+E,U,V,z,I),n=1;D-1>n;n++)h=r[2*(n-1)],d=r[2*(n-1)+1],p=r[2*n],f=r[2*n+1],m=r[2*(n+1)],v=r[2*(n+1)+1],g=-(d-f),E=h-p,P=Math.sqrt(g*g+E*E),g/=P,E/=P,g*=B,E*=B,y=-(f-v),x=p-m,P=Math.sqrt(y*y+x*x),y/=P,x/=P,y*=B,x*=B,w=-E+d-(-E+f),_=-g+p-(-g+h),R=(-g+h)*(-E+f)-(-g+p)*(-E+d),S=-x+v-(-x+f),M=-y+p-(-y+m),C=(-y+m)*(-x+f)-(-y+p)*(-x+v),H=w*M-S*_,Math.abs(H)<.1?(H+=10.1,L.push(p-g,f-E,U,V,z,I),L.push(p+g,f+E,U,V,z,I)):(u=(_*C-M*R)/H,c=(S*R-w*C)/H,A=(u-p)*(u-p)+(c-f)+(c-f),A>19600?(T=g-y,b=E-x,P=Math.sqrt(T*T+b*b),T/=P,b/=P,T*=B,b*=B,L.push(p-T,f-b),L.push(U,V,z,I),L.push(p+T,f+b),L.push(U,V,z,I),L.push(p-T,f-b),L.push(U,V,z,I),F++):(L.push(u,c),L.push(U,V,z,I),L.push(p-(u-p),f-(c-f)),L.push(U,V,z,I)));for(h=r[2*(D-2)],d=r[2*(D-2)+1],p=r[2*(D-1)],f=r[2*(D-1)+1],g=-(d-f),E=h-p,P=Math.sqrt(g*g+E*E),g/=P,E/=P,g*=B,E*=B,L.push(p-g,f-E),L.push(U,V,z,I),L.push(p+g,f+E),L.push(U,V,z,I),k.push(O),n=0;F>n;n++)k.push(O++);k.push(O-1)}},i.WebGLGraphics.buildPoly=function(e,t){var n=e.points;if(!(n.length<6)){var r=t.points,o=t.indices,a=n.length/2,s=i.hex2rgb(e.fillColor),l=e.fillAlpha,u=s[0]*l,c=s[1]*l,h=s[2]*l,d=i.PolyK.Triangulate(n),p=r.length/6,f=0;for(f=0;f<d.length;f+=3)o.push(d[f]+p),o.push(d[f]+p),o.push(d[f+1]+p),o.push(d[f+2]+p),o.push(d[f+2]+p);for(f=0;a>f;f++)r.push(n[2*f],n[2*f+1],u,c,h,l)}},i.glContexts=[],i.WebGLRenderer=function(e,t,n,r,o){i.defaultRenderer||(i.defaultRenderer=this),this.type=i.WEBGL_RENDERER,this.transparent=!!r,this.width=e||800,this.height=t||600,this.view=n||document.createElement("canvas"),this.view.width=this.width,this.view.height=this.height;var a=this;this.view.addEventListener("webglcontextlost",function(e){a.handleContextLost(e)},!1),this.view.addEventListener("webglcontextrestored",function(e){a.handleContextRestored(e)},!1),this.options={alpha:this.transparent,antialias:!!o,premultipliedAlpha:!1,stencil:!0};try{this.gl=this.view.getContext("experimental-webgl",this.options)}catch(e){try{this.gl=this.view.getContext("webgl",this.options)}catch(e){throw new Error(" This browser does not support webGL. Try using the canvas renderer"+this)}}var s=this.gl;this.glContextId=s.id=i.WebGLRenderer.glContextId++,i.glContexts[this.glContextId]=s,i.blendModesWebGL||(i.blendModesWebGL=[],i.blendModesWebGL[i.blendModes.NORMAL]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.ADD]=[s.SRC_ALPHA,s.DST_ALPHA],i.blendModesWebGL[i.blendModes.MULTIPLY]=[s.DST_COLOR,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.SCREEN]=[s.SRC_ALPHA,s.ONE],i.blendModesWebGL[i.blendModes.OVERLAY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.DARKEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.LIGHTEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.COLOR_DODGE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.COLOR_BURN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.HARD_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.SOFT_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.DIFFERENCE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.EXCLUSION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.HUE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.SATURATION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.COLOR]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.LUMINOSITY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA]),this.projection=new i.Point,this.projection.x=this.width/2,this.projection.y=-this.height/2,this.offset=new i.Point(0,0),this.resize(this.width,this.height),this.contextLost=!1,this.shaderManager=new i.WebGLShaderManager(s),this.spriteBatch=new i.WebGLSpriteBatch(s),this.maskManager=new i.WebGLMaskManager(s),this.filterManager=new i.WebGLFilterManager(s,this.transparent),this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.spriteBatch=this.spriteBatch,s.useProgram(this.shaderManager.defaultShader.program),s.disable(s.DEPTH_TEST),s.disable(s.CULL_FACE),s.enable(s.BLEND),s.colorMask(!0,!0,!0,this.transparent)},i.WebGLRenderer.prototype.constructor=i.WebGLRenderer,i.WebGLRenderer.prototype.render=function(e){if(!this.contextLost){this.__stage!==e&&(this.__stage=e),i.WebGLRenderer.updateTextures(),e.updateTransform();var t=this.gl;t.viewport(0,0,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(e.backgroundColorSplit[0],e.backgroundColorSplit[1],e.backgroundColorSplit[2],!this.transparent),t.clear(t.COLOR_BUFFER_BIT),this.renderDisplayObject(e,this.projection),e.interactive&&(e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this)))}},i.WebGLRenderer.prototype.renderDisplayObject=function(e,t,n){this.renderSession.drawCount=0,this.renderSession.currentBlendMode=9999,this.renderSession.projection=t,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,n),e._renderWebGL(this.renderSession),this.spriteBatch.end()},i.WebGLRenderer.updateTextures=function(){var e=0;for(e=0;e<i.Texture.frameUpdates.length;e++)i.WebGLRenderer.updateTextureFrame(i.Texture.frameUpdates[e]);for(e=0;e<i.texturesToDestroy.length;e++)i.WebGLRenderer.destroyTexture(i.texturesToDestroy[e]);i.texturesToUpdate.length=0,i.texturesToDestroy.length=0,i.Texture.frameUpdates.length=0},i.WebGLRenderer.destroyTexture=function(e){for(var t=e._glTextures.length-1;t>=0;t--){var n=e._glTextures[t],r=i.glContexts[t];r&&n&&r.deleteTexture(n)}e._glTextures.length=0},i.WebGLRenderer.updateTextureFrame=function(e){e.updateFrame=!1,e._updateWebGLuvs()},i.WebGLRenderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.view.width=e,this.view.height=t,this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2,this.projection.y=-this.height/2},i.createWebGLTexture=function(e,t){return e.hasLoaded&&(e._glTextures[t.id]=t.createTexture(),t.bindTexture(t.TEXTURE_2D,e._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e.scaleMode===i.BaseTexture.SCALE_MODE.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===i.BaseTexture.SCALE_MODE.LINEAR?t.LINEAR:t.NEAREST),e._powerOf2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindTexture(t.TEXTURE_2D,null)),e._glTextures[t.id]},i.updateWebGLTexture=function(e,t){e._glTextures[t.id]&&(t.bindTexture(t.TEXTURE_2D,e._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e.scaleMode===i.BaseTexture.SCALE_MODE.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===i.BaseTexture.SCALE_MODE.LINEAR?t.LINEAR:t.NEAREST),e._powerOf2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindTexture(t.TEXTURE_2D,null))},i.WebGLRenderer.prototype.handleContextLost=function(e){e.preventDefault(),this.contextLost=!0},i.WebGLRenderer.prototype.handleContextRestored=function(){try{this.gl=this.view.getContext("experimental-webgl",this.options)}catch(e){try{this.gl=this.view.getContext("webgl",this.options)}catch(e){throw new Error(" This browser does not support webGL. Try using the canvas renderer"+this)}}var e=this.gl;e.id=i.WebGLRenderer.glContextId++,this.shaderManager.setContext(e),this.spriteBatch.setContext(e),this.maskManager.setContext(e),this.filterManager.setContext(e),this.renderSession.gl=this.gl,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.colorMask(!0,!0,!0,this.transparent),this.gl.viewport(0,0,this.width,this.height);for(var t in i.TextureCache){var n=i.TextureCache[t].baseTexture;n._glTextures=[]}this.contextLost=!1},i.WebGLRenderer.glContextId=0,i.WebGLMaskManager=function(e){this.maskStack=[],this.maskPosition=0,this.setContext(e)},i.WebGLMaskManager.prototype.setContext=function(e){this.gl=e},i.WebGLMaskManager.prototype.pushMask=function(e,t){var n=this.gl;0===this.maskStack.length&&(n.enable(n.STENCIL_TEST),n.stencilFunc(n.ALWAYS,1,1)),this.maskStack.push(e),n.colorMask(!1,!1,!1,!0),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.WebGLGraphics.renderGraphics(e,t),n.colorMask(!0,!0,!0,!0),n.stencilFunc(n.NOTEQUAL,0,this.maskStack.length),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)},i.WebGLMaskManager.prototype.popMask=function(e){var t=this.gl,n=this.maskStack.pop();n&&(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),i.WebGLGraphics.renderGraphics(n,e),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,this.maskStack.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)),0===this.maskStack.length&&t.disable(t.STENCIL_TEST)},i.WebGLShaderManager=function(e){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.setContext(e)},i.WebGLShaderManager.prototype.setContext=function(e){this.gl=e,this.primitiveShader=new i.PrimitiveShader(e),this.defaultShader=new i.PixiShader(e),this.fastShader=new i.PixiFastShader(e),this.activateShader(this.defaultShader)},i.WebGLShaderManager.prototype.setAttribs=function(e){var t;for(t=0;t<this.tempAttribState.length;t++)this.tempAttribState[t]=!1;for(t=0;t<e.length;t++){var n=e[t];this.tempAttribState[n]=!0}var r=this.gl;for(t=0;t<this.attribState.length;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.tempAttribState[t]?r.enableVertexAttribArray(t):r.disableVertexAttribArray(t))},i.WebGLShaderManager.prototype.activateShader=function(e){this.currentShader=e,this.gl.useProgram(e.program),this.setAttribs(e.attributes)},i.WebGLShaderManager.prototype.activatePrimitiveShader=function(){var e=this.gl;e.useProgram(this.primitiveShader.program),this.setAttribs(this.primitiveShader.attributes)},i.WebGLShaderManager.prototype.deactivatePrimitiveShader=function(){var e=this.gl;e.useProgram(this.defaultShader.program),this.setAttribs(this.defaultShader.attributes)},i.WebGLSpriteBatch=function(e){this.vertSize=6,this.size=1e4;var t=4*this.size*this.vertSize,n=6*this.size;this.vertices=new Float32Array(t),this.indices=new Uint16Array(n),this.lastIndexCount=0;for(var r=0,i=0;n>r;r+=6,i+=4)this.indices[r+0]=i+0,this.indices[r+1]=i+1,this.indices[r+2]=i+2,this.indices[r+3]=i+0,this.indices[r+4]=i+2,this.indices[r+5]=i+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.setContext(e)},i.WebGLSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),this.currentBlendMode=99999},i.WebGLSpriteBatch.prototype.begin=function(e){this.renderSession=e,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},i.WebGLSpriteBatch.prototype.end=function(){this.flush()},i.WebGLSpriteBatch.prototype.render=function(e){(e.texture.baseTexture!==this.currentBaseTexture||this.currentBatchSize>=this.size)&&(this.flush(),this.currentBaseTexture=e.texture.baseTexture),e.blendMode!==this.currentBlendMode&&this.setBlendMode(e.blendMode);var t=e._uvs||e.texture._uvs;if(t){var n,r,i,o,a=e.worldAlpha,s=e.tint,l=this.vertices,u=e.texture.frame.width,c=e.texture.frame.height,h=e.anchor.x,d=e.anchor.y;if(e.texture.trimmed){var p=e.texture.trim;r=p.x-h*p.realWidth,n=r+u,o=p.y-d*p.realHeight,i=o+c}else n=u*(1-h),r=u*-h,i=c*(1-d),o=c*-d;var f=4*this.currentBatchSize*this.vertSize,m=e.worldTransform,v=m[0],g=m[3],E=m[1],y=m[4],x=m[2],T=m[5];l[f++]=v*r+E*o+x,l[f++]=y*o+g*r+T,l[f++]=t[0],l[f++]=t[1],l[f++]=a,l[f++]=s,l[f++]=v*n+E*o+x,l[f++]=y*o+g*n+T,l[f++]=t[2],l[f++]=t[3],l[f++]=a,l[f++]=s,l[f++]=v*n+E*i+x,l[f++]=y*i+g*n+T,l[f++]=t[4],l[f++]=t[5],l[f++]=a,l[f++]=s,l[f++]=v*r+E*i+x,l[f++]=y*i+g*r+T,l[f++]=t[6],l[f++]=t[7],l[f++]=a,l[f++]=s,this.currentBatchSize++}},i.WebGLSpriteBatch.prototype.renderTilingSprite=function(e){var t=e.tilingTexture;(t.baseTexture!==this.currentBaseTexture||this.currentBatchSize>=this.size)&&(this.flush(),this.currentBaseTexture=t.baseTexture),e.blendMode!==this.currentBlendMode&&this.setBlendMode(e.blendMode),e._uvs||(e._uvs=new Float32Array(8));var n=e._uvs,r=e.tilePosition.x/t.baseTexture.width,i=e.tilePosition.y/t.baseTexture.height,o=e.width/t.baseTexture.width/(e.tileScale.x*e.tileScaleOffset.x),a=e.height/t.baseTexture.height/(e.tileScale.y*e.tileScaleOffset.y);n[0]=0-r,n[1]=0-i,n[2]=1*o-r,n[3]=0-i,n[4]=1*o-r,n[5]=1*a-i,n[6]=0-r,n[7]=1*a-i;var s=e.worldAlpha,l=e.tint,u=this.vertices,c=e.width,h=e.height,d=e.anchor.x,p=e.anchor.y,f=c*(1-d),m=c*-d,v=h*(1-p),g=h*-p,E=4*this.currentBatchSize*this.vertSize,y=e.worldTransform,x=y[0],T=y[3],b=y[1],w=y[4],_=y[2],R=y[5];u[E++]=x*m+b*g+_,u[E++]=w*g+T*m+R,u[E++]=n[0],u[E++]=n[1],u[E++]=s,u[E++]=l,u[E++]=x*f+b*g+_,u[E++]=w*g+T*f+R,u[E++]=n[2],u[E++]=n[3],u[E++]=s,u[E++]=l,u[E++]=x*f+b*v+_,u[E++]=w*v+T*f+R,u[E++]=n[4],u[E++]=n[5],u[E++]=s,u[E++]=l,u[E++]=x*m+b*v+_,u[E++]=w*v+T*m+R,u[E++]=n[6],u[E++]=n[7],u[E++]=s,u[E++]=l,this.currentBatchSize++},i.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e=this.gl;if(e.bindTexture(e.TEXTURE_2D,this.currentBaseTexture._glTextures[e.id]||i.createWebGLTexture(this.currentBaseTexture,e)),this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var t=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,t)}e.drawElements(e.TRIANGLES,6*this.currentBatchSize,e.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},i.WebGLSpriteBatch.prototype.stop=function(){this.flush()},i.WebGLSpriteBatch.prototype.start=function(){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.renderSession.projection;e.uniform2f(this.shader.projectionVector,t.x,t.y);var n=4*this.vertSize;e.vertexAttribPointer(this.shader.aVertexPosition,2,e.FLOAT,!1,n,0),e.vertexAttribPointer(this.shader.aTextureCoord,2,e.FLOAT,!1,n,8),e.vertexAttribPointer(this.shader.colorAttribute,2,e.FLOAT,!1,n,16),this.currentBlendMode!==i.blendModes.NORMAL&&this.setBlendMode(i.blendModes.NORMAL)},i.WebGLSpriteBatch.prototype.setBlendMode=function(e){this.flush(),this.currentBlendMode=e;var t=i.blendModesWebGL[this.currentBlendMode];this.gl.blendFunc(t[0],t[1])},i.WebGLFastSpriteBatch=function(e){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var t=4*this.size*this.vertSize,n=6*this.maxSize;this.vertices=new Float32Array(t),this.indices=new Uint16Array(n),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var r=0,o=0;n>r;r+=6,o+=4)this.indices[r+0]=o+0,this.indices[r+1]=o+1,this.indices[r+2]=o+2,this.indices[r+3]=o+0,this.indices[r+4]=o+2,this.indices[r+5]=o+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.tempMatrix=i.mat3.create(),this.setContext(e)},i.WebGLFastSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),
this.currentBlendMode=99999},i.WebGLFastSpriteBatch.prototype.begin=function(e,t){this.renderSession=t,this.shader=this.renderSession.shaderManager.fastShader,i.mat3.transpose(e.worldTransform,this.tempMatrix),this.start()},i.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},i.WebGLFastSpriteBatch.prototype.render=function(e){var t=e.children,n=t[0];if(n.texture._uvs){this.currentBaseTexture=n.texture.baseTexture,n.blendMode!==this.currentBlendMode&&this.setBlendMode(n.blendMode);for(var r=0,i=t.length;i>r;r++)this.renderSprite(t[r]);this.flush()}},i.WebGLFastSpriteBatch.prototype.renderSprite=function(e){if(e.texture.baseTexture===this.currentBaseTexture||(this.currentBaseTexture=e.texture.baseTexture,this.flush(),e.texture._uvs)){var t,n,r,i,o,a,s,l,u=this.vertices;if(t=e.texture._uvs,n=e.texture.frame.width,r=e.texture.frame.height,e.texture.trimmed){var c=e.texture.trim;o=c.x-e.anchor.x*c.realWidth,i=o+e.texture.frame.width,s=c.y-e.anchor.y*c.realHeight,a=s+e.texture.frame.height}else i=e.texture.frame.width*(1-e.anchor.x),o=e.texture.frame.width*-e.anchor.x,a=e.texture.frame.height*(1-e.anchor.y),s=e.texture.frame.height*-e.anchor.y;l=4*this.currentBatchSize*this.vertSize,u[l++]=o,u[l++]=s,u[l++]=e.position.x,u[l++]=e.position.y,u[l++]=e.scale.x,u[l++]=e.scale.y,u[l++]=e.rotation,u[l++]=t[0],u[l++]=t[1],u[l++]=e.alpha,u[l++]=i,u[l++]=s,u[l++]=e.position.x,u[l++]=e.position.y,u[l++]=e.scale.x,u[l++]=e.scale.y,u[l++]=e.rotation,u[l++]=t[2],u[l++]=t[3],u[l++]=e.alpha,u[l++]=i,u[l++]=a,u[l++]=e.position.x,u[l++]=e.position.y,u[l++]=e.scale.x,u[l++]=e.scale.y,u[l++]=e.rotation,u[l++]=t[4],u[l++]=t[5],u[l++]=e.alpha,u[l++]=o,u[l++]=a,u[l++]=e.position.x,u[l++]=e.position.y,u[l++]=e.scale.x,u[l++]=e.scale.y,u[l++]=e.rotation,u[l++]=t[6],u[l++]=t[7],u[l++]=e.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},i.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e=this.gl;if(this.currentBaseTexture._glTextures[e.id]||i.createWebGLTexture(this.currentBaseTexture,e),e.bindTexture(e.TEXTURE_2D,this.currentBaseTexture._glTextures[e.id]),this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var t=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,t)}e.drawElements(e.TRIANGLES,6*this.currentBatchSize,e.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},i.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},i.WebGLFastSpriteBatch.prototype.start=function(){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.renderSession.projection;e.uniform2f(this.shader.projectionVector,t.x,t.y),e.uniformMatrix3fv(this.shader.uMatrix,!1,this.tempMatrix);var n=4*this.vertSize;e.vertexAttribPointer(this.shader.aVertexPosition,2,e.FLOAT,!1,n,0),e.vertexAttribPointer(this.shader.aPositionCoord,2,e.FLOAT,!1,n,8),e.vertexAttribPointer(this.shader.aScale,2,e.FLOAT,!1,n,16),e.vertexAttribPointer(this.shader.aRotation,1,e.FLOAT,!1,n,24),e.vertexAttribPointer(this.shader.aTextureCoord,2,e.FLOAT,!1,n,28),e.vertexAttribPointer(this.shader.colorAttribute,1,e.FLOAT,!1,n,36),this.currentBlendMode!==i.blendModes.NORMAL&&this.setBlendMode(i.blendModes.NORMAL)},i.WebGLFastSpriteBatch.prototype.setBlendMode=function(e){this.flush(),this.currentBlendMode=e;var t=i.blendModesWebGL[this.currentBlendMode];this.gl.blendFunc(t[0],t[1])},i.WebGLFilterManager=function(e,t){this.transparent=t,this.filterStack=[],this.offsetX=0,this.offsetY=0,this.setContext(e)},i.WebGLFilterManager.prototype.setContext=function(e){this.gl=e,this.texturePool=[],this.initShaderBuffers()},i.WebGLFilterManager.prototype.begin=function(e,t){this.renderSession=e,this.defaultShader=e.shaderManager.defaultShader;var n=this.renderSession.projection;this.width=2*n.x,this.height=2*-n.y,this.buffer=t},i.WebGLFilterManager.prototype.pushFilter=function(e){var t=this.gl,n=this.renderSession.projection,r=this.renderSession.offset;this.filterStack.push(e);var o=e.filterPasses[0];this.offsetX+=e.target.filterArea.x,this.offsetY+=e.target.filterArea.y;var a=this.texturePool.pop();a?a.resize(this.width,this.height):a=new i.FilterTexture(this.gl,this.width,this.height),t.bindTexture(t.TEXTURE_2D,a.texture),e.target.filterArea=e.target.getBounds();var s=e.target.filterArea,l=o.padding;s.x-=l,s.y-=l,s.width+=2*l,s.height+=2*l,s.x<0&&(s.x=0),s.width>this.width&&(s.width=this.width),s.y<0&&(s.y=0),s.height>this.height&&(s.height=this.height),t.bindFramebuffer(t.FRAMEBUFFER,a.frameBuffer),t.viewport(0,0,s.width,s.height),n.x=s.width/2,n.y=-s.height/2,r.x=-s.x,r.y=-s.y,t.uniform2f(this.defaultShader.projectionVector,s.width/2,-s.height/2),t.uniform2f(this.defaultShader.offsetVector,-s.x,-s.y),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e._glFilterTexture=a},i.WebGLFilterManager.prototype.popFilter=function(){var e=this.gl,t=this.filterStack.pop(),n=t.target.filterArea,r=t._glFilterTexture,o=this.renderSession.projection,a=this.renderSession.offset;if(t.filterPasses.length>1){e.viewport(0,0,n.width,n.height),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=n.height,this.vertexArray[2]=n.width,this.vertexArray[3]=n.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=n.width,this.vertexArray[7]=0,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=n.width/this.width,this.uvArray[5]=n.height/this.height,this.uvArray[6]=n.width/this.width,this.uvArray[7]=n.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray);var s=r,l=this.texturePool.pop();l||(l=new i.FilterTexture(this.gl,this.width,this.height)),e.bindFramebuffer(e.FRAMEBUFFER,l.frameBuffer),e.clear(e.COLOR_BUFFER_BIT),e.disable(e.BLEND);for(var u=0;u<t.filterPasses.length-1;u++){var c=t.filterPasses[u];e.bindFramebuffer(e.FRAMEBUFFER,l.frameBuffer),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,s.texture),this.applyFilterPass(c,n,n.width,n.height);var h=s;s=l,l=h}e.enable(e.BLEND),r=s,this.texturePool.push(l)}var d=t.filterPasses[t.filterPasses.length-1];this.offsetX-=n.x,this.offsetY-=n.y;var p=this.width,f=this.height,m=0,v=0,g=this.buffer;if(0===this.filterStack.length)e.colorMask(!0,!0,!0,this.transparent);else{var E=this.filterStack[this.filterStack.length-1];n=E.target.filterArea,p=n.width,f=n.height,m=n.x,v=n.y,g=E._glFilterTexture.frameBuffer}o.x=p/2,o.y=-f/2,a.x=m,a.y=v,n=t.target.filterArea;var y=n.x-m,x=n.y-v;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=y,this.vertexArray[1]=x+n.height,this.vertexArray[2]=y+n.width,this.vertexArray[3]=x+n.height,this.vertexArray[4]=y,this.vertexArray[5]=x,this.vertexArray[6]=y+n.width,this.vertexArray[7]=x,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=n.width/this.width,this.uvArray[5]=n.height/this.height,this.uvArray[6]=n.width/this.width,this.uvArray[7]=n.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray),e.viewport(0,0,p,f),e.bindFramebuffer(e.FRAMEBUFFER,g),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,r.texture),this.applyFilterPass(d,n,p,f),e.useProgram(this.defaultShader.program),e.uniform2f(this.defaultShader.projectionVector,p/2,-f/2),e.uniform2f(this.defaultShader.offsetVector,-m,-v),this.texturePool.push(r),t._glFilterTexture=null},i.WebGLFilterManager.prototype.applyFilterPass=function(e,t,n,r){var o=this.gl,a=e.shaders[o.id];a||(a=new i.PixiShader(o),a.fragmentSrc=e.fragmentSrc,a.uniforms=e.uniforms,a.init(),e.shaders[o.id]=a),o.useProgram(a.program),o.uniform2f(a.projectionVector,n/2,-r/2),o.uniform2f(a.offsetVector,0,0),e.uniforms.dimensions&&(e.uniforms.dimensions.value[0]=this.width,e.uniforms.dimensions.value[1]=this.height,e.uniforms.dimensions.value[2]=this.vertexArray[0],e.uniforms.dimensions.value[3]=this.vertexArray[5]),a.syncUniforms(),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.vertexAttribPointer(a.aVertexPosition,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.uvBuffer),o.vertexAttribPointer(a.aTextureCoord,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.colorBuffer),o.vertexAttribPointer(a.colorAttribute,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),this.renderSession.drawCount++},i.WebGLFilterManager.prototype.initShaderBuffers=function(){var e=this.gl;this.vertexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.STATIC_DRAW),this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvArray,e.STATIC_DRAW),this.colorArray=new Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colorArray,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),e.STATIC_DRAW)},i.FilterTexture=function(e,t,n){this.gl=e,this.frameBuffer=e.createFramebuffer(),this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0),this.resize(t,n)},i.FilterTexture.prototype.clear=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},i.FilterTexture.prototype.resize=function(e,t){if(this.width!==e||this.height!==t){this.width=e,this.height=t;var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,t,0,n.RGBA,n.UNSIGNED_BYTE,null)}},i.CanvasMaskManager=function(){},i.CanvasMaskManager.prototype.pushMask=function(e,t){t.save();var n=e.alpha,r=e.worldTransform;t.setTransform(r[0],r[3],r[1],r[4],r[2],r[5]),i.CanvasGraphics.renderGraphicsMask(e,t),t.clip(),e.worldAlpha=n},i.CanvasMaskManager.prototype.popMask=function(e){e.restore()},i.CanvasTinter=function(){},i.CanvasTinter.getTintedTexture=function(e,t){var n=e.texture;t=i.CanvasTinter.roundColor(t);var r="#"+("00000"+(0|t).toString(16)).substr(-6);if(n.tintCache=n.tintCache||{},n.tintCache[r])return n.tintCache[r];var o=i.CanvasTinter.canvas||document.createElement("canvas");if(i.CanvasTinter.tintMethod(n,t,o),i.CanvasTinter.convertTintToImage){var a=new Image;a.src=o.toDataURL(),n.tintCache[r]=a}else n.tintCache[r]=o,i.CanvasTinter.canvas=null;return o},i.CanvasTinter.tintWithMultiply=function(e,t,n){var r=n.getContext("2d"),i=e.frame;n.width=i.width,n.height=i.height,r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},i.CanvasTinter.tintWithOverlay=function(e,t,n){var r=n.getContext("2d"),i=e.frame;n.width=i.width,n.height=i.height,r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},i.CanvasTinter.tintWithPerPixel=function(e,t,n){var r=n.getContext("2d"),o=e.frame;n.width=o.width,n.height=o.height,r.globalCompositeOperation="copy",r.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var a=i.hex2rgb(t),s=a[0],l=a[1],u=a[2],c=r.getImageData(0,0,o.width,o.height),h=c.data,d=0;d<h.length;d+=4)h[d+0]*=s,h[d+1]*=l,h[d+2]*=u;r.putImageData(c,0,0)},i.CanvasTinter.roundColor=function(e){var t=i.CanvasTinter.cacheStepsPerColorChannel,n=i.hex2rgb(e);return n[0]=Math.min(255,n[0]/t*t),n[1]=Math.min(255,n[1]/t*t),n[2]=Math.min(255,n[2]/t*t),i.rgb2hex(n)},i.CanvasTinter.cacheStepsPerColorChannel=8,i.CanvasTinter.convertTintToImage=!1,i.CanvasTinter.canUseMultiply=i.canUseNewCanvasBlendModes(),i.CanvasTinter.tintMethod=i.CanvasTinter.canUseMultiply?i.CanvasTinter.tintWithMultiply:i.CanvasTinter.tintWithPerPixel,i.CanvasRenderer=function(e,t,n,r){i.defaultRenderer=i.defaultRenderer||this,this.type=i.CANVAS_RENDERER,this.transparent=r,i.blendModesCanvas||(i.blendModesCanvas=[],i.canUseNewCanvasBlendModes()?(i.blendModesCanvas[i.blendModes.NORMAL]="source-over",i.blendModesCanvas[i.blendModes.ADD]="lighter",i.blendModesCanvas[i.blendModes.MULTIPLY]="multiply",i.blendModesCanvas[i.blendModes.SCREEN]="screen",i.blendModesCanvas[i.blendModes.OVERLAY]="overlay",i.blendModesCanvas[i.blendModes.DARKEN]="darken",i.blendModesCanvas[i.blendModes.LIGHTEN]="lighten",i.blendModesCanvas[i.blendModes.COLOR_DODGE]="color-dodge",i.blendModesCanvas[i.blendModes.COLOR_BURN]="color-burn",i.blendModesCanvas[i.blendModes.HARD_LIGHT]="hard-light",i.blendModesCanvas[i.blendModes.SOFT_LIGHT]="soft-light",i.blendModesCanvas[i.blendModes.DIFFERENCE]="difference",i.blendModesCanvas[i.blendModes.EXCLUSION]="exclusion",i.blendModesCanvas[i.blendModes.HUE]="hue",i.blendModesCanvas[i.blendModes.SATURATION]="saturation",i.blendModesCanvas[i.blendModes.COLOR]="color",i.blendModesCanvas[i.blendModes.LUMINOSITY]="luminosity"):(i.blendModesCanvas[i.blendModes.NORMAL]="source-over",i.blendModesCanvas[i.blendModes.ADD]="lighter",i.blendModesCanvas[i.blendModes.MULTIPLY]="source-over",i.blendModesCanvas[i.blendModes.SCREEN]="source-over",i.blendModesCanvas[i.blendModes.OVERLAY]="source-over",i.blendModesCanvas[i.blendModes.DARKEN]="source-over",i.blendModesCanvas[i.blendModes.LIGHTEN]="source-over",i.blendModesCanvas[i.blendModes.COLOR_DODGE]="source-over",i.blendModesCanvas[i.blendModes.COLOR_BURN]="source-over",i.blendModesCanvas[i.blendModes.HARD_LIGHT]="source-over",i.blendModesCanvas[i.blendModes.SOFT_LIGHT]="source-over",i.blendModesCanvas[i.blendModes.DIFFERENCE]="source-over",i.blendModesCanvas[i.blendModes.EXCLUSION]="source-over",i.blendModesCanvas[i.blendModes.HUE]="source-over",i.blendModesCanvas[i.blendModes.SATURATION]="source-over",i.blendModesCanvas[i.blendModes.COLOR]="source-over",i.blendModesCanvas[i.blendModes.LUMINOSITY]="source-over")),this.width=e||800,this.height=t||600,this.view=n||document.createElement("canvas"),this.context=this.view.getContext("2d"),this.smoothProperty=null,"imageSmoothingEnabled"in this.context?this.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context&&(this.smoothProperty="oImageSmoothingEnabled"),this.scaleMode=null,this.refresh=!0,this.view.width=this.width,this.view.height=this.height,this.count=0,this.maskManager=new i.CanvasMaskManager,this.renderSession={},this.renderSession.context=this.context,this.renderSession.maskManager=this.maskManager},i.CanvasRenderer.prototype.constructor=i.CanvasRenderer,i.CanvasRenderer.prototype.render=function(e){i.texturesToUpdate.length=0,i.texturesToDestroy.length=0,e.updateTransform(),this.view.style.backgroundColor===e.backgroundColorString||this.transparent||(this.view.style.backgroundColor=e.backgroundColorString),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(e),e.interactive&&(e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this))),i.Texture.frameUpdates.length>0&&(i.Texture.frameUpdates.length=0)},i.CanvasRenderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.view.width=e,this.view.height=t},i.CanvasRenderer.prototype.renderDisplayObject=function(e,t){this.renderSession.context=t||this.context,e._renderCanvas(this.renderSession)},i.CanvasRenderer.prototype.renderStripFlat=function(e){var t=this.context,n=e.verticies,r=n.length/2;this.count++,t.beginPath();for(var i=1;r-2>i;i++){var o=2*i,a=n[o],s=n[o+2],l=n[o+4],u=n[o+1],c=n[o+3],h=n[o+5];t.moveTo(a,u),t.lineTo(s,c),t.lineTo(l,h)}t.fillStyle="#FF0000",t.fill(),t.closePath()},i.CanvasRenderer.prototype.renderStrip=function(e){var t=this.context,n=e.verticies,r=e.uvs,i=n.length/2;this.count++;for(var o=1;i-2>o;o++){var a=2*o,s=n[a],l=n[a+2],u=n[a+4],c=n[a+1],h=n[a+3],d=n[a+5],p=r[a]*e.texture.width,f=r[a+2]*e.texture.width,m=r[a+4]*e.texture.width,v=r[a+1]*e.texture.height,g=r[a+3]*e.texture.height,E=r[a+5]*e.texture.height;t.save(),t.beginPath(),t.moveTo(s,c),t.lineTo(l,h),t.lineTo(u,d),t.closePath(),t.clip();var y=p*g+v*m+f*E-g*m-v*f-p*E,x=s*g+v*u+l*E-g*u-v*l-s*E,T=p*l+s*m+f*u-l*m-s*f-p*u,b=p*g*u+v*l*m+s*f*E-s*g*m-v*f*u-p*l*E,w=c*g+v*d+h*E-g*d-v*h-c*E,_=p*h+c*m+f*d-h*m-c*f-p*d,R=p*g*d+v*h*m+c*f*E-c*g*m-v*f*d-p*h*E;t.transform(x/y,w/y,T/y,_/y,b/y,R/y),t.drawImage(e.texture.baseTexture.source,0,0),t.restore()}},i.CanvasBuffer=function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=t},i.CanvasBuffer.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},i.CanvasBuffer.prototype.resize=function(e,t){this.width=this.canvas.width=e,this.height=this.canvas.height=t},i.CanvasGraphics=function(){},i.CanvasGraphics.renderGraphics=function(e,t){for(var n=e.worldAlpha,r="",o=0;o<e.graphicsData.length;o++){var a=e.graphicsData[o],s=a.points;if(t.strokeStyle=r="#"+("00000"+(0|a.lineColor).toString(16)).substr(-6),t.lineWidth=a.lineWidth,a.type===i.Graphics.POLY){t.beginPath(),t.moveTo(s[0],s[1]);for(var l=1;l<s.length/2;l++)t.lineTo(s[2*l],s[2*l+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&t.closePath(),a.fill&&(t.globalAlpha=a.fillAlpha*n,t.fillStyle=r="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),t.fill()),a.lineWidth&&(t.globalAlpha=a.lineAlpha*n,t.stroke())}else if(a.type===i.Graphics.RECT)(a.fillColor||0===a.fillColor)&&(t.globalAlpha=a.fillAlpha*n,t.fillStyle=r="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),t.fillRect(s[0],s[1],s[2],s[3])),a.lineWidth&&(t.globalAlpha=a.lineAlpha*n,t.strokeRect(s[0],s[1],s[2],s[3]));else if(a.type===i.Graphics.CIRC)t.beginPath(),t.arc(s[0],s[1],s[2],0,2*Math.PI),t.closePath(),a.fill&&(t.globalAlpha=a.fillAlpha*n,t.fillStyle=r="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),t.fill()),a.lineWidth&&(t.globalAlpha=a.lineAlpha*n,t.stroke());else if(a.type===i.Graphics.ELIP){var u=a.points,c=2*u[2],h=2*u[3],d=u[0]-c/2,p=u[1]-h/2;t.beginPath();var f=.5522848,m=c/2*f,v=h/2*f,g=d+c,E=p+h,y=d+c/2,x=p+h/2;t.moveTo(d,x),t.bezierCurveTo(d,x-v,y-m,p,y,p),t.bezierCurveTo(y+m,p,g,x-v,g,x),t.bezierCurveTo(g,x+v,y+m,E,y,E),t.bezierCurveTo(y-m,E,d,x+v,d,x),t.closePath(),a.fill&&(t.globalAlpha=a.fillAlpha*n,t.fillStyle=r="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),t.fill()),a.lineWidth&&(t.globalAlpha=a.lineAlpha*n,t.stroke())}}},i.CanvasGraphics.renderGraphicsMask=function(e,t){var n=e.graphicsData.length;if(0!==n){n>1&&(n=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var r=0;1>r;r++){var o=e.graphicsData[r],a=o.points;if(o.type===i.Graphics.POLY){t.beginPath(),t.moveTo(a[0],a[1]);for(var s=1;s<a.length/2;s++)t.lineTo(a[2*s],a[2*s+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&t.closePath()}else if(o.type===i.Graphics.RECT)t.beginPath(),t.rect(a[0],a[1],a[2],a[3]),t.closePath();else if(o.type===i.Graphics.CIRC)t.beginPath(),t.arc(a[0],a[1],a[2],0,2*Math.PI),t.closePath();else if(o.type===i.Graphics.ELIP){var l=o.points,u=2*l[2],c=2*l[3],h=l[0]-u/2,d=l[1]-c/2;t.beginPath();var p=.5522848,f=u/2*p,m=c/2*p,v=h+u,g=d+c,E=h+u/2,y=d+c/2;t.moveTo(h,y),t.bezierCurveTo(h,y-m,E-f,d,E,d),t.bezierCurveTo(E+f,d,v,y-m,v,y),t.bezierCurveTo(v,y+m,E+f,g,E,g),t.bezierCurveTo(E-f,g,h,y+m,h,y),t.closePath()}}}},i.Graphics=function(){i.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor="black",this.graphicsData=[],this.tint=16777215,this.blendMode=i.blendModes.NORMAL,this.currentPath={points:[]},this._webGL=[],this.isMask=!1,this.bounds=null,this.boundsPadding=10},i.Graphics.prototype=(0,s.default)(i.DisplayObjectContainer.prototype),i.Graphics.prototype.constructor=i.Graphics,Object.defineProperty(i.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap=e,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),i.Graphics.prototype.lineStyle=function(e,t,n){this.currentPath.points.length||this.graphicsData.pop(),this.lineWidth=e||0,this.lineColor=t||0,this.lineAlpha=arguments.length<3?1:n,this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:i.Graphics.POLY},this.graphicsData.push(this.currentPath)},i.Graphics.prototype.moveTo=function(e,t){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:i.Graphics.POLY},this.currentPath.points.push(e,t),this.graphicsData.push(this.currentPath)},i.Graphics.prototype.lineTo=function(e,t){this.currentPath.points.push(e,t),this.dirty=!0},i.Graphics.prototype.beginFill=function(e,t){this.filling=!0,this.fillColor=e||0,this.fillAlpha=arguments.length<2?1:t},i.Graphics.prototype.endFill=function(){this.filling=!1,this.fillColor=null,this.fillAlpha=1},i.Graphics.prototype.drawRect=function(e,t,n,r){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[e,t,n,r],type:i.Graphics.RECT},this.graphicsData.push(this.currentPath),this.dirty=!0},i.Graphics.prototype.drawCircle=function(e,t,n){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[e,t,n,n],type:i.Graphics.CIRC},this.graphicsData.push(this.currentPath),this.dirty=!0},i.Graphics.prototype.drawEllipse=function(e,t,n,r){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[e,t,n,r],type:i.Graphics.ELIP},this.graphicsData.push(this.currentPath),this.dirty=!0},i.Graphics.prototype.clear=function(){this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this.bounds=null},i.Graphics.prototype.generateTexture=function(){var e=this.getBounds(),t=new i.CanvasBuffer(e.width,e.height),n=i.Texture.fromCanvas(t.canvas);return t.context.translate(-e.x,-e.y),i.CanvasGraphics.renderGraphics(this,t.context),n},i.Graphics.prototype._renderWebGL=function(e){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return this.dirty&&(this._generateCachedSprite(),i.updateWebGLTexture(this._cachedSprite.texture.baseTexture,e.gl),this.dirty=!1),void i.Sprite.prototype._renderWebGL.call(this._cachedSprite,e);if(e.spriteBatch.stop(),this._mask&&e.maskManager.pushMask(this.mask,e),this._filters&&e.filterManager.pushFilter(this._filterBlock),this.blendMode!==e.spriteBatch.currentBlendMode){this.spriteBatch.currentBlendMode=this.blendMode;var t=i.blendModesWebGL[e.spriteBatch.currentBlendMode];this.spriteBatch.gl.blendFunc(t[0],t[1])}if(i.WebGLGraphics.renderGraphics(this,e),this.children.length){e.spriteBatch.start();for(var n=0,r=this.children.length;r>n;n++)this.children[n]._renderWebGL(e);e.spriteBatch.stop()}this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(e),e.drawCount++,e.spriteBatch.start()}},i.Graphics.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){var t=e.context,n=this.worldTransform;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=i.blendModesCanvas[e.currentBlendMode]),t.setTransform(n[0],n[3],n[1],n[4],n[2],n[5]),i.CanvasGraphics.renderGraphics(this,t);for(var r=0,o=this.children.length;o>r;r++)this.children[r]._renderCanvas(e)}},i.Graphics.prototype.getBounds=function(){this.bounds||this.updateBounds();var e=this.bounds.x,t=this.bounds.width+this.bounds.x,n=this.bounds.y,r=this.bounds.height+this.bounds.y,i=this.worldTransform,o=i[0],a=i[3],s=i[1],l=i[4],u=i[2],c=i[5],h=o*t+s*r+u,d=l*r+a*t+c,p=o*e+s*r+u,f=l*r+a*e+c,m=o*e+s*n+u,v=l*n+a*e+c,g=o*t+s*n+u,E=l*n+a*t+c,y=-1/0,x=-1/0,T=1/0,b=1/0;T=T>h?h:T,T=T>p?p:T,T=T>m?m:T,T=T>g?g:T,b=b>d?d:b,b=b>f?f:b,b=b>v?v:b,b=b>E?E:b,y=h>y?h:y,y=p>y?p:y,y=m>y?m:y,y=g>y?g:y,x=d>x?d:x,x=f>x?f:x,x=v>x?v:x,x=E>x?E:x;var w=this._bounds;return w.x=T,w.width=y-T,w.y=b,w.height=x-b,w},i.Graphics.prototype.updateBounds=function(){for(var e,t,n,r=1/0,o=-1/0,a=1/0,s=-1/0,l=0;l<this.graphicsData.length;l++){var u=this.graphicsData[l],c=u.type,h=u.lineWidth;if(e=u.points,c===i.Graphics.RECT){t=e.x-h/2,n=e.y-h/2;var d=e.width+h,p=e.height+h;r=r>t?t:r,o=t+d>o?t+d:o,a=a>n?t:a,s=n+p>s?n+p:s}else if(c===i.Graphics.CIRC||c===i.Graphics.ELIP){t=e.x,n=e.y;var f=e.radius+h/2;r=r>t-f?t-f:r,o=t+f>o?t+f:o,a=a>n-f?n-f:a,s=n+f>s?n+f:s}else for(var m=0;m<e.length;m+=2)t=e[m],n=e[m+1],r=r>t-h?t-h:r,o=t+h>o?t+h:o,a=a>n-h?n-h:a,s=n+h>s?n+h:s}var v=this.boundsPadding;this.bounds=new i.Rectangle(r-v,a-v,o-r+2*v,s-a+2*v)},i.Graphics.prototype._generateCachedSprite=function(){var e=this.getBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(e.width,e.height);else{var t=new i.CanvasBuffer(e.width,e.height),n=i.Texture.fromCanvas(t.canvas);this._cachedSprite=new i.Sprite(n),this._cachedSprite.buffer=t,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this._cachedSprite.buffer.context.translate(-e.x,-e.y),i.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context)},i.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},i.Graphics.POLY=0,i.Graphics.RECT=1,i.Graphics.CIRC=2,i.Graphics.ELIP=3,i.tempMatrix=i.mat3.create(),i.Strip=function(e,t,n){i.DisplayObjectContainer.call(this),this.texture=e,this.blendMode=i.blendModes.NORMAL;try{this.uvs=new Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new Float32Array([0,0,0,0,0,0,0,0,0]),this.colors=new Float32Array([1,1,1,1]),this.indices=new Uint16Array([0,1,2,3])}catch(e){this.uvs=[0,1,1,1,1,0,0,1],this.verticies=[0,0,0,0,0,0,0,0,0],this.colors=[1,1,1,1],this.indices=[0,1,2,3]}this.width=t,this.height=n,e.baseTexture.hasLoaded?(this.width=this.texture.frame.width,this.height=this.texture.frame.height,this.updateFrame=!0):(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind)),this.renderable=!0},i.Strip.prototype=(0,s.default)(i.DisplayObjectContainer.prototype),i.Strip.prototype.constructor=i.Strip,i.Strip.prototype.setTexture=function(e){this.texture=e,this.width=e.frame.width,this.height=e.frame.height,this.updateFrame=!0},i.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},i.Rope=function(e,t){i.Strip.call(this,e),this.points=t;try{this.verticies=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length)}catch(e){this.verticies=new Array(4*t.length),this.uvs=new Array(4*t.length),this.colors=new Array(2*t.length),this.indices=new Array(2*t.length)}this.refresh()},i.Rope.prototype=(0,s.default)(i.Strip.prototype),i.Rope.prototype.constructor=i.Rope,i.Rope.prototype.refresh=function(){var e=this.points;if(!(e.length<1)){var t=this.uvs,n=e[0],r=this.indices,i=this.colors;this.count-=.2,t[0]=0,t[1]=1,t[2]=0,t[3]=1,i[0]=1,i[1]=1,r[0]=0,r[1]=1;for(var o,a,s,l=e.length,u=1;l>u;u++)o=e[u],a=4*u,s=u/(l-1),u%2?(t[a]=s,t[a+1]=0,t[a+2]=s,t[a+3]=1):(t[a]=s,t[a+1]=0,t[a+2]=s,t[a+3]=1),a=2*u,i[a]=1,i[a+1]=1,a=2*u,r[a]=a,r[a+1]=a+1,n=o}},i.Rope.prototype.updateTransform=function(){var e=this.points;if(!(e.length<1)){var t,n=e[0],r={x:0,y:0};this.count-=.2;var o=this.verticies;o[0]=n.x+r.x,o[1]=n.y+r.y,o[2]=n.x-r.x,o[3]=n.y-r.y;for(var a,s,l,u,c,h=e.length,d=1;h>d;d++)a=e[d],s=4*d,t=d<e.length-1?e[d+1]:a,r.y=-(t.x-n.x),r.x=t.y-n.y,l=10*(1-d/(h-1)),l>1&&(l=1),u=Math.sqrt(r.x*r.x+r.y*r.y),c=this.texture.height/2,r.x/=u,r.y/=u,r.x*=c,r.y*=c,o[s]=a.x+r.x,o[s+1]=a.y+r.y,o[s+2]=a.x-r.x,o[s+3]=a.y-r.y,n=a;i.DisplayObjectContainer.prototype.updateTransform.call(this)}},i.Rope.prototype.setTexture=function(e){this.texture=e,this.updateFrame=!0},i.TilingSprite=function(e,t,n){i.Sprite.call(this,e),this.width=t||100,this.height=n||100,this.tileScale=new i.Point(1,1),this.tileScaleOffset=new i.Point(1,1),this.tilePosition=new i.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=i.blendModes.NORMAL},i.TilingSprite.prototype=(0,s.default)(i.Sprite.prototype),i.TilingSprite.prototype.constructor=i.TilingSprite,Object.defineProperty(i.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}}),Object.defineProperty(i.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}}),i.TilingSprite.prototype.onTextureUpdate=function(){this.updateFrame=!0},i.TilingSprite.prototype._renderWebGL=function(e){if(this.visible!==!1&&0!==this.alpha){var t,n;if(this.mask||this.filters){for(this.mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),this.filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),this.tilingTexture?e.spriteBatch.renderTilingSprite(this):this.generateTilingTexture(!0),t=0,n=this.children.length;n>t;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this.filters&&e.filterManager.popFilter(),this.mask&&e.maskManager.popMask(e),e.spriteBatch.start()}else for(this.tilingTexture?e.spriteBatch.renderTilingSprite(this):this.generateTilingTexture(!0),t=0,n=this.children.length;n>t;t++)this.children[t]._renderWebGL(e)}},i.TilingSprite.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha){var t=e.context;this._mask&&e.maskManager.pushMask(this._mask,t),t.globalAlpha=this.worldAlpha;var n=this.worldTransform;t.setTransform(n[0],n[3],n[1],n[4],n[2],n[5]),this.__tilePattern||(this.generateTilingTexture(!1),this.tilingTexture&&(this.__tilePattern=t.createPattern(this.tilingTexture.baseTexture.source,"repeat"))),this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=i.blendModesCanvas[e.currentBlendMode]),t.beginPath();var r=this.tilePosition,o=this.tileScale;t.scale(o.x,o.y),t.translate(r.x,r.y),t.fillStyle=this.__tilePattern,t.fillRect(-r.x,-r.y,this.width/o.x,this.height/o.y),t.scale(1/o.x,1/o.y),t.translate(-r.x,-r.y),t.closePath(),this._mask&&e.maskManager.popMask(e.context)}},i.TilingSprite.prototype.getBounds=function(){var e=this._width,t=this._height,n=e*(1-this.anchor.x),r=e*-this.anchor.x,i=t*(1-this.anchor.y),o=t*-this.anchor.y,a=this.worldTransform,s=a[0],l=a[3],u=a[1],c=a[4],h=a[2],d=a[5],p=s*r+u*o+h,f=c*o+l*r+d,m=s*n+u*o+h,v=c*o+l*n+d,g=s*n+u*i+h,E=c*i+l*n+d,y=s*r+u*i+h,x=c*i+l*r+d,T=-1/0,b=-1/0,w=1/0,_=1/0;
w=w>p?p:w,w=w>m?m:w,w=w>g?g:w,w=w>y?y:w,_=_>f?f:_,_=_>v?v:_,_=_>E?E:_,_=_>x?x:_,T=p>T?p:T,T=m>T?m:T,T=g>T?g:T,T=y>T?y:T,b=f>b?f:b,b=v>b?v:b,b=E>b?E:b,b=x>b?x:b;var R=this._bounds;return R.x=w,R.width=T-w,R.y=_,R.height=b-_,this._currentBounds=R,R},i.TilingSprite.prototype.generateTilingTexture=function(e){var t=this.texture;if(t.baseTexture.hasLoaded){var n,r,o=t.baseTexture,a=t.frame,s=a.width!==o.width||a.height!==o.height;this.tilingTexture=t;var l=!1;if(e?(n=i.getNextPowerOfTwo(t.frame.width),r=i.getNextPowerOfTwo(t.frame.height),a.width!==n&&a.height!==r&&(l=!0)):s&&(n=a.width,r=a.height,l=!0),l){var u=new i.CanvasBuffer(n,r);u.context.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,n,r),this.tilingTexture=i.Texture.fromCanvas(u.canvas),this.tileScaleOffset.x=a.width/n,this.tileScaleOffset.y=a.height/r}this.tilingTexture.baseTexture._powerOf2=!0}};var c={};c.BoneData=function(e,t){this.name=e,this.parent=t},c.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1},c.SlotData=function(e,t){this.name=e,this.boneData=t},c.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null},c.Bone=function(e,t){this.data=e,this.parent=t,this.setToSetupPose()},c.Bone.yDown=!1,c.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(e,t){var n=this.parent;null!=n?(this.worldX=this.x*n.m00+this.y*n.m01+n.worldX,this.worldY=this.x*n.m10+this.y*n.m11+n.worldY,this.worldScaleX=n.worldScaleX*this.scaleX,this.worldScaleY=n.worldScaleY*this.scaleY,this.worldRotation=n.worldRotation+this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var r=this.worldRotation*Math.PI/180,i=Math.cos(r),o=Math.sin(r);this.m00=i*this.worldScaleX,this.m10=o*this.worldScaleX,this.m01=-o*this.worldScaleY,this.m11=i*this.worldScaleY,e&&(this.m00=-this.m00,this.m01=-this.m01),t&&(this.m10=-this.m10,this.m11=-this.m11),c.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY}},c.Slot=function(e,t,n){this.data=e,this.skeleton=t,this.bone=n,this.setToSetupPose()},c.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(e){this.attachment=e,this._attachmentTime=this.skeleton.time},setAttachmentTime:function(e){this._attachmentTime=this.skeleton.time-e},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var e=this.data;this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a;for(var t=this.skeleton.data.slots,n=0,r=t.length;r>n;n++)if(t[n]==e){this.setAttachment(e.attachmentName?this.skeleton.getAttachmentBySlotIndex(n,e.attachmentName):null);break}}},c.Skin=function(e){this.name=e,this.attachments={}},c.Skin.prototype={addAttachment:function(e,t,n){this.attachments[e+":"+t]=n},getAttachment:function(e,t){return this.attachments[e+":"+t]},_attachAll:function(e,t){for(var n in t.attachments){var r=n.indexOf(":"),i=parseInt(n.substring(0,r),10),o=n.substring(r+1),a=e.slots[i];if(a.attachment&&a.attachment.name==o){var s=this.getAttachment(i,o);s&&a.setAttachment(s)}}}},c.Animation=function(e,t,n){this.name=e,this.timelines=t,this.duration=n},c.Animation.prototype={apply:function(e,t,n){n&&this.duration&&(t%=this.duration);for(var r=this.timelines,i=0,o=r.length;o>i;i++)r[i].apply(e,t,1)},mix:function(e,t,n,r){n&&this.duration&&(t%=this.duration);for(var i=this.timelines,o=0,a=i.length;a>o;o++)i[o].apply(e,t,r)}},c.binarySearch=function(e,t,n){var r=0,i=Math.floor(e.length/n)-2;if(!i)return n;for(var o=i>>>1;;){if(e[(o+1)*n]<=t?r=o+1:i=o,r==i)return(r+1)*n;o=r+i>>>1}},c.linearSearch=function(e,t,n){for(var r=0,i=e.length-n;i>=r;r+=n)if(e[r]>t)return r;return-1},c.Curves=function(e){this.curves=[],this.curves.length=6*(e-1)},c.Curves.prototype={setLinear:function(e){this.curves[6*e]=0},setStepped:function(e){this.curves[6*e]=-1},setCurve:function(e,t,n,r,i){var o=.1,a=o*o,s=a*o,l=3*o,u=3*a,c=6*a,h=6*s,d=2*-t+r,p=2*-n+i,f=3*(t-r)+1,m=3*(n-i)+1,v=6*e,g=this.curves;g[v]=t*l+d*u+f*s,g[v+1]=n*l+p*u+m*s,g[v+2]=d*c+f*h,g[v+3]=p*c+m*h,g[v+4]=f*h,g[v+5]=m*h},getCurvePercent:function(e,t){t=0>t?0:t>1?1:t;var n=6*e,r=this.curves,i=r[n];if(!i)return t;if(-1==i)return 0;for(var o=r[n+1],a=r[n+2],s=r[n+3],l=r[n+4],u=r[n+5],c=i,h=o,d=8;;){if(c>=t){var p=c-i,f=h-o;return f+(h-f)*(t-p)/(c-p)}if(!d)break;d--,i+=a,o+=s,a+=l,s+=u,c+=i,h+=o}return h+(1-h)*(t-c)/(1-c)}},c.RotateTimeline=function(e){this.curves=new c.Curves(e),this.frames=[],this.frames.length=2*e},c.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,n){e*=2,this.frames[e]=t,this.frames[e+1]=n},apply:function(e,t,n){var r,i=this.frames;if(!(t<i[0])){var o=e.bones[this.boneIndex];if(t>=i[i.length-2]){for(r=o.data.rotation+i[i.length-1]-o.rotation;r>180;)r-=360;for(;-180>r;)r+=360;return void(o.rotation+=r*n)}var a=c.binarySearch(i,t,2),s=i[a-1],l=i[a],u=1-(t-l)/(i[a-2]-l);for(u=this.curves.getCurvePercent(a/2-1,u),r=i[a+1]-s;r>180;)r-=360;for(;-180>r;)r+=360;for(r=o.data.rotation+(s+r*u)-o.rotation;r>180;)r-=360;for(;-180>r;)r+=360;o.rotation+=r*n}}},c.TranslateTimeline=function(e){this.curves=new c.Curves(e),this.frames=[],this.frames.length=3*e},c.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,n,r){e*=3,this.frames[e]=t,this.frames[e+1]=n,this.frames[e+2]=r},apply:function(e,t,n){var r=this.frames;if(!(t<r[0])){var i=e.bones[this.boneIndex];if(t>=r[r.length-3])return i.x+=(i.data.x+r[r.length-2]-i.x)*n,void(i.y+=(i.data.y+r[r.length-1]-i.y)*n);var o=c.binarySearch(r,t,3),a=r[o-2],s=r[o-1],l=r[o],u=1-(t-l)/(r[o+-3]-l);u=this.curves.getCurvePercent(o/3-1,u),i.x+=(i.data.x+a+(r[o+1]-a)*u-i.x)*n,i.y+=(i.data.y+s+(r[o+2]-s)*u-i.y)*n}}},c.ScaleTimeline=function(e){this.curves=new c.Curves(e),this.frames=[],this.frames.length=3*e},c.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,n,r){e*=3,this.frames[e]=t,this.frames[e+1]=n,this.frames[e+2]=r},apply:function(e,t,n){var r=this.frames;if(!(t<r[0])){var i=e.bones[this.boneIndex];if(t>=r[r.length-3])return i.scaleX+=(i.data.scaleX-1+r[r.length-2]-i.scaleX)*n,void(i.scaleY+=(i.data.scaleY-1+r[r.length-1]-i.scaleY)*n);var o=c.binarySearch(r,t,3),a=r[o-2],s=r[o-1],l=r[o],u=1-(t-l)/(r[o+-3]-l);u=this.curves.getCurvePercent(o/3-1,u),i.scaleX+=(i.data.scaleX-1+a+(r[o+1]-a)*u-i.scaleX)*n,i.scaleY+=(i.data.scaleY-1+s+(r[o+2]-s)*u-i.scaleY)*n}}},c.ColorTimeline=function(e){this.curves=new c.Curves(e),this.frames=[],this.frames.length=5*e},c.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t){e*=5,this.frames[e]=t,this.frames[e+1]=r,this.frames[e+2]=g,this.frames[e+3]=b,this.frames[e+4]=a},apply:function(e,t,n){var r=this.frames;if(!(t<r[0])){var i=e.slots[this.slotIndex];if(t>=r[r.length-5]){var o=r.length-1;return i.r=r[o-3],i.g=r[o-2],i.b=r[o-1],void(i.a=r[o])}var a=c.binarySearch(r,t,5),s=r[a-4],l=r[a-3],u=r[a-2],h=r[a-1],d=r[a],p=1-(t-d)/(r[a-5]-d);p=this.curves.getCurvePercent(a/5-1,p);var f=s+(r[a+1]-s)*p,m=l+(r[a+2]-l)*p,v=u+(r[a+3]-u)*p,g=h+(r[a+4]-h)*p;1>n?(i.r+=(f-i.r)*n,i.g+=(m-i.g)*n,i.b+=(v-i.b)*n,i.a+=(g-i.a)*n):(i.r=f,i.g=m,i.b=v,i.a=g)}}},c.AttachmentTimeline=function(e){this.curves=new c.Curves(e),this.frames=[],this.frames.length=e,this.attachmentNames=[],this.attachmentNames.length=e},c.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(e,t,n){this.frames[e]=t,this.attachmentNames[e]=n},apply:function(e,t){var n=this.frames;if(!(t<n[0])){var r;r=t>=n[n.length-1]?n.length-1:c.binarySearch(n,t,1)-1;var i=this.attachmentNames[r];e.slots[this.slotIndex].setAttachment(i?e.getAttachmentBySlotIndex(this.slotIndex,i):null)}}},c.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.animations=[]},c.SkeletonData.prototype={defaultSkin:null,findBone:function(e){for(var t=this.bones,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null},findBoneIndex:function(e){for(var t=this.bones,n=0,r=t.length;r>n;n++)if(t[n].name==e)return n;return-1},findSlot:function(e){for(var t=this.slots,n=0,r=t.length;r>n;n++)if(t[n].name==e)return slot[n];return null},findSlotIndex:function(e){for(var t=this.slots,n=0,r=t.length;r>n;n++)if(t[n].name==e)return n;return-1},findSkin:function(e){for(var t=this.skins,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null},findAnimation:function(e){for(var t=this.animations,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null}},c.Skeleton=function(e){this.data=e,this.bones=[];for(var t=0,n=e.bones.length;n>t;t++){var r=e.bones[t],i=r.parent?this.bones[e.bones.indexOf(r.parent)]:null;this.bones.push(new c.Bone(r,i))}for(this.slots=[],this.drawOrder=[],t=0,n=e.slots.length;n>t;t++){var o=e.slots[t],a=this.bones[e.bones.indexOf(o.boneData)],s=new c.Slot(o,this,a);this.slots.push(s),this.drawOrder.push(s)}},c.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var e=this.flipX,t=this.flipY,n=this.bones,r=0,i=n.length;i>r;r++)n[r].updateWorldTransform(e,t)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var e=this.bones,t=0,n=e.length;n>t;t++)e[t].setToSetupPose()},setSlotsToSetupPose:function(){for(var e=this.slots,t=0,n=e.length;n>t;t++)e[t].setToSetupPose(t)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(e){for(var t=this.bones,n=0,r=t.length;r>n;n++)if(t[n].data.name==e)return t[n];return null},findBoneIndex:function(e){for(var t=this.bones,n=0,r=t.length;r>n;n++)if(t[n].data.name==e)return n;return-1},findSlot:function(e){for(var t=this.slots,n=0,r=t.length;r>n;n++)if(t[n].data.name==e)return t[n];return null},findSlotIndex:function(e){for(var t=this.slots,n=0,r=t.length;r>n;n++)if(t[n].data.name==e)return n;return-1},setSkinByName:function(e){var t=this.data.findSkin(e);if(!t)throw"Skin not found: "+e;this.setSkin(t)},setSkin:function(e){this.skin&&e&&e._attachAll(this,this.skin),this.skin=e},getAttachmentBySlotName:function(e,t){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(e),t)},getAttachmentBySlotIndex:function(e,t){if(this.skin){var n=this.skin.getAttachment(e,t);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null},setAttachment:function(e,t){for(var n=this.slots,r=0,i=n.size;i>r;r++){var o=n[r];if(o.data.name==e){var a=null;if(t&&(a=this.getAttachment(r,t),null==a))throw"Attachment not found: "+t+", for slot: "+e;return void o.setAttachment(a)}}throw"Slot not found: "+e},update:function(e){time+=e}},c.AttachmentType={region:0},c.RegionAttachment=function(){this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},c.RegionAttachment.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(e,t,n,r,i){var o=this.uvs;i?(o[2]=e,o[3]=r,o[4]=e,o[5]=t,o[6]=n,o[7]=t,o[0]=n,o[1]=r):(o[0]=e,o[1]=r,o[2]=e,o[3]=t,o[4]=n,o[5]=t,o[6]=n,o[7]=r)},updateOffset:function(){var e=this.width/this.regionOriginalWidth*this.scaleX,t=this.height/this.regionOriginalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.regionOffsetX*e,r=-this.height/2*this.scaleY+this.regionOffsetY*t,i=n+this.regionWidth*e,o=r+this.regionHeight*t,a=this.rotation*Math.PI/180,s=Math.cos(a),l=Math.sin(a),u=n*s+this.x,c=n*l,h=r*s+this.y,d=r*l,p=i*s+this.x,f=i*l,m=o*s+this.y,v=o*l,g=this.offset;g[0]=u-d,g[1]=h+c,g[2]=u-v,g[3]=m+c,g[4]=p-v,g[5]=m+f,g[6]=p-d,g[7]=h+f},computeVertices:function(e,t,n,r){e+=n.worldX,t+=n.worldY;var i=n.m00,o=n.m01,a=n.m10,s=n.m11,l=this.offset;r[0]=l[0]*i+l[1]*o+e,r[1]=l[0]*a+l[1]*s+t,r[2]=l[2]*i+l[3]*o+e,r[3]=l[2]*a+l[3]*s+t,r[4]=l[4]*i+l[5]*o+e,r[5]=l[4]*a+l[5]*s+t,r[6]=l[6]*i+l[7]*o+e,r[7]=l[6]*a+l[7]*s+t}},c.AnimationStateData=function(e){this.skeletonData=e,this.animationToMixTime={}},c.AnimationStateData.prototype={defaultMix:0,setMixByName:function(e,t,n){var r=this.skeletonData.findAnimation(e);if(!r)throw"Animation not found: "+e;var i=this.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;this.setMix(r,i,n)},setMix:function(e,t,n){this.animationToMixTime[e.name+":"+t.name]=n},getMix:function(e,t){var n=this.animationToMixTime[e.name+":"+t.name];return n?n:this.defaultMix}},c.AnimationState=function(e){this.data=e,this.queue=[]},c.AnimationState.prototype={current:null,previous:null,currentTime:0,previousTime:0,currentLoop:!1,previousLoop:!1,mixTime:0,mixDuration:0,update:function(e){if(this.currentTime+=e,this.previousTime+=e,this.mixTime+=e,this.queue.length>0){var t=this.queue[0];this.currentTime>=t.delay&&(this._setAnimation(t.animation,t.loop),this.queue.shift())}},apply:function(e){if(this.current)if(this.previous){this.previous.apply(e,this.previousTime,this.previousLoop);var t=this.mixTime/this.mixDuration;t>=1&&(t=1,this.previous=null),this.current.mix(e,this.currentTime,this.currentLoop,t)}else this.current.apply(e,this.currentTime,this.currentLoop)},clearAnimation:function(){this.previous=null,this.current=null,this.queue.length=0},_setAnimation:function(e,t){this.previous=null,e&&this.current&&(this.mixDuration=this.data.getMix(this.current,e),this.mixDuration>0&&(this.mixTime=0,this.previous=this.current,this.previousTime=this.currentTime,this.previousLoop=this.currentLoop)),this.current=e,this.currentLoop=t,this.currentTime=0},setAnimationByName:function(e,t){var n=this.data.skeletonData.findAnimation(e);if(!n)throw"Animation not found: "+e;this.setAnimation(n,t)},setAnimation:function(e,t){this.queue.length=0,this._setAnimation(e,t)},addAnimationByName:function(e,t,n){var r=this.data.skeletonData.findAnimation(e);if(!r)throw"Animation not found: "+e;this.addAnimation(r,t,n)},addAnimation:function(e,t,n){var r={};if(r.animation=e,r.loop=t,!n||0>=n){var i=this.queue.length?this.queue[this.queue.length-1].animation:this.current;n=null!=i?i.duration-this.data.getMix(i,e)+(n||0):0}r.delay=n,this.queue.push(r)},isComplete:function(){return!this.current||this.currentTime>=this.current.duration}},c.SkeletonJson=function(e){this.attachmentLoader=e},c.SkeletonJson.prototype={scale:1,readSkeletonData:function(e){for(var t,n=new c.SkeletonData,r=e.bones,i=0,o=r.length;o>i;i++){var a=r[i],s=null;if(a.parent&&(s=n.findBone(a.parent),!s))throw"Parent bone not found: "+a.parent;t=new c.BoneData(a.name,s),t.length=(a.length||0)*this.scale,t.x=(a.x||0)*this.scale,t.y=(a.y||0)*this.scale,t.rotation=a.rotation||0,t.scaleX=a.scaleX||1,t.scaleY=a.scaleY||1,n.bones.push(t)}var l=e.slots;for(i=0,o=l.length;o>i;i++){var u=l[i];if(t=n.findBone(u.bone),!t)throw"Slot bone not found: "+u.bone;var h=new c.SlotData(u.name,t),d=u.color;d&&(h.r=c.SkeletonJson.toColor(d,0),h.g=c.SkeletonJson.toColor(d,1),h.b=c.SkeletonJson.toColor(d,2),h.a=c.SkeletonJson.toColor(d,3)),h.attachmentName=u.attachment,n.slots.push(h)}var p=e.skins;for(var f in p)if(p.hasOwnProperty(f)){var m=p[f],v=new c.Skin(f);for(var g in m)if(m.hasOwnProperty(g)){var E=n.findSlotIndex(g),y=m[g];for(var x in y)if(y.hasOwnProperty(x)){var T=this.readAttachment(v,x,y[x]);null!=T&&v.addAttachment(E,x,T)}}n.skins.push(v),"default"==v.name&&(n.defaultSkin=v)}var b=e.animations;for(var w in b)b.hasOwnProperty(w)&&this.readAnimation(w,b[w],n);return n},readAttachment:function(e,t,n){t=n.name||t;var r=c.AttachmentType[n.type||"region"];if(r==c.AttachmentType.region){var i=new c.RegionAttachment;return i.x=(n.x||0)*this.scale,i.y=(n.y||0)*this.scale,i.scaleX=n.scaleX||1,i.scaleY=n.scaleY||1,i.rotation=n.rotation||0,i.width=(n.width||32)*this.scale,i.height=(n.height||32)*this.scale,i.updateOffset(),i.rendererObject={},i.rendererObject.name=t,i.rendererObject.scale={},i.rendererObject.scale.x=i.scaleX,i.rendererObject.scale.y=i.scaleY,i.rendererObject.rotation=-i.rotation*Math.PI/180,i}throw"Unknown attachment type: "+r},readAnimation:function(e,t,n){var r,i,o,a,s,l,u,h=[],d=0,p=t.bones;for(var f in p)if(p.hasOwnProperty(f)){var m=n.findBoneIndex(f);if(-1==m)throw"Bone not found: "+f;var v=p[f];for(o in v)if(v.hasOwnProperty(o))if(s=v[o],"rotate"==o){for(i=new c.RotateTimeline(s.length),i.boneIndex=m,r=0,l=0,u=s.length;u>l;l++)a=s[l],i.setFrame(r,a.time,a.angle),c.SkeletonJson.readCurve(i,r,a),r++;h.push(i),d=Math.max(d,i.frames[2*i.getFrameCount()-2])}else{if("translate"!=o&&"scale"!=o)throw"Invalid timeline type for a bone: "+o+" ("+f+")";var g=1;for("scale"==o?i=new c.ScaleTimeline(s.length):(i=new c.TranslateTimeline(s.length),g=this.scale),i.boneIndex=m,r=0,l=0,u=s.length;u>l;l++){a=s[l];var E=(a.x||0)*g,y=(a.y||0)*g;i.setFrame(r,a.time,E,y),c.SkeletonJson.readCurve(i,r,a),r++}h.push(i),d=Math.max(d,i.frames[3*i.getFrameCount()-3])}}var x=t.slots;for(var T in x)if(x.hasOwnProperty(T)){var b=x[T],w=n.findSlotIndex(T);for(o in b)if(b.hasOwnProperty(o))if(s=b[o],"color"==o){for(i=new c.ColorTimeline(s.length),i.slotIndex=w,r=0,l=0,u=s.length;u>l;l++){a=s[l];var _=a.color,R=c.SkeletonJson.toColor(_,0),S=c.SkeletonJson.toColor(_,1),M=c.SkeletonJson.toColor(_,2),C=c.SkeletonJson.toColor(_,3);i.setFrame(r,a.time,R,S,M,C),c.SkeletonJson.readCurve(i,r,a),r++}h.push(i),d=Math.max(d,i.frames[5*i.getFrameCount()-5])}else{if("attachment"!=o)throw"Invalid timeline type for a slot: "+o+" ("+T+")";for(i=new c.AttachmentTimeline(s.length),i.slotIndex=w,r=0,l=0,u=s.length;u>l;l++)a=s[l],i.setFrame(r++,a.time,a.name);h.push(i),d=Math.max(d,i.frames[i.getFrameCount()-1])}}n.animations.push(new c.Animation(e,h,d))}},c.SkeletonJson.readCurve=function(e,t,n){var r=n.curve;r&&("stepped"==r?e.curves.setStepped(t):r instanceof Array&&e.curves.setCurve(t,r[0],r[1],r[2],r[3]))},c.SkeletonJson.toColor=function(e,t){if(8!=e.length)throw"Color hexidecimal length must be 8, recieved: "+e;return parseInt(e.substring(2*t,2),16)/255},c.Atlas=function(e,t){this.textureLoader=t,this.pages=[],this.regions=[];var n=new c.AtlasReader(e),r=[];r.length=4;for(var i=null;;){var o=n.readLine();if(null==o)break;if(o=n.trim(o),o.length)if(i){var a=new c.AtlasRegion;a.name=o,a.page=i,a.rotate="true"==n.readValue(),n.readTuple(r);var s=parseInt(r[0],10),l=parseInt(r[1],10);n.readTuple(r);var u=parseInt(r[0],10),h=parseInt(r[1],10);a.u=s/i.width,a.v=l/i.height,a.rotate?(a.u2=(s+h)/i.width,a.v2=(l+u)/i.height):(a.u2=(s+u)/i.width,a.v2=(l+h)/i.height),a.x=s,a.y=l,a.width=Math.abs(u),a.height=Math.abs(h),4==n.readTuple(r)&&(a.splits=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)],4==n.readTuple(r)&&(a.pads=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)],n.readTuple(r))),a.originalWidth=parseInt(r[0],10),a.originalHeight=parseInt(r[1],10),n.readTuple(r),a.offsetX=parseInt(r[0],10),a.offsetY=parseInt(r[1],10),a.index=parseInt(n.readValue(),10),this.regions.push(a)}else{i=new c.AtlasPage,i.name=o,i.format=c.Atlas.Format[n.readValue()],n.readTuple(r),i.minFilter=c.Atlas.TextureFilter[r[0]],i.magFilter=c.Atlas.TextureFilter[r[1]];var d=n.readValue();i.uWrap=c.Atlas.TextureWrap.clampToEdge,i.vWrap=c.Atlas.TextureWrap.clampToEdge,"x"==d?i.uWrap=c.Atlas.TextureWrap.repeat:"y"==d?i.vWrap=c.Atlas.TextureWrap.repeat:"xy"==d&&(i.uWrap=i.vWrap=c.Atlas.TextureWrap.repeat),t.load(i,o),this.pages.push(i)}else i=null}},c.Atlas.prototype={findRegion:function(e){for(var t=this.regions,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null},dispose:function(){for(var e=this.pages,t=0,n=e.length;n>t;t++)this.textureLoader.unload(e[t].rendererObject)},updateUVs:function(e){for(var t=this.regions,n=0,r=t.length;r>n;n++){var i=t[n];i.page==e&&(i.u=i.x/e.width,i.v=i.y/e.height,i.rotate?(i.u2=(i.x+i.height)/e.width,i.v2=(i.y+i.width)/e.height):(i.u2=(i.x+i.width)/e.width,i.v2=(i.y+i.height)/e.height))}}},c.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},c.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},c.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},c.AtlasPage=function(){},c.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},c.AtlasRegion=function(){},c.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},c.AtlasReader=function(e){this.lines=e.split(/\r\n|\r|\n/)},c.AtlasReader.prototype={index:0,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var e=this.readLine(),t=e.indexOf(":");if(-1==t)throw"Invalid line: "+e;return this.trim(e.substring(t+1))},readTuple:function(e){var t=this.readLine(),n=t.indexOf(":");if(-1==n)throw"Invalid line: "+t;for(var r=0,i=n+1;3>r;r++){var o=t.indexOf(",",i);if(-1==o){if(!r)throw"Invalid line: "+t;break}e[r]=this.trim(t.substr(i,o-i)),i=o+1}return e[r]=this.trim(t.substring(i)),r+1}},c.AtlasAttachmentLoader=function(e){this.atlas=e},c.AtlasAttachmentLoader.prototype={newAttachment:function(e,t,n){switch(t){case c.AttachmentType.region:var r=this.atlas.findRegion(n);if(!r)throw"Region not found in atlas: "+n+" ("+t+")";var i=new c.RegionAttachment(n);return i.rendererObject=r,i.setUVs(r.u,r.v,r.u2,r.v2,r.rotate),i.regionOffsetX=r.offsetX,i.regionOffsetY=r.offsetY,i.regionWidth=r.width,i.regionHeight=r.height,i.regionOriginalWidth=r.originalWidth,i.regionOriginalHeight=r.originalHeight,i}throw"Unknown attachment type: "+t}},c.Bone.yDown=!0,i.AnimCache={},i.Spine=function(e){if(i.DisplayObjectContainer.call(this),this.spineData=i.AnimCache[e],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+e);this.skeleton=new c.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new c.AnimationStateData(this.spineData),this.state=new c.AnimationState(this.stateData),this.slotContainers=[];for(var t=0,n=this.skeleton.drawOrder.length;n>t;t++){var r=this.skeleton.drawOrder[t],o=r.attachment,a=new i.DisplayObjectContainer;if(this.slotContainers.push(a),this.addChild(a),o instanceof c.RegionAttachment){var s=o.rendererObject.name,l=this.createSprite(r,o.rendererObject);r.currentSprite=l,r.currentSpriteName=s,a.addChild(l)}}},i.Spine.prototype=(0,s.default)(i.DisplayObjectContainer.prototype),i.Spine.prototype.constructor=i.Spine,i.Spine.prototype.updateTransform=function(){this.lastTime=this.lastTime||Date.now();var e=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.state.update(e),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var t=this.skeleton.drawOrder,n=0,r=t.length;r>n;n++){var o=t[n],a=o.attachment,s=this.slotContainers[n];if(a instanceof c.RegionAttachment){if(a.rendererObject&&(!o.currentSpriteName||o.currentSpriteName!=a.name)){var l=a.rendererObject.name;if(void 0!==o.currentSprite&&(o.currentSprite.visible=!1),o.sprites=o.sprites||{},void 0!==o.sprites[l])o.sprites[l].visible=!0;else{var u=this.createSprite(o,a.rendererObject);s.addChild(u)}o.currentSprite=o.sprites[l],o.currentSpriteName=l}s.visible=!0;var h=o.bone;s.position.x=h.worldX+a.x*h.m00+a.y*h.m01,s.position.y=h.worldY+a.x*h.m10+a.y*h.m11,s.scale.x=h.worldScaleX,s.scale.y=h.worldScaleY,s.rotation=-(o.bone.worldRotation*Math.PI/180)}else s.visible=!1}i.DisplayObjectContainer.prototype.updateTransform.call(this)},i.Spine.prototype.createSprite=function(e,t){var n=i.TextureCache[t.name]?t.name:t.name+".png",r=new i.Sprite(i.Texture.fromFrame(n));return r.scale=t.scale,r.rotation=t.rotation,r.anchor.x=r.anchor.y=.5,e.sprites=e.sprites||{},e.sprites[t.name]=r,r},i.BaseTextureCache={},i.texturesToUpdate=[],i.texturesToDestroy=[],i.BaseTexture=function(e,t){if(i.EventTarget.call(this),this.width=100,this.height=100,this.scaleMode=t||i.BaseTexture.SCALE_MODE.DEFAULT,this.hasLoaded=!1,this.source=e,e){if(this.source instanceof Image||this.source instanceof HTMLImageElement)if(this.source.complete)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,i.texturesToUpdate.push(this);else{var n=this;this.source.onload=function(){n.hasLoaded=!0,n.width=n.source.width,n.height=n.source.height,i.texturesToUpdate.push(n),n.dispatchEvent({type:"loaded",content:n})}}else this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,i.texturesToUpdate.push(this);this.imageUrl=null,this._powerOf2=!1,this._glTextures=[]}},i.BaseTexture.prototype.constructor=i.BaseTexture,i.BaseTexture.prototype.destroy=function(){this.source instanceof Image&&(this.imageUrl in i.BaseTextureCache&&delete i.BaseTextureCache[this.imageUrl],this.imageUrl=null,this.source.src=null),this.source=null,i.texturesToDestroy.push(this)},i.BaseTexture.prototype.updateSourceImage=function(e){this.hasLoaded=!1,this.source.src=null,this.source.src=e},i.BaseTexture.fromImage=function(e,t,n){var r=i.BaseTextureCache[e];if(!r){var o=new Image;t&&(o.crossOrigin=""),o.src=e,r=new i.BaseTexture(o,n),r.imageUrl=e,i.BaseTextureCache[e]=r}return r},i.BaseTexture.SCALE_MODE={DEFAULT:0,LINEAR:0,NEAREST:1},i.TextureCache={},i.FrameCache={},i.Texture=function(e,t){if(i.EventTarget.call(this),t||(this.noFrame=!0,t=new i.Rectangle(0,0,1,1)),e instanceof i.Texture&&(e=e.baseTexture),this.baseTexture=e,this.frame=t,this.trim=new i.Point,this.scope=this,e.hasLoaded)this.noFrame&&(t=new i.Rectangle(0,0,e.width,e.height)),this.setFrame(t);else{var n=this;e.addEventListener("loaded",function(){n.onBaseTextureLoaded()})}},i.Texture.prototype.constructor=i.Texture,i.Texture.prototype.onBaseTextureLoaded=function(){var e=this.baseTexture;e.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new i.Rectangle(0,0,e.width,e.height)),this.setFrame(this.frame),this.scope.dispatchEvent({type:"update",content:this})},i.Texture.prototype.destroy=function(e){e&&this.baseTexture.destroy()},i.Texture.prototype.setFrame=function(e){if(this.frame=e,this.width=e.width,this.height=e.height,e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.updateFrame=!0,i.Texture.frameUpdates.push(this)},i.Texture.prototype._updateWebGLuvs=function(){this._uvs||(this._uvs=new Float32Array(8));var e=this.frame,t=this.baseTexture.width,n=this.baseTexture.height;this._uvs[0]=e.x/t,this._uvs[1]=e.y/n,this._uvs[2]=(e.x+e.width)/t,this._uvs[3]=e.y/n,this._uvs[4]=(e.x+e.width)/t,this._uvs[5]=(e.y+e.height)/n,this._uvs[6]=e.x/t,this._uvs[7]=(e.y+e.height)/n},i.Texture.fromImage=function(e,t,n){var r=i.TextureCache[e];return r||(r=new i.Texture(i.BaseTexture.fromImage(e,t,n)),i.TextureCache[e]=r),r},i.Texture.fromFrame=function(e){var t=i.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache ');return t},i.Texture.fromCanvas=function(e,t){var n=new i.BaseTexture(e,t);return new i.Texture(n)},i.Texture.addTextureToCache=function(e,t){i.TextureCache[t]=e},i.Texture.removeTextureFromCache=function(e){var t=i.TextureCache[e];return i.TextureCache[e]=null,t},i.Texture.frameUpdates=[],i.Texture.SCALE_MODE=i.BaseTexture.SCALE_MODE,i.RenderTexture=function(e,t,n){if(i.EventTarget.call(this),this.width=e||100,this.height=t||100,this.identityMatrix=i.mat3.create(),this.frame=new i.Rectangle(0,0,this.width,this.height),this.baseTexture=new i.BaseTexture,this.baseTexture.width=this.width,this.baseTexture.height=this.height,this.baseTexture._glTextures=[],this.baseTexture.hasLoaded=!0,this.renderer=n||i.defaultRenderer,this.renderer.type===i.WEBGL_RENDERER){var r=this.renderer.gl;this.textureBuffer=new i.FilterTexture(r,this.width,this.height),this.baseTexture._glTextures[r.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new i.Point(this.width/2,-this.height/2)}else this.render=this.renderCanvas,this.textureBuffer=new i.CanvasBuffer(this.width,this.height),this.baseTexture.source=this.textureBuffer.canvas;i.Texture.frameUpdates.push(this)},i.RenderTexture.prototype=(0,s.default)(i.Texture.prototype),i.RenderTexture.prototype.constructor=i.RenderTexture,i.RenderTexture.prototype.resize=function(e,t){if(this.width=e,this.height=t,this.frame.width=this.width,this.frame.height=this.height,this.renderer.type===i.WEBGL_RENDERER){this.projection.x=this.width/2,this.projection.y=-this.height/2;var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.baseTexture._glTextures[n.id]),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null)}else this.textureBuffer.resize(this.width,this.height);i.Texture.frameUpdates.push(this)},i.RenderTexture.prototype.renderWebGL=function(e,t,n){var r=this.renderer.gl;r.colorMask(!0,!0,!0,!0),r.viewport(0,0,this.width,this.height),r.bindFramebuffer(r.FRAMEBUFFER,this.textureBuffer.frameBuffer),n&&this.textureBuffer.clear();var o=e.children,a=e.worldTransform;e.worldTransform=i.mat3.create(),e.worldTransform[4]=-1,e.worldTransform[5]=-2*this.projection.y,t&&(e.worldTransform[2]=t.x,e.worldTransform[5]-=t.y);for(var s=0,l=o.length;l>s;s++)o[s].updateTransform();this.renderer.renderDisplayObject(e,this.projection,this.textureBuffer.frameBuffer),e.worldTransform=a},i.RenderTexture.prototype.renderCanvas=function(e,t,n){var r=e.children;e.worldTransform=i.mat3.create(),t&&(e.worldTransform[2]=t.x,e.worldTransform[5]=t.y);for(var o=0,a=r.length;a>o;o++)r[o].updateTransform();n&&this.textureBuffer.clear();var s=this.textureBuffer.context;this.renderer.renderDisplayObject(e,s),s.setTransform(1,0,0,1,0,0)},i.AssetLoader=function(e,t){i.EventTarget.call(this),this.assetURLs=e,this.crossorigin=t,this.loadersByType={jpg:i.ImageLoader,jpeg:i.ImageLoader,png:i.ImageLoader,gif:i.ImageLoader,json:i.JsonLoader,atlas:i.AtlasLoader,anim:i.SpineLoader,xml:i.BitmapFontLoader,fnt:i.BitmapFontLoader}},i.AssetLoader.prototype.constructor=i.AssetLoader,i.AssetLoader.prototype._getDataType=function(e){var t="data:",n=e.slice(0,t.length).toLowerCase();if(n===t){var r=e.slice(t.length),i=r.indexOf(",");if(-1===i)return null;var o=r.slice(0,i).split(";")[0];return o&&"text/plain"!==o.toLowerCase()?o.split("/").pop().toLowerCase():"txt"}return null},i.AssetLoader.prototype.load=function(){function e(){t.onAssetLoaded()}var t=this;this.loadCount=this.assetURLs.length;for(var n=0;n<this.assetURLs.length;n++){var r=this.assetURLs[n],i=this._getDataType(r);i||(i=r.split("?").shift().split(".").pop().toLowerCase());var o=this.loadersByType[i];if(!o)throw new Error(i+" is an unsupported file type");var a=new o(r,this.crossorigin);a.addEventListener("loaded",e),a.load()}},i.AssetLoader.prototype.onAssetLoaded=function(){this.loadCount--,this.dispatchEvent({type:"onProgress",content:this}),this.onProgress&&this.onProgress(),this.loadCount||(this.dispatchEvent({type:"onComplete",content:this}),this.onComplete&&this.onComplete())},i.JsonLoader=function(e,t){i.EventTarget.call(this),this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.loaded=!1},i.JsonLoader.prototype.constructor=i.JsonLoader,i.JsonLoader.prototype.load=function(){this.ajaxRequest=new i.AjaxRequest;var e=this;this.ajaxRequest.onreadystatechange=function(){e.onJSONLoaded()},this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},i.JsonLoader.prototype.onJSONLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))if(this.json=JSON.parse(this.ajaxRequest.responseText),
this.json.frames){var e=this,t=this.baseUrl+this.json.meta.image,n=new i.ImageLoader(t,this.crossorigin),r=this.json.frames;this.texture=n.texture.baseTexture,n.addEventListener("loaded",function(){e.onLoaded()});for(var o in r){var a=r[o].frame;if(a&&(i.TextureCache[o]=new i.Texture(this.texture,{x:a.x,y:a.y,width:a.w,height:a.h}),r[o].trimmed)){var s=i.TextureCache[o];s.trimmed=!0;var l=r[o].sourceSize,u=r[o].spriteSourceSize;s.trim.x=u.x,s.trim.y=u.y,s.trim.realWidth=l.w,s.trim.realHeight=l.h}}n.load()}else if(this.json.bones){var h=new c.SkeletonJson,d=h.readSkeletonData(this.json);i.AnimCache[this.url]=d,this.onLoaded()}else this.onLoaded();else this.onError()},i.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},i.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},i.AtlasLoader=function(e,t){i.EventTarget.call(this),this.url=e,this.baseUrl=e.replace(/[^\/]*$/,""),this.crossorigin=t,this.loaded=!1},i.AtlasLoader.constructor=i.AtlasLoader,i.AtlasLoader.prototype.load=function(){this.ajaxRequest=new i.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},i.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var e=this.ajaxRequest.responseText.split(/\r?\n/),t=-3,n=0,r=null,o=!1,a=0,s=0,l=this.onLoaded.bind(this);for(a=0;a<e.length;a++)if(e[a]=e[a].replace(/^\s+|\s+$/g,""),""===e[a]&&(o=a+1),e[a].length>0){if(o===a)this.atlas.meta.image.push(e[a]),n=this.atlas.meta.image.length-1,this.atlas.frames.push({}),t=-3;else if(t>0)if(t%7===1)null!=r&&(this.atlas.frames[n][r.name]=r),r={name:e[a],frame:{}};else{var u=e[a].split(" ");if(t%7===3)r.frame.x=Number(u[1].replace(",","")),r.frame.y=Number(u[2]);else if(t%7===4)r.frame.w=Number(u[1].replace(",","")),r.frame.h=Number(u[2]);else if(t%7===5){var c={x:0,y:0,w:Number(u[1].replace(",","")),h:Number(u[2])};c.w>r.frame.w||c.h>r.frame.h?(r.trimmed=!0,r.realSize=c):r.trimmed=!1}}t++}if(null!=r&&(this.atlas.frames[n][r.name]=r),this.atlas.meta.image.length>0){for(this.images=[],s=0;s<this.atlas.meta.image.length;s++){var h=this.baseUrl+this.atlas.meta.image[s],d=this.atlas.frames[s];this.images.push(new i.ImageLoader(h,this.crossorigin));for(a in d){var p=d[a].frame;p&&(i.TextureCache[a]=new i.Texture(this.images[s].texture.baseTexture,{x:p.x,y:p.y,width:p.w,height:p.h}),d[a].trimmed&&(i.TextureCache[a].realSize=d[a].realSize,i.TextureCache[a].trim.x=0,i.TextureCache[a].trim.y=0))}}for(this.currentImageId=0,s=0;s<this.images.length;s++)this.images[s].addEventListener("loaded",l);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},i.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.dispatchEvent({type:"loaded",content:this}))},i.AtlasLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},i.SpriteSheetLoader=function(e,t){i.EventTarget.call(this),this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},i.SpriteSheetLoader.prototype.constructor=i.SpriteSheetLoader,i.SpriteSheetLoader.prototype.load=function(){var e=this,t=new i.JsonLoader(this.url,this.crossorigin);t.addEventListener("loaded",function(t){e.json=t.content.json,e.onLoaded()}),t.load()},i.SpriteSheetLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},i.ImageLoader=function(e,t){i.EventTarget.call(this),this.texture=i.Texture.fromImage(e,t),this.frames=[]},i.ImageLoader.prototype.constructor=i.ImageLoader,i.ImageLoader.prototype.load=function(){if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var e=this;this.texture.baseTexture.addEventListener("loaded",function(){e.onLoaded()})}},i.ImageLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},i.ImageLoader.prototype.loadFramedSpriteSheet=function(e,t,n){this.frames=[];for(var r=Math.floor(this.texture.width/e),o=Math.floor(this.texture.height/t),a=0,s=0;o>s;s++)for(var l=0;r>l;l++,a++){var u=new i.Texture(this.texture,{x:l*e,y:s*t,width:e,height:t});this.frames.push(u),n&&(i.TextureCache[n+"-"+a]=u)}if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var c=this;this.texture.baseTexture.addEventListener("loaded",function(){c.onLoaded()})}},i.BitmapFontLoader=function(e,t){i.EventTarget.call(this),this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture=null},i.BitmapFontLoader.prototype.constructor=i.BitmapFontLoader,i.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new XMLHttpRequest;var e=this;this.ajaxRequest.onreadystatechange=function(){e.onXMLLoaded()},this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},i.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var e=this.ajaxRequest.responseXML;if(!e||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var t=new DOMParser;e=t.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var n=document.createElement("div");n.innerHTML=this.ajaxRequest.responseText,e=n}var r=this.baseUrl+e.getElementsByTagName("page")[0].getAttribute("file"),o=new i.ImageLoader(r,this.crossorigin);this.texture=o.texture.baseTexture;var a={},s=e.getElementsByTagName("info")[0],l=e.getElementsByTagName("common")[0];a.font=s.getAttribute("face"),a.size=parseInt(s.getAttribute("size"),10),a.lineHeight=parseInt(l.getAttribute("lineHeight"),10),a.chars={};for(var u=e.getElementsByTagName("char"),c=0;c<u.length;c++){var h=parseInt(u[c].getAttribute("id"),10),d=new i.Rectangle(parseInt(u[c].getAttribute("x"),10),parseInt(u[c].getAttribute("y"),10),parseInt(u[c].getAttribute("width"),10),parseInt(u[c].getAttribute("height"),10));a.chars[h]={xOffset:parseInt(u[c].getAttribute("xoffset"),10),yOffset:parseInt(u[c].getAttribute("yoffset"),10),xAdvance:parseInt(u[c].getAttribute("xadvance"),10),kerning:{},texture:i.TextureCache[h]=new i.Texture(this.texture,d)}}var p=e.getElementsByTagName("kerning");for(c=0;c<p.length;c++){var f=parseInt(p[c].getAttribute("first"),10),m=parseInt(p[c].getAttribute("second"),10),v=parseInt(p[c].getAttribute("amount"),10);a.chars[m].kerning[f]=v}i.BitmapText.fonts[a.font]=a;var g=this;o.addEventListener("loaded",function(){g.onLoaded()}),o.load()}},i.BitmapFontLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},i.SpineLoader=function(e,t){i.EventTarget.call(this),this.url=e,this.crossorigin=t,this.loaded=!1},i.SpineLoader.prototype.constructor=i.SpineLoader,i.SpineLoader.prototype.load=function(){var e=this,t=new i.JsonLoader(this.url,this.crossorigin);t.addEventListener("loaded",function(t){e.json=t.content.json,e.onLoaded()}),t.load()},i.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},i.AbstractFilter=function(e,t){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=t||{},this.fragmentSrc=e||[]},i.AlphaMaskFilter=function(e){i.AbstractFilter.call(this),this.passes=[this],e.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:e},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},e.baseTexture.hasLoaded?(this.uniforms.mask.value.x=e.width,this.uniforms.mask.value.y=e.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),e.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},i.AlphaMaskFilter.prototype=(0,s.default)(i.AbstractFilter.prototype),i.AlphaMaskFilter.prototype.constructor=i.AlphaMaskFilter,i.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(i.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(e){this.uniforms.mask.value=e}}),i.ColorMatrixFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},i.ColorMatrixFilter.prototype=(0,s.default)(i.AbstractFilter.prototype),i.ColorMatrixFilter.prototype.constructor=i.ColorMatrixFilter,Object.defineProperty(i.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(e){this.uniforms.matrix.value=e}}),i.GrayFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},i.GrayFilter.prototype=(0,s.default)(i.AbstractFilter.prototype),i.GrayFilter.prototype.constructor=i.GrayFilter,Object.defineProperty(i.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(e){this.uniforms.gray.value=e}}),i.DisplacementFilter=function(e){i.AbstractFilter.call(this),this.passes=[this],e.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:e},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},e.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=e.width,this.uniforms.mapDimensions.value.y=e.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),e.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},i.DisplacementFilter.prototype=(0,s.default)(i.AbstractFilter.prototype),i.DisplacementFilter.prototype.constructor=i.DisplacementFilter,i.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(i.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(e){this.uniforms.displacementMap.value=e}}),Object.defineProperty(i.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}}),Object.defineProperty(i.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}}),i.PixelateFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},i.PixelateFilter.prototype=(0,s.default)(i.AbstractFilter.prototype),i.PixelateFilter.prototype.constructor=i.PixelateFilter,Object.defineProperty(i.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(e){this.dirty=!0,this.uniforms.pixelSize.value=e}}),i.BlurXFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},i.BlurXFilter.prototype=(0,s.default)(i.AbstractFilter.prototype),i.BlurXFilter.prototype.constructor=i.BlurXFilter,Object.defineProperty(i.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.dirty=!0,this.uniforms.blur.value=1/7e3*e}}),i.BlurYFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},i.BlurYFilter.prototype=(0,s.default)(i.AbstractFilter.prototype),i.BlurYFilter.prototype.constructor=i.BlurYFilter,Object.defineProperty(i.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),i.BlurFilter=function(){this.blurXFilter=new i.BlurXFilter,this.blurYFilter=new i.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},Object.defineProperty(i.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e}}),Object.defineProperty(i.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}}),Object.defineProperty(i.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e}}),i.InvertFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},i.InvertFilter.prototype=(0,s.default)(i.AbstractFilter.prototype),i.InvertFilter.prototype.constructor=i.InvertFilter,Object.defineProperty(i.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(e){this.uniforms.invert.value=e}}),i.SepiaFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},i.SepiaFilter.prototype=(0,s.default)(i.AbstractFilter.prototype),i.SepiaFilter.prototype.constructor=i.SepiaFilter,Object.defineProperty(i.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(e){this.uniforms.sepia.value=e}}),i.TwistFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},i.TwistFilter.prototype=(0,s.default)(i.AbstractFilter.prototype),i.TwistFilter.prototype.constructor=i.TwistFilter,Object.defineProperty(i.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(e){this.dirty=!0,this.uniforms.offset.value=e}}),Object.defineProperty(i.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(e){this.dirty=!0,this.uniforms.radius.value=e}}),Object.defineProperty(i.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),i.ColorStepFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},i.ColorStepFilter.prototype=(0,s.default)(i.AbstractFilter.prototype),i.ColorStepFilter.prototype.constructor=i.ColorStepFilter,Object.defineProperty(i.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(e){this.uniforms.step.value=e}}),i.DotScreenFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},i.DotScreenFilter.prototype=(0,s.default)(i.DotScreenFilter.prototype),i.DotScreenFilter.prototype.constructor=i.DotScreenFilter,Object.defineProperty(i.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(e){this.dirty=!0,this.uniforms.scale.value=e}}),Object.defineProperty(i.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),i.CrossHatchFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},i.CrossHatchFilter.prototype=(0,s.default)(i.AbstractFilter.prototype),i.CrossHatchFilter.prototype.constructor=i.BlurYFilter,Object.defineProperty(i.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),i.RGBSplitFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},i.RGBSplitFilter.prototype=(0,s.default)(i.AbstractFilter.prototype),i.RGBSplitFilter.prototype.constructor=i.RGBSplitFilter,Object.defineProperty(i.RGBSplitFilter.prototype,"angle",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),"undefined"!=typeof e&&e.exports&&(t=e.exports=i),t.PIXI=i}).call(void 0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(114),o=r(i),a=n(605),s=r(a),l=n(610),u=r(l),c=n(52),h=r(c);Object.defineProperty(t,"__esModule",{value:!0});var d=d||{};d.gui=d.gui||{},d.utils=d.utils||{},d.controllers=d.controllers||{},d.dom=d.dom||{},d.color=d.color||{},d.utils.css=function(){return{load:function(e,t){var t=t||document,n=t.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t.getElementsByTagName("head")[0].appendChild(n)},inject:function(e,t){var t=t||document,n=document.createElement("style");n.type="text/css",n.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(n)}}}(),d.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),r=e.length-1;r>=0;r--)n=[e[r].apply(this,n)];return n[0]}},each:function(t,n,r){if(e&&t.forEach===e)t.forEach(n,r);else if(t.length===t.length+0)for(var i=0,o=t.length;i<o&&!(i in t&&n.call(r,t[i],i)===this.BREAK);i++);else for(i in t)if(n.call(r,t[i],i)===this.BREAK)break},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}}(),d.controllers.Controller=function(e){var t=function(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onFinishChange=this.__onChange=void 0};return e.extend(t.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(d.utils.common),d.dom.dom=function(e){function t(t){return"0"===t||e.isUndefined(t)?0:(t=t.match(r),e.isNull(t)?0:parseFloat(t[1]))}var n={};e.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(t,r){e.each(t,function(e){n[e]=r})});var r=/(\d+(\.\d+)?)px/,i={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(t,n,r){e.isUndefined(n)&&(n=!0),e.isUndefined(r)&&(r=!0),t.style.position="absolute",n&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,r,i,o){var i=i||{},a=n[r];if(!a)throw Error("Event type "+r+" not supported.");var s=document.createEvent(a);switch(a){case"MouseEvents":s.initMouseEvent(r,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,i.x||i.clientX||0,i.y||i.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":a=s.initKeyboardEvent||s.initKeyEvent,e.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),a(r,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(r,i.bubbles||!1,i.cancelable||!0)}e.defaults(s,o),t.dispatchEvent(s)},bind:function(e,t,n,r){return e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n),i},unbind:function(e,t,n,r){return e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n),i},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);n.indexOf(t)==-1&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return i},removeClass:function(e,t){if(t){if(void 0!==e.className)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);r!=-1&&(n.splice(r,1),e.className=n.join(" "))}}else e.className=void 0;return i},hasClass:function(e,t){return RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){return e=getComputedStyle(e),t(e["border-left-width"])+t(e["border-right-width"])+t(e["padding-left"])+t(e["padding-right"])+t(e.width)},getHeight:function(e){return e=getComputedStyle(e),t(e["border-top-width"])+t(e["border-bottom-width"])+t(e["padding-top"])+t(e["padding-bottom"])+t(e.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do t.left+=e.offsetLeft,t.top+=e.offsetTop;while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return i}(d.utils.common),d.controllers.OptionController=function(e,t,n){var r=function e(r,i,o){e.superclass.call(this,r,i);var a=this;if(this.__select=document.createElement("select"),n.isArray(o)){var s={};n.each(o,function(e){s[e]=e}),o=s}n.each(o,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)}),this.updateDisplay(),t.bind(this.__select,"change",function(){a.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){return e=r.superclass.prototype.setValue.call(this,e),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(d.controllers.Controller,d.dom.dom,d.utils.common),d.controllers.NumberController=function(e,t){var n=function e(n,r,i){e.superclass.call(this,n,r),i=i||{},this.__min=i.min,this.__max=i.max,this.__step=i.step,n=this.__impliedStep=t.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,n=n.toString(),this.__precision=n.indexOf(".")>-1?n.length-n.indexOf(".")-1:0};return n.superclass=e,t.extend(n.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&e%this.__step!=0&&(e=Math.round(e/this.__step)*this.__step),n.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this}}),n}(d.controllers.Controller,d.utils.common),d.controllers.NumberControllerBox=function(e,t,n){var r=function e(r,i,o){
function a(){var e=parseFloat(c.__input.value);n.isNaN(e)||c.setValue(e)}function s(e){var t=u-e.clientY;c.setValue(c.getValue()+t*c.__impliedStep),u=e.clientY}function l(){t.unbind(window,"mousemove",s),t.unbind(window,"mouseup",l)}this.__truncationSuspended=!1,e.superclass.call(this,r,i,o);var u,c=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",a),t.bind(this.__input,"blur",function(){a(),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}),t.bind(this.__input,"mousedown",function(e){t.bind(window,"mousemove",s),t.bind(window,"mouseup",l),u=e.clientY}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(c.__truncationSuspended=!0,this.blur(),c.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,n.extend(r.prototype,e.prototype,{updateDisplay:function(){var e,t=this.__input;if(this.__truncationSuspended)e=this.getValue();else{e=this.getValue();var n=Math.pow(10,this.__precision);e=Math.round(e*n)/n}return t.value=e,r.superclass.prototype.updateDisplay.call(this)}}),r}(d.controllers.NumberController,d.dom.dom,d.utils.common),d.controllers.NumberControllerSlider=function(e,t,n,r,i){var o=function e(n,r,i,o,a){function s(e){e.preventDefault();var n=t.getOffset(u.__background),r=t.getWidth(u.__background);return u.setValue(u.__min+(u.__max-u.__min)*((e.clientX-n.left)/(n.left+r-n.left))),!1}function l(){t.unbind(window,"mousemove",s),t.unbind(window,"mouseup",l),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}e.superclass.call(this,n,r,{min:i,max:o,step:a});var u=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",function(e){t.bind(window,"mousemove",s),t.bind(window,"mouseup",l),s(e)}),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return o.superclass=e,o.useDefaultStyles=function(){n.inject(i)},r.extend(o.prototype,e.prototype,{updateDisplay:function(){return this.__foreground.style.width=(this.getValue()-this.__min)/(this.__max-this.__min)*100+"%",o.superclass.prototype.updateDisplay.call(this)}}),o}(d.controllers.NumberController,d.dom.dom,d.utils.css,d.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),d.controllers.FunctionController=function(e,t,n){var r=function e(n,r,i){e.superclass.call(this,n,r);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===i?"Fire":i,t.bind(this.__button,"click",function(e){return e.preventDefault(),o.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=e,n.extend(r.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(d.controllers.Controller,d.dom.dom,d.utils.common),d.controllers.BooleanController=function(e,t,n){var r=function e(n,r){e.superclass.call(this,n,r);var i=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){return e=r.superclass.prototype.setValue.call(this,e),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(d.controllers.Controller,d.dom.dom,d.utils.common),d.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(t=t.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(d.utils.common),d.color.interpret=function(e,t){var n,r,i=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){return e=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i),null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){return e=e.match(/^#([A-F0-9]{6})$/i),null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:e},CSS_RGB:{read:function(e){return e=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/),null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:e},CSS_RGBA:{read:function(e){return e=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/),null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return function(){r=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(i,function(i){if(i.litmus(e))return t.each(i.conversions,function(i,o){if(n=i.read(e),r===!1&&n!==!1)return r=n,n.conversionName=o,n.conversion=i,t.BREAK}),t.BREAK}),r}}(d.color.toString,d.utils.common),d.GUI=d.gui.GUI=function(e,t,n,r,i,o,a,l,c,d,p,f,m,v,g){function E(e,t,n,o){if(void 0===t[n])throw Error("Object "+t+' has no property "'+n+'"');o.color?t=new p(t,n):(t=[t,n].concat(o.factoryArgs),t=r.apply(e,t)),o.before instanceof i&&(o.before=o.before.__li),T(e,t),v.addClass(t.domElement,"c"),n=document.createElement("span"),v.addClass(n,"property-name"),n.innerHTML=t.property;var a=document.createElement("div");return a.appendChild(n),a.appendChild(t.domElement),o=y(e,a,o.before),v.addClass(o,O.CLASS_CONTROLLER_ROW),v.addClass(o,(0,h.default)(t.getValue())),x(e,o,t),e.__controllers.push(t),t}function y(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,params.before):e.__ul.appendChild(r),e.onResize(),r}function x(e,t,n){if(n.__li=t,n.__gui=e,g.extend(n,{options:function(t){return arguments.length>1?(n.remove(),E(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[g.toArray(arguments)]})):g.isArray(t)||g.isObject(t)?(n.remove(),E(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof c){var r=new l(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});g.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(n,e),i.apply(r,e)}}),v.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof l){var i=function(t){return g.isNumber(n.__min)&&g.isNumber(n.__max)?(n.remove(),E(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=g.compose(i,n.min),n.max=g.compose(i,n.max)}else n instanceof o?(v.bind(t,"click",function(){v.fakeEvent(n.__checkbox,"click")}),v.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof a?(v.bind(t,"click",function(){v.fakeEvent(n.__button,"click")}),v.bind(t,"mouseover",function(){v.addClass(n.__button,"hover")}),v.bind(t,"mouseout",function(){v.removeClass(n.__button,"hover")})):n instanceof p&&(v.addClass(t,"color"),n.updateDisplay=g.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=g.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&M(e.getRoot(),!0),t},n.setValue)}function T(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(r!=-1){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){if(n=n.load.remembered,n[e.preset])n=n[e.preset];else{if(!n[A])return;n=n[A]}n[r]&&void 0!==n[r][t.property]&&(r=n[r][t.property],t.initialValue=r,t.setValue(r))}}}function b(e){var t=e.__save_row=document.createElement("li");v.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),v.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",v.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",v.addClass(r,"button"),v.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",v.addClass(i,"button"),v.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",v.addClass(o,"button"),v.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?g.each(e.load.remembered,function(t,n){S(e,n,n==e.preset)}):S(e,A,!1),v.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(o),H){var t=document.getElementById("dg-save-locally"),s=document.getElementById("dg-local-explain");t.style.display="block",t=document.getElementById("dg-local-storage"),"true"===localStorage.getItem(document.location.href+".isLocal")&&t.setAttribute("checked","checked");var l=function(){s.style.display=e.useLocalStorage?"block":"none"};l(),v.bind(t,"change",function(){e.useLocalStorage=!e.useLocalStorage,l()})}var c=document.getElementById("dg-new-constructor");v.bind(c,"keydown",function(e){e.metaKey&&(67===e.which||67==e.keyCode)&&P.hide()}),v.bind(n,"click",function(){c.innerHTML=(0,u.default)(e.getSaveObject(),void 0,2),P.show(),c.focus(),c.select()}),v.bind(r,"click",function(){e.save()}),v.bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),v.bind(o,"click",function(){e.revert()})}function w(e){function t(t){return t.preventDefault(),i=t.clientX,v.addClass(e.__closeButton,O.CLASS_DRAG),v.bind(window,"mousemove",n),v.bind(window,"mouseup",r),!1}function n(t){return t.preventDefault(),e.width+=i-t.clientX,e.onResize(),i=t.clientX,!1}function r(){v.removeClass(e.__closeButton,O.CLASS_DRAG),v.unbind(window,"mousemove",n),v.unbind(window,"mouseup",r)}e.__resize_handle=document.createElement("div"),g.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var i;v.bind(e.__resize_handle,"mousedown",t),v.bind(e.__closeButton,"mousedown",t),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function _(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function R(e,t){var n={};return g.each(e.__rememberedObjects,function(r,i){var o={};g.each(e.__rememberedObjectIndecesToControllers[i],function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[i]=o}),n}function S(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function M(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function C(e){0!=e.length&&f(function(){C(e)}),g.each(e,function(e){e.updateDisplay()})}e.inject(n);var H,A="Default";try{H="localStorage"in window&&null!==window.localStorage}catch(e){H=!1}var P,L,k=!0,D=!1,F=[],O=function e(t){function n(){localStorage.setItem(document.location.href+".gui",(0,u.default)(i.getSaveObject()))}function r(){var e=i.getRoot();e.width+=1,g.defer(function(){e.width-=1})}var i=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),v.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=g.defaults(t,{autoPlace:!0,width:e.DEFAULT_WIDTH}),t=g.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),g.isUndefined(t.load)?t.load={preset:A}:t.preset&&(t.load.preset=t.preset),g.isUndefined(t.parent)&&t.hideable&&F.push(this),t.resizable=g.isUndefined(t.parent)&&t.resizable,t.autoPlace&&g.isUndefined(t.scrollable)&&(t.scrollable=!0);var o=H&&"true"===localStorage.getItem(document.location.href+".isLocal");if((0,s.default)(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return i.parent?i.getRoot().preset:t.load.preset},set:function(e){for(i.parent?i.getRoot().preset=e:t.load.preset=e,e=0;e<this.__preset_select.length;e++)this.__preset_select[e].value==this.preset&&(this.__preset_select.selectedIndex=e);i.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,_(i,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,l&&(l.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(n){t.closed=n,t.closed?v.addClass(i.__ul,e.CLASS_CLOSED):v.removeClass(i.__ul,e.CLASS_CLOSED),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=n?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return o},set:function(e){H&&((o=e)?v.bind(window,"unload",n):v.unbind(window,"unload",n),localStorage.setItem(document.location.href+".isLocal",e))}}}),g.isUndefined(t.parent)){if(t.closed=!1,v.addClass(this.domElement,e.CLASS_MAIN),v.makeSelectable(this.domElement,!1),H&&o){i.useLocalStorage=!0;var a=localStorage.getItem(document.location.href+".gui");a&&(t.load=JSON.parse(a))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,v.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),v.bind(this.__closeButton,"click",function(){i.closed=!i.closed})}else{void 0===t.closed&&(t.closed=!0);var l=document.createTextNode(t.name);v.addClass(l,"controller-name"),a=y(i,l),v.addClass(this.__ul,e.CLASS_CLOSED),v.addClass(a,"title"),v.bind(a,"click",function(e){return e.preventDefault(),i.closed=!i.closed,!1}),t.closed||(this.closed=!1)}t.autoPlace&&(g.isUndefined(t.parent)&&(k&&(L=document.createElement("div"),v.addClass(L,"dg"),v.addClass(L,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(L),k=!1),L.appendChild(this.domElement),v.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||_(i,t.width)),v.bind(window,"resize",function(){i.onResize()}),v.bind(this.__ul,"webkitTransitionEnd",function(){i.onResize()}),v.bind(this.__ul,"transitionend",function(){i.onResize()}),v.bind(this.__ul,"oTransitionEnd",function(){i.onResize()}),this.onResize(),t.resizable&&w(this),i.getRoot(),t.parent||r()};return O.toggleHide=function(){D=!D,g.each(F,function(e){e.domElement.style.zIndex=D?-999:999,e.domElement.style.opacity=D?0:1})},O.CLASS_AUTO_PLACE="a",O.CLASS_AUTO_PLACE_CONTAINER="ac",O.CLASS_MAIN="main",O.CLASS_CONTROLLER_ROW="cr",O.CLASS_TOO_TALL="taller-than-window",O.CLASS_CLOSED="closed",O.CLASS_CLOSE_BUTTON="close-button",O.CLASS_DRAG="drag",O.DEFAULT_WIDTH=245,O.TEXT_CLOSED="Close Controls",O.TEXT_OPEN="Open Controls",v.bind(window,"keydown",function(e){"text"!==document.activeElement.type&&(72===e.which||72==e.keyCode)&&O.toggleHide()},!1),g.extend(O.prototype,{add:function(e,t){return E(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return E(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;g.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&L.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};return t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]),t=new O(t),this.__folders[e]=t,e=y(this,t.domElement),v.addClass(e,"folder"),t},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=v.getOffset(e.__ul).top,n=0;g.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=v.getHeight(t))}),window.innerHeight-t-20<n?(v.addClass(e.domElement,O.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(v.removeClass(e.domElement,O.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&g.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(g.isUndefined(P)&&(P=new m,P.domElement.innerHTML=t),this.parent)throw Error("You can only call remember on a top level GUI.");var e=this;g.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&b(e),e.__rememberedObjects.indexOf(t)==-1&&e.__rememberedObjects.push(t)}),this.autoPlace&&_(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=R(this)),e.folders={},g.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=R(this),M(this,!1)},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[A]=R(this,!0)),this.load.remembered[e]=R(this),this.preset=e,S(this,e,!0)},revert:function(e){g.each(this.__controllers,function(t){this.getRoot().load.remembered?T(e||this.getRoot(),t):t.setValue(t.initialValue)},this),g.each(this.__folders,function(e){e.revert(e)}),e||M(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&C(this.__listening)}}),O}(d.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",d.controllers.factory=function(e,t,n,r,i,o,a){return function(s,l,u,c){var h=s[l];return a.isArray(u)||a.isObject(u)?new e(s,l,u):a.isNumber(h)?a.isNumber(u)&&a.isNumber(c)?new n(s,l,u,c):new t(s,l,{min:u,max:c}):a.isString(h)?new r(s,l):a.isFunction(h)?new i(s,l,""):a.isBoolean(h)?new o(s,l):void 0}}(d.controllers.OptionController,d.controllers.NumberControllerBox,d.controllers.NumberControllerSlider,d.controllers.StringController=function(e,t,n){var r=function e(n,r){function i(){o.setValue(o.__input.value)}e.superclass.call(this,n,r);var o=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",i),t.bind(this.__input,"change",i),t.bind(this.__input,"blur",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,n.extend(r.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(d.controllers.Controller,d.dom.dom,d.utils.common),d.controllers.FunctionController,d.controllers.BooleanController,d.utils.common),d.controllers.Controller,d.controllers.BooleanController,d.controllers.FunctionController,d.controllers.NumberControllerBox,d.controllers.NumberControllerSlider,d.controllers.OptionController,d.controllers.ColorController=function(e,t,n,r,i){function o(e,t,n,r){e.style.background="",i.each(l,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "})}function a(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var s=function e(s,l){function u(e){p(e),t.bind(window,"mousemove",p),t.bind(window,"mouseup",c)}function c(){t.unbind(window,"mousemove",p),t.unbind(window,"mouseup",c)}function h(){var e=r(this.value);e!==!1?(m.__color.__state=e,m.setValue(m.__color.toOriginal())):this.value=m.__color.toString()}function d(){t.unbind(window,"mousemove",f),t.unbind(window,"mouseup",d)}function p(e){e.preventDefault();var n=t.getWidth(m.__saturation_field),r=t.getOffset(m.__saturation_field),i=(e.clientX-r.left+document.body.scrollLeft)/n,e=1-(e.clientY-r.top+document.body.scrollTop)/n;return e>1?e=1:e<0&&(e=0),i>1?i=1:i<0&&(i=0),m.__color.v=e,m.__color.s=i,m.setValue(m.__color.toOriginal()),!1}function f(e){e.preventDefault();var n=t.getHeight(m.__hue_field),r=t.getOffset(m.__hue_field),e=1-(e.clientY-r.top+document.body.scrollTop)/n;return e>1?e=1:e<0&&(e=0),m.__color.h=360*e,m.setValue(m.__color.toOriginal()),!1}e.superclass.call(this,s,l),this.__color=new n(this.getValue()),this.__temp=new n(0);var m=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(e){13===e.keyCode&&h.call(this)}),t.bind(this.__input,"blur",h),t.bind(this.__selector,"mousedown",function(){t.addClass(this,"drag").bind(window,"mouseup",function(){t.removeClass(m.__selector,"drag")})});var v=document.createElement("div");i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),i.extend(v.style,{width:"100%",height:"100%",background:"none"}),o(v,"top","rgba(0,0,0,0)","#000"),i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),a(this.__hue_field),i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",u),t.bind(this.__field_knob,"mousedown",u),t.bind(this.__hue_field,"mousedown",function(e){f(e),t.bind(window,"mousemove",f),t.bind(window,"mouseup",d)}),this.__saturation_field.appendChild(v),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};s.superclass=e,i.extend(s.prototype,e.prototype,{updateDisplay:function(){var e=r(this.getValue());
if(e!==!1){var t=!1;i.each(n.COMPONENTS,function(n){if(!i.isUndefined(e[n])&&!i.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&i.extend(this.__color.__state,e)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,s=255-a;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toString()),i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+s+","+s+","+s+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];return s}(d.controllers.Controller,d.dom.dom,d.color.Color=function(e,t,n,r){function i(e,t,n){(0,o.default)(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(s(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(s(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function a(e,t){(0,o.default)(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(l(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(l(this),this.__state.space="HSV"),this.__state[t]=e}})}function s(e,n,i){if("HEX"===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,i);else{if("HSV"!==e.__state.space)throw"Corrupted color state";r.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function l(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);r.extend(e.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}var u=function(){if(this.__state=e.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS="r,g,b,h,s,v,hex,a".split(","),r.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),i(u.prototype,"r",2),i(u.prototype,"g",1),i(u.prototype,"b",0),a(u.prototype,"h"),a(u.prototype,"s"),a(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),u}(d.color.interpret,d.color.math=function(){var e;return{hsv_to_rgb:function(e,t,n){var r=e/60-Math.floor(e/60),i=n*(1-t),o=n*(1-r*t),t=n*(1-(1-r)*t),e=[[n,t,i],[o,n,i],[i,n,t],[i,o,n],[t,i,n],[n,i,o]][Math.floor(e/60)%6];return{r:255*e[0],g:255*e[1],b:255*e[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),r=i-r;return 0==i?{h:NaN,s:0,v:0}:(e=e==i?(t-n)/r:t==i?2+(n-e)/r:4+(e-t)/r,e/=6,e<0&&(e+=1),{h:360*e,s:r/i,v:i/255})},rgb_to_hex:function(e,t,n){return e=this.hex_with_component(0,2,e),e=this.hex_with_component(e,1,t),e=this.hex_with_component(e,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(t,n,r){return r<<(e=8*n)|t&~(255<<e)}}}(),d.color.toString,d.utils.common),d.color.interpret,d.utils.common),d.utils.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),d.dom.CenteredDiv=function(e,t){var n=function n(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;e.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var t=this,n=function n(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",n),e.unbind(t.domElement,"transitionend",n),e.unbind(t.domElement,"oTransitionEnd",n)};e.bind(this.domElement,"webkitTransitionEnd",n),e.bind(this.domElement,"transitionend",n),e.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},n}(d.dom.dom,d.utils.common),d.dom.dom,d.utils.common),t.default=d},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=n(109),l=i(s),u=n(112),c=i(u),h=n(113),d=i(h),p=n(117),f=i(p),m=n(118),v=i(m),g=n(2),E=i(g),y=n(126),x=r(y),T=n(634),b=i(T),w=n(635),_=i(w),R=(a=o=function(e){function t(e,n){(0,c.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return r.componentDidMount=function(){},console.log(b.default),r.cameraPosition=new x.Vector3(0,0,5),r.state={cubeRotation:new x.Euler},r._onAnimate=function(){r.setState({cubeRotation:new x.Euler(r.state.cubeRotation.x+.1,r.state.cubeRotation.y+.1,0)})},r.playShaderAnimation(),r}return(0,v.default)(t,e),(0,d.default)(t,[{key:"playShaderAnimation",value:function(){function e(){U+=.1;for(var r=(Math.cos(U),Math.sin(.8*U),[]),i=0;i<H.length;i++)n[i]&&r.push(H[i]);P.filters=r.length>0?r:null;for(var i=0;i<F.length;i++){var a=F[i];a.direction+=.01*a.turnSpeed,a.position.x+=Math.sin(a.direction)*a.speed,a.position.y+=Math.cos(a.direction)*a.speed,a.rotation=-a.direction-Math.PI/2,a.position.x<D.x&&(a.position.x+=D.width),a.position.x>D.x+D.width&&(a.position.x-=D.width),a.position.y<D.y&&(a.position.y+=D.height),a.position.y>D.y+D.height&&(a.position.y-=D.height)}o.offset.x=10*U,o.offset.y=10*U,I.tilePosition.x=U*-10,I.tilePosition.y=U*-10,t.render(A),requestAnimFrame(e)}var t=b.default.autoDetectRenderer(630,410);t.view.style.position="absolute",t.view.style.width=window.innerWidth+"px",t.view.style.height=window.innerHeight+"px",t.view.style.display="block";var n=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];setTimeout(function(){document.getElementById("biomes").appendChild(t.view)},300),$(".dg").length&&$(".dg").remove();var r=new _.default.GUI({}),i=b.default.Texture.fromImage("data/t4_biomes_map.jpg"),o=new b.default.DisplacementFilter(i),a=r.addFolder("Displacement");a.add(n,"0").name("apply"),a.add(o.scale,"x",200,200).name("scaleX"),a.add(o.scale,"y",200,200).name("scaleY");var s=new b.default.BlurFilter,l=r.addFolder("Blur");l.add(n,"1").name("apply"),l.add(s,"blurX",0,32).name("blurX"),l.add(s,"blurY",0,32).name("blurY");var u=new b.default.PixelateFilter,c=r.addFolder("Pixelate");c.add(n,"2").name("apply"),c.add(u.size,"x",1,32).name("PixelSizeX"),c.add(u.size,"y",1,32).name("PixelSizeY");var h=new b.default.InvertFilter,d=r.addFolder("Invert");d.add(n,"3").name("apply"),d.add(h,"invert",0,1).name("Invert");var p=new b.default.GrayFilter,f=r.addFolder("Gray");f.add(n,"4").name("apply"),f.add(p,"gray",0,1).name("Gray");var m=new b.default.SepiaFilter,v=r.addFolder("Sepia");v.add(n,"5").name("apply"),v.add(m,"sepia",0,1).name("Sepia");var g=new b.default.TwistFilter,E=r.addFolder("Twist");E.add(n,"6").name("apply"),E.add(g,"angle",0,10).name("Angle"),E.add(g,"radius",0,1).name("Radius"),E.add(g.offset,"x",0,1).name("offset.x"),E.add(g.offset,"y",0,1).name("offset.y");var y=new b.default.DotScreenFilter,x=r.addFolder("DotScreen");x.add(n,"7").name("apply"),x.add(y,"angle",0,10),x.add(y,"scale",0,1);var T=new b.default.ColorStepFilter,w=r.addFolder("ColorStep");w.add(n,"8").name("apply"),w.add(T,"step",1,100),w.add(T,"step",1,100);var R=new b.default.CrossHatchFilter,S=r.addFolder("CrossHatch");S.add(n,"9").name("apply");var M=new b.default.RGBSplitFilter,C=r.addFolder("RGB Splitter");C.add(n,"10").name("apply");var H=[o,s,u,h,p,m,g,y,T,R,M],A=new b.default.Stage(16711680,!0),P=new b.default.DisplayObjectContainer;A.addChild(P),A.interactive=!0;var L=b.default.Sprite.fromImage("data/displacement_BG.jpg");P.addChild(L);for(var k=100,D=new b.default.Rectangle(-k,-k,630+2*k,410+2*k),F=[],O=0;O<20;O++){var B=O%4;B+=1;var N=b.default.Sprite.fromImage("data/displacement_fish"+B+".png");N.anchor.x=N.anchor.y=.5,P.addChild(N),N.direction=Math.random()*Math.PI*2,N.speed=2+2*Math.random(),N.turnSpeed=Math.random()-.8,N.position.x=Math.random()*D.width,N.position.y=Math.random()*D.height,N.scale.x=N.scale.y=.8+.3*Math.random(),F.push(N)}var I=new b.default.TilingSprite(b.default.Texture.fromImage("data/zeldaWaves.png"),630,410);I.alpha=.1,P.addChild(I),o.scale.x=178,o.scale.y=200,y.scale=0;var U=0;requestAnimFrame(e)}},{key:"render",value:function(){var e=this.props;e.width,e.height,e.audioData;return console.log("motan"),E.default.createElement(AnimationFilter,null)}}]),t}(E.default.Component),o.propTypes={width:E.default.PropTypes.number.isRequired,height:E.default.PropTypes.number.isRequired},a);t.default=R},function(e,t,n){e.exports=n(638)},function(e,t,n){"use strict";function r(){E||(E=!0,"undefined"!=typeof console&&console.error("ReactPerf is not supported in the production builds of React. To collect measurements, please use the development build of React instead."))}function i(){return r(),[]}function o(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();return r(),[]}function a(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();return r(),[]}function s(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();return r(),[]}function l(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();return r(),[]}function u(e){return void r()}function c(e){return void r()}function h(e){return void r()}function d(e){return void r()}function p(e){return y=!0,d(e)}function f(e){return x=!0,s(e)}function m(){return void r()}function v(){return void r()}function g(){return r(),!1}var E=(n(4),n(639),n(11),!1),y=!1,x=!1,T={getLastMeasurements:i,getExclusive:o,getInclusive:a,getWasted:s,getOperations:l,printExclusive:u,printInclusive:c,printWasted:h,printOperations:d,start:m,stop:v,isRunning:g,printDOM:p,getMeasurementsSummaryMap:f};e.exports=T},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){try{t.call(n,r,i,o,a,s)}catch(t){b[e]=!0}}function i(e,t,n,i,o,a){for(var s=0;s<T.length;s++){var l=T[s],u=l[e];u&&r(e,u,l,t,n,i,o,a)}}function o(){E.purgeUnmountedComponents(),g.clearHistory()}function a(e){return e.reduce(function(e,t){var n=E.getOwnerID(t),r=E.getParentID(t);return e[t]={displayName:E.getDisplayName(t),text:E.getText(t),updateCount:E.getUpdateCount(t),childIDs:E.getChildIDs(t),ownerID:n||r&&E.getOwnerID(r)||0,parentID:r},e},{})}function s(){var e=C,t=M,n=g.getHistory();if(0===S)return C=0,M=[],void o();if(t.length||n.length){var r=E.getRegisteredIDs();_.push({duration:x()-e,measurements:t||[],operations:n||[],treeSnapshot:a(r)})}o(),C=x(),M=[]}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]}function u(e,t){0!==S&&(L&&!k&&(k=!0),A=x(),P=0,H=e,L=t)}function c(e,t){0!==S&&(L===t||k||(k=!0),w&&M.push({timerType:t,instanceID:e,duration:x()-A-P}),A=0,P=0,H=null,L=null)}function h(){var e={startTime:A,nestedFlushStartTime:x(),debugID:H,timerType:L};R.push(e),A=0,P=0,H=null,L=null}function d(){var e=R.pop(),t=e.startTime,n=e.nestedFlushStartTime,r=e.debugID,i=e.timerType,o=x()-n;A=t,P+=o,H=r,L=i}function p(e){if(!w||!F)return!1;var t=E.getElement(e);if(null==t||"object"!=typeof t)return!1;var n="string"==typeof t.type;return!n}function f(e,t){if(p(e)){var n=e+"::"+t;D=x(),performance.mark(n)}}function m(e,t){if(p(e)){var n=e+"::"+t,r=E.getDisplayName(e)||"Unknown",i=x();if(i-D>.1){var o=r+" ["+t+"]";performance.measure(o,n)}performance.clearMarks(n),performance.clearMeasures(o)}}var v=n(640),g=n(641),E=n(184),y=n(157),x=n(642),T=(n(11),[]),b={},w=!1,_=[],R=[],S=0,M=[],C=0,H=null,A=0,P=0,L=null,k=!1,D=0,F="undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.clearMarks&&"function"==typeof performance.measure&&"function"==typeof performance.clearMeasures,O={addHook:function(e){T.push(e)},removeHook:function(e){for(var t=0;t<T.length;t++)T[t]===e&&(T.splice(t,1),t--)},isProfiling:function(){return w},beginProfiling:function(){w||(w=!0,_.length=0,s(),O.addHook(g))},endProfiling:function(){w&&(w=!1,s(),O.removeHook(g))},getFlushHistory:function(){return _},onBeginFlush:function(){S++,s(),h(),i("onBeginFlush")},onEndFlush:function(){s(),S--,d(),i("onEndFlush")},onBeginLifeCycleTimer:function(e,t){l(e),i("onBeginLifeCycleTimer",e,t),f(e,t),u(e,t)},onEndLifeCycleTimer:function(e,t){l(e),c(e,t),m(e,t),i("onEndLifeCycleTimer",e,t)},onBeginProcessingChildContext:function(){i("onBeginProcessingChildContext")},onEndProcessingChildContext:function(){i("onEndProcessingChildContext")},onHostOperation:function(e){l(e.instanceID),i("onHostOperation",e)},onSetState:function(){i("onSetState")},onSetChildren:function(e,t){l(e),t.forEach(l),i("onSetChildren",e,t)},onBeforeMountComponent:function(e,t,n){l(e),l(n,!0),i("onBeforeMountComponent",e,t,n),f(e,"mount")},onMountComponent:function(e){l(e),m(e,"mount"),i("onMountComponent",e)},onBeforeUpdateComponent:function(e,t){l(e),i("onBeforeUpdateComponent",e,t),f(e,"update")},onUpdateComponent:function(e){l(e),m(e,"update"),i("onUpdateComponent",e)},onBeforeUnmountComponent:function(e){l(e),i("onBeforeUnmountComponent",e),f(e,"unmount")},onUnmountComponent:function(e){l(e),m(e,"unmount"),i("onUnmountComponent",e)},onTestEvent:function(){i("onTestEvent")}};O.addDevtool=O.addHook,O.removeDevtool=O.removeHook,O.addHook(v),O.addHook(E);var B=y.canUseDOM&&window.location.href||"";/[?&]react_perf\b/.test(B)&&O.beginProfiling(),e.exports=O},function(e,t,n){"use strict";var r,i,o=(n(11),{onBeginProcessingChildContext:function(){r=!0},onEndProcessingChildContext:function(){r=!1},onSetState:function(){i()}});e.exports=o},function(e,t){"use strict";var n=[],r={onHostOperation:function(e){n.push(e)},clearHistory:function(){r._preventClearing||(n=[])},getHistory:function(){return n}};e.exports=r},function(e,t,n){"use strict";var r,i=n(643);r=i.now?function(){return i.now()}:function(){return Date.now()},e.exports=r},function(e,t,n){"use strict";var r,i=n(157);i.canUseDOM&&(r=window.performance||window.msPerformance||window.webkitPerformance),e.exports=r||{}}])});